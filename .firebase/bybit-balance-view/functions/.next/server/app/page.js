(()=>{var exports={};exports.id=974,exports.ids=[974],exports.modules={22:(e,t,r)=>{var n=r(75254),i=r(20623),s=r(48169),a=r(40542),o=r(45058);e.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?i(e[0],e[1]):n(e):o(e)}},90:e=>{var t=1/0,r="[object Symbol]",n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\ud800-\udfff",a="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",h="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['’]",p="["+s+"]",g="["+h+"]",m="["+a+o+"]",y="\\d+",v="["+l+"]",b="["+u+"]",S="[^"+s+h+y+l+u+c+"]",w="\ud83c[\udffb-\udfff]",T="[^"+s+"]",E="(?:\ud83c[\udde6-\uddff]){2}",C="[\ud800-\udbff][\udc00-\udfff]",x="["+c+"]",_="\\u200d",O="(?:"+b+"|"+S+")",I="(?:"+x+"|"+S+")",A="(?:"+f+"(?:d|ll|m|re|s|t|ve))?",k="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?",R="(?:"+m+"|"+w+")?",D="["+d+"]?",N="(?:"+_+"(?:"+[T,E,C].join("|")+")"+D+R+")*",P=D+R+N,M="(?:"+[v,E,C].join("|")+")"+P,j="(?:"+[T+m+"?",m,E,C,p].join("|")+")",L=RegExp(f,"g"),B=RegExp(m,"g"),F=RegExp(w+"(?="+w+")|"+j+P,"g"),U=RegExp([x+"?"+b+"+"+A+"(?="+[g,x,"$"].join("|")+")",I+"+"+k+"(?="+[g,x+O,"$"].join("|")+")",x+"?"+O+"+"+A,x+"+"+k,y,M].join("|"),"g"),V=RegExp("["+_+s+a+o+d+"]"),z=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,q={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},$="object"==typeof global&&global&&global.Object===Object&&global,G="object"==typeof self&&self&&self.Object===Object&&self,W=$||G||Function("return this")();function K(e,t,r,n){var i=-1,s=e?e.length:0;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function H(e){return e.split("")}function Q(e){return e.match(n)||[]}var Y=function(e){return function(t){return null==e?void 0:e[t]}}(q);function X(e){return V.test(e)}function J(e){return z.test(e)}function Z(e){return X(e)?ee(e):H(e)}function ee(e){return e.match(F)||[]}function et(e){return e.match(U)||[]}var er=Object.prototype.toString,en=W.Symbol,ei=en?en.prototype:void 0,es=ei?ei.toString:void 0;function ea(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}function eo(e){if("string"==typeof e)return e;if(ed(e))return es?es.call(e):"";var r=e+"";return"0"==r&&1/e==-t?"-0":r}function el(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ea(e,t,r)}function eu(e){return function(t){var r=X(t=eh(t))?Z(t):void 0,n=r?r[0]:t.charAt(0),i=r?el(r,1).join(""):t.slice(1);return n[e]()+i}}function ec(e){return!!e&&"object"==typeof e}function ed(e){return"symbol"==typeof e||ec(e)&&er.call(e)==r}function eh(e){return null==e?"":eo(e)}var ef=function(e){return function(t){return K(ey(eg(t).replace(L,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?ep(t):t)});function ep(e){return em(eh(e).toLowerCase())}function eg(e){return(e=eh(e))&&e.replace(i,Y).replace(B,"")}var em=eu("toUpperCase");function ey(e,t,r){return(e=eh(e),void 0===(t=r?void 0:t))?J(e)?et(e):Q(e):e.match(t)||[]}e.exports=ef},310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;let n=r(74017),i=r(50952),s=r(52955),a=r(17765),o=r(21858),l=r(79070),u=r(98506),c=r(40649),d=r(1014),h=r(69226),f=r(38717),p=r(21574),g=r(7162),m=r(85590),y=r(48327),v=r(81473),b=r(10079),S=r(11422),w=r(7538),T=r(85330),E=0x7fffffff,C=1e3,x=18e5,_=new Map,O=0x1000000,I=1048576;class A extends T.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,i)=>{t.throttleKeepalive(i)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class k{constructor(e,t,r){var m,y,v,b,T,k,R,D;if(this.credentials=t,this.options=r,this.connectivityState=p.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new g.ChannelzCallTracker,this.childrenTracker=new g.ChannelzChildrenTracker,"string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.originalTarget=e;let N=(0,f.parseUri)(e);if(null===N)throw Error(`Could not parse target name "${e}"`);let P=(0,c.mapUriDefaultScheme)(N);if(null===P)throw Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},E),null==(y=(m=this.callRefTimer).unref)||y.call(m),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new g.ChannelzTrace,this.channelzRef=(0,g.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,c.getDefaultAuthority)(P);let M=(0,h.mapProxyName)(P,r);this.target=M.target,this.options=Object.assign({},this.options,M.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)((null!=(v=r["grpc.use_local_subchannel_pool"])?v:0)===0),this.retryBufferTracker=new w.MessageBufferTracker(null!=(b=r["grpc.retry_buffer_size"])?b:O,null!=(T=r["grpc.per_rpc_retry_buffer_size"])?T:I),this.keepaliveTime=null!=(k=r["grpc.keepalive_time_ms"])?k:-1,this.idleTimeoutMs=Math.max(null!=(R=r["grpc.client_idle_timeout_ms"])?R:x,C);let j={createSubchannel:(e,t)=>{let r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());let n=new A(r,this);return this.wrappedSubchannels.add(n),n},updateState:(e,t)=>{this.currentPicker=t;let r=this.pickQueue.slice();for(let e of(this.pickQueue=[],r.length>0&&this.callRefTimerUnref(),r))e.doPick();this.updateState(e)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new i.ResolvingLoadBalancer(this.target,j,r,(e,t)=>{e.retryThrottling?_.set(this.getTarget(),new w.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,_.get(this.getTarget()))):_.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{let e=this.configSelectionQueue;for(let t of(this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref(),e))t.getConfig()})},e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,S.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));let t=this.configSelectionQueue;for(let r of(this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref(),t))r.reportResolverError(e)}),this.filterStackFactory=new l.FilterStackFactory([new u.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let L=Error();(0,d.trace)(o.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null==(D=L.stack)?void 0:D.substring(L.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,d.trace)(null!=t?t:o.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null==(t=(e=this.callRefTimer).hasRef)?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null==(n=(r=this.callRefTimer).ref)||n.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null==(t=(e=this.callRefTimer).unref)||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){for(let t of((0,d.trace)(o.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+p.ConnectivityState[this.connectivityState]+" -> "+p.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+p.ConnectivityState[e]),this.connectivityState=e,this.connectivityStateWatchers.slice()))e!==t.currentState&&(t.timer&&clearTimeout(t.timer),this.removeConnectivityStateWatcher(t),t.callback());e!==p.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime)for(let t of(this.keepaliveTime=e,this.wrappedSubchannels))t.throttleKeepalive(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return(this.resolvingLoadBalancer.exitIdle(),this.configSelector)?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(p.ConnectivityState.IDLE),this.currentPicker=new a.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0)return void this.startIdleTimeout(this.idleTimeoutMs);let e=new Date().valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null==(r=(t=this.idleTimer).unref)||r.call(t)}maybeStartIdleTimer(){this.connectivityState===p.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new m.LoadBalancingCall(this,e,t,r,n,i,s)}createRetryingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new w.RetryingCall(this,e,t,r,n,i,s,this.retryBufferTracker,_.get(this.getTarget()))}createInnerCall(e,t,r,n,i){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,n,i):this.createRetryingCall(e,t,r,n,i)}createResolvingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,y.deadlineToString)(t));let a={deadline:t,flags:null!=i?i:o.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},l=new v.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.onCallStart(),l.addStatusWatcher(e=>{this.onCallEnd(e)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(p.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,g.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===p.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let n=null;if(t!==1/0){let e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s)return void process.nextTick(r,Error("Deadline passed without connectivity state change"));n=setTimeout(()=>{this.removeConnectivityStateWatcher(i),r(Error("Deadline passed without connectivity state change"))},e.getTime()-s.getTime())}let i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===p.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,i)}}t.InternalChannel=k},658:(e,t,r)=>{e.exports=r(41547)(r(85718),"Map")},1014:(e,t,r)=>{"use strict";var n,i,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;let o=r(21858),l=r(19771),u=r(97697).rE,c={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},d=o.LogVerbosity.ERROR;switch((null!=(i=null!=(n=process.env.GRPC_NODE_VERBOSITY)?n:process.env.GRPC_VERBOSITY)?i:"").toUpperCase()){case"DEBUG":d=o.LogVerbosity.DEBUG;break;case"INFO":d=o.LogVerbosity.INFO;break;case"ERROR":d=o.LogVerbosity.ERROR;break;case"NONE":d=o.LogVerbosity.NONE}t.getLogger=()=>c,t.setLogger=e=>{c=e},t.setLoggerVerbosity=e=>{d=e},t.log=(e,...t)=>{let r;if(e>=d){switch(e){case o.LogVerbosity.DEBUG:r=c.debug;break;case o.LogVerbosity.INFO:r=c.info;break;case o.LogVerbosity.ERROR:r=c.error}r||(r=c.error),r&&r.bind(c)(...t)}};let h=null!=(a=null!=(s=process.env.GRPC_NODE_TRACE)?s:process.env.GRPC_TRACE)?a:"",f=new Set,p=new Set;for(let e of h.split(","))e.startsWith("-")?p.add(e.substring(1)):f.add(e);let g=f.has("all");function m(e,r,n){y(r)&&(0,t.log)(e,new Date().toISOString()+" | v"+u+" "+l.pid+" | "+r+" | "+n)}function y(e){return!p.has(e)&&(g||f.has(e))}t.trace=m,t.isTracerEnabled=y},1470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(91645),i=r(71271),s=r(86777),a=r(5674),o=r(26786),l=r(31359),u="ip_resolver";function c(e){l.trace(i.LogVerbosity.DEBUG,u,e)}let d="ipv4",h="ipv6",f=443;class p{constructor(e,t,r){var a;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,c("Resolver constructed for target "+(0,o.uriToString)(e));let l=[];if(e.scheme!==d&&e.scheme!==h){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}for(let t of e.path.split(",")){let r=(0,o.splitHostPort)(t);if(null===r||e.scheme===d&&!(0,n.isIPv4)(r.host)||e.scheme===h&&!(0,n.isIPv6)(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:null!=(a=r.port)?a:f})}this.addresses=l,c("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}t.setup=function(){(0,a.registerResolver)(d,p),(0,a.registerResolver)(h,p)}},1532:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;let i=r(18155),s=r(71271),a=r(80324),o=r(76250),l=r(86239),u=r(72309),c=r(72910),d=r(43356),h=r(4719),f=r(31359),p="outlier_detection";function g(e){f.trace(s.LogVerbosity.DEBUG,p,e)}let m="outlier_detection",y=(null!=(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)?n:"true")==="true",v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function S(e,t,r,n){if(t in e&&typeof e[t]!==r){let i=n?`${n}.${t}`:t;throw Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function w(e,t,r){let n=r?`${r}.${t}`:t;if(t in e){if(!(0,a.isDuration)(e[t]))throw Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=0x3b9ac9ff))throw Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function T(e,t,r){let n=r?`${r}.${t}`:t;if(S(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class E{constructor(e,t,r,n,i,s,a){if(this.childPolicy=a,a.length>0&&"pick_first"===a[0].getLoadBalancerName())throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=i?Object.assign(Object.assign({},v),i):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return m}toJsonObject(){return{interval:(0,a.msToDuration)(this.intervalMs),base_ejection_time:(0,a.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,a.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new E(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(w(e,"interval"),w(e,"base_ejection_time"),w(e,"max_ejection_time"),T(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");S(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),T(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),S(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),S(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");T(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),T(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),S(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),S(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new E(e.interval?(0,a.durationToMs)(e.interval):null,e.base_ejection_time?(0,a.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,a.durationToMs)(e.max_ejection_time):null,null!=(t=e.max_ejection_percent)?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(l.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=E;class C extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((e,t,r,n)=>{if(this.childSubchannelState=r,!this.ejected)for(let e of this.stateListeners)e(this,t,r,n)})}getConnectivityState(){return this.ejected?i.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){for(let e of(this.ejected=!0,this.stateListeners))e(this,this.childSubchannelState,i.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){for(let e of(this.ejected=!1,this.stateListeners))e(this,i.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function x(){return{success:0,failure:0}}class _{constructor(){this.activeBucket=x(),this.inactiveBucket=x()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=x()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class O{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType!==c.PickResultType.COMPLETE)return t;{let e=t.subchannel,r=e.getMapEntry();if(!r)return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()});{let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null==(n=t.onCallEnded)||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}}}}class I{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new u.ChildLoadBalancerHandler((0,o.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let n=e.createSubchannel(t,r),i=this.addressMap.get((0,d.subchannelAddressToString)(t)),s=new C(n,i);return(null==i?void 0:i.currentEjectionTimestamp)!==null&&s.eject(),null==i||i.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===i.ConnectivityState.READY?e.updateState(t,new O(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;g("Running success rate check");let r=t.request_volume,n=0,i=[];for(let[e,t]of this.addressMap){let s=t.counter.getLastSuccesses(),a=t.counter.getLastFailures();g("Stats for "+e+": successes="+s+" failures="+a+" targetRequestVolume="+r),s+a>=r&&(n+=1,i.push(s/(s+a)))}if(g("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]"),n<t.minimum_hosts)return;let s=i.reduce((e,t)=>e+t)/i.length,a=0;for(let e of i){let t=e-s;a+=t*t}let o=Math.sqrt(a/i.length),l=s-o*(t.stdev_factor/1e3);for(let[n,i]of(g("stdev="+o+" ejectionThreshold="+l),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let s=i.counter.getLastSuccesses(),a=i.counter.getLastFailures();if(s+a<r)continue;let o=s/(s+a);if(g("Checking candidate "+n+" successRate="+o),o<l){let r=100*Math.random();g("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(g("Ejecting candidate "+n),this.eject(i,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;g("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(let[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let i=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if((g("Candidate successes="+i+" failures="+s),!(i+s<t.request_volume))&&100*s/(s+i)>t.threshold){let i=100*Math.random();g("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage),i<t.enforcement_percentage&&(g("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){for(let t of(e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1,e.subchannelWrappers))t.eject()}uneject(e){for(let t of(e.currentEjectionTimestamp=null,e.subchannelWrappers))t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null==(r=(t=this.ejectionTimer).unref)||r.call(t)}runChecks(){let e=new Date;if(g("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[t,r]of(this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e),this.addressMap.entries()))if(null===r.currentEjectionTimestamp)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let e=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),i=new Date(r.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(e*r.ejectionTimeMultiplier,Math.max(e,n))),i<new Date&&(g("Unejecting "+t),this.uneject(r))}}updateAddressList(e,t,r){if(!(t instanceof E))return;let n=new Set;for(let t of e)n.add((0,d.subchannelAddressToString)(t));for(let e of n)this.addressMap.has(e)||(g("Adding map entry for "+e),this.addressMap.set(e,{counter:new _,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let e of this.addressMap.keys())n.has(e)||(g("Removing map entry for "+e),this.addressMap.delete(e));let i=(0,l.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,i,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){g("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let e=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(e)}else g("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else for(let e of(g("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(e),e.ejectionTimeMultiplier=0;this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return m}}t.OutlierDetectionLoadBalancer=I,t.setup=function(){y&&(0,o.registerLoadBalancerType)(m,I,E)}},1566:(e,t,r)=>{var n=r(89167),i=r(658),s=r(30401),a=r(34772),o=r(17830),l=r(29395),u=r(12290),c="[object Map]",d="[object Object]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",m=u(n),y=u(i),v=u(s),b=u(a),S=u(o),w=l;(n&&w(new n(new ArrayBuffer(1)))!=g||i&&w(new i)!=c||s&&w(s.resolve())!=h||a&&w(new a)!=f||o&&w(new o)!=p)&&(w=function(e){var t=l(e),r=t==d?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case m:return g;case y:return c;case v:return h;case b:return f;case S:return p}return t}),e.exports=w},1707:(e,t,r)=>{var n=r(35142),i=r(46436);e.exports=function(e,t){t=n(t,e);for(var r=0,s=t.length;null!=e&&r<s;)e=e[i(t[r++])];return r&&r==s?e:void 0}},1944:e=>{e.exports=function(){return!1}},2015:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getNamedMiddlewareRegex:function(){return m},getNamedRouteRegex:function(){return g},getRouteRegex:function(){return d},parseParameter:function(){return l}});let n=r(46143),i=r(71437),s=r(53293),a=r(72887),o=/^([^[]*)\[((?:\[[^\]]*\])|[^\]]+)\](.*)$/;function l(e){let t=e.match(o);return t?u(t[2]):u(e)}function u(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}function c(e,t,r){let n={},l=1,c=[];for(let d of(0,a.removeTrailingSlash)(e).slice(1).split("/")){let e=i.INTERCEPTION_ROUTE_MARKERS.find(e=>d.startsWith(e)),a=d.match(o);if(e&&a&&a[2]){let{key:t,optional:r,repeat:i}=u(a[2]);n[t]={pos:l++,repeat:i,optional:r},c.push("/"+(0,s.escapeStringRegexp)(e)+"([^/]+?)")}else if(a&&a[2]){let{key:e,repeat:t,optional:i}=u(a[2]);n[e]={pos:l++,repeat:t,optional:i},r&&a[1]&&c.push("/"+(0,s.escapeStringRegexp)(a[1]));let o=t?i?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)";r&&a[1]&&(o=o.substring(1)),c.push(o)}else c.push("/"+(0,s.escapeStringRegexp)(d));t&&a&&a[3]&&c.push((0,s.escapeStringRegexp)(a[3]))}return{parameterizedRoute:c.join(""),groups:n}}function d(e,t){let{includeSuffix:r=!1,includePrefix:n=!1,excludeOptionalTrailingSlash:i=!1}=void 0===t?{}:t,{parameterizedRoute:s,groups:a}=c(e,r,n),o=s;return i||(o+="(?:/)?"),{re:RegExp("^"+o+"$"),groups:a}}function h(){let e=0;return()=>{let t="",r=++e;for(;r>0;)t+=String.fromCharCode(97+(r-1)%26),r=Math.floor((r-1)/26);return t}}function f(e){let t,{interceptionMarker:r,getSafeRouteKey:n,segment:i,routeKeys:a,keyPrefix:o,backreferenceDuplicateKeys:l}=e,{key:c,optional:d,repeat:h}=u(i),f=c.replace(/\W/g,"");o&&(f=""+o+f);let p=!1;(0===f.length||f.length>30)&&(p=!0),isNaN(parseInt(f.slice(0,1)))||(p=!0),p&&(f=n());let g=f in a;o?a[f]=""+o+c:a[f]=c;let m=r?(0,s.escapeStringRegexp)(r):"";return t=g&&l?"\\k<"+f+">":h?"(?<"+f+">.+?)":"(?<"+f+">[^/]+?)",d?"(?:/"+m+t+")?":"/"+m+t}function p(e,t,r,l,u){let c=h(),d={},p=[];for(let h of(0,a.removeTrailingSlash)(e).slice(1).split("/")){let e=i.INTERCEPTION_ROUTE_MARKERS.some(e=>h.startsWith(e)),a=h.match(o);if(e&&a&&a[2])p.push(f({getSafeRouteKey:c,interceptionMarker:a[1],segment:a[2],routeKeys:d,keyPrefix:t?n.NEXT_INTERCEPTION_MARKER_PREFIX:void 0,backreferenceDuplicateKeys:u}));else if(a&&a[2]){l&&a[1]&&p.push("/"+(0,s.escapeStringRegexp)(a[1]));let e=f({getSafeRouteKey:c,segment:a[2],routeKeys:d,keyPrefix:t?n.NEXT_QUERY_PARAM_PREFIX:void 0,backreferenceDuplicateKeys:u});l&&a[1]&&(e=e.substring(1)),p.push(e)}else p.push("/"+(0,s.escapeStringRegexp)(h));r&&a&&a[3]&&p.push((0,s.escapeStringRegexp)(a[3]))}return{namedParameterizedRoute:p.join(""),routeKeys:d}}function g(e,t){var r,n,i;let s=p(e,t.prefixRouteKeys,null!=(r=t.includeSuffix)&&r,null!=(n=t.includePrefix)&&n,null!=(i=t.backreferenceDuplicateKeys)&&i),a=s.namedParameterizedRoute;return t.excludeOptionalTrailingSlash||(a+="(?:/)?"),{...d(e,t),namedRegex:"^"+a+"$",routeKeys:s.routeKeys}}function m(e,t){let{parameterizedRoute:r}=c(e,!1,!1),{catchAll:n=!0}=t;if("/"===r)return{namedRegex:"^/"+(n?".*":"")+"$"};let{namedParameterizedRoute:i}=p(e,!1,!1,!1,!1);return{namedRegex:"^"+i+(n?"(?:(/.*)?)":"")+"$"}}},2408:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},2720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{AppRenderSpan:function(){return l},AppRouteRouteHandlersSpan:function(){return d},BaseServerSpan:function(){return r},LoadComponentsSpan:function(){return n},LogSpanAllowList:function(){return g},MiddlewareSpan:function(){return f},NextNodeServerSpan:function(){return s},NextServerSpan:function(){return i},NextVanillaSpanAllowlist:function(){return p},NodeSpan:function(){return c},RenderSpan:function(){return o},ResolveMetadataSpan:function(){return h},RouterSpan:function(){return u},StartServerSpan:function(){return a}});var r=function(e){return e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404",e}(r||{}),n=function(e){return e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents",e}(n||{}),i=function(e){return e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer",e}(i||{}),s=function(e){return e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.createComponentTree="NextNodeServer.createComponentTree",e.clientComponentLoading="NextNodeServer.clientComponentLoading",e.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.startResponse="NextNodeServer.startResponse",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch",e}(s||{}),a=function(e){return e.startServer="startServer.startServer",e}(a||{}),o=function(e){return e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult",e}(o||{}),l=function(e){return e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch",e}(l||{}),u=function(e){return e.executeRoute="Router.executeRoute",e}(u||{}),c=function(e){return e.runHandler="Node.runHandler",e}(c||{}),d=function(e){return e.runHandler="AppRouteRouteHandlers.runHandler",e}(d||{}),h=function(e){return e.generateMetadata="ResolveMetadata.generateMetadata",e.generateViewport="ResolveMetadata.generateViewport",e}(h||{}),f=function(e){return e.execute="Middleware.execute",e}(f||{});let p=["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"],g=["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"]},2896:(e,t,r)=>{var n=r(81488),i=r(59467);e.exports=function(e,t){return null!=e&&i(e,t,n)}},2984:(e,t,r)=>{var n=r(49227);e.exports=function(e,t,r){for(var i=-1,s=e.length;++i<s;){var a=e[i],o=t(a);if(null!=o&&(void 0===l?o==o&&!n(o):r(o,l)))var l=o,u=a}return u}},3008:(e,t,r)=>{"use strict";let n,i;r.r(t),r.d(t,{"0082de5f59ecb8d9b4d31c7df31dae0e74950a5314":()=>yH,"4042c32fafe714b24fbd62a126e443cd8141fe27c1":()=>yQ});var s,a,o,l,u,c=r(91199);r(42087);let d={NODE_CLIENT:!1,SDK_VERSION:"${JSCORE_VERSION}"},h=function(e){return Error("Firebase Database ("+d.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},f=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},p=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[r++],a=((7&i)<<18|(63&s)<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{let s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,d=(15&a)<<2|l>>6,h=63&l;!o&&(h=64,s||(d=64)),n.push(r[u],r[c],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(f(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):p(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,o=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new m;let l=i<<2|s>>4;if(n.push(l),64!==a){let e=s<<4&240|a>>2;if(n.push(e),64!==o){let e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class m extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let y=function(e){let t=f(e);return g.encodeByteArray(t,!0)},v=function(e){return y(e).replace(/\./g,"")},b=function(e){try{return g.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S(e){return"__proto__"!==e}function w(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}let T=()=>w().__FIREBASE_DEFAULTS__,E=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},C=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&b(e[1]);return t&&JSON.parse(t)},x=()=>{try{return T()||E()||C()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},_=e=>{var t,r;return null==(r=null==(t=x())?void 0:t.emulatorHosts)?void 0:r[e]},O=e=>{let t=_(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},I=()=>{var e;return null==(e=x())?void 0:e.config};class A{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function k(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[v(JSON.stringify(r)),v(JSON.stringify(a)),o].join(".")}function R(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function D(){var e;let t=null==(e=x())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function N(){return!D()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P(){try{return"object"==typeof indexedDB}catch(e){return!1}}function M(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}})}let j="FirebaseError";class L extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=j,Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?F(i,r):"Error",a=`${this.serviceName}: ${s} (${n}).`;return new L(n,a,r)}}function F(e,t){return e.replace(U,(e,r)=>{let n=t[r];return null!=n?String(n):`<${r}?>`})}let U=/\{\$([^}]+)}/g;function V(e){return JSON.parse(e)}function z(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(q(r)&&q(s)){if(!z(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function q(e){return null!==e&&"object"==typeof e}function $(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}function G(){}function W(e){return e&&e._delegate?e._delegate:e}d.NODE_CLIENT=!0;class K{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let H="[DEFAULT]";class Q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new A;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(X(e))try{this.getOrInitializeService({instanceIdentifier:H})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=H){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=H){return this.instances.has(e)}getOptions(e=H){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!=(r=this.onInitCallbacks.get(n))?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=H){return this.component?this.component.multipleInstances?e:H:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Y(e){return e===H?void 0:e}function X(e){return"EAGER"===e.instantiationMode}class J{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let Z=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));let ee={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},et=s.INFO,er={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},en=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=er[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ei{constructor(e){this.name=e,this._logLevel=et,this._logHandler=en,this._userLogHandler=null,Z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...e),this._logHandler(this,s.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...e),this._logHandler(this,s.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,s.INFO,...e),this._logHandler(this,s.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,s.WARN,...e),this._logHandler(this,s.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...e),this._logHandler(this,s.ERROR,...e)}}let es=(e,t)=>t.some(t=>e instanceof t);function ea(){return n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eo(){return i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let el=new WeakMap,eu=new WeakMap,ec=new WeakMap,ed=new WeakMap,eh=new WeakMap;function ef(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(eb(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&el.set(t,e)}).catch(()=>{}),eh.set(t,e),t}function ep(e){if(eu.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});eu.set(e,t)}let eg={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return eu.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ec.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return eb(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function em(e){eg=e(eg)}function ey(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?eo().includes(e)?function(...t){return e.apply(eS(this),t),eb(el.get(this))}:function(...t){return eb(e.apply(eS(this),t))}:function(t,...r){let n=e.call(eS(this),t,...r);return ec.set(n,t.sort?t.sort():[t]),eb(n)}}function ev(e){return"function"==typeof e?ey(e):(e instanceof IDBTransaction&&ep(e),es(e,ea()))?new Proxy(e,eg):e}function eb(e){if(e instanceof IDBRequest)return ef(e);if(ed.has(e))return ed.get(e);let t=ev(e);return t!==e&&(ed.set(e,t),eh.set(t,e)),t}let eS=e=>eh.get(e);function ew(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),o=eb(a);return n&&a.addEventListener("upgradeneeded",e=>{n(eb(a.result),e.oldVersion,e.newVersion,eb(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}let eT=["get","getKey","getAll","getAllKeys","count"],eE=["put","add","delete","clear"],eC=new Map;function ex(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(eC.get(t))return eC.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=eE.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||eT.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return eC.set(t,s),s}em(e=>({...e,get:(t,r,n)=>ex(t,r)||e.get(t,r,n),has:(t,r)=>!!ex(t,r)||e.has(t,r)}));class e_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!eO(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}function eO(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}let eI="@firebase/app",eA="0.10.13",ek=new ei("@firebase/app"),eR="10.14.1",eD="[DEFAULT]",eN={[eI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eP=new Map,eM=new Map,ej=new Map;function eL(e,t){try{e.container.addComponent(t)}catch(r){ek.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function eB(e){let t=e.name;if(ej.has(t))return ek.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(ej.set(t,e),eP.values()))eL(r,e);for(let t of eM.values())eL(t,e);return!0}function eF(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}let eU=new B("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eV{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new K("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw eU.create("app-deleted",{appName:this._name})}}let ez=eR;function eq(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:eD,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw eU.create("bad-app-name",{appName:String(i)});if(r||(r=I()),!r)throw eU.create("no-options");let s=eP.get(i);if(s)if(z(r,s.options)&&z(n,s.config))return s;else throw eU.create("duplicate-app",{appName:i});let a=new J(i);for(let e of ej.values())a.addComponent(e);let o=new eV(r,n,a);return eP.set(i,o),o}function e$(e=eD){let t=eP.get(e);if(!t&&e===eD&&I())return eq();if(!t)throw eU.create("no-app",{appName:e});return t}function eG(){return Array.from(eP.values())}async function eW(e){let t=!1,r=e.name;eP.has(r)?(t=!0,eP.delete(r)):eM.has(r)&&0>=e.decRefCount()&&(eM.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function eK(e,t,r){var n;let i=null!=(n=eN[e])?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ek.warn(e.join(" "));return}eB(new K(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let eH="firebase-heartbeat-database",eQ=1,eY="firebase-heartbeat-store",eX=null;function eJ(){return eX||(eX=ew(eH,eQ,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(eY)}catch(e){console.warn(e)}}}).catch(e=>{throw eU.create("idb-open",{originalErrorMessage:e.message})})),eX}async function eZ(e){try{let t=(await eJ()).transaction(eY),r=await t.objectStore(eY).get(e1(e));return await t.done,r}catch(e){if(e instanceof L)ek.warn(e.message);else{let t=eU.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});ek.warn(t.message)}}}async function e0(e,t){try{let r=(await eJ()).transaction(eY,"readwrite"),n=r.objectStore(eY);await n.put(t,e1(e)),await r.done}catch(e){if(e instanceof L)ek.warn(e.message);else{let t=eU.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});ek.warn(t.message)}}}function e1(e){return`${e.name}!${e.options.appId}`}let e2=1024,e3=2592e6;class e6{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new e8(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=e4();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=e3}),this._storage.overwrite(this._heartbeatsCache)}catch(e){ek.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=e4(),{heartbeatsToSend:r,unsentEntries:n}=e5(this._heartbeatsCache.heartbeats),i=v(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ek.warn(e),""}}}function e4(){return new Date().toISOString().substring(0,10)}function e5(e,t=e2){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),e7(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),e7(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class e8{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!P()&&M().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await eZ(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return e0(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return e0(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function e7(e){return v(JSON.stringify({version:2,heartbeats:e})).length}(function(e){eB(new K("platform-logger",e=>new e_(e),"PRIVATE")),eB(new K("heartbeat",e=>new e6(e),"PRIVATE")),eK(eI,eA,""),eK(eI,eA,"esm2017"),eK("fire-js","")})(""),eK("firebase","10.14.1","app");var e9=r(28354),te=r(55511),tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},tr={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^r&(i^s))+n[0]+0xd76aa478|0;a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[1]+0xe8c7b756|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[2]+0x242070db|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[3]+0xc1bdceee|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[4]+0xf57c0faf|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[5]+0x4787c62a|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[6]+0xa8304613|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[7]+0xfd469501|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[8]+0x698098d8|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[9]+0x8b44f7af|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[10]+0xffff5bb1|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[11]+0x895cd7be|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[12]+0x6b901122|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[13]+0xfd987193|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[14]+0xa679438e|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[15]+0x49b40821|0,r=i+(a<<22|a>>>10),a=t+(i^s&(r^i))+n[1]+0xf61e2562|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[11]+0x265e5a51|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[0]+0xe9b6c7aa|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[5]+0xd62f105d|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[15]+0xd8a1e681|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[4]+0xe7d3fbc8|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[9]+0x21e1cde6|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[3]+0xf4d50d87|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[8]+0x455a14ed|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[13]+0xa9e3e905|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[7]+0x676f02d9|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[12]+0x8d2a4c8a|0,a=t+((r=i+(a<<20|a>>>12))^i^s)+n[5]+0xfffa3942|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[8]+0x8771f681|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[11]+0x6d9d6122|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[14]+0xfde5380c|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[1]+0xa4beea44|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[4]+0x4bdecfa9|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[7]+0xf6bb4b60|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[10]+0xbebfbc70|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[13]+0x289b7ec6|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[0]+0xeaa127fa|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[3]+0xd4ef3085|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[6]+0x4881d05|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[9]+0xd9d4d039|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[12]+0xe6db99e5|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[15]+0x1fa27cf8|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[2]+0xc4ac5665|0,r=i+(a<<23|a>>>9),a=t+(i^(r|~s))+n[0]+0xf4292244|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[14]+0xab9423a7|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[5]+0xfc93a039|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[12]+0x655b59c3|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[10]+0xffeff47d|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[1]+0x85845dd1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[8]+0x6fa87e4f|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[6]+0xa3014314|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[13]+0x4e0811a1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[4]+0xf7537e82|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[2]+0x2ad7d2bb|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+s|0}function r(e,t){var r=s;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}function n(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}})(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,r){void 0===r&&(r=e.length);for(var n=r-this.blockSize,i=this.B,s=this.h,a=0;a<r;){if(0==s)for(;a<=n;)t(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<r;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){t(this,i),s=0;break}}else for(;a<r;)if(i[s++]=e[a++],s==this.blockSize){t(this,i),s=0;break}}this.h=s,this.o+=r},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var i,s={};function l(e){return -128<=e&&128>e?r(e,function(e){return new n([0|e],0>e?-1:0)}):new n([0|e],0>e?-1:0)}function u(e){if(isNaN(e)||!isFinite(e))return d;if(0>e)return m(u(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=0x100000000;return new n(t,0)}function c(e,t){if(0==e.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return m(c(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=u(Math.pow(t,8)),n=d,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);8>s?(s=u(Math.pow(t,s)),n=n.j(s).add(u(a))):n=(n=n.j(r)).add(u(a))}return n}var d=l(0),h=l(1),f=l(0x1000000);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function g(e){return -1==e.h}function m(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(h)}function y(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function b(e,t){this.g=e,this.h=t}function S(e,t){if(p(t))throw Error("division by zero");if(p(e))return new b(d,d);if(g(e))return t=S(m(e),t),new b(m(t.g),m(t.h));if(g(t))return t=S(e,m(t)),new b(m(t.g),t.h);if(30<e.g.length){if(g(e)||g(t))throw Error("slowDivide_ only works with positive integers.");for(var r=h,n=t;0>=n.l(e);)r=w(r),n=w(n);var i=T(r,1),s=T(n,1);for(n=T(n,2),r=T(r,2);!p(n);){var a=s.add(n);0>=a.l(e)&&(i=i.add(r),s=a),n=T(n,1),r=T(r,1)}return t=y(e,i.j(t)),new b(i,t)}for(i=d;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),a=(s=u(r)).j(t);g(a)||0<a.l(e);)r-=n,a=(s=u(r)).j(t);p(s)&&(s=h),i=i.add(s),e=y(e,a)}return new b(i,e)}function w(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function T(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+r)>>>t|e.i(a+r+1)<<32-t:e.i(a+r);return new n(s,e.h)}(i=n.prototype).m=function(){if(g(this))return-m(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},i.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(g(this))return"-"+m(this).toString(e);for(var t=u(Math.pow(e,6)),r=this,n="";;){var i=S(r,t).g,s=((0<(r=y(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(p(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},i.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},i.l=function(e){return g(e=y(this,e))?-1:+!p(e)},i.abs=function(){return g(this)?m(this):this},i.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,r[s]=o<<16|a}return new n(r,-0x80000000&r[r.length-1]?-1:0)},i.j=function(e){if(p(this)||p(e))return d;if(g(this))return g(e)?m(this).j(m(e)):m(m(this).j(e));if(g(e))return m(this.j(m(e)));if(0>this.l(f)&&0>e.l(f))return u(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var a=this.i(i)>>>16,o=65535&this.i(i),l=e.i(s)>>>16,c=65535&e.i(s);r[2*i+2*s]+=o*c,v(r,2*i+2*s),r[2*i+2*s+1]+=a*c,v(r,2*i+2*s+1),r[2*i+2*s+1]+=o*l,v(r,2*i+2*s+1),r[2*i+2*s+2]+=a*l,v(r,2*i+2*s+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new n(r,0)},i.A=function(e){return S(this,e).h},i.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},i.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},i.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,o=tr.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=u,n.fromString=c,a=tr.Integer=n}).apply(void 0!==tt?tt:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var tn=r(63065),ti=r(33742);let ts="@firebase/firestore",ta="4.7.3";class to{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}to.UNAUTHENTICATED=new to(null),to.GOOGLE_CREDENTIALS=new to("google-credentials-uid"),to.FIRST_PARTY=new to("first-party-uid"),to.MOCK_USER=new to("mock-user");let tl="10.14.0";function tu(e){tl=e}function tc(e){return(0,e9.inspect)(e,{depth:100})}let td=new ei("@firebase/firestore");function th(){return td.logLevel}function tf(e,...t){if(td.logLevel<=s.DEBUG){let r=t.map(tm);td.debug(`Firestore (${tl}): ${e}`,...r)}}function tp(e,...t){if(td.logLevel<=s.ERROR){let r=t.map(tm);td.error(`Firestore (${tl}): ${e}`,...r)}}function tg(e,...t){if(td.logLevel<=s.WARN){let r=t.map(tm);td.warn(`Firestore (${tl}): ${e}`,...r)}}function tm(e){if("string"==typeof e)return e;try{return tc(e)}catch(t){return e}}function ty(e="Unexpected state"){let t=`FIRESTORE (${tl}) INTERNAL ASSERTION FAILED: `+e;throw tp(t),Error(t)}function tv(e,t){e||ty()}function tb(e,t){return e}let tS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tw extends L{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tT{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(to.UNAUTHENTICATED))}shutdown(){}}class tx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class t_{constructor(e){this.authProvider=e,this.currentUser=to.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){tv(void 0===this.tokenListener);let r=this.tokenCounter,n=e=>this.tokenCounter!==r?(r=this.tokenCounter,t(e)):Promise.resolve(),i=new tT;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),i.resolve(),i=new tT,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{tf("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),s())};this.authProvider.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.authProvider.getImmediate({optional:!0});e?a(e):(tf("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tT)}},0),s()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(t).then(t=>this.tokenCounter!==e?(tf("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tv("string"==typeof t.accessToken),new tE(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return tv(null===e||"string"==typeof e),new to(e)}}class tO{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=to.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class tI{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new tO(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(to.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tk{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,t){tv(void 0===this.tokenListener);let r=e=>{null!=e.error&&tf("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.latestAppCheckToken;return this.latestAppCheckToken=e.token,tf("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.tokenListener=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{tf("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.appCheckProvider.getImmediate({optional:!0});e?n(e):tf("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(e).then(e=>e?(tv("string"==typeof e.token),this.latestAppCheckToken=e.token,new tA(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}}function tR(e){if(!e)return new tC;switch(e.type){case"firstParty":return new tI(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tw(tS.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function tD(e){return(0,te.randomBytes)(e)}class tN{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",n=20;for(;r.length<n;){let i=tD(40);for(let s=0;s<i.length;++s)r.length<n&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function tP(e,t){return e<t?-1:+(e>t)}function tM(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}function tj(e){return e+"\0"}let tL=-0xe7791f700,tB=1e6;class tF{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new tw(tS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<tL||e>=0x3afff44180)throw new tw(tS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tF.fromMillis(Date.now())}static fromDate(e){return tF.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*tB);return new tF(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tB}_compareTo(e){return this.seconds===e.seconds?tP(this.nanoseconds,e.nanoseconds):tP(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-tL).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tU{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tU(e)}static min(){return new tU(new tF(0,0))}static max(){return new tU(new tF(0x3afff4417f,1e9-1))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}let tV="__name__";class tz{constructor(e,t,r){void 0===t?t=0:t>e.length&&ty(),void 0===r?r=e.length-t:r>e.length-t&&ty(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tz.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof tz?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:+(e.length>t.length)}}class tq extends tz{construct(e,t,r){return new tq(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new tw(tS.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new tq(t)}static emptyPath(){return new tq([])}}let t$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tG extends tz{construct(e,t,r){return new tG(e,t,r)}static isValidIdentifier(e){return t$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tG.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===tV}static keyField(){return new tG([tV])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new tw(tS.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new tw(tS.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tw(tS.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new tw(tS.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tG(t)}static emptyPath(){return new tG([])}}class tW{constructor(e){this.path=e}static fromPath(e){return new tW(tq.fromString(e))}static fromName(e){return new tW(tq.fromString(e).popFirst(5))}static empty(){return new tW(tq.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tq.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tq.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tW(new tq(e.slice()))}}let tK=-1,tH=0;class tQ{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function tY(e){return e.fields.find(e=>2===e.kind)}function tX(e){return e.fields.filter(e=>2!==e.kind)}function tJ(e){let t=tX(e);return 0===t.length?0:t[t.length-1].kind}function tZ(e,t){let r=tP(e.collectionGroup,t.collectionGroup);if(0!==r)return r;for(let n=0;n<Math.min(e.fields.length,t.fields.length);++n)if(0!==(r=t2(e.fields[n],t.fields[n])))return r;return tP(e.fields.length,t.fields.length)}function t0(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}tQ.UNKNOWN_ID=-1;class t1{constructor(e,t){this.fieldPath=e,this.kind=t}}function t2(e,t){let r=tG.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:tP(e.kind,t.kind)}class t3{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new t3(tH,t5.min())}}function t6(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new t5(tU.fromTimestamp(1e9===n?new tF(r+1,0):new tF(r,n)),tW.empty(),t)}function t4(e){return new t5(e.readTime,e.key,tK)}class t5{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new t5(tU.min(),tW.empty(),tK)}static max(){return new t5(tU.max(),tW.empty(),tK)}}function t8(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=tW.comparator(e.documentKey,t.documentKey))?r:tP(e.largestBatchId,t.largestBatchId)}let t7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class t9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function re(e){if(e.code===tS.FAILED_PRECONDITION&&e.message===t7)tf("LocalStore","Unexpectedly lost primary lease");else throw e}class rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return(this.callbackAttached&&ty(),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new rt((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();if(t instanceof rt)return t;return rt.resolve(t)}catch(e){return rt.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):rt.reject(t)}static resolve(e){return new rt((t,r)=>{t(e)})}static reject(e){return new rt((t,r)=>{r(e)})}static waitFor(e){return new rt((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=rt.resolve(!1);for(let r of e)t=t.next(e=>e?rt.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new rt((r,n)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new rt((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}let rr="SimpleDb",rn=3;class ri{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.completionDeferred=new tT,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{t.error?this.completionDeferred.reject(new rl(e,t.error)):this.completionDeferred.resolve()},this.transaction.onerror=t=>{let r=rf(t.target.error);this.completionDeferred.reject(new rl(e,r))}}static open(e,t,r,n){try{return new ri(t,e.transaction(n,r))}catch(e){throw new rl(t,e)}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(tf(rr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new rc(this.transaction.objectStore(e))}}class rs{constructor(e,t,r){this.name=e,this.version=t,this.schemaConverter=r,12.2===rs.getIOSVersion(R())&&tp("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return tf(rr,"Removing database:",e),rd(window.indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!P())return!1;if(rs.isMockPersistence())return!0;let e=R(),t=rs.getIOSVersion(e),r=0<t&&t<10,n=ra(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)&&!r&&!i}static isMockPersistence(){var e;return"undefined"!=typeof process&&(null==(e=process.env)?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,t){return e.store(t)}static getIOSVersion(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}async ensureDb(e){return this.db||(tf(rr,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new rl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new tw(tS.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new tw(tS.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new rl(e,n))},n.onupgradeneeded=e=>{tf(rr,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;this.schemaConverter.createOrUpgrade(t,n.transaction,e.oldVersion,this.version).next(()=>{tf(rr,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=e=>this.versionchangelistener(e)),this.db}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.ensureDb(e);let t=ri.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next(e=>(t.maybeCommit(),e)).catch(e=>(t.abort(e),rt.reject(e))).toPromise();return s.catch(()=>{}),await t.completionPromise,s}catch(r){let e=r,t="FirebaseError"!==e.name&&s<rn;if(tf(rr,"Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function ra(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class ro{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return rd(this.dbCursor.delete())}}class rl extends tw{constructor(e,t){super(tS.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ru(e){return"IndexedDbTransactionError"===e.name}class rc{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(tf(rr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(tf(rr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rd(r)}add(e){return tf(rr,"ADD",this.store.name,e,e),rd(this.store.add(e))}get(e){return rd(this.store.get(e)).next(t=>(void 0===t&&(t=null),tf(rr,"GET",this.store.name,e,t),t))}delete(e){return tf(rr,"DELETE",this.store.name,e),rd(this.store.delete(e))}count(){return tf(rr,"COUNT",this.store.name),rd(this.store.count())}loadAll(e,t){let r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){let e=n.getAll(r.range);return new rt((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.iterateCursor(e,(e,r)=>{t.push(r)}).next(()=>t)}}loadFirst(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new rt((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}deleteAll(e,t){tf(rr,"DELETE ALL",this.store.name);let r=this.options(e,t);r.keysOnly=!1;let n=this.cursor(r);return this.iterateCursor(n,(e,t,r)=>r.delete())}iterate(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.iterateCursor(n,t)}iterateSerial(e){let t=this.cursor({});return new rt((r,n)=>{t.onerror=e=>{n(rf(e.target.error))},t.onsuccess=t=>{let n=t.target.result;if(!n)return void r();e(n.primaryKey,n.value).next(e=>{e?n.continue():r()})}})}iterateCursor(e,t){let r=[];return new rt((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void n();let s=new ro(i),a=t(i.primaryKey,i.value,s);if(a instanceof rt){let e=a.catch(e=>(s.done(),rt.reject(e)));r.push(e)}s.isDone?n():null===s.skipToKey?i.continue():i.continue(s.skipToKey)}}).next(()=>rt.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),!e.index)return this.store.openCursor(e.range,t);{let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}}}function rd(e){return new rt((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(rf(e.target.error))}})}let rh=!1;function rf(e){let t=rs.getIOSVersion(R());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new tw("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rh||(rh=!0,setTimeout(()=>{throw e},0)),e}}return e}let rp="IndexBackfiller",rg=15e3,rm=6e4,ry=50;class rv{constructor(e,t){this.asyncQueue=e,this.backfiller=t,this.task=null}start(){this.schedule(rg)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(e){tf(rp,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let e=await this.backfiller.backfill();tf(rp,`Documents written: ${e}`)}catch(e){ru(e)?tf(rp,"Ignoring IndexedDB error during index backfill: ",e):await re(e)}await this.schedule(rm)})}}class rb{constructor(e,t){this.localStore=e,this.persistence=t}async backfill(e=ry){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.writeIndexEntries(t,e))}writeIndexEntries(e,t){let r=new Set,n=t,i=!0;return rt.doWhile(()=>!0===i&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(!(null===t||r.has(t)))return tf(rp,`Processing collection: ${t}`),this.writeEntriesForCollectionGroup(e,t,n).next(e=>{n-=e,r.add(t)});i=!1})).next(()=>t-n)}writeEntriesForCollectionGroup(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(r=>{let i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.getNewOffset(n,r)).next(r=>(tf(rp,`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>i.size)}))}getNewOffset(e,t){let r=e;return t.changes.forEach((e,t)=>{let n=t4(t);t8(n,r)>0&&(r=n)}),new t5(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class rS{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.setPreviousValue(e),this.writeNewSequenceNumber=e=>t.writeSequenceNumber(e))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}rS.INVALID=-1;let rw="\x01",rT="\x01",rE="\x10",rC="\x11";function rx(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=rO(t)),t=r_(e.get(r),t);return rO(t)}function r_(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+=rw+rE;break;case rw:r+=rw+rC;break;default:r+=n}}return r}function rO(e){return e+rw+rT}function rI(e){let t=e.length;if(tv(t>=2),2===t)return tv(e.charAt(0)===rw&&e.charAt(1)===rT),tq.emptyPath();let r=t-2,n=[],i="";for(let s=0;s<t;){let t=e.indexOf(rw,s);switch((t<0||t>r)&&ty(),e.charAt(t+1)){case rT:let a,o=e.substring(s,t);0===i.length?a=o:(i+=o,a=i,i=""),n.push(a);break;case rE:i+=e.substring(s,t),i+="\0";break;case rC:i+=e.substring(s,t+1);break;default:ty()}s=t+2}return new tq(n)}let rA="remoteDocuments",rk="owner",rR="owner",rD="mutationQueues",rN="userId",rP="mutations",rM="batchId",rj="userMutationsIndex",rL=["userId","batchId"];function rB(e){return[e]}function rF(e,t){return[e,rx(t)]}function rU(e,t,r){return[e,rx(t),r]}let rV={},rz="documentMutations",rq="remoteDocumentsV14",r$=["prefixPath","collectionGroup","readTime","documentId"],rG="documentKeyIndex",rW=["prefixPath","collectionGroup","documentId"],rK="collectionGroupIndex",rH=["collectionGroup","readTime","prefixPath","documentId"],rQ="remoteDocumentGlobal",rY="remoteDocumentGlobalKey",rX="targets",rJ="targetId",rZ="queryTargetsIndex",r0=["canonicalId","targetId"],r1="targetDocuments",r2=["targetId","path"],r3="documentTargetsIndex",r6=["path","targetId"],r4="targetGlobalKey",r5="targetGlobal",r8="collectionParents",r7=["collectionId","parent"],r9="clientMetadata",ne="clientId",nt="bundles",nr="bundleId",nn="namedQueries",ni="name",ns="indexConfiguration",na="indexId",no="collectionGroupIndex",nl="collectionGroup",nu="indexState",nc=["indexId","uid"],nd="sequenceNumberIndex",nh=["uid","sequenceNumber"],nf="indexEntries",np=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ng="documentKeyIndex",nm=["indexId","uid","orderedDocumentKey"],ny="documentOverlays",nv=["userId","collectionPath","documentId"],nb="collectionPathOverlayIndex",nS=["userId","collectionPath","largestBatchId"],nw="collectionGroupOverlayIndex",nT=["userId","collectionGroup","largestBatchId"],nE="globals",nC="name",nx=[rD,rP,rz,rA,rX,rk,r5,r1,r9,rQ,r8,nt,nn],n_=[...nx,ny],nO=[rD,rP,rz,rq,rX,rk,r5,r1,r9,rQ,r8,nt,nn,ny],nI=nO,nA=[...nI,ns,nu,nf],nk=nA,nR=[...nA,nE];function nD(e){return 17===e?nR:16===e?nk:15===e?nA:14===e?nI:13===e?nO:12===e?n_:11===e?nx:void ty()}class nN extends t9{constructor(e,t){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=t}}function nP(e,t){let r=tb(e);return rs.getStore(r.simpleDbTransaction,t)}function nM(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function nj(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function nL(e,t){let r=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(t(e[n],n,e));return r}function nB(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class nF{constructor(e,t){this.comparator=e,this.root=t||nV.EMPTY}insert(e,t){return new nF(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nV.BLACK,null,null))}remove(e){return new nF(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nV.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nU(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nU(this.root,e,this.comparator,!1)}getReverseIterator(){return new nU(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nU(this.root,e,this.comparator,!0)}}class nU{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else if(0===i){this.nodeStack.push(e);break}else this.nodeStack.push(e),e=this.isReverse?e.right:e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nV{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:nV.RED,this.left=null!=n?n:nV.EMPTY,this.right=null!=i?i:nV.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new nV(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return nV.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key))if(n.right.isEmpty())return nV.EMPTY;else r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin());n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nV.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nV.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ty();let e=this.left.check();if(e===this.right.check())return e+ +!this.isRed();throw ty()}}nV.EMPTY=null,nV.RED=!0,nV.BLACK=!1;class nz{constructor(){this.size=0}get key(){throw ty()}get value(){throw ty()}get color(){throw ty()}get left(){throw ty()}get right(){throw ty()}copy(e,t,r,n,i){return this}insert(e,t,r){return new nV(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}nV.EMPTY=new nz;class nq{constructor(e){this.comparator=e,this.data=new nF(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n$(this.data.getIterator())}getIteratorFrom(e){return new n$(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nq)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new nq(this.comparator);return t.data=e,t}}class n${constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nG(e,t,r,n,i){let s=e.getIterator(),a=t.getIterator(),o=nW(s),l=nW(a);for(;o||l;){let e=!1,t=!1;if(o&&l){let n=r(o,l);n<0?t=!0:n>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(n(l),l=nW(a)):t?(i(o),o=nW(s)):(o=nW(s),l=nW(a))}}function nW(e){return e.hasNext()?e.getNext():void 0}class nK{constructor(e){this.fields=e,e.sort(tG.comparator)}static empty(){return new nK([])}unionWith(e){let t=new nq(tG.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new nK(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tM(this.fields,e.fields,(e,t)=>e.isEqual(t))}}function nH(e){return Buffer.from(e,"base64").toString("binary")}function nQ(e){return Buffer.from(e,"binary").toString("base64")}class nY{constructor(e){this.binaryString=e}static fromBase64String(e){return new nY(nH(e))}static fromUint8Array(e){return new nY(nX(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return nQ(this.binaryString)}toUint8Array(){return nJ(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tP(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function nX(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function nJ(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}nY.EMPTY_BYTE_STRING=new nY("");let nZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function n0(e){if(tv(!!e),"string"==typeof e){let t=0,r=nZ.exec(e);if(tv(!!r),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:n1(e.seconds),nanos:n1(e.nanos)}}function n1(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function n2(e){return"string"==typeof e?nY.fromBase64String(e):nY.fromUint8Array(e)}let n3="server_timestamp",n6="__type__",n4="__previous_value__",n5="__local_write_time__";function n8(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[n6])?void 0:r.stringValue)===n3}function n7(e,t){let r={fields:{[n6]:{stringValue:n3},[n5]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&n8(t)&&(t=n9(t)),t&&(r.fields[n4]=t),{mapValue:r}}function n9(e){let t=e.mapValue.fields[n4];return n8(t)?n9(t):t}function ie(e){let t=n0(e.mapValue.fields[n5].timestampValue);return new tF(t.seconds,t.nanos)}class it{constructor(e,t,r,n,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}let ir="(default)";class ii{constructor(e,t){this.projectId=e,this.database=t||ir}static empty(){return new ii("","")}get isDefaultDatabase(){return this.database===ir}isEqual(e){return e instanceof ii&&e.projectId===this.projectId&&e.database===this.database}}function is(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tw(tS.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ii(e.options.projectId,t)}let ia=-1;function io(e){return null==e}function il(e){return 0===e&&1/e==-1/0}function iu(e){return"number"==typeof e&&Number.isInteger(e)&&!il(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}let ic="__type__",id="__max__",ih={mapValue:{fields:{__type__:{stringValue:id}}}},ip="__vector__",ig="value",im={nullValue:"NULL_VALUE"};function iy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?n8(e)?4:i1(e)?0x1fffffffffffff:iZ(e)?10:11:ty()}function iv(e,t){if(e===t)return!0;let r=iy(e);if(r!==iy(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ie(e).isEqual(ie(t));case 3:return ib(e,t);case 5:return e.stringValue===t.stringValue;case 6:return iw(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return iS(e,t);case 2:return iT(e,t);case 9:return tM(e.arrayValue.values||[],t.arrayValue.values||[],iv);case 10:case 11:return iE(e,t);default:return ty()}}function ib(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=n0(e.timestampValue),n=n0(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}function iS(e,t){return n1(e.geoPointValue.latitude)===n1(t.geoPointValue.latitude)&&n1(e.geoPointValue.longitude)===n1(t.geoPointValue.longitude)}function iw(e,t){return n2(e.bytesValue).isEqual(n2(t.bytesValue))}function iT(e,t){if("integerValue"in e&&"integerValue"in t)return n1(e.integerValue)===n1(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=n1(e.doubleValue),n=n1(t.doubleValue);return r===n?il(r)===il(n):isNaN(r)&&isNaN(n)}return!1}function iE(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(nM(r)!==nM(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!iv(r[e],n[e])))return!1;return!0}function iC(e,t){return void 0!==(e.values||[]).find(e=>iv(e,t))}function ix(e,t){if(e===t)return 0;let r=iy(e),n=iy(t);if(r!==n)return tP(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return tP(e.booleanValue,t.booleanValue);case 2:return i_(e,t);case 3:return iO(e.timestampValue,t.timestampValue);case 4:return iO(ie(e),ie(t));case 5:return tP(e.stringValue,t.stringValue);case 6:return ik(e.bytesValue,t.bytesValue);case 7:return iI(e.referenceValue,t.referenceValue);case 8:return iA(e.geoPointValue,t.geoPointValue);case 9:return iR(e.arrayValue,t.arrayValue);case 10:return iD(e.mapValue,t.mapValue);case 11:return iN(e.mapValue,t.mapValue);default:throw ty()}}function i_(e,t){let r=n1(e.integerValue||e.doubleValue),n=n1(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}function iO(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return tP(e,t);let r=n0(e),n=n0(t),i=tP(r.seconds,n.seconds);return 0!==i?i:tP(r.nanos,n.nanos)}function iI(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=tP(r[e],n[e]);if(0!==t)return t}return tP(r.length,n.length)}function iA(e,t){let r=tP(n1(e.latitude),n1(t.latitude));return 0!==r?r:tP(n1(e.longitude),n1(t.longitude))}function ik(e,t){let r=n2(e),n=n2(t);return r.compareTo(n)}function iR(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=ix(r[e],n[e]);if(t)return t}return tP(r.length,n.length)}function iD(e,t){var r,n,i,s;let a=e.fields||{},o=t.fields||{},l=null==(r=a[ig])?void 0:r.arrayValue,u=null==(n=o[ig])?void 0:n.arrayValue,c=tP((null==(i=null==l?void 0:l.values)?void 0:i.length)||0,(null==(s=null==u?void 0:u.values)?void 0:s.length)||0);return 0!==c?c:iR(l,u)}function iN(e,t){if(e===ih.mapValue&&t===ih.mapValue)return 0;if(e===ih.mapValue)return 1;if(t===ih.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=tP(n[e],s[e]);if(0!==t)return t;let a=ix(r[n[e]],i[s[e]]);if(0!==a)return a}return tP(n.length,s.length)}function iP(e){return iM(e)}function iM(e){if("nullValue"in e)return"null";if("booleanValue"in e)return""+e.booleanValue;if("integerValue"in e)return""+e.integerValue;if("doubleValue"in e)return""+e.doubleValue;if("timestampValue"in e)return iL(e.timestampValue);else if("stringValue"in e)return e.stringValue;else if("bytesValue"in e)return ij(e.bytesValue);else if("referenceValue"in e)return iF(e.referenceValue);else if("geoPointValue"in e)return iB(e.geoPointValue);else if("arrayValue"in e)return iV(e.arrayValue);else if("mapValue"in e)return iU(e.mapValue);else return ty()}function ij(e){return n2(e).toBase64()}function iL(e){let t=n0(e);return`time(${t.seconds},${t.nanos})`}function iB(e){return`geo(${e.latitude},${e.longitude})`}function iF(e){return tW.fromName(e).toString()}function iU(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${iM(e.fields[i])}`;return r+"}"}function iV(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=iM(n);return t+"]"}function iz(e){switch(iy(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=n9(e);return t?16+iz(t):16;case 5:return 2*e.stringValue.length;case 6:return n2(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return i$(e.arrayValue);case 10:case 11:return iq(e.mapValue);default:throw ty()}}function iq(e){let t=0;return nj(e.fields,(e,r)=>{t+=e.length+iz(r)}),t}function i$(e){return(e.values||[]).reduce((e,t)=>e+iz(t),0)}function iG(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function iW(e){return!!e&&"integerValue"in e}function iK(e){return!!e&&"doubleValue"in e}function iH(e){return iW(e)||iK(e)}function iQ(e){return!!e&&"arrayValue"in e}function iY(e){return!!e&&"nullValue"in e}function iX(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function iJ(e){return!!e&&"mapValue"in e}function iZ(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[ic])?void 0:r.stringValue)===ip}function i0(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return nj(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=i0(r)),t}{if(!e.arrayValue)return Object.assign({},e);let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=i0(e.arrayValue.values[r]);return t}}function i1(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===id}let i2={mapValue:{fields:{[ic]:{stringValue:ip},[ig]:{arrayValue:{}}}}};function i3(e){if("nullValue"in e)return im;if("booleanValue"in e)return{booleanValue:!1};if("integerValue"in e||"doubleValue"in e)return{doubleValue:NaN};if("timestampValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in e)return{stringValue:""};else if("bytesValue"in e)return{bytesValue:""};else if("referenceValue"in e)return iG(ii.empty(),tW.empty());else if("geoPointValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in e)return{arrayValue:{}};else if(!("mapValue"in e))return ty();else return iZ(e)?i2:{mapValue:{}}}function i6(e){if("nullValue"in e)return{booleanValue:!1};if("booleanValue"in e)return{doubleValue:NaN};if("integerValue"in e||"doubleValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in e)return{stringValue:""};if("stringValue"in e)return{bytesValue:""};else if("bytesValue"in e)return iG(ii.empty(),tW.empty());else if("referenceValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in e)return{arrayValue:{}};else if("arrayValue"in e)return i2;else if(!("mapValue"in e))return ty();else return iZ(e)?{mapValue:{}}:ih}function i4(e,t){let r=ix(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function i5(e,t){let r=ix(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class i8{constructor(e){this.value=e}static empty(){return new i8({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!iJ(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=i0(t)}setAll(e){let t=tG.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=i0(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());iJ(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];iJ(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(nj(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new i8(i0(this.value))}}function i7(e){let t=[];return nj(e.fields,(e,r)=>{let n=new tG([e]);if(iJ(r)){let e=i7(r.mapValue).fields;if(0===e.length)t.push(n);else for(let r of e)t.push(n.child(r))}else t.push(n)}),new nK(t)}class i9{constructor(e,t,r,n,i,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new i9(e,0,tU.min(),tU.min(),tU.min(),i8.empty(),0)}static newFoundDocument(e,t,r,n){return new i9(e,1,t,tU.min(),r,n,0)}static newNoDocument(e,t){return new i9(e,2,t,tU.min(),tU.min(),i8.empty(),0)}static newUnknownDocument(e,t){return new i9(e,3,t,tU.min(),tU.min(),i8.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(tU.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=i8.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=i8.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tU.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof i9&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new i9(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function se(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?ix(n,i):ty()}class st{constructor(e,t){this.position=e,this.inclusive=t}}function sr(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(n=s.field.isKeyField()?tW.comparator(tW.fromName(a.referenceValue),r.key):ix(a,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function sn(e,t,r){let n=sr(e,t,r);return e.inclusive?n>=0:n>0}function si(e,t,r){let n=sr(e,t,r);return e.inclusive?n<=0:n<0}function ss(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!iv(e.position[r],t.position[r]))return!1;return!0}class sa{constructor(e,t="asc"){this.field=e,this.dir=t}}function so(e){return e.field.canonicalString()+e.dir}function sl(e){return`${e.field.canonicalString()} (${e.dir})`}function su(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class sc{}class sd extends sc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){if(e.isKeyField())if("in"===t||"not-in"===t)return this.createKeyFieldInFilter(e,t,r);else return new sx(e,t,r);if("array-contains"===t)return new sA(e,r);if("in"===t)return new sk(e,r);if("not-in"===t)return new sR(e,r);if("array-contains-any"===t)return new sD(e,r);else return new sd(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new s_(e,r):new sO(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ix(t,this.value)):null!==t&&iy(this.value)===iy(t)&&this.matchesComparison(ix(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ty()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sh extends sc{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new sh(e,t)}matches(e){return sf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}}function sf(e){return"and"===e.op}function sp(e){return"or"===e.op}function sg(e){return sm(e)&&sf(e)}function sm(e){for(let t of e.filters)if(t instanceof sh)return!1;return!0}function sy(e){if(e instanceof sd)return e.field.canonicalString()+e.op.toString()+iP(e.value);{if(sg(e))return e.filters.map(e=>sy(e)).join(",");let t=e.filters.map(e=>sy(e)).join(",");return`${e.op}(${t})`}}function sv(e,t){return e instanceof sd?sb(e,t):e instanceof sh?sS(e,t):void ty()}function sb(e,t){return t instanceof sd&&e.op===t.op&&e.field.isEqual(t.field)&&iv(e.value,t.value)}function sS(e,t){return t instanceof sh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,n)=>e&&sv(r,t.filters[n]),!0)}function sw(e,t){let r=e.filters.concat(t);return sh.create(r,e.op)}function sT(e){return e instanceof sd?sC(e):e instanceof sh?sE(e):"Filter"}function sE(e){return e.op.toString()+" {"+e.getFilters().map(sT).join(" ,")+"}"}function sC(e){return`${e.field.canonicalString()} ${e.op} ${iP(e.value)}`}class sx extends sd{constructor(e,t,r){super(e,t,r),this.key=tW.fromName(r.referenceValue)}matches(e){let t=tW.comparator(e.key,this.key);return this.matchesComparison(t)}}class s_ extends sd{constructor(e,t){super(e,"in",t),this.keys=sI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sO extends sd{constructor(e,t){super(e,"not-in",t),this.keys=sI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sI(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>tW.fromName(e.referenceValue))}class sA extends sd{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return iQ(t)&&iC(t.arrayValue,this.value)}}class sk extends sd{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&iC(this.value.arrayValue,t)}}class sR extends sd{constructor(e,t){super(e,"not-in",t)}matches(e){if(iC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!iC(this.value.arrayValue,t)}}class sD extends sd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!!iQ(t)&&!!t.arrayValue.values&&t.arrayValue.values.some(e=>iC(this.value.arrayValue,e))}}class sN{constructor(e,t=null,r=[],n=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=a,this.memoizedCanonicalId=null}}function sP(e,t=null,r=[],n=[],i=null,s=null,a=null){return new sN(e,t,r,n,i,s,a)}function sM(e){let t=tb(e);if(null===t.memoizedCanonicalId){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>sy(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>so(e)).join(","),io(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>iP(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>iP(e)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function sj(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>sT(e)).join(", ")}]`),io(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>sl(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>iP(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>iP(e)).join(",")),`Target(${t})`}function sL(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!su(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!sv(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ss(e.startAt,t.startAt)&&ss(e.endAt,t.endAt)}function sB(e){return tW.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function sF(e,t){return e.filters.filter(e=>e instanceof sd&&e.field.isEqual(t))}function sU(e,t){let r=tY(t);if(void 0===r)return null;for(let t of sF(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}function sV(e,t){let r=new Map;for(let n of tX(t))for(let t of sF(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}function sz(e,t){let r=[],n=!0;for(let i of tX(t)){let t=0===i.kind?s$(e,i.fieldPath,e.startAt):sG(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new st(r,n)}function sq(e,t){let r=[],n=!0;for(let i of tX(t)){let t=0===i.kind?sG(e,i.fieldPath,e.endAt):s$(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new st(r,n)}function s$(e,t,r){let n=im,i=!0;for(let r of sF(e,t)){let e=im,t=!0;switch(r.op){case"<":case"<=":e=i3(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=im}0>i4({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>i4({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function sG(e,t,r){let n=ih,i=!0;for(let r of sF(e,t)){let e=ih,t=!0;switch(r.op){case">=":case">":e=i6(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=ih}i5({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];i5({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function sW(e){let t=new nq(tG.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+ +!!r}function sK(e){return null!==e.limit}class sH{constructor(e,t=null,r=[],n=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}}function sQ(e,t,r,n,i,s,a,o){return new sH(e,t,r,n,i,s,a,o)}function sY(e){return new sH(e)}function sX(e,t){return new sH(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function sJ(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function sZ(e){let t=new nq(tG.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}function s0(e){return tW.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function s1(e){return null!==e.collectionGroup}function s2(e){let t=tb(e);if(null===t.memoizedNormalizedOrderBy){t.memoizedNormalizedOrderBy=[];let e=new Set;for(let r of t.explicitOrderBy)t.memoizedNormalizedOrderBy.push(r),e.add(r.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";sZ(t).forEach(n=>{e.has(n.canonicalString())||n.isKeyField()||t.memoizedNormalizedOrderBy.push(new sa(n,r))}),e.has(tG.keyField().canonicalString())||t.memoizedNormalizedOrderBy.push(new sa(tG.keyField(),r))}return t.memoizedNormalizedOrderBy}function s3(e){let t=tb(e);return t.memoizedTarget||(t.memoizedTarget=s4(t,s2(e))),t.memoizedTarget}function s6(e){let t=tb(e);return t.memoizedAggregateTarget||(t.memoizedAggregateTarget=s4(t,e.explicitOrderBy)),t.memoizedAggregateTarget}function s4(e,t){if("F"===e.limitType)return sP(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new sa(e.field,t)});let r=e.endAt?new st(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new st(e.startAt.position,e.startAt.inclusive):null;return sP(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function s5(e,t){let r=e.filters.concat([t]);return new sH(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function s8(e,t){let r=e.explicitOrderBy.concat([t]);return new sH(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function s7(e,t,r){return new sH(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function s9(e,t){return new sH(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}function ae(e,t){return new sH(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}function at(e,t){return sL(s3(e),s3(t))&&e.limitType===t.limitType}function ar(e){return`${sM(s3(e))}|lt:${e.limitType}`}function an(e){return`Query(target=${sj(s3(e))}; limitType=${e.limitType})`}function ai(e,t){return t.isFoundDocument()&&as(e,t)&&aa(e,t)&&ao(e,t)&&al(e,t)}function as(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):tW.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function aa(e,t){for(let r of s2(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}function ao(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function al(e,t){return(!e.startAt||!!si(e.startAt,s2(e),t))&&(!e.endAt||!!sn(e.endAt,s2(e),t))}function au(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ac(e){return(t,r)=>{let n=!1;for(let i of s2(e)){let e=ad(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function ad(e,t,r){let n=e.field.isKeyField()?tW.comparator(t.key,r.key):se(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return ty()}}class ah{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n){this.inner[r]=[[e,t]],this.innerSize++;return}for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e)){n[r]=[e,t];return}n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){nj(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return nB(this.inner)}size(){return this.innerSize}}let af=new nF(tW.comparator);function ap(){return af}let ag=new nF(tW.comparator);function am(...e){let t=ag;for(let r of e)t=t.insert(r.key,r);return t}function ay(){return aw()}function av(e){let t=ag;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function ab(){return aw()}function aS(){return aw()}function aw(){return new ah(e=>e.toString(),(e,t)=>e.isEqual(t))}let aT=new nF(tW.comparator);function aE(){return aT}let aC=new nq(tW.comparator);function ax(...e){let t=aC;for(let r of e)t=t.add(r);return t}let a_=new nq(tP);function aO(){return a_}function aI(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};else if(t===1/0)return{doubleValue:"Infinity"};else if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:il(t)?"-0":t}}function aA(e){return{integerValue:""+e}}function ak(e,t){return iu(t)?aA(t):aI(e,t)}class aR{constructor(){this._=void 0}}function aD(e,t,r){return e instanceof aj?n7(r,t):e instanceof aL?aB(e,t):e instanceof aF?aU(e,t):az(e,t)}function aN(e,t,r){return e instanceof aL?aB(e,t):e instanceof aF?aU(e,t):r}function aP(e,t){return e instanceof aV?iH(t)?t:{integerValue:0}:null}function aM(e,t){return e instanceof aL&&t instanceof aL||e instanceof aF&&t instanceof aF?tM(e.elements,t.elements,iv):e instanceof aV&&t instanceof aV?iv(e.operand,t.operand):e instanceof aj&&t instanceof aj}class aj extends aR{}class aL extends aR{constructor(e){super(),this.elements=e}}function aB(e,t){let r=a$(t);for(let t of e.elements)r.some(e=>iv(e,t))||r.push(t);return{arrayValue:{values:r}}}class aF extends aR{constructor(e){super(),this.elements=e}}function aU(e,t){let r=a$(t);for(let t of e.elements)r=r.filter(e=>!iv(e,t));return{arrayValue:{values:r}}}class aV extends aR{constructor(e,t){super(),this.serializer=e,this.operand=t}}function az(e,t){let r=aP(e,t),n=aq(r)+aq(e.operand);return iW(r)&&iW(e.operand)?aA(n):aI(e.serializer,n)}function aq(e){return n1(e.integerValue||e.doubleValue)}function a$(e){return iQ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class aG{constructor(e,t){this.field=e,this.transform=t}}function aW(e,t){return e.field.isEqual(t.field)&&aM(e.transform,t.transform)}function aK(e,t){return void 0===e&&void 0===t||!!e&&!!t&&tM(e,t,(e,t)=>aW(e,t))}class aH{constructor(e,t){this.version=e,this.transformResults=t}}class aQ{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new aQ}static exists(e){return new aQ(void 0,e)}static updateTime(e){return new aQ(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aY(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class aX{}function aJ(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)if(e.isNoDocument())return new or(e.key,aQ.none());else return new a3(e.key,e.data,aQ.none());{let r=e.data,n=i8.empty(),i=new nq(tG.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new a5(e.key,n,new nK(i.toArray()),aQ.none())}}function aZ(e,t,r){e instanceof a3?a6(e,t,r):e instanceof a5?a8(e,t,r):on(e,t,r)}function a0(e,t,r,n){return e instanceof a3?a4(e,t,r,n):e instanceof a5?a7(e,t,r,n):oi(e,t,r)}function a1(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=aP(n.transform,e||null);null!=i&&(null===r&&(r=i8.empty()),r.set(n.field,i))}return r||null}function a2(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!aK(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class a3 extends aX{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}function a6(e,t,r){let n=e.value.clone(),i=oe(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function a4(e,t,r,n){if(!aY(e.precondition,t))return r;let i=e.value.clone(),s=ot(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}class a5 extends aX{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function a8(e,t,r){if(!aY(e.precondition,t))return void t.convertToUnknownDocument(r.version);let n=oe(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(a9(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}function a7(e,t,r,n){if(!aY(e.precondition,t))return r;let i=ot(e.fieldTransforms,n,t),s=t.data;return(s.setAll(a9(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}function a9(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function oe(e,t,r){let n=new Map;tv(e.length===r.length);for(let i=0;i<r.length;i++){let s=e[i],a=s.transform,o=t.data.field(s.field);n.set(s.field,aN(a,o,r[i]))}return n}function ot(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,aD(e,s,t))}return n}class or extends aX{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function on(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}function oi(e,t,r){return aY(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}class os extends aX{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oa{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&aZ(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=a0(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=a0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=aS();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=aJ(s,a=t.has(n.key)?null:a);null!==o&&r.set(n.key,o),s.isValidDocument()||s.convertToNoDocument(tU.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ax())}isEqual(e){return this.batchId===e.batchId&&tM(this.mutations,e.mutations,(e,t)=>a2(e,t))&&tM(this.baseMutations,e.baseMutations,(e,t)=>a2(e,t))}}class oo{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){tv(e.mutations.length===r.length);let n=aE(),i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new oo(e,t,r,n)}}class ol{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ou{constructor(e,t){this.count=e,this.unchangedNames=t}}function oc(e){switch(e){case tS.OK:return ty();case tS.CANCELLED:case tS.UNKNOWN:case tS.DEADLINE_EXCEEDED:case tS.RESOURCE_EXHAUSTED:case tS.INTERNAL:case tS.UNAVAILABLE:case tS.UNAUTHENTICATED:return!1;case tS.INVALID_ARGUMENT:case tS.NOT_FOUND:case tS.ALREADY_EXISTS:case tS.PERMISSION_DENIED:case tS.FAILED_PRECONDITION:case tS.ABORTED:case tS.OUT_OF_RANGE:case tS.UNIMPLEMENTED:case tS.DATA_LOSS:return!0;default:return ty()}}function od(e){return oc(e)&&e!==tS.ABORTED}function oh(e){if(void 0===e)return tp("GRPC error has no .code"),tS.UNKNOWN;switch(e){case l.OK:return tS.OK;case l.CANCELLED:return tS.CANCELLED;case l.UNKNOWN:return tS.UNKNOWN;case l.DEADLINE_EXCEEDED:return tS.DEADLINE_EXCEEDED;case l.RESOURCE_EXHAUSTED:return tS.RESOURCE_EXHAUSTED;case l.INTERNAL:return tS.INTERNAL;case l.UNAVAILABLE:return tS.UNAVAILABLE;case l.UNAUTHENTICATED:return tS.UNAUTHENTICATED;case l.INVALID_ARGUMENT:return tS.INVALID_ARGUMENT;case l.NOT_FOUND:return tS.NOT_FOUND;case l.ALREADY_EXISTS:return tS.ALREADY_EXISTS;case l.PERMISSION_DENIED:return tS.PERMISSION_DENIED;case l.FAILED_PRECONDITION:return tS.FAILED_PRECONDITION;case l.ABORTED:return tS.ABORTED;case l.OUT_OF_RANGE:return tS.OUT_OF_RANGE;case l.UNIMPLEMENTED:return tS.UNIMPLEMENTED;case l.DATA_LOSS:return tS.DATA_LOSS;default:return ty()}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(l||(l={}));class of extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}let op=null;function og(e){if(op)throw Error("a TestingHooksSpi instance is already set");op=e}function om(){return new e9.TextEncoder}function oy(){return new TextDecoder("utf-8")}let ov=new a([0xffffffff,0xffffffff],0);function ob(e){let t=om().encode(e),r=new o;return r.update(t),new Uint8Array(r.digest())}function oS(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new a([r,n],0),new a([i,s],0)]}class ow{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new oT(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new oT(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new oT(`Invalid padding when bitmap length is 0: ${t}`);this.bitCount=8*e.length-t,this.bitCountInInteger=a.fromNumber(this.bitCount)}getBitIndex(e,t,r){let n=e.add(t.multiply(a.fromNumber(r)));return 1===n.compare(ov)&&(n=new a([n.getBits(0),n.getBits(1)],0)),n.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(0===this.bitCount)return!1;let[t,r]=oS(ob(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);if(!this.isBitSet(n))return!1}return!0}static create(e,t,r){let n=e%8==0?0:8-e%8,i=new ow(new Uint8Array(Math.ceil(e/8)),n,t);return r.forEach(e=>i.insert(e)),i}insert(e){if(0===this.bitCount)return;let[t,r]=oS(ob(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);this.setBit(n)}}setBit(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class oT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class oE{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,oC.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new oE(tU.min(),n,new nF(tP),ap(),ax())}}class oC{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new oC(r,t,ax(),ax(),ax())}}class ox{constructor(e,t,r,n){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=n}}class o_{constructor(e,t){this.targetId=e,this.existenceFilter=t}}class oO{constructor(e,t,r=nY.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class oI{constructor(){this.pendingResponses=0,this.documentChanges=oD(),this._resumeToken=nY.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=ax(),t=ax(),r=ax();return this.documentChanges.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:ty()}}),new oC(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=oD()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,tv(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let oA="WatchChangeAggregator";class ok{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=ap(),this.pendingDocumentTargetMapping=oR(),this.pendingTargetResets=new nF(tP)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:ty()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((e,r)=>{this.isActiveTarget(r)&&t(r)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,n=this.targetDataForActiveTarget(t);if(n){let i=n.target;if(sB(i))if(0===r){let e=new tW(i.path);this.removeDocumentFromTarget(t,e,i9.newNoDocument(e,tU.min()))}else tv(1===r);else{let n=this.getCurrentDocumentCountForTarget(t);if(n!==r){let r=this.parseBloomFilter(e),i=r?this.applyBloomFilter(r,e,n):1;if(0!==i){this.resetTarget(t);let e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(t,e)}null==op||op.notifyOnExistenceFilterMismatch(oN(n,e.existenceFilter,this.metadataProvider.getDatabaseId(),r,i))}}}}parseBloomFilter(e){let t,r,n=e.existenceFilter.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;try{t=n2(i).toUint8Array()}catch(e){if(e instanceof of)return tg("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new ow(t,s,a)}catch(e){return e instanceof oT?tg("BloomFilter error: ",e):tg("Applying bloom filter failed: ",e),null}return 0===r.bitCount?null:r}applyBloomFilter(e,t,r){return 2*(t.existenceFilter.count!==r-this.filterRemovedDocuments(e,t.targetId))}filterRemovedDocuments(e,t){let r=this.metadataProvider.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.metadataProvider.getDatabaseId(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;!e.mightContain(s)&&(this.removeDocumentFromTarget(t,r,null),n++)}),n}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((r,n)=>{let i=this.targetDataForActiveTarget(n);if(i){if(r.current&&sB(i.target)){let t=new tW(i.target.path);null!==this.pendingDocumentUpdates.get(t)||this.targetContainsDocument(n,t)||this.removeDocumentFromTarget(n,t,i9.newNoDocument(t,e))}r.hasPendingChanges&&(t.set(n,r.toTargetChange()),r.clearPendingChanges())}});let r=ax();this.pendingDocumentTargetMapping.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.targetDataForActiveTarget(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.pendingDocumentUpdates.forEach((t,r)=>r.setReadTime(e));let n=new oE(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=ap(),this.pendingDocumentTargetMapping=oR(),this.pendingTargetResets=new nF(tP),n}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=2*!!this.targetContainsDocument(e,t.key);this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let n=this.ensureTargetState(e);this.targetContainsDocument(e,t)?n.addDocumentChange(t,1):n.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new oI,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new nq(tP),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}isActiveTarget(e){let t=null!==this.targetDataForActiveTarget(e);return t||tf(oA,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new oI),this.metadataProvider.getRemoteKeysForTarget(e).forEach(t=>{this.removeDocumentFromTarget(e,t,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}}function oR(){return new nF(tW.comparator)}function oD(){return new nF(tW.comparator)}function oN(e,t,r,n,i){var s,a,o,l,u,c;let d={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!=(s=null==h?void 0:h.hashCount)?s:0,bitmapLength:null!=(l=null==(o=null==(a=null==h?void 0:h.bits)?void 0:a.bitmap)?void 0:o.length)?l:0,padding:null!=(c=null==(u=null==h?void 0:h.bits)?void 0:u.padding)?c:0,mightContain:e=>{var t;return null!=(t=null==n?void 0:n.mightContain(e))&&t}}),d}let oP=(()=>{let e={};return e.asc="ASCENDING",e.desc="DESCENDING",e})(),oM=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e.in="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),oj=(()=>{let e={};return e.and="AND",e.or="OR",e})();class oL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function oB(e){return new tw(void 0===e.code?tS.UNKNOWN:oh(e.code),e.message||"")}function oF(e,t){return e.useProto3Json||io(t)?t:{value:t}}function oU(e){let t;return io(t="object"==typeof e?e.value:e)?null:t}function oV(e,t){if(!e.useProto3Json)return{seconds:""+t.seconds,nanos:t.nanoseconds};{let e=new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${e}.${r}Z`}}function oz(e){let t=n0(e);return new tF(t.seconds,t.nanos)}function oq(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function o$(e,t){return e.useProto3Json?(tv(void 0===t||"string"==typeof t),nY.fromBase64String(t||"")):(tv(void 0===t||t instanceof Buffer||t instanceof Uint8Array),nY.fromUint8Array(t||new Uint8Array))}function oG(e,t){return oV(e,t.toTimestamp())}function oW(e){return tv(!!e),tU.fromTimestamp(oz(e))}function oK(e,t){return oH(e,t).canonicalString()}function oH(e,t){let r=o1(e).child("documents");return void 0===t?r:r.child(t)}function oQ(e){let t=tq.fromString(e);return tv(lW(t)),t}function oY(e,t){return oK(e.databaseId,t.path)}function oX(e,t){let r=oQ(t);if(r.get(1)!==e.databaseId.projectId)throw new tw(tS.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new tw(tS.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new tW(o2(r))}function oJ(e,t){return oK(e.databaseId,t)}function oZ(e){let t=oQ(e);return 4===t.length?tq.emptyPath():o2(t)}function o0(e){return new tq(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function o1(e){return new tq(["projects",e.projectId,"databases",e.database])}function o2(e){return tv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function o3(e,t,r){return{name:oY(e,t),fields:r.value.mapValue.fields}}function o6(e,t){return{name:oY(e,t.key),fields:t.data.value.mapValue.fields,updateTime:oV(e,t.version.toTimestamp()),createTime:oV(e,t.createTime.toTimestamp())}}function o4(e,t,r){let n=oX(e,t.name),i=oW(t.updateTime),s=t.createTime?oW(t.createTime):tU.min(),a=new i8({mapValue:{fields:t.fields}}),o=i9.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function o5(e,t){tv(!!t.found),t.found.name,t.found.updateTime;let r=oX(e,t.found.name),n=oW(t.found.updateTime),i=t.found.createTime?oW(t.found.createTime):tU.min(),s=new i8({mapValue:{fields:t.found.fields}});return i9.newFoundDocument(r,n,i,s)}function o8(e,t){tv(!!t.missing),tv(!!t.readTime);let r=oX(e,t.missing),n=oW(t.readTime);return i9.newNoDocument(r,n)}function o7(e,t){return"found"in t?o5(e,t):"missing"in t?o8(e,t):ty()}function o9(e,t){let r;if("targetChange"in t){t.targetChange;let n=le(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=o$(e,t.targetChange.resumeToken),a=t.targetChange.cause;r=new oO(n,i,s,a&&oB(a)||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=oX(e,n.document.name),s=oW(n.document.updateTime),a=n.document.createTime?oW(n.document.createTime):tU.min(),o=new i8({mapValue:{fields:n.document.fields}}),l=i9.newFoundDocument(i,s,a,o);r=new ox(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=oX(e,n.document),s=n.readTime?oW(n.readTime):tU.min(),a=i9.newNoDocument(i,s);r=new ox([],n.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=oX(e,n.document);r=new ox([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return ty();t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new ou(n,i);r=new o_(e.targetId,s)}return r}function le(e){if("NO_CHANGE"===e)return 0;if("ADD"===e)return 1;if("REMOVE"===e)return 2;if("CURRENT"===e)return 3;if("RESET"===e)return 4;else return ty()}function lt(e){if(!("targetChange"in e))return tU.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?tU.min():oW(t.readTime)}function lr(e,t){let r;if(t instanceof a3)r={update:o3(e,t.key,t.value)};else if(t instanceof or)r={delete:oY(e,t.key)};else if(t instanceof a5)r={update:o3(e,t.key,t.data),updateMask:l$(t.fieldMask)};else{if(!(t instanceof os))return ty();r={verify:oY(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(t=>ll(e,t))),t.precondition.isNone||(r.currentDocument=li(e,t.precondition)),r}function ln(e,t){let r=t.currentDocument?ls(t.currentDocument):aQ.none(),n=t.updateTransforms?t.updateTransforms.map(t=>lu(e,t)):[];if(t.update){t.update.name;let i=oX(e,t.update.name),s=new i8({mapValue:{fields:t.update.fields}});return t.updateMask?new a5(i,s,lG(t.updateMask),r,n):new a3(i,s,r,n)}return t.delete?new or(oX(e,t.delete),r):t.verify?new os(oX(e,t.verify),r):ty()}function li(e,t){return void 0!==t.updateTime?{updateTime:oG(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ty()}function ls(e){return void 0!==e.updateTime?aQ.updateTime(oW(e.updateTime)):void 0!==e.exists?aQ.exists(e.exists):aQ.none()}function la(e,t){let r=e.updateTime?oW(e.updateTime):oW(t);return r.isEqual(tU.min())&&(r=oW(t)),new aH(r,e.transformResults||[])}function lo(e,t){return e&&e.length>0?(tv(void 0!==t),e.map(e=>la(e,t))):[]}function ll(e,t){let r=t.transform;if(r instanceof aj)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof aL)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof aF)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof aV)return{fieldPath:t.field.canonicalString(),increment:r.operand};throw ty()}function lu(e,t){let r=null;return"setToServerValue"in t?(tv("REQUEST_TIME"===t.setToServerValue),r=new aj):"appendMissingElements"in t?r=new aL(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new aF(t.removeAllFromArray.values||[]):"increment"in t?r=new aV(e,t.increment):ty(),new aG(tG.fromServerFormat(t.fieldPath),r)}function lc(e,t){return{documents:[oJ(e,t.path)]}}function ld(e){return tv(1===e.documents.length),s3(sY(oZ(e.documents[0])))}function lh(e,t){let r,n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=oJ(e,r);let s=lb(t.filters);s&&(n.structuredQuery.where=s);let a=lT(t.orderBy);a&&(n.structuredQuery.orderBy=a);let o=oF(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=lC(t.startAt)),t.endAt&&(n.structuredQuery.endAt=lx(t.endAt)),{queryTarget:n,parent:r}}function lf(e,t,r,n){let{queryTarget:i,parent:s}=lh(e,t),a={},o=[],l=0;return r.forEach(e=>{let t=n?e.alias:`aggregate_${l++}`;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:lP(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:lP(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},aliasMap:a,parent:s}}function lp(e){let t=oZ(e.parent),r=e.structuredQuery,n=r.from?r.from.length:0,i=null;if(n>0){tv(1===n);let e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=lS(r.where));let a=[];r.orderBy&&(a=lE(r.orderBy));let o=null;r.limit&&(o=oU(r.limit));let l=null;r.startAt&&(l=l_(r.startAt));let u=null;return r.endAt&&(u=lO(r.endAt)),sQ(t,i,a,s,o,"F",l,u)}function lg(e){return s3(lp(e))}function lm(e,t){let r=ly(t.purpose);return null==r?null:{"goog-listen-tags":r}}function ly(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ty()}}function lv(e,t){let r,n=t.target;if((r=sB(n)?{documents:lc(e,n)}:{query:lh(e,n).queryTarget}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=oq(e,t.resumeToken);let n=oF(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(tU.min())>0){r.readTime=oV(e,t.snapshotVersion.toTimestamp());let n=oF(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}function lb(e){if(0!==e.length)return lB(sh.create(e,"and"))}function lS(e){let t=lw(e);return t instanceof sh&&sg(t)?t.getFilters():[t]}function lw(e){return void 0!==e.unaryFilter?lV(e):void 0!==e.fieldFilter?lz(e):void 0!==e.compositeFilter?lq(e):ty()}function lT(e){if(0!==e.length)return e.map(e=>lj(e))}function lE(e){return e.map(e=>lL(e))}function lC(e){return{before:e.inclusive,values:e.position}}function lx(e){return{before:!e.inclusive,values:e.position}}function l_(e){let t=!!e.before;return new st(e.values||[],t)}function lO(e){let t=!e.before;return new st(e.values||[],t)}function lI(e){return oP[e]}function lA(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function lk(e){return oM[e]}function lR(e){return oj[e]}function lD(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ty()}}function lN(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ty()}}function lP(e){return{fieldPath:e.canonicalString()}}function lM(e){return tG.fromServerFormat(e.fieldPath)}function lj(e){return{field:lP(e.field),direction:lI(e.dir)}}function lL(e){return new sa(lM(e.field),lA(e.direction))}function lB(e){return e instanceof sd?lU(e):e instanceof sh?lF(e):ty()}function lF(e){let t=e.getFilters().map(e=>lB(e));return 1===t.length?t[0]:{compositeFilter:{op:lR(e.op),filters:t}}}function lU(e){if("=="===e.op){if(iX(e.value))return{unaryFilter:{field:lP(e.field),op:"IS_NAN"}};else if(iY(e.value))return{unaryFilter:{field:lP(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(iX(e.value))return{unaryFilter:{field:lP(e.field),op:"IS_NOT_NAN"}};else if(iY(e.value))return{unaryFilter:{field:lP(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lP(e.field),op:lk(e.op),value:e.value}}}function lV(e){switch(e.unaryFilter.op){case"IS_NAN":let t=lM(e.unaryFilter.field);return sd.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=lM(e.unaryFilter.field);return sd.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=lM(e.unaryFilter.field);return sd.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=lM(e.unaryFilter.field);return sd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ty()}}function lz(e){return sd.create(lM(e.fieldFilter.field),lD(e.fieldFilter.op),e.fieldFilter.value)}function lq(e){return sh.create(e.compositeFilter.filters.map(e=>lw(e)),lN(e.compositeFilter.op))}function l$(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function lG(e){return new nK((e.fieldPaths||[]).map(e=>tG.fromServerFormat(e)))}function lW(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class lK{constructor(e,t,r,n,i=tU.min(),s=tU.min(),a=nY.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new lK(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lK(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lK(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lK(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class lH{constructor(e){this.remoteSerializer=e}}function lQ(e,t){let r;if(t.document)r=o4(e.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=tW.fromSegments(t.noDocument.path),n=l0(t.noDocument.readTime);r=i9.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return ty();let e=tW.fromSegments(t.unknownDocument.path),n=l0(t.unknownDocument.version);r=i9.newUnknownDocument(e,n)}return t.readTime&&r.setReadTime(lJ(t.readTime)),r}function lY(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:lX(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=o6(e.remoteSerializer,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:lZ(t.version)};else{if(!t.isUnknownDocument())return ty();n.unknownDocument={path:r.path.toArray(),version:lZ(t.version)}}return n}function lX(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function lJ(e){let t=new tF(e[0],e[1]);return tU.fromTimestamp(t)}function lZ(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function l0(e){let t=new tF(e.seconds,e.nanoseconds);return tU.fromTimestamp(t)}function l1(e,t,r){let n=r.baseMutations.map(t=>lr(e.remoteSerializer,t)),i=r.mutations.map(t=>lr(e.remoteSerializer,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}function l2(e,t){let r=(t.baseMutations||[]).map(t=>ln(e.remoteSerializer,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform&&(r.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let n=t.mutations.map(t=>ln(e.remoteSerializer,t)),i=tF.fromMillis(t.localWriteTimeMs);return new oa(t.batchId,i,r,n)}function l3(e){let t,r=l0(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?l0(e.lastLimboFreeSnapshotVersion):tU.min();return new lK(t=l4(e.query)?ld(e.query):lg(e.query),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,n,nY.fromBase64String(e.resumeToken))}function l6(e,t){let r,n=lZ(t.snapshotVersion),i=lZ(t.lastLimboFreeSnapshotVersion);r=sB(t.target)?lc(e.remoteSerializer,t.target):lh(e.remoteSerializer,t.target).queryTarget;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:sM(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function l4(e){return void 0!==e.documents}function l5(e){return{id:e.bundleId,createTime:l0(e.createTime),version:e.version}}function l8(e){return{bundleId:e.id,createTime:lZ(oW(e.createTime)),version:e.version}}function l7(e){return{name:e.name,query:ue(e.bundledQuery),readTime:l0(e.readTime)}}function l9(e){return{name:e.name,readTime:lZ(oW(e.readTime)),bundledQuery:e.bundledQuery}}function ue(e){let t=lp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?s7(t,t.limit,"L"):t}function ut(e){return{name:e.name,query:ue(e.bundledQuery),readTime:oW(e.readTime)}}function ur(e){return{id:e.id,version:e.version,createTime:oW(e.createTime)}}function un(e,t){return new ol(t.largestBatchId,ln(e.remoteSerializer,t.overlayMutation))}function ui(e,t,r){let[n,i,s]=us(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:lr(e.remoteSerializer,r.mutation)}}function us(e,t){let r=t.path.lastSegment();return[e,rx(t.path.popLast()),r]}function ua(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function uo(e,t){let r=t?new t3(t.sequenceNumber,new t5(l0(t.readTime),new tW(rI(t.documentKey)),t.largestBatchId)):t3.empty(),n=e.fields.map(([e,t])=>new t1(tG.fromServerFormat(e),t));return new tQ(e.indexId,e.collectionGroup,n,r)}function ul(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:lZ(n.readTime),documentKey:rx(n.documentKey.path),largestBatchId:n.largestBatchId}}class uu{getBundleMetadata(e,t){return uc(e).get(t).next(e=>{if(e)return l5(e)})}saveBundleMetadata(e,t){return uc(e).put(l8(t))}getNamedQuery(e,t){return ud(e).get(t).next(e=>{if(e)return l7(e)})}saveNamedQuery(e,t){return ud(e).put(l9(t))}}function uc(e){return nP(e,nt)}function ud(e){return nP(e,nn)}class uh{constructor(e,t){this.serializer=e,this.userId=t}static forUser(e,t){return new uh(e,t.uid||"")}getOverlay(e,t){return uf(e).get(us(this.userId,t)).next(e=>e?un(this.serializer,e):null)}getOverlays(e,t){let r=ab();return rt.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let s=new ol(t,i);n.push(this.saveOverlay(e,s))}),rt.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(rx(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(uf(e).deleteAll(nb,n))}),rt.waitFor(i)}getOverlaysForCollection(e,t,r){let n=ab(),i=rx(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return uf(e).loadAll(nb,s).next(e=>{for(let t of e){let e=un(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i,s=ab(),a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uf(e).iterate({index:nw,range:a},(e,t,r)=>{let a=un(this.serializer,t);s.size()<n||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):r.done()}).next(()=>s)}saveOverlay(e,t){return uf(e).put(ui(this.serializer,this.userId,t))}}function uf(e){return nP(e,ny)}class up{globalsStore(e){return nP(e,nE)}getSessionToken(e){return this.globalsStore(e).get("sessionToken").next(e=>{let t=null==e?void 0:e.value;return t?nY.fromUint8Array(t):nY.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.globalsStore(e).put({name:"sessionToken",value:t.toUint8Array()})}}let ug=5,um=10,uy=13,uv=15,ub=20,uS=25,uw=30,uT=37,uE=45,uC=50,ux=53,u_=55,uO=60,uI=2;class uA{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,ug);else if("booleanValue"in e)this.writeValueTypeLabel(t,um),t.writeNumber(+!!e.booleanValue);else if("integerValue"in e)this.writeValueTypeLabel(t,uv),t.writeNumber(n1(e.integerValue));else if("doubleValue"in e){let r=n1(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,uy):(this.writeValueTypeLabel(t,uv),il(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,ub),"string"==typeof r&&(r=n0(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,uw),t.writeBytes(n2(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,uE),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?i1(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):iZ(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):ty()}writeIndexString(e,t){this.writeValueTypeLabel(t,uS),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};for(let e of(this.writeValueTypeLabel(t,u_),Object.keys(r)))this.writeIndexString(e,t),this.writeIndexValueAux(r[e],t)}writeIndexVector(e,t){var r,n;let i=e.fields||{};this.writeValueTypeLabel(t,ux);let s=ig,a=(null==(n=null==(r=i[s].arrayValue)?void 0:r.values)?void 0:n.length)||0;this.writeValueTypeLabel(t,uv),t.writeNumber(n1(a)),this.writeIndexString(s,t),this.writeIndexValueAux(i[s],t)}writeIndexArray(e,t){let r=e.values||[];for(let e of(this.writeValueTypeLabel(t,uC),r))this.writeIndexValueAux(e,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,uT),tW.fromName(e).path.forEach(e=>{this.writeValueTypeLabel(t,uO),this.writeUnlabeledIndexString(e,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(uI)}}uA.INSTANCE=new uA;let uk="\uD800",uR="\uDBFF",uD=0,uN=255,uP=1,uM=255,uj=255,uL=0,uB=64,uF=8,uU=1024;function uV(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}function uz(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function uq(e){let t=0;for(let r=0;r<8;++r){let n=uz(255&e[r]);if(t+=n,8!==n)break}return t}function u$(e){return Math.ceil((uB-uq(e))/uF)}class uG{constructor(){this.buffer=new Uint8Array(uU),this.position=0}writeBytesAscending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteAscending(r.value),r=t.next();this.writeSeparatorAscending()}writeBytesDescending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteDescending(r.value),r=t.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteAscending(e);else if(e<2048)this.writeByteAscending(960|e>>>6),this.writeByteAscending(128|63&e);else if(t<uk||uR<t)this.writeByteAscending(480|e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e);else{let e=t.codePointAt(0);this.writeByteAscending(240|e>>>18),this.writeByteAscending(128|63&e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteDescending(e);else if(e<2048)this.writeByteDescending(960|e>>>6),this.writeByteDescending(128|63&e);else if(t<uk||uR<t)this.writeByteDescending(480|e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e);else{let e=t.codePointAt(0);this.writeByteDescending(240|e>>>18),this.writeByteDescending(128|63&e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e)}}this.writeSeparatorDescending()}writeNumberAscending(e){let t=this.toOrderedBits(e),r=u$(t);this.ensureAvailable(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}writeNumberDescending(e){let t=this.toOrderedBits(e),r=u$(t);this.ensureAvailable(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}writeInfinityAscending(){this.writeEscapedByteAscending(uM),this.writeEscapedByteAscending(uj)}writeInfinityDescending(){this.writeEscapedByteDescending(uM),this.writeEscapedByteDescending(uj)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let t=uV(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=255*!!r;return t}writeByteAscending(e){let t=255&e;t===uD?(this.writeEscapedByteAscending(uD),this.writeEscapedByteAscending(uN)):t===uM?(this.writeEscapedByteAscending(uM),this.writeEscapedByteAscending(uL)):this.writeEscapedByteAscending(t)}writeByteDescending(e){let t=255&e;t===uD?(this.writeEscapedByteDescending(uD),this.writeEscapedByteDescending(uN)):t===uM?(this.writeEscapedByteDescending(uM),this.writeEscapedByteDescending(uL)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(uD),this.writeEscapedByteAscending(uP)}writeSeparatorDescending(){this.writeEscapedByteDescending(uD),this.writeEscapedByteDescending(uP)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class uW{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class uK{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class uH{constructor(){this.orderedCode=new uG,this.ascending=new uW(this.orderedCode),this.descending=new uK(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return 0===e?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}class uQ{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}successor(){let e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new uQ(this.indexId,this.documentKey,this.arrayValue,r)}}function uY(e,t){let r=e.indexId-t.indexId;return 0!==r||0!==(r=uX(e.arrayValue,t.arrayValue))||0!==(r=uX(e.directionalValue,t.directionalValue))?r:tW.comparator(e.documentKey,t.documentKey)}function uX(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}class uJ{constructor(e){for(let t of(this.inequalityFilters=new nq((e,t)=>tG.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[],e.filters)){let e=t;e.isInequality()?this.inequalityFilters=this.inequalityFilters.add(e):this.equalityFilters.push(e)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(e){if(tv(e.collectionGroup===this.collectionId),this.hasMultipleInequality)return!1;let t=tY(e);if(void 0!==t&&!this.hasMatchingEqualityFilter(t))return!1;let r=tX(e),n=new Set,i=0,s=0;for(;i<r.length;++i)if(this.hasMatchingEqualityFilter(r[i]))n=n.add(r[i].fieldPath.canonicalString());else break;if(i===r.length)return!0;if(this.inequalityFilters.size>0){let e=this.inequalityFilters.getIterator().getNext();if(!n.has(e.field.canonicalString())){let t=r[i];if(!this.matchesFilter(e,t)||!this.matchesOrderBy(this.orderBys[s++],t))return!1}++i}for(;i<r.length;++i){let e=r[i];if(s>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[s++],e))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let e=new nq(tG.comparator),t=[];for(let r of this.equalityFilters)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new t1(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new t1(r.field,0))}for(let r of this.orderBys)!r.field.isKeyField()&&(e.has(r.field)||(e=e.add(r.field),t.push(new t1(r.field,+("asc"!==r.dir)))));return new tQ(tQ.UNKNOWN_ID,this.collectionId,t,t3.empty())}hasMatchingEqualityFilter(e){for(let t of this.equalityFilters)if(this.matchesFilter(t,e))return!0;return!1}matchesFilter(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}matchesOrderBy(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function uZ(e){var t,r;if(tv(e instanceof sd||e instanceof sh),e instanceof sd)if(!(e instanceof sk))return e;else{let n=(null==(r=null==(t=e.value.arrayValue)?void 0:t.values)?void 0:r.map(t=>sd.create(e.field,"==",t)))||[];return sh.create(n,"or")}let n=e.filters.map(e=>uZ(e));return sh.create(n,e.op)}function u0(e){if(0===e.getFilters().length)return[];let t=u4(uZ(e));return(tv(u3(t)),u1(t)||u2(t))?[t]:t.getFilters()}function u1(e){return e instanceof sd}function u2(e){return e instanceof sh&&sg(e)}function u3(e){return u1(e)||u2(e)||u6(e)}function u6(e){if(e instanceof sh&&sp(e)){for(let t of e.getFilters())if(!u1(t)&&!u2(t))return!1;return!0}return!1}function u4(e){if(tv(e instanceof sd||e instanceof sh),e instanceof sd)return e;if(1===e.filters.length)return u4(e.filters[0]);let t=e.filters.map(e=>u4(e)),r=sh.create(t,e.op);return u3(r=ce(r))?r:(tv(r instanceof sh),tv(sf(r)),tv(r.filters.length>1),r.filters.reduce((e,t)=>u5(e,t)))}function u5(e,t){let r;return tv(e instanceof sd||e instanceof sh),tv(t instanceof sd||t instanceof sh),ce(r=e instanceof sd?t instanceof sd?u8(e,t):u9(e,t):t instanceof sd?u9(t,e):u7(e,t))}function u8(e,t){return sh.create([e,t],"and")}function u7(e,t){if(tv(e.filters.length>0&&t.filters.length>0),sf(e)&&sf(t))return sw(e,t.getFilters());let r=sp(e)?e:t,n=sp(e)?t:e,i=r.filters.map(e=>u5(e,n));return sh.create(i,"or")}function u9(e,t){if(sf(t))return sw(t,e.getFilters());{let r=t.filters.map(t=>u5(e,t));return sh.create(r,"or")}}function ce(e){if(tv(e instanceof sd||e instanceof sh),e instanceof sd)return e;let t=e.getFilters();if(1===t.length)return ce(t[0]);if(sm(e))return e;let r=t.map(e=>ce(e)),n=[];return(r.forEach(t=>{t instanceof sd?n.push(t):t instanceof sh&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length)?n[0]:sh.create(n,e.op)}class ct{constructor(){this.collectionParentIndex=new cr}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),rt.resolve()}getCollectionParents(e,t){return rt.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return rt.resolve()}deleteFieldIndex(e,t){return rt.resolve()}deleteAllFieldIndexes(e){return rt.resolve()}createTargetIndexes(e,t){return rt.resolve()}getDocumentsMatchingTarget(e,t){return rt.resolve(null)}getIndexType(e,t){return rt.resolve(0)}getFieldIndexes(e,t){return rt.resolve([])}getNextCollectionGroupToUpdate(e){return rt.resolve(null)}getMinOffset(e,t){return rt.resolve(t5.min())}getMinOffsetFromCollectionGroup(e,t){return rt.resolve(t5.min())}updateCollectionGroup(e,t,r){return rt.resolve()}updateIndexEntries(e,t){return rt.resolve()}}class cr{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new nq(tq.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new nq(tq.comparator)).toArray()}}let cn="IndexedDbIndexManager",ci=new Uint8Array(0);class cs{constructor(e,t){this.databaseId=t,this.collectionParentsCache=new cr,this.targetToDnfSubTargets=new ah(e=>sM(e),(e,t)=>sL(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.collectionParentsCache.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(t)});let i={collectionId:r,parent:rx(n)};return ca(e).put(i)}return rt.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[tj(t),""],!1,!0);return ca(e).loadAll(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(rI(n.parent))}return r})}addFieldIndex(e,t){let r=cl(e),n=ua(t);delete n.indexId;let i=r.add(n);if(!t.indexState)return i.next();{let r=cu(e);return i.next(e=>{r.put(ul(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}}deleteFieldIndex(e,t){let r=cl(e),n=cu(e),i=co(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=cl(e),r=co(e),n=cu(e);return t.deleteAll().next(()=>r.deleteAll()).next(()=>n.deleteAll())}createTargetIndexes(e,t){return rt.forEach(this.getSubTargets(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new uJ(t).buildTargetIndex();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=co(e),n=!0,i=new Map;return rt.forEach(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(!n)return rt.resolve(null);{let e=ax(),n=[];return rt.forEach(i,(i,s)=>{tf(cn,`Using index ${t0(i)} to execute ${sM(t)}`);let a=sU(s,i),o=sV(s,i),l=sz(s,i),u=sq(s,i),c=this.encodeBound(i,s,l),d=this.encodeBound(i,s,u),h=this.encodeValues(i,s,o),f=this.generateIndexRanges(i.indexId,a,c,l.inclusive,d,u.inclusive,h);return rt.forEach(f,i=>r.loadFirst(i,t.limit).next(t=>{t.forEach(t=>{let r=tW.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}})}getSubTargets(e){let t=this.targetToDnfSubTargets.get(e);return t||(t=0===e.filters.length?[e]:u0(sh.create(e.filters,"and")).map(t=>sP(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,t)),t}generateIndexRanges(e,t,r,n,i,s,a){let o=(null!=t?t.length:1)*Math.max(r.length,i.length),l=o/(null!=t?t.length:1),u=[];for(let c=0;c<o;++c){let o=t?this.encodeSingleElement(t[c/l]):ci,d=this.generateLowerBound(e,o,r[c%l],n),h=this.generateUpperBound(e,o,i[c%l],s),f=a.map(t=>this.generateLowerBound(e,o,t,!0));u.push(...this.createRange(d,h,f))}return u}generateLowerBound(e,t,r,n){let i=new uQ(e,tW.empty(),t,r);return n?i:i.successor()}generateUpperBound(e,t,r,n){let i=new uQ(e,tW.empty(),t,r);return n?i.successor():i}getFieldIndex(e,t){let r=new uJ(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.servedByIndex(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.getSubTargets(t);return rt.forEach(n,t=>this.getFieldIndex(e,t).next(e=>{e?0!==r&&e.fields.length<sW(t)&&(r=1):r=0})).next(()=>sK(t)&&n.length>1&&2===r?1:r)}encodeDirectionalElements(e,t){let r=new uH;for(let n of tX(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.forKind(n.kind);uA.INSTANCE.writeIndexValue(e,i)}return r.encodedBytes()}encodeSingleElement(e){let t=new uH;return uA.INSTANCE.writeIndexValue(e,t.forKind(0)),t.encodedBytes()}encodeDirectionalKey(e,t){let r=new uH;return uA.INSTANCE.writeIndexValue(iG(this.databaseId,t),r.forKind(tJ(e))),r.encodedBytes()}encodeValues(e,t,r){if(null===r)return[];let n=[];n.push(new uH);let i=0;for(let s of tX(e)){let e=r[i++];for(let r of n)if(this.isInFilter(t,s.fieldPath)&&iQ(e))n=this.expandIndexValues(n,s,e);else{let t=r.forKind(s.kind);uA.INSTANCE.writeIndexValue(e,t)}}return this.getEncodedBytes(n)}encodeBound(e,t,r){return this.encodeValues(e,t,r.position)}getEncodedBytes(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].encodedBytes();return t}expandIndexValues(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new uH;n.seed(r.encodedBytes()),uA.INSTANCE.writeIndexValue(e,n.forKind(t.kind)),i.push(n)}return i}isInFilter(e,t){return!!e.filters.find(e=>e instanceof sd&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=cl(e),n=cu(e);return(t?r.loadAll(no,IDBKeyRange.bound(t,t)):r.loadAll()).next(e=>{let t=[];return rt.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{t.push(uo(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:tP(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=cl(e),i=cu(e);return this.getNextSequenceNumber(e).next(e=>n.loadAll(no,IDBKeyRange.bound(t,t)).next(t=>rt.forEach(t,t=>i.put(ul(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return rt.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?rt.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),rt.forEach(i,r=>this.getExistingIndexEntries(e,t,r).next(t=>{let i=this.computeIndexEntries(n,r);return t.isEqual(i)?rt.resolve():this.updateEntries(e,n,r,t,i)}))))})}addIndexEntry(e,t,r,n){return co(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(r,t.key),documentKey:t.key.path.toArray()})}deleteIndexEntry(e,t,r,n){return co(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.encodeDirectionalKey(r,t.key),t.key.path.toArray()])}getExistingIndexEntries(e,t,r){let n=co(e),i=new nq(uY);return n.iterate({index:ng,range:IDBKeyRange.only([r.indexId,this.uid,this.encodeDirectionalKey(r,t)])},(e,n)=>{i=i.add(new uQ(r.indexId,t,n.arrayValue,n.directionalValue))}).next(()=>i)}computeIndexEntries(e,t){let r=new nq(uY),n=this.encodeDirectionalElements(t,e);if(null==n)return r;let i=tY(t);if(null!=i){let s=e.data.field(i.fieldPath);if(iQ(s))for(let i of s.arrayValue.values||[])r=r.add(new uQ(t.indexId,e.key,this.encodeSingleElement(i),n))}else r=r.add(new uQ(t.indexId,e.key,ci,n));return r}updateEntries(e,t,r,n,i){tf(cn,"Updating index entries for document '%s'",t.key);let s=[];return nG(n,i,uY,n=>{s.push(this.addIndexEntry(e,t,r,n))},n=>{s.push(this.deleteIndexEntry(e,t,r,n))}),rt.waitFor(s)}getNextSequenceNumber(e){let t=1;return cu(e).iterate({index:nd,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>uY(e,t)).filter((e,t,r)=>!t||0!==uY(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=uY(i,e),s=uY(i,t);if(0===r)n[0]=e.successor();else if(r>0&&s<0)n.push(i),n.push(i.successor());else if(s>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.isRangeMatchable(n[e],n[e+1]))return[];let t=[n[e].indexId,this.uid,n[e].arrayValue,n[e].directionalValue,ci,[]],r=[n[e+1].indexId,this.uid,n[e+1].arrayValue,n[e+1].directionalValue,ci,[]];i.push(IDBKeyRange.bound(t,r))}return i}isRangeMatchable(e,t){return uY(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cc)}getMinOffset(e,t){return rt.mapArray(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>e||ty())).next(cc)}}function ca(e){return nP(e,r8)}function co(e){return nP(e,nf)}function cl(e){return nP(e,ns)}function cu(e){return nP(e,nu)}function cc(e){tv(0!==e.length);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>t8(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new t5(t.readTime,t.documentKey,r)}function cd(e,t,r){let n=e.store(rP),i=e.store(rz),s=[],a=IDBKeyRange.only(r.batchId),o=0,l=n.iterate({range:a},(e,t,r)=>(o++,r.delete()));s.push(l.next(()=>{tv(1===o)}));let u=[];for(let e of r.mutations){let n=rU(t,e.key.path,r.batchId);s.push(i.delete(n)),u.push(e.key)}return rt.waitFor(s).next(()=>u)}function ch(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else if(e.noDocument)t=e.noDocument;else throw ty();return JSON.stringify(t).length}class cf{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.documentKeysByBatchId={}}static forUser(e,t,r,n){return tv(""!==e.uid),new cf(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).iterate({index:rj,range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=cy(e),s=cm(e);return s.add({}).next(a=>{tv("number"==typeof a);let o=new oa(a,t,r,n),l=l1(this.serializer,this.userId,o),u=[],c=new nq((e,t)=>tP(e.canonicalString(),t.canonicalString()));for(let e of n){let t=rU(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,rV))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=o.keys()}),rt.waitFor(u).next(()=>o)})}lookupMutationBatch(e,t){return cm(e).get(t).next(e=>e?(tv(e.userId===this.userId),l2(this.serializer,e)):null)}lookupMutationKeys(e,t){return this.documentKeysByBatchId[t]?rt.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(e=>{if(!e)return null;{let r=e.keys();return this.documentKeysByBatchId[t]=r,r}})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return cm(e).iterate({index:rj,range:n},(e,t,n)=>{t.userId===this.userId&&(tv(t.batchId>=r),i=l2(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=ia;return cm(e).iterate({index:rj,range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,ia],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).loadAll(rj,t).next(e=>e.map(e=>l2(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=rF(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return cy(e).iterate({range:n},(r,n,s)=>{let[a,o,l]=r,u=rI(o);return a===this.userId&&t.path.isEqual(u)?cm(e).get(l).next(e=>{if(!e)throw ty();tv(e.userId===this.userId),i.push(l2(this.serializer,e))}):void s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nq(tP),n=[];return t.forEach(t=>{let i=rF(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=cy(e).iterate({range:s},(e,n,i)=>{let[s,a,o]=e,l=rI(a);if(s!==this.userId||!t.path.isEqual(l))return void i.done();r=r.add(o)});n.push(a)}),rt.waitFor(n).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=rF(this.userId,r),s=IDBKeyRange.lowerBound(i),a=new nq(tP);return cy(e).iterate({range:s},(e,t,i)=>{let[s,o,l]=e,u=rI(o);if(s!==this.userId||!r.isPrefixOf(u))return void i.done();u.length===n&&(a=a.add(l))}).next(()=>this.lookupMutationBatches(e,a))}lookupMutationBatches(e,t){let r=[],n=[];return t.forEach(t=>{n.push(cm(e).get(t).next(e=>{if(null===e)throw ty();tv(e.userId===this.userId),r.push(l2(this.serializer,e))}))}),rt.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return cd(e.simpleDbTransaction,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(t.batchId)}),rt.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return rt.resolve();let r=IDBKeyRange.lowerBound(rB(this.userId)),n=[];return cy(e).iterate({range:r},(e,t,r)=>{if(e[0]!==this.userId)return void r.done();{let t=rI(e[1]);n.push(t)}}).next(()=>{tv(0===n.length)})})}containsKey(e,t){return cp(e,this.userId,t)}getMutationQueueMetadata(e){return cv(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:ia,lastStreamToken:""})}}function cp(e,t,r){let n=rF(t,r.path),i=n[1],s=IDBKeyRange.lowerBound(n),a=!1;return cy(e).iterate({range:s,keysOnly:!0},(e,r,n)=>{let[s,o,l]=e;s===t&&o===i&&(a=!0),n.done()}).next(()=>a)}function cg(e,t){let r=!1;return cv(e).iterateSerial(n=>cp(e,n,t).next(e=>(e&&(r=!0),rt.resolve(!e)))).next(()=>r)}function cm(e){return nP(e,rP)}function cy(e){return nP(e,rz)}function cv(e){return nP(e,rD)}let cb=2;class cS{constructor(e){this.lastId=e}next(){return this.lastId+=cb,this.lastId}static forTargetCache(){return new cS(2-cb)}static forSyncEngine(){return new cS(1-cb)}}class cw{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.retrieveMetadata(e).next(t=>{let r=new cS(t.highestTargetId);return t.highestTargetId=r.next(),this.saveMetadata(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(e=>tU.fromTimestamp(new tF(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.retrieveMetadata(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.saveMetadata(e,n)))}addTargetData(e,t){return this.saveTargetData(e,t).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(t,r),this.saveMetadata(e,r))))}updateTargetData(e,t){return this.saveTargetData(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cT(e).delete(t.targetId)).next(()=>this.retrieveMetadata(e)).next(t=>(tv(t.targetCount>0),t.targetCount-=1,this.saveMetadata(e,t)))}removeTargets(e,t,r){let n=0,i=[];return cT(e).iterate((s,a)=>{let o=l3(a);o.sequenceNumber<=t&&null===r.get(o.targetId)&&(n++,i.push(this.removeTargetData(e,o)))}).next(()=>rt.waitFor(i)).next(()=>n)}forEachTarget(e,t){return cT(e).iterate((e,r)=>{t(l3(r))})}retrieveMetadata(e){return cE(e).get(r4).next(e=>(tv(null!==e),e))}saveMetadata(e,t){return cE(e).put(r4,t)}saveTargetData(e,t){return cT(e).put(l6(this.serializer,t))}updateMetadataFromTargetData(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(e=>e.targetCount)}getTargetData(e,t){let r=sM(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return cT(e).iterate({range:n,index:rZ},(e,r,n)=>{let s=l3(r);sL(t,s.target)&&(i=s,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=cC(e);return t.forEach(t=>{let s=rx(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))}),rt.waitFor(n)}removeMatchingKeys(e,t,r){let n=cC(e);return rt.forEach(t,t=>{let i=rx(t.path);return rt.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=cC(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=cC(e),i=ax();return n.iterate({range:r,keysOnly:!0},(e,t,r)=>{let n=new tW(rI(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=rx(t.path),n=IDBKeyRange.bound([r],[tj(r)],!1,!0),i=0;return cC(e).iterate({index:r3,keysOnly:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}getTargetDataForTarget(e,t){return cT(e).get(t).next(e=>e?l3(e):null)}}function cT(e){return nP(e,rX)}function cE(e){return nP(e,r5)}function cC(e){return nP(e,r1)}let cx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},c_=-1,cO=0x2800000;class cI{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cI(e,cI.DEFAULT_COLLECTION_PERCENTILE,cI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}cI.DEFAULT_COLLECTION_PERCENTILE=10,cI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cI.DEFAULT=new cI(cO,cI.DEFAULT_COLLECTION_PERCENTILE,cI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cI.DISABLED=new cI(c_,0,0);let cA="LruGarbageCollector",ck=1048576,cR=6e4,cD=3e5;function cN([e,t],[r,n]){let i=tP(e,r);return 0===i?tP(t,n):i}class cP{constructor(e){this.maxElements=e,this.buffer=new nq(cN),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>cN(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==c_&&this.scheduleGC(cR)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(e){tf(cA,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ru(e)?tf(cA,"Ignoring IndexedDB error during garbage collection: ",e):await re(e)}await this.scheduleGC(cD)})}}class cj{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return rt.resolve(rS.INVALID);let r=new cP(t);return this.delegate.forEachTarget(e,e=>r.addElement(e.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,e=>r.addElement(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===c_?(tf("LruGarbageCollector","Garbage collection skipped; disabled"),rt.resolve(cx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tf("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cx):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,n,i,a,o,l,u,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(tf("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,a=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,o=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(u=Date.now(),th()<=s.DEBUG&&tf("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-c}ms
	Determined least recently used ${n} in ${o-a}ms
	Removed ${i} targets in ${l-o}ms
	Removed ${e} documents in ${u-l}ms
Total Duration: ${u-c}ms`),rt.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}function cL(e,t){return new cj(e,t)}class cB{constructor(e,t){this.db=e,this.garbageCollector=cL(this,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}forEachOrphanedDocumentSequenceNumber(e,t){return this.forEachOrphanedDocument(e,(e,r)=>t(r))}addReference(e,t,r){return cV(e,r)}removeReference(e,t,r){return cV(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cV(e,t)}isPinned(e,t){return cg(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.forEachOrphanedDocument(e,(s,a)=>{if(a<=t){let t=this.isPinned(e,s).next(t=>{if(!t)return i++,r.getEntry(e,s).next(()=>(r.removeEntry(s,tU.min()),cC(e).delete(cF(s))))});n.push(t)}}).next(()=>rt.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cV(e,t)}forEachOrphanedDocument(e,t){let r,n=cC(e),i=rS.INVALID;return n.iterate({index:r3},([e,n],{path:s,sequenceNumber:a})=>{0===e?(i!==rS.INVALID&&t(new tW(rI(r)),i),i=a,r=s):i=rS.INVALID}).next(()=>{i!==rS.INVALID&&t(new tW(rI(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cF(e){return[0,rx(e.path)]}function cU(e,t){return{targetId:0,path:rx(e.path),sequenceNumber:t}}function cV(e,t){return cC(e).put(cU(t,e.currentSequenceNumber))}class cz{constructor(){this.changes=new ah(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,i9.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?rt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cK(e).put(r)}removeEntry(e,t,r){return cK(e).delete(cQ(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.setMetadata(e,r)))}getEntry(e,t){let r=i9.newInvalidDocument(t);return cK(e).iterate({index:rG,range:IDBKeyRange.only(cH(t))},(e,n)=>{r=this.maybeDecodeDocument(t,n)}).next(()=>r)}getSizedEntry(e,t){let r={size:0,document:i9.newInvalidDocument(t)};return cK(e).iterate({index:rG,range:IDBKeyRange.only(cH(t))},(e,n)=>{r={document:this.maybeDecodeDocument(t,n),size:ch(n)}}).next(()=>r)}getEntries(e,t){let r=ap();return this.forEachDbEntry(e,t,(e,t)=>{let n=this.maybeDecodeDocument(e,t);r=r.insert(e,n)}).next(()=>r)}getSizedEntries(e,t){let r=ap(),n=new nF(tW.comparator);return this.forEachDbEntry(e,t,(e,t)=>{let i=this.maybeDecodeDocument(e,t);r=r.insert(e,i),n=n.insert(e,ch(t))}).next(()=>({documents:r,sizeMap:n}))}forEachDbEntry(e,t,r){if(t.isEmpty())return rt.resolve();let n=new nq(cX);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(cH(n.first()),cH(n.last())),s=n.getIterator(),a=s.getNext();return cK(e).iterate({index:rG,range:i},(e,t,n)=>{let i=tW.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&0>cX(a,i);)r(a,null),a=s.getNext();a&&a.isEqual(i)&&(r(a,t),a=s.hasNext()?s.getNext():null),a?n.skip(cH(a)):n.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,n,i){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),lX(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cK(e).loadAll(IDBKeyRange.bound(a,o,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let r=ap();for(let i of e){let e=this.maybeDecodeDocument(tW.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(ai(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=ap(),s=cY(t,r),a=cY(t,t5.max());return cK(e).iterate({index:rK,range:IDBKeyRange.bound(s,a,!0)},(e,t,r)=>{let s=this.maybeDecodeDocument(tW.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new cG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return cW(e).get(rY).next(e=>(tv(!!e),e))}setMetadata(e,t){return cW(e).put(rY,t)}maybeDecodeDocument(e,t){if(t){let e=lQ(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(tU.min())))return e}return i9.newInvalidDocument(e)}}function c$(e){return new cq(e)}class cG extends cz{constructor(e,t){super(),this.documentCache=e,this.trackRemovals=t,this.documentStates=new ah(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new nq((e,t)=>tP(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let a=this.documentStates.get(i);if(t.push(this.documentCache.removeEntry(e,i,a.readTime)),s.isValidDocument()){let o=lY(this.documentCache.serializer,s);n=n.add(i.path.popLast());let l=ch(o);r+=l-a.size,t.push(this.documentCache.addEntry(e,i,o))}else if(r-=a.size,this.trackRemovals){let r=lY(this.documentCache.serializer,s.convertToNoDocument(tU.min()));t.push(this.documentCache.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.documentCache.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.documentCache.updateMetadata(e,r)),rt.waitFor(t)}getFromCache(e,t){return this.documentCache.getSizedEntry(e,t).next(e=>(this.documentStates.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.documentCache.getSizedEntries(e,t).next(({documents:e,sizeMap:t})=>(t.forEach((t,r)=>{this.documentStates.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function cW(e){return nP(e,rQ)}function cK(e){return nP(e,rq)}function cH(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cQ(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],lX(t),r[r.length-1]]}function cY(e,t){let r=t.documentKey.path.toArray();return[e,lX(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function cX(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=tP(r[e],n[e]))return i;return(i=tP(r.length,n.length))||(i=tP(r[r.length-2],n[n.length-2]))?i:tP(r[r.length-1],n[n.length-1])}let cJ=17;class cZ{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class c0{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&a0(r.mutation,e,nK.empty(),tF.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ax()).next(()=>t))}getLocalViewOfDocuments(e,t,r=ax()){let n=ab();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=am();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=ab();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ax()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=ap(),s=aw(),a=ay();return t.forEach((e,t)=>{let a=r.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof a5)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),a0(a.mutation,t,a.mutation.getFieldMask(),tF.now())):s.set(t.key,nK.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return a.set(e,new cZ(t,null!=(r=s.get(e))?r:null))}),a))}recalculateAndSaveOverlays(e,t){let r=aw(),n=new nF((e,t)=>e-t),i=ax();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=r.get(e)||nK.empty();a=i.applyToLocalView(s,a),r.set(e,a);let o=(n.get(i.batchId)||ax()).add(e);n=n.insert(i.batchId,o)})}).next(()=>{let s=[],a=n.getReverseIterator();for(;a.hasNext();){let n=a.getNext(),o=n.key,l=n.value,u=aS();l.forEach(e=>{if(!i.has(e)){let n=aJ(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return rt.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return s0(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):s1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):rt.resolve(ab()),a=tK,o=i;return s.next(t=>rt.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),i.get(t))?rt.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)})).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,ax())).next(e=>({batchId:a,changes:av(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tW(t)).next(e=>{let t=am();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,s=am();return this.indexManager.getCollectionParents(e,i).next(a=>rt.forEach(a,a=>{let o=sX(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,r,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,i9.newInvalidDocument(n)))});let r=am();return e.forEach((e,n)=>{let s=i.get(e);void 0!==s&&a0(s.mutation,n,nK.empty(),tF.now()),ai(t,n)&&(r=r.insert(e,n))}),r})}}class c1{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return rt.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,ur(t)),rt.resolve()}getNamedQuery(e,t){return rt.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,ut(t)),rt.resolve()}}class c2{constructor(){this.overlays=new nF(tW.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return rt.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ab();return rt.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.saveOverlay(e,t,n)}),rt.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.overlayByBatchId.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.overlayByBatchId.delete(r)),rt.resolve()}getOverlaysForCollection(e,t,r){let n=ab(),i=t.length+1,s=new tW(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return rt.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new nF((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=ab(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=ab(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return rt.resolve(a)}saveOverlay(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.overlayByBatchId.get(n.largestBatchId).delete(r.key);this.overlayByBatchId.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new ol(t,r));let i=this.overlayByBatchId.get(t);void 0===i&&(i=ax(),this.overlayByBatchId.set(t,i)),this.overlayByBatchId.set(t,i.add(r.key))}}class c3{constructor(){this.sessionToken=nY.EMPTY_BYTE_STRING}getSessionToken(e){return rt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,rt.resolve()}}class c6{constructor(){this.refsByKey=new nq(c4.compareByKey),this.refsByTarget=new nq(c4.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new c4(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.removeRef(new c4(e,t))}removeReferences(e,t){e.forEach(e=>this.removeReference(e,t))}removeReferencesForId(e){let t=new tW(new tq([])),r=new c4(t,e),n=new c4(t,e+1),i=[];return this.refsByTarget.forEachInRange([r,n],e=>{this.removeRef(e),i.push(e.key)}),i}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new tW(new tq([])),r=new c4(t,e),n=new c4(t,e+1),i=ax();return this.refsByTarget.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new c4(e,0),r=this.refsByKey.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class c4{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return tW.comparator(e.key,t.key)||tP(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return tP(e.targetOrBatchId,t.targetOrBatchId)||tW.comparator(e.key,t.key)}}class c5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new nq(c4.compareByKey)}checkEmpty(e){return rt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new oa(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new c4(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return rt.resolve(s)}lookupMutationBatch(e,t){return rt.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=this.indexOfBatchId(r),i=n<0?0:n;return rt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(0===this.mutationQueue.length?ia:this.nextBatchId-1)}getAllMutationBatches(e){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new c4(t,0),n=new c4(t,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([r,n],e=>{let t=this.findMutationBatch(e.targetOrBatchId);i.push(t)}),rt.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nq(tP);return t.forEach(e=>{let t=new c4(e,0),n=new c4(e,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([t,n],e=>{r=r.add(e.targetOrBatchId)})}),rt.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;tW.isDocumentKey(i)||(i=i.child(""));let s=new c4(new tW(i),0),a=new nq(tP);return this.batchesByDocumentKey.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.targetOrBatchId)),!0)},s),rt.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(e=>{let r=this.findMutationBatch(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){tv(0===this.indexOfExistingBatchId(t.batchId,"removed")),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return rt.forEach(t.mutations,n=>{let i=new c4(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new c4(t,0),n=this.batchesByDocumentKey.firstAfterOrEqual(r);return rt.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,rt.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}function c8(){return new nF(tW.comparator)}class c7{constructor(e){this.sizer=e,this.docs=c8(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return rt.resolve(r?r.document.mutableCopy():i9.newInvalidDocument(t))}getEntries(e,t){let r=ap();return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():i9.newInvalidDocument(e))}),rt.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=ap(),s=t.path,a=new tW(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;!(e.path.length>s.length+1||0>=t8(t4(a),r))&&(n.has(a.key)||ai(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return rt.resolve(i)}getAllFromCollectionGroup(e,t,r,n){ty()}forEachDocumentKey(e,t){return rt.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new de(this)}getSize(e){return rt.resolve(this.size)}}function c9(e){return new c7(e)}class de extends cz{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.documentCache.addEntry(e,n)):this.documentCache.removeEntry(r)}),rt.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}}class dt{constructor(e){this.persistence=e,this.targets=new ah(e=>sM(e),sL),this.lastRemoteSnapshotVersion=tU.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new c6,this.targetCount=0,this.targetIdGenerator=cS.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((e,r)=>t(r)),rt.resolve()}getLastRemoteSnapshotVersion(e){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return rt.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),rt.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new cS(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,rt.resolve()}updateTargetData(e,t){return this.saveTargetData(t),rt.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,rt.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.targets.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.targets.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),rt.waitFor(i).next(()=>n)}getTargetCount(e){return rt.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return rt.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),rt.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),rt.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),rt.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return rt.resolve(r)}containsKey(e,t){return rt.resolve(this.references.containsKey(t))}}let dr="MemoryPersistence";class dn{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new rS(0),this._started=!1,this._started=!0,this.globalsCache=new c3,this.referenceDelegate=e(this),this.targetCache=new dt(this);let r=e=>this.referenceDelegate.documentSize(e);this.indexManager=new ct,this.remoteDocumentCache=c9(r),this.serializer=new lH(t),this.bundleCache=new c1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new c2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new c5(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){tf(dr,"Starting transaction:",e);let n=new di(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(n).next(e=>this.referenceDelegate.onTransactionCommitted(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}mutationQueuesContainKey(e,t){return rt.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}}class di extends t9{constructor(e){super(),this.currentSequenceNumber=e}}class ds{constructor(e){this.persistence=e,this.localViewReferences=new c6,this._orphanedDocuments=null}static factory(e){return new ds(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw ty()}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),rt.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),rt.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),rt.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(e=>this.orphanedDocuments.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.orphanedDocuments.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.orphanedDocuments,r=>{let n=tW.fromPath(r);return this.isReferenced(e,n).next(e=>{e||t.removeEntry(n,tU.min())})}).next(()=>(this._orphanedDocuments=null,t.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(e=>{e?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return rt.or([()=>rt.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}}class da{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new ah(e=>rx(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=cL(this,t)}static factory(e,t){return new da(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return rt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return rt.forEach(this.orphanedSequenceNumbers,(r,n)=>this.isPinned(e,r,n).next(e=>e?rt.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.forEachDocumentKey(e,n=>this.isPinned(e,n,t).next(e=>{e||(r++,i.removeEntry(n,tU.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),rt.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),rt.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),rt.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),rt.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=iz(e.data.value)),t}isPinned(e,t,r){return rt.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.orphanedSequenceNumbers.get(t);return rt.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class dl{constructor(e){this.serializer=e}createOrUpgrade(e,t,r,n){let i=new ri("createOrUpgrade",t);r<1&&n>=1&&(dc(e),dd(e),dm(e),df(e));let s=rt.resolve();return r<3&&n>=3&&(0!==r&&(dy(e),dm(e)),s=s.next(()=>db(i))),r<4&&n>=4&&(0!==r&&(s=s.next(()=>dh(e,i))),s=s.next(()=>{dS(e)})),r<5&&n>=5&&(s=s.next(()=>this.removeAcknowledgedMutations(i))),r<6&&n>=6&&(s=s.next(()=>(dg(e),this.addDocumentGlobal(i)))),r<7&&n>=7&&(s=s.next(()=>this.ensureSequenceNumbers(i))),r<8&&n>=8&&(s=s.next(()=>this.createCollectionParentIndex(e,i))),r<9&&n>=9&&(s=s.next(()=>{dv(e)})),r<10&&n>=10&&(s=s.next(()=>this.rewriteCanonicalIds(i))),r<11&&n>=11&&(s=s.next(()=>{dw(e),dT(e)})),r<12&&n>=12&&(s=s.next(()=>{dC(e)})),r<13&&n>=13&&(s=s.next(()=>dp(e)).next(()=>this.rewriteRemoteDocumentCache(e,i)).next(()=>e.deleteObjectStore(rA))),r<14&&n>=14&&(s=s.next(()=>this.runOverlayMigration(e,i))),r<15&&n>=15&&(s=s.next(()=>dE(e))),r<16&&n>=16&&(s=s.next(()=>{t.objectStore(nu).clear()}).next(()=>{t.objectStore(nf).clear()})),r<17&&n>=17&&(s=s.next(()=>{dx(e)})),s}addDocumentGlobal(e){let t=0;return e.store(rA).iterate((e,r)=>{t+=ch(r)}).next(()=>{let r={byteSize:t};return e.store(rQ).put(rY,r)})}removeAcknowledgedMutations(e){let t=e.store(rD),r=e.store(rP);return t.loadAll().next(t=>rt.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,ia],[t.userId,t.lastAcknowledgedBatchId]);return r.loadAll(rj,n).next(r=>rt.forEach(r,r=>{tv(r.userId===t.userId);let n=l2(this.serializer,r);return cd(e,t.userId,n).next(()=>{})}))}))}ensureSequenceNumbers(e){let t=e.store(r1),r=e.store(rA);return e.store(r5).get(r4).next(e=>{let n=r=>t.put({targetId:0,path:rx(r),sequenceNumber:e.highestListenSequenceNumber}),i=[];return r.iterate((e,r)=>{let s=new tq(e),a=du(s);i.push(t.get(a).next(e=>e?rt.resolve():n(s)))}).next(()=>rt.waitFor(i))})}createCollectionParentIndex(e,t){e.createObjectStore(r8,{keyPath:r7});let r=t.store(r8),n=new cr,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:rx(n)})}};return t.store(rA).iterate({keysOnly:!0},(e,t)=>i(new tq(e).popLast())).next(()=>t.store(rz).iterate({keysOnly:!0},([e,t,r],n)=>i(rI(t).popLast())))}rewriteCanonicalIds(e){let t=e.store(rX);return t.iterate((e,r)=>{let n=l3(r),i=l6(this.serializer,n);return t.put(i)})}rewriteRemoteDocumentCache(e,t){let r=t.store(rA),n=[];return r.iterate((e,r)=>{let i=t.store(rq),s=d_(r).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(a))}).next(()=>rt.waitFor(n))}runOverlayMigration(e,t){let r=t.store(rP),n=c$(this.serializer),i=new dn(ds.factory,this.serializer.remoteSerializer);return r.loadAll().next(e=>{let r=new Map;return e.forEach(e=>{var t;let n=null!=(t=r.get(e.userId))?t:ax();l2(this.serializer,e).keys().forEach(e=>n=n.add(e)),r.set(e.userId,n)}),rt.forEach(r,(e,r)=>{let s=new to(r),a=uh.forUser(this.serializer,s),o=i.getIndexManager(s);return new c0(n,cf.forUser(s,this.serializer,o,i.referenceDelegate),a,o).recalculateAndSaveOverlaysForDocumentKeys(new nN(t,rS.INVALID),e).next()})})}}function du(e){return[0,rx(e)]}function dc(e){e.createObjectStore(rk)}function dd(e){e.createObjectStore(rD,{keyPath:rN}),e.createObjectStore(rP,{keyPath:rM,autoIncrement:!0}).createIndex(rj,rL,{unique:!0}),e.createObjectStore(rz)}function dh(e,t){return t.store(rP).loadAll().next(r=>{e.deleteObjectStore(rP),e.createObjectStore(rP,{keyPath:rM,autoIncrement:!0}).createIndex(rj,rL,{unique:!0});let n=t.store(rP),i=r.map(e=>n.put(e));return rt.waitFor(i)})}function df(e){e.createObjectStore(rA)}function dp(e){let t=e.createObjectStore(rq,{keyPath:r$});t.createIndex(rG,rW),t.createIndex(rK,rH)}function dg(e){e.createObjectStore(rQ)}function dm(e){e.createObjectStore(r1,{keyPath:r2}).createIndex(r3,r6,{unique:!0}),e.createObjectStore(rX,{keyPath:rJ}).createIndex(rZ,r0,{unique:!0}),e.createObjectStore(r5)}function dy(e){e.deleteObjectStore(r1),e.deleteObjectStore(rX),e.deleteObjectStore(r5)}function dv(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function db(e){let t=e.store(r5),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tU.min().toTimestamp(),targetCount:0};return t.put(r4,r)}function dS(e){e.createObjectStore(r9,{keyPath:ne})}function dw(e){e.createObjectStore(nt,{keyPath:nr})}function dT(e){e.createObjectStore(nn,{keyPath:ni})}function dE(e){e.createObjectStore(ns,{keyPath:na,autoIncrement:!0}).createIndex(no,nl,{unique:!1}),e.createObjectStore(nu,{keyPath:nc}).createIndex(nd,nh,{unique:!1}),e.createObjectStore(nf,{keyPath:np}).createIndex(ng,nm,{unique:!1})}function dC(e){let t=e.createObjectStore(ny,{keyPath:nv});t.createIndex(nb,nS,{unique:!1}),t.createIndex(nw,nT,{unique:!1})}function dx(e){e.createObjectStore(nE,{keyPath:nC})}function d_(e){return e.document?new tW(tq.fromString(e.document.name).popFirst(5)):e.noDocument?tW.fromSegments(e.noDocument.path):e.unknownDocument?tW.fromSegments(e.unknownDocument.path):ty()}let dO="IndexedDbPersistence",dI=18e5,dA=5e3,dk=4e3,dR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",dD="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",dN="firestore_zombie",dP="main";class dM{constructor(e,t,r,n,i,s,a,o,l,u,c=cJ){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.queue=i,this.window=s,this.document=a,this.sequenceNumberSyncer=l,this.forceOwningTab=u,this.schemaVersion=c,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=e=>Promise.resolve(),!dM.isAvailable())throw new tw(tS.UNIMPLEMENTED,dD);this.referenceDelegate=new cB(this,n),this.dbName=t+dP,this.serializer=new lH(o),this.simpleDb=new rs(this.dbName,this.schemaVersion,new dl(this.serializer)),this.globalsCache=new up,this.targetCache=new cw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=c$(this.serializer),this.bundleCache=new uu,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===u&&tp(dO,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tw(tS.FAILED_PRECONDITION,dR);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new rS(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setVersionChangeListener(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dL(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(e=>{e||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(t=>this.isPrimary&&!t?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):!!t&&this.acquireOrExtendPrimaryLease(e).next(()=>!0))).catch(e=>{if(ru(e))return tf(dO,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tf(dO,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return dj(e).get(rR).next(e=>rt.resolve(this.isLocalClient(e)))}removeClientMetadata(e){return dL(e).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,dI)){this.lastGarbageCollectionTime=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=nP(e,r9);return t.loadAll().next(e=>{let r=this.filterActiveClients(e,dI),n=e.filter(e=>-1===r.indexOf(e));return rt.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.webStorage)for(let t of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(t.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",dk,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return!!e&&e.ownerId===this.clientId}canActAsPrimary(e){return this.forceOwningTab?rt.resolve(!0):dj(e).get(rR).next(t=>{if(null!==t&&this.isWithinAge(t.leaseTimestampMs,dA)&&!this.isClientZombied(t.ownerId)){if(this.isLocalClient(t)&&this.networkEnabled)return!0;if(!this.isLocalClient(t)){if(!t.allowTabSynchronization)throw new tw(tS.FAILED_PRECONDITION,dR);return!1}}return!!this.networkEnabled&&!!this.inForeground||dL(e).loadAll().next(e=>void 0===this.filterActiveClients(e,dA).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&tf(dO,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[rk,r9],e=>{let t=new nN(e,rS.INVALID);return this.releasePrimaryLeaseIfHeld(t).next(()=>this.removeClientMetadata(t))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(e,t){return e.filter(e=>this.isWithinAge(e.updateTimeMs,t)&&!this.isClientZombied(e.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>dL(e).loadAll().next(e=>this.filterActiveClients(e,dI).map(e=>e.clientId)))}get started(){return this._started}getGlobalsCache(){return this.globalsCache}getMutationQueue(e,t){return cf.forUser(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cs(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return uh.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){let n;tf(dO,"Starting transaction:",e);let i="readonly"===t?"readonly":"readwrite",s=nD(this.schemaVersion);return this.simpleDb.runTransaction(e,i,s,i=>(n=new nN(i,this.listenSequence?this.listenSequence.next():rS.INVALID),"readwrite-primary"===t)?this.verifyPrimaryLease(n).next(e=>!!e||this.canActAsPrimary(n)).next(t=>{if(!t)throw tp(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new tw(tS.FAILED_PRECONDITION,t7);return r(n)}).next(e=>this.acquireOrExtendPrimaryLease(n).next(()=>e)):this.verifyAllowTabSynchronization(n).next(()=>r(n))).then(e=>(n.raiseOnCommittedEvent(),e))}verifyAllowTabSynchronization(e){return dj(e).get(rR).next(e=>{if(null!==e&&this.isWithinAge(e.leaseTimestampMs,dA)&&!this.isClientZombied(e.ownerId)&&!this.isLocalClient(e)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!e.allowTabSynchronization))throw new tw(tS.FAILED_PRECONDITION,dR)})}acquireOrExtendPrimaryLease(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dj(e).put(rR,t)}static isAvailable(){return rs.isAvailable()}releasePrimaryLeaseIfHeld(e){let t=dj(e);return t.get(rR).next(e=>this.isLocalClient(e)?(tf(dO,"Releasing primary lease."),t.delete(rR)):rt.resolve())}isWithinAge(e,t){let r=Date.now(),n=r-t,i=r;return!(e<n)&&(!(e>i)||(tp(`Detected an update time that is in the future: ${e} > ${i}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;"function"==typeof(null==(e=this.window)?void 0:e.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let e=/(?:Version|Mobile)\/1[456]/;N()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var t;try{let r=(null==(t=this.webStorage)?void 0:t.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return tf(dO,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return tp(dO,"Failed to get zombied client id.",e),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){tp("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}}zombiedClientLocalStorageKey(e){return`${dN}_${this.persistenceKey}_${e}`}}function dj(e){return nP(e,rk)}function dL(e){return nP(e,r9)}function dB(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}function dF(e,t,r,n,i){t=[...t],(e=[...e]).sort(r),t.sort(r);let s=e.length,a=t.length,o=0,l=0;for(;o<a&&l<s;){let s=r(e[l],t[o]);s<0?i(e[l++]):s>0?n(t[o++]):(o++,l++)}for(;o<a;)n(t[o++]);for(;l<s;)i(e[l++])}function dU(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}let dV="LocalStore",dz=3e8;class dq{constructor(e,t,r,n){this.persistence=e,this.queryEngine=t,this.serializer=n,this.targetDataByTarget=new nF(tP),this.targetIdByTarget=new ah(e=>sM(e),sL),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c0(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}}function d$(e,t,r,n){return new dq(e,t,r,n)}async function dG(e,t){let r=tb(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next(i=>(n=i,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{let i=[],s=[],a=ax();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return r.localDocuments.getDocuments(e,a).next(e=>({affectedDocuments:e,removedBatchIds:i,addedBatchIds:s}))})})}function dW(e,t){let r,n,i=tb(e),s=tF.now(),a=t.reduce((e,t)=>e.add(t.key),ax());return i.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=ap(),l=ax();return i.remoteDocuments.getEntries(e,a).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(e,o)).next(n=>{r=n;let a=[];for(let e of t){let t=a1(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new a5(e.key,t,i7(t.value.mapValue),aQ.exists(!0)))}return i.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{n=t;let s=t.applyToLocalDocumentSet(r,l);return i.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:n.batchId,changes:av(r)}))}function dK(e,t){let r=tb(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});return d7(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,dH(t))).next(()=>r.localDocuments.getDocuments(e,n))})}function dH(e){let t=ax();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}function dQ(e,t){let r=tb(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(tv(null!==t),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))})}function dY(e){let t=tb(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function dX(e){let t=tb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function dJ(e,t){let r=tb(e),n=t.snapshotVersion,i=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=r.targetDataByTarget;let a=[];t.targetChanges.forEach((s,o)=>{let l=i.get(o);if(!l)return;a.push(r.targetCache.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.targetCache.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(nY.EMPTY_BYTE_STRING,tU.min()).withLastLimboFreeSnapshotVersion(tU.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(o,u),d0(l,u,s)&&a.push(r.targetCache.updateTargetData(e,u))});let o=ap(),l=ax();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(dZ(e,s,t.documentUpdates).next(e=>{o=e.changedDocuments,l=e.existenceChangedKeys})),!n.isEqual(tU.min())){let t=r.targetCache.getLastRemoteSnapshotVersion(e).next(t=>r.targetCache.setTargetsMetadata(e,e.currentSequenceNumber,n));a.push(t)}return rt.waitFor(a).next(()=>s.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(r.targetDataByTarget=i,e))}function dZ(e,t,r){let n=ax(),i=ax();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=ap();return r.forEach((r,s)=>{let a=e.get(r);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(tU.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):tf(dV,"Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",s.version)}),{changedDocuments:n,existenceChangedKeys:i}})}function d0(e,t,r){return!!(0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=dz)||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function d1(e,t){let r=tb(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>rt.forEach(t,t=>rt.forEach(t.addedKeys,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>rt.forEach(t.removedKeys,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(ru(e))tf(dV,"Failed to update sequence numbers: "+e);else throw e}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.targetDataByTarget.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.targetDataByTarget=r.targetDataByTarget.insert(t,i)}}}function d2(e,t){let r=tb(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=ia),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function d3(e,t){let r=tb(e);return r.persistence.runTransaction("read document","readonly",e=>r.localDocuments.getDocument(e,t))}function d6(e,t){let r=tb(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.targetCache.getTargetData(e,t).next(i=>i?(n=i,rt.resolve(n)):r.targetCache.allocateTargetId(e).next(i=>(n=new lK(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.targetCache.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.targetDataByTarget.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(e.targetId,e),r.targetIdByTarget.set(t,e.targetId)),e})}function d4(e,t,r){let n=tb(e),i=n.targetIdByTarget.get(r);return void 0!==i?rt.resolve(n.targetDataByTarget.get(i)):n.targetCache.getTargetData(t,r)}async function d5(e,t,r){let n=tb(e),i=n.targetDataByTarget.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(ru(e))tf(dV,`Failed to update sequence numbers for target ${t}: ${e}`);else throw e}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(i.target)}function d8(e,t,r){let n=tb(e),i=tU.min(),s=ax();return n.persistence.runTransaction("Execute query","readwrite",e=>d4(n,e,s3(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(e,t,r?i:tU.min(),r?s:ax())).next(e=>(hi(n,au(t),e),{documents:e,remoteKeys:s})))}function d7(e,t,r,n){let i=r.batch,s=i.keys(),a=rt.resolve();return s.forEach(e=>{a=a.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);tv(null!==s),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}function d9(e,t){let r=tb(e),n=tb(r.mutationQueue);return r.persistence.runTransaction("Lookup mutation documents","readonly",e=>n.lookupMutationKeys(e,t).next(t=>t?r.localDocuments.getDocuments(e,t):rt.resolve(null)))}function he(e,t){tb(tb(e,dq).mutationQueue).removeCachedMutationKeys(t)}function ht(e){return tb(tb(e,dq).persistence).getActiveClients()}function hr(e,t){let r=tb(e),n=tb(r.targetCache),i=r.targetDataByTarget.get(t);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",e=>n.getTargetDataForTarget(e,t).next(e=>e?e.target:null))}function hn(e,t){let r=tb(e),n=r.collectionGroupReadTime.get(t)||tU.min();return r.persistence.runTransaction("Get new document changes","readonly",e=>r.remoteDocuments.getAllFromCollectionGroup(e,t,t6(n,tK),Number.MAX_SAFE_INTEGER)).then(e=>(hi(r,t,e),e))}function hi(e,t,r){let n=e.collectionGroupReadTime.get(t)||tU.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.collectionGroupReadTime.set(t,n)}function hs(e){return s3(sY(tq.fromString(`__bundle__/docs/${e}`)))}async function ha(e,t,r,n){let i=tb(e),s=ax(),a=ap();for(let e of r){let r=t.toDocumentKey(e.metadata.name);e.document&&(s=s.add(r));let n=t.toMutableDocument(e);n.setReadTime(t.toSnapshotVersion(e.metadata.readTime)),a=a.insert(r,n)}let o=i.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=await d6(i,hs(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>dZ(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.targetCache.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.targetCache.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.changedDocuments,t.existenceChangedKeys)).next(()=>t.changedDocuments)))}function ho(e,t){let r=tb(e),n=oW(t.createTime);return r.persistence.runTransaction("hasNewerBundle","readonly",e=>r.bundleCache.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(n)>=0)}function hl(e,t){let r=tb(e);return r.persistence.runTransaction("Save bundle","readwrite",e=>r.bundleCache.saveBundleMetadata(e,t))}function hu(e,t){let r=tb(e);return r.persistence.runTransaction("Get named query","readonly",e=>r.bundleCache.getNamedQuery(e,t))}async function hc(e,t,r=ax()){let n=await d6(e,s3(ue(t.bundledQuery))),i=tb(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{let s=oW(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.bundleCache.saveNamedQuery(e,t);let a=n.withResumeToken(nY.EMPTY_BYTE_STRING,s);return i.targetDataByTarget=i.targetDataByTarget.insert(a.targetId,a),i.targetCache.updateTargetData(e,a).next(()=>i.targetCache.removeMatchingKeysForTargetId(e,n.targetId)).next(()=>i.targetCache.addMatchingKeys(e,r,n.targetId)).next(()=>i.bundleCache.saveNamedQuery(e,t))})}async function hd(e,t){let r=tb(e),n=r.indexManager,i=[];return r.persistence.runTransaction("Configure indexes","readwrite",e=>n.getFieldIndexes(e).next(r=>dF(r,t,tZ,t=>{i.push(n.addFieldIndex(e,t))},t=>{i.push(n.deleteFieldIndex(e,t))})).next(()=>rt.waitFor(i)))}function hh(e,t){tb(e).queryEngine.indexAutoCreationEnabled=t}function hf(e){let t=tb(e),r=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>r.deleteAllFieldIndexes(e))}class hp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}let hg=100;function hm(){return N()?8:ra(R())>0?6:4}class hy{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=hg,this.relativeIndexReadCostPerDocument=hm()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.performQueryUsingIndex(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.performQueryUsingRemoteKeys(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new hp;return this.executeFullCollectionScan(e,t,r).next(n=>{if(i.result=n,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,r,n.size)})}).next(()=>i.result)}createCacheIndexes(e,t,r,n){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(th()<=s.DEBUG&&tf("QueryEngine","SDK will not create cache indexes for query:",an(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),rt.resolve()):(th()<=s.DEBUG&&tf("QueryEngine","Query:",an(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*n)?(th()<=s.DEBUG&&tf("QueryEngine","The SDK decides to create cache indexes for query:",an(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,s3(t))):rt.resolve()}performQueryUsingIndex(e,t){if(sJ(t))return rt.resolve(null);let r=s3(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=s3(t=s7(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=ax(...n);return this.localDocumentsView.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.applyQuery(t,n);return this.needsRefill(t,s,i,r.readTime)?this.performQueryUsingIndex(e,s7(t,null,"F")):this.appendRemainingResults(e,s,t,r)}))})))}performQueryUsingRemoteKeys(e,t,r,n){return sJ(t)||n.isEqual(tU.min())?rt.resolve(null):this.localDocumentsView.getDocuments(e,r).next(i=>{let a=this.applyQuery(t,i);return this.needsRefill(t,a,r,n)?rt.resolve(null):(th()<=s.DEBUG&&tf("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),an(t)),this.appendRemainingResults(e,a,t,t6(n,tK)).next(e=>e))})}applyQuery(e,t){let r=new nq(ac(e));return t.forEach((t,n)=>{ai(e,n)&&(r=r.add(n))}),r}needsRefill(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}executeFullCollectionScan(e,t,r){return th()<=s.DEBUG&&tf("QueryEngine","Using full collection scan to execute query:",an(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,t5.min(),r)}appendRemainingResults(e,t,r,n){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}let hv="firestore_clients";function hb(e,t){return`${hv}_${e}_${t}`}let hS="firestore_mutations";function hw(e,t,r){let n=`${hS}_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}let hT="firestore_targets";function hE(e,t){return`${hT}_${e}_${t}`}let hC="firestore_online_state";function hx(e){return`${hC}_${e}`}let h_="firestore_bundle_loaded_v2";function hO(e){return`${h_}_${e}`}let hI="firestore_sequence_number";function hA(e){return`${hI}_${e}`}let hk="SharedClientState";class hR{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static fromWebStorageEntry(e,t,r){let n,i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return(s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(n=new tw(i.error.code,i.error.message)),s)?new hR(e,t,i.state,n):(tp(hk,`Failed to parse mutation state for ID '${t}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hD{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fromWebStorageEntry(e,t){let r,n=JSON.parse(t),i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return(i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(r=new tw(n.error.code,n.error.message)),i)?new hD(e,n.state,r):(tp(hk,`Failed to parse target state for ID '${e}': ${t}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hN{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fromWebStorageEntry(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=aO();for(let e=0;n&&e<r.activeTargetIds.length;++e)n=iu(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new hN(e,i):(tp(hk,`Failed to parse client data for instance '${e}': ${t}`),null)}}class hP{constructor(e,t){this.clientId=e,this.onlineState=t}static fromWebStorageEntry(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new hP(t.clientId,t.onlineState):(tp(hk,`Failed to parse online state: ${e}`),null)}}class hM{constructor(){this.activeTargetIds=aO()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class hj{constructor(e,t,r,n,i){this.window=e,this.queue=t,this.persistenceKey=r,this.localClientId=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new nF(tP),this.started=!1,this.earlyEvents=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.localClientStorageKey=hb(this.persistenceKey,this.localClientId),this.sequenceNumberKey=hA(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new hM),this.clientStateKeyRe=RegExp(`^${hv}_${s}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${hS}_${s}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${hT}_${s}_(\\d+)$`),this.onlineStateKey=hx(this.persistenceKey),this.bundleLoadedKey=hO(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(e){return!!(e&&e.localStorage)}async start(){for(let e of(await this.syncEngine.getActiveClients())){if(e===this.localClientId)continue;let t=this.getItem(hb(this.persistenceKey,e));if(t){let r=hN.fromWebStorageEntry(e,t);r&&(this.activeClients=this.activeClients.insert(r.clientId,r))}}this.persistClientState();let e=this.storage.getItem(this.onlineStateKey);if(e){let t=this.fromWebStorageOnlineState(e);t&&this.handleOnlineStateEvent(t)}for(let e of this.earlyEvents)this.handleWebStorageEvent(e);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(e){let t=!1;return this.activeClients.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.persistMutationState(e,"pending")}updateMutationState(e,t,r){this.persistMutationState(e,t,r),this.removeMutationState(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(hE(this.persistenceKey,e));if(t){let n=hD.fromWebStorageEntry(e,t);n&&(r=n.state)}}return t&&this.localClientState.addQueryTarget(e),this.persistClientState(),r}removeLocalQueryTarget(e){this.localClientState.removeQueryTarget(e),this.persistClientState()}isLocalQueryTarget(e){return this.localClientState.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hE(this.persistenceKey,e))}updateQueryState(e,t,r){this.persistQueryTargetState(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.removeMutationState(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.persistOnlineState(e)}notifyBundleLoaded(e){this.persistBundleLoadedState(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return tf(hk,"READ",e,t),t}setItem(e,t){tf(hk,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){tf(hk,"REMOVE",e),this.storage.removeItem(e)}handleWebStorageEvent(e){let t=e;if(t.storageArea===this.storage){if(tf(hk,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void tp("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueRetryable(async()=>{if(!this.started)return void this.earlyEvents.push(t);if(null!==t.key){if(this.clientStateKeyRe.test(t.key))if(null!=t.newValue){let e=this.fromWebStorageClientState(t.key,t.newValue);if(e)return this.handleClientStateEvent(e.clientId,e)}else{let e=this.fromWebStorageClientStateKey(t.key);return this.handleClientStateEvent(e,null)}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageMutationMetadata(t.key,t.newValue);if(e)return this.handleMutationBatchEvent(e)}}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue);if(e)return this.handleQueryTargetEvent(e)}}else if(t.key===this.onlineStateKey){if(null!==t.newValue){let e=this.fromWebStorageOnlineState(t.newValue);if(e)return this.handleOnlineStateEvent(e)}}else if(t.key===this.sequenceNumberKey){let e=hL(t.newValue);e!==rS.INVALID&&this.sequenceNumberHandler(e)}else if(t.key===this.bundleLoadedKey){let e=this.fromWebStoreBundleLoadedState(t.newValue);await Promise.all(e.map(e=>this.syncEngine.synchronizeWithChangedDocuments(e)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(e,t,r){let n=new hR(this.currentUser,e,t,r),i=hw(this.persistenceKey,this.currentUser,e);this.setItem(i,n.toWebStorageJSON())}removeMutationState(e){let t=hw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}persistOnlineState(e){let t={clientId:this.localClientId,onlineState:e};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))}persistQueryTargetState(e,t,r){let n=hE(this.persistenceKey,e),i=new hD(e,t,r);this.setItem(n,i.toWebStorageJSON())}persistBundleLoadedState(e){let t=JSON.stringify(Array.from(e));this.setItem(this.bundleLoadedKey,t)}fromWebStorageClientStateKey(e){let t=this.clientStateKeyRe.exec(e);return t?t[1]:null}fromWebStorageClientState(e,t){let r=this.fromWebStorageClientStateKey(e);return hN.fromWebStorageEntry(r,t)}fromWebStorageMutationMetadata(e,t){let r=this.mutationBatchKeyRe.exec(e),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return hR.fromWebStorageEntry(new to(i),n,t)}fromWebStorageQueryTargetMetadata(e,t){let r=Number(this.queryTargetKeyRe.exec(e)[1]);return hD.fromWebStorageEntry(r,t)}fromWebStorageOnlineState(e){return hP.fromWebStorageEntry(e)}fromWebStoreBundleLoadedState(e){return JSON.parse(e)}async handleMutationBatchEvent(e){return e.user.uid!==this.currentUser.uid?void tf(hk,`Ignoring mutation for non-active user ${e.user.uid}`):this.syncEngine.applyBatchState(e.batchId,e.state,e.error)}handleQueryTargetEvent(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)}handleClientStateEvent(e,t){let r=t?this.activeClients.insert(e,t):this.activeClients.remove(e),n=this.extractActiveQueryTargets(this.activeClients),i=this.extractActiveQueryTargets(r),s=[],a=[];return i.forEach(e=>{n.has(e)||s.push(e)}),n.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.applyActiveTargetsChange(s,a).then(()=>{this.activeClients=r})}handleOnlineStateEvent(e){this.activeClients.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}extractActiveQueryTargets(e){let t=aO();return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}function hL(e){let t=rS.INVALID;if(null!=e)try{let r=JSON.parse(e);tv("number"==typeof r),t=r}catch(e){tp(hk,"Failed to read sequence number from WebStorage",e)}return t}class hB{constructor(){this.localState=new hM,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new hM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hF{addCallback(e){}shutdown(){}}class hU{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}}let hV=null;function hz(){return 0x10000000+Math.round(0x80000000*Math.random())}function hq(){return null===hV?hV=hz():hV++,"0x"+hV.toString(16)}function h$(e){return new Promise((t,r)=>{e((e,n)=>{e?r(e):t(n)})})}let hG="1.9.1",hW="GrpcConnection",hK=`gl-node/${process.versions.node} fire/${tl} grpc/${hG}`;function hH(e,t,r,n){tv(null===t||"OAuth"===t.type);let i=new tn.OS;return t&&t.headers.forEach((e,t)=>i.set(t,e)),r&&r.headers.forEach((e,t)=>i.set(t,e)),n&&i.set("X-Firebase-GMPID",n),i.set("X-Goog-Api-Client",hK),i.set("Google-Cloud-Resource-Prefix",e),i.set("x-goog-request-params",e),i}class hQ{constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){tf(hW,"Creating Firestore stub.");let e=this.databaseInfo.ssl?tn.z3.createSsl():tn.z3.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,n,i){let s=hq(),a=this.ensureActiveStub(),o=hH(this.databasePath,n,i,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return h$(t=>(tf(hW,`RPC '${e}' ${s} invoked with request:`,r),a[e](l,o,(r,n)=>{r?(tf(hW,`RPC '${e}' ${s} failed with error:`,r),t(new tw(oh(r.code),r.message))):(tf(hW,`RPC '${e}' ${s} completed with response:`,n),t(void 0,n))})))}invokeStreamingRPC(e,t,r,n,i,s){let a=hq(),o=[],l=new tT;tf(hW,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let u=this.ensureActiveStub(),c=hH(this.databasePath,n,i,this.databaseInfo.appId),d=Object.assign(Object.assign({},r),{database:this.databasePath}),h=u[e](d,c),f=!1;return h.on("data",t=>{tf(hW,`RPC ${e} ${a} received result:`,t),o.push(t),void 0!==s&&o.length===s&&(f=!0,l.resolve(o))}),h.on("end",()=>{tf(hW,`RPC '${e}' ${a} completed.`),f||(f=!0,l.resolve(o))}),h.on("error",t=>{tf(hW,`RPC '${e}' ${a} failed with error:`,t);let r=oh(t.code);l.reject(new tw(r,t.message))}),l.promise}openStream(e,t,r){let n=hq(),i=this.ensureActiveStub(),s=hH(this.databasePath,t,r,this.databaseInfo.appId),a=i[e](s),o=!1,l=e=>{o||(o=!0,u.callOnClose(e),a.end())},u=new hU({sendFn:t=>{if(o)tf(hW,`RPC '${e}' stream ${n} not sending because gRPC stream is closed:`,t);else{tf(hW,`RPC '${e}' stream ${n} sending:`,t);try{a.write(t)}catch(e){throw tp("Failure sending:",t),tp("Error:",e),e}}},closeFn:()=>{tf(hW,`RPC '${e}' stream ${n} closed locally via close().`),l()}}),c=!1;return a.on("data",t=>{o||(tf(hW,`RPC '${e}' stream ${n} received:`,t),c||(u.callOnConnected(),c=!0),u.callOnMessage(t))}),a.on("end",()=>{tf(hW,`RPC '${e}' stream ${n} ended.`),l()}),a.on("error",t=>{o||(tg(hW,`RPC '${e}' stream ${n} error. Code:`,t.code,"Message:",t.message),l(new tw(oh(t.code),t.message)))}),tf(hW,`Opening RPC '${e}' stream ${n} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}}let hY={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:0x44f2530,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var hX={nested:hY},hJ=Object.freeze({__proto__:null,nested:hY,default:hX});let hZ={longs:String,enums:String,defaults:!0,oneofs:!1};function h0(){let e=ti.rS(hJ,hZ);return tn.ex(e)}function h1(e){return new hQ(h0(),e)}function h2(){return new hF}function h3(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function h6(){return null}function h4(e){return new oL(e,!1)}let h5="ExponentialBackoff",h8=1e3,h7=1.5,h9=6e4;class fe{constructor(e,t,r=h8,n=h7,i=h9){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=n,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),n=Math.max(0,t-r);n>0&&tf(h5,`Backing off for ${n} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,n,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}let ft="PersistentStream",fr=6e4,fn=1e4;class fi{constructor(e,t,r,n,i,s,a,o){this.queue=e,this.idleTimerId=r,this.healthTimerId=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new fe(e,t)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(this.responseCount=0,4===this.state)return void this.performBackoff();this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,fr,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==e?this.backoff.reset():t&&t.code===tS.RESOURCE_EXHAUSTED?(tp(t.toString()),tp("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===tS.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.closeCount===t&&this.startStream(e,r)},t=>{e(()=>{let e=new tw(tS.UNKNOWN,"Fetching auth token failed: "+t.message);return this.handleStreamClose(e)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,fn,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(e=>{r(()=>this.handleStreamClose(e))}),this.stream.onMessage(e=>{r(()=>1==++this.responseCount?this.onFirst(e):this.onNext(e))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return tf(ft,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(tf(ft,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fs extends fi{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onFirst(e){return this.onNext(e)}onNext(e){this.backoff.reset();let t=o9(this.serializer,e),r=lt(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=o0(this.serializer),t.addTarget=lv(this.serializer,e);let r=lm(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=o0(this.serializer),t.removeTarget=e,this.sendRequest(t)}}class fa extends fi{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return tv(!!e.streamToken),this.lastStreamToken=e.streamToken,tv(!e.writeResults||0===e.writeResults.length),this.listener.onHandshakeComplete()}onNext(e){tv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=lo(e.writeResults,e.commitTime),r=oW(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=o0(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>lr(this.serializer,e))};this.sendRequest(t)}}class fo{}class fl extends fo{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new tw(tS.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,n){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.invokeRPC(e,oH(t,r),n,i,s)).catch(e=>{if("FirebaseError"===e.name)throw e.code===tS.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new tw(tS.UNKNOWN,e.toString())})}invokeStreamingRPC(e,t,r,n,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.invokeStreamingRPC(e,oH(t,r),n,s,a,i)).catch(e=>{if("FirebaseError"===e.name)throw e.code===tS.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new tw(tS.UNKNOWN,e.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}}function fu(e,t,r,n){return new fl(e,t,r,n)}async function fc(e,t){let r=tb(e),n={writes:t.map(e=>lr(r.serializer,e))};await r.invokeRPC("Commit",r.serializer.databaseId,tq.emptyPath(),n)}async function fd(e,t){let r=tb(e),n={documents:t.map(e=>oY(r.serializer,e))},i=await r.invokeStreamingRPC("BatchGetDocuments",r.serializer.databaseId,tq.emptyPath(),n,t.length),s=new Map;i.forEach(e=>{let t=o7(r.serializer,e);s.set(t.key.toString(),t)});let a=[];return t.forEach(e=>{let t=s.get(e.toString());tv(!!t),a.push(t)}),a}async function fh(e,t,r){var n;let i=tb(e),{request:s,aliasMap:a,parent:o}=lf(i.serializer,s6(t),r);i.connection.shouldResourcePathBeIncludedInRequest||delete s.parent;let l=(await i.invokeStreamingRPC("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter(e=>!!e.result);tv(1===l.length);let u=null==(n=l[0].result)?void 0:n.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[a[t]]=u[t],e),{})}function ff(e,t,r){let n=tb(e);return n.verifyInitialized(),new fa(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}function fp(e,t,r){let n=tb(e);return n.verifyInitialized(),new fs(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}let fg="OnlineStateTracker",fm=1,fy=1e4;class fv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",fy,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${fy/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=fm&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${fm} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===e&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(tp(t),this.shouldWarnClientIsOffline=!1):tf(fg,t)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}let fb="RemoteStore",fS=10;class fw{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=i,this.connectivityMonitor.addCallback(e=>{r.enqueueAndForget(async()=>{fP(this)&&(tf(fb,"Restarting streams for network reachability change."),await f0(this))})}),this.onlineStateTracker=new fv(r,n)}}function fT(e,t,r,n,i){return new fw(e,t,r,n,i)}function fE(e){let t=tb(e);return t.offlineCauses.delete(0),fC(t)}async function fC(e){if(fP(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function fx(e){let t=tb(e);t.offlineCauses.add(0),await f_(t),t.onlineStateTracker.set("Offline")}async function f_(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function fO(e){let t=tb(e);tf(fb,"RemoteStore shutting down."),t.offlineCauses.add(5),await f_(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function fI(e,t){let r=tb(e);!r.listenTargets.has(t.targetId)&&(r.listenTargets.set(t.targetId,t),fN(r)?fD(r):f3(r).isOpen()&&fk(r,t))}function fA(e,t){let r=tb(e),n=f3(r);r.listenTargets.delete(t),n.isOpen()&&fR(r,t),0===r.listenTargets.size&&(n.isOpen()?n.markIdle():fP(r)&&r.onlineStateTracker.set("Unknown"))}function fk(e,t){if(e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tU.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}f3(e).watch(t)}function fR(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),f3(e).unwatch(t)}function fD(e){e.watchChangeAggregator=new ok({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null,getDatabaseId:()=>e.datastore.serializer.databaseId}),f3(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function fN(e){return fP(e)&&!f3(e).isStarted()&&e.listenTargets.size>0}function fP(e){return 0===tb(e).offlineCauses.size}function fM(e){e.watchChangeAggregator=void 0}async function fj(e){e.onlineStateTracker.set("Online")}async function fL(e){e.listenTargets.forEach((t,r)=>{fk(e,t)})}async function fB(e,t){fM(e),fN(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),fD(e)):e.onlineStateTracker.set("Unknown")}async function fF(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof oO&&2===t.state&&t.cause){try{await fq(e,t)}catch(r){tf(fb,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await fU(e,r)}return}if(t instanceof ox?e.watchChangeAggregator.handleDocumentChange(t):t instanceof o_?e.watchChangeAggregator.handleExistenceFilter(t):e.watchChangeAggregator.handleTargetChange(t),!r.isEqual(tU.min()))try{let t=await dX(e.localStore);r.compareTo(t)>=0&&await fz(e,r)}catch(t){tf(fb,"Failed to raise snapshot:",t),await fU(e,t)}}async function fU(e,t,r){if(ru(t))e.offlineCauses.add(1),await f_(e),e.onlineStateTracker.set("Offline"),r||(r=()=>dX(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tf(fb,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await fC(e)});else throw t}function fV(e,t){return t().catch(r=>fU(e,r,t))}function fz(e,t){let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.listenTargets.get(n);i&&e.listenTargets.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.listenTargets.get(t);n&&(e.listenTargets.set(t,n.withResumeToken(nY.EMPTY_BYTE_STRING,n.snapshotVersion)),fR(e,t),fk(e,new lK(n.target,t,r,n.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(r)}async function fq(e,t){let r=t.cause;for(let n of t.targetIds)e.listenTargets.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.listenTargets.delete(n),e.watchChangeAggregator.removeTarget(n))}async function f$(e){let t=tb(e),r=f6(t),n=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:ia;for(;fG(t);)try{let e=await d2(t.localStore,n);if(null===e){0===t.writePipeline.length&&r.markIdle();break}n=e.batchId,fW(t,e)}catch(e){await fU(t,e)}fK(t)&&fH(t)}function fG(e){return fP(e)&&e.writePipeline.length<fS}function fW(e,t){e.writePipeline.push(t);let r=f6(e);r.isOpen()&&r.handshakeComplete&&r.writeMutations(t.mutations)}function fK(e){return fP(e)&&!f6(e).isStarted()&&e.writePipeline.length>0}function fH(e){f6(e).start()}async function fQ(e){f6(e).writeHandshake()}async function fY(e){let t=f6(e);for(let r of e.writePipeline)t.writeMutations(r.mutations)}async function fX(e,t,r){let n=e.writePipeline.shift(),i=oo.from(n,t,r);await fV(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await f$(e)}async function fJ(e,t){t&&f6(e).handshakeComplete&&await fZ(e,t),fK(e)&&fH(e)}async function fZ(e,t){if(od(t.code)){let r=e.writePipeline.shift();f6(e).inhibitBackoff(),await fV(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await f$(e)}}async function f0(e){let t=tb(e);t.offlineCauses.add(4),await f_(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await fC(t)}async function f1(e,t){let r=tb(e);r.asyncQueue.verifyOperationInProgress(),tf(fb,"RemoteStore received new credentials");let n=fP(r);r.offlineCauses.add(3),await f_(r),n&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await fC(r)}async function f2(e,t){let r=tb(e);t?(r.offlineCauses.delete(2),await fC(r)):t||(r.offlineCauses.add(2),await f_(r),r.onlineStateTracker.set("Unknown"))}function f3(e){return e.watchStream||(e.watchStream=fp(e.datastore,e.asyncQueue,{onConnected:fj.bind(null,e),onOpen:fL.bind(null,e),onClose:fB.bind(null,e),onWatchChange:fF.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),fN(e)?fD(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),fM(e))})),e.watchStream}function f6(e){return e.writeStream||(e.writeStream=ff(e.datastore,e.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:fQ.bind(null,e),onClose:fJ.bind(null,e),onHandshakeComplete:fY.bind(null,e),onMutationResult:fX.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.writeStream.inhibitBackoff(),await f$(e)):(await e.writeStream.stop(),e.writePipeline.length>0&&(tf(fb,`Stopping write stream with ${e.writePipeline.length} pending writes`),e.writePipeline=[]))})),e.writeStream}let f4="AsyncQueue";class f5{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new tT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let s=new f5(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tw(tS.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f8(e,t){if(tp(f4,`${t}: ${e}`),ru(e))return new tw(tS.UNAVAILABLE,`${t}: ${e}`);throw e}class f7{constructor(e){e?this.comparator=(t,r)=>e(t,r)||tW.comparator(t.key,r.key):this.comparator=(e,t)=>tW.comparator(e.key,t.key),this.keyedMap=am(),this.sortedSet=new nF(this.comparator)}static emptySet(e){return new f7(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof f7)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return(this.forEach(t=>{e.push(t.toString())}),0===e.length)?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new f7;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class f9{constructor(){this.changeMap=new nF(tW.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}0!==e.type&&3===r.type?this.changeMap=this.changeMap.insert(t,e):3===e.type&&1!==r.type?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.changeMap=this.changeMap.remove(t):1===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):ty()}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}}class pe{constructor(e,t,r,n,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new pe(e,t,f7.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!at(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class pt{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}}function pr(){return new pn}class pn{constructor(){this.queries=pi(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){ph(this,new tw(tS.ABORTED,"Firestore shutting down"))}}function pi(){return new ah(e=>ar(e),at)}async function ps(e,t){let r=tb(e),n=3,i=t.query,s=r.queries.get(i);s?!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(n=2):(s=new pt,n=+!t.listensToRemoteStore());try{switch(n){case 0:s.viewSnap=await r.onListen(i,!0);break;case 1:s.viewSnap=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(r){let e=f8(r,`Initialization of query '${an(t.query)}' failed`);t.onError(e);return}r.queries.set(i,s),s.listeners.push(t),t.applyOnlineStateChange(r.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&pf(r)}async function pa(e,t){let r=tb(e),n=t.query,i=3,s=r.queries.get(n);if(s){let e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),0===s.listeners.length?i=+!t.listensToRemoteStore():!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function po(e,t){let r=tb(e),n=!1;for(let e of t){let t=e.query,i=r.queries.get(t);if(i){for(let t of i.listeners)t.onViewSnapshot(e)&&(n=!0);i.viewSnap=e}}n&&pf(r)}function pl(e,t,r){let n=tb(e),i=n.queries.get(t);if(i)for(let e of i.listeners)e.onError(r);n.queries.delete(t)}function pu(e,t){let r=tb(e);r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.applyOnlineStateChange(t)&&(n=!0)}),n&&pf(r)}function pc(e,t){tb(e).snapshotsInSyncListeners.add(t),t.next()}function pd(e,t){tb(e).snapshotsInSyncListeners.delete(t)}function ph(e,t){let r=tb(e),n=r.queries;r.queries=pi(),n.forEach((e,r)=>{for(let e of r.listeners)e.onError(t)})}function pf(e){e.snapshotsInSyncListeners.forEach(e=>{e.next()})}!function(e){e.Default="default",e.Cache="cache"}(u||(u={}));class pp{constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new pe(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache||!this.listensToRemoteStore())return!0;let r="Offline"!==t;return(!this.options.waitForSyncWhenOnline||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return(!!e.syncStateChanged||!!t)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(e){e=pe.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==u.Cache}}class pg{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=n}static fromSnapshot(e,t){let r=ax(),n=ax();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new pg(e,t.fromCache,r,n)}}class pm{constructor(e){this.serializer=e}toDocumentKey(e){return oX(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?o4(this.serializer,e.document,!1):i9.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return oW(e)}}class py{constructor(e,t,r){this.bundleMetadata=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pv(e)}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),!e.payload.documentMetadata.exists&&++t;let r=tq.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let t=new Map,r=new pm(this.serializer);for(let n of e)if(n.metadata.queries){let e=r.toDocumentKey(n.metadata.name);for(let r of n.metadata.queries){let n=(t.get(r)||ax()).add(e);t.set(r,n)}}return t}async complete(){let e=await ha(this.localStore,new pm(this.serializer),this.documents,this.bundleMetadata.id),t=this.getQueryDocumentMapping(this.documents);for(let e of this.queries)await hc(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:e}}}function pv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function pb(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class pS{constructor(e){this.key=e}}class pw{constructor(e){this.key=e}}class pT{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=ax(),this.mutatedKeys=ax(),this.docComparator=ac(e),this.documentSet=new f7(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new f9,n=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,s=n,a=!1,o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=ai(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(r.track({type:3,doc:c}),f=!0):!this.shouldWaitForSyncedDocument(u,c)&&(r.track({type:2,doc:c}),f=!0,(o&&this.docComparator(c,o)>0||l&&0>this.docComparator(c,l))&&(a=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:i}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let s=e.changeSet.getChanges();s.sort((e,t)=>pE(e.type,t.type)||this.docComparator(e.doc,t.doc)),this.applyTargetChange(r),n=null!=n&&n;let a=t&&!n?this.updateLimboDocuments():[],o=+!!(0===this.limboDocuments.size&&this.current&&!n),l=o!==this.syncState;return(this.syncState=o,0!==s.length||l)?{snapshot:new pe(this.query,e.documentSet,i,s,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),limboChanges:a}:{limboChanges:a}}applyOnlineStateChange(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new f9,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations}applyTargetChange(e){e&&(e.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=ax(),this.documentSet.forEach(e=>{this.shouldBeInLimbo(e.key)&&(this.limboDocuments=this.limboDocuments.add(e.key))});let t=[];return e.forEach(e=>{this.limboDocuments.has(e)||t.push(new pw(e))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new pS(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=ax();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return pe.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function pE(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ty()}};return r(e)-r(t)}let pC="SyncEngine";class px{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class p_{constructor(e){this.key=e,this.receivedDocument=!1}}class pO{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.syncEngineListener={},this.queryViewsByQuery=new ah(e=>ar(e),at),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new nF(tW.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new c6,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=cS.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function pI(e,t,r,n,i,s,a){let o=new pO(e,t,r,n,i,s);return a&&(o._isPrimaryClient=!0),o}async function pA(e,t,r=!0){let n,i=gt(e),s=i.queryViewsByQuery.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.computeInitialSnapshot()):n=await pR(i,t,r,!0),n}async function pk(e,t){let r=gt(e);await pR(r,t,!0,!1)}async function pR(e,t,r,n){let i,s=await d6(e.localStore,s3(t)),a=s.targetId,o=e.sharedClientState.addLocalQueryTarget(a,r);return n&&(i=await pD(e,t,a,"current"===o,s.resumeToken)),e.isPrimaryClient&&r&&fI(e.remoteStore,s),i}async function pD(e,t,r,n,i){e.applyDocChanges=(t,r,n)=>pJ(e,t,r,n);let s=await d8(e.localStore,t,!0),a=new pT(t,s.remoteKeys),o=a.computeDocChanges(s.documents),l=oC.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);pH(e,r,u.limboChanges);let c=new px(t,r,a);return e.queryViewsByQuery.set(t,c),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),u.snapshot}async function pN(e,t,r){let n=tb(e),i=n.queryViewsByQuery.get(t),s=n.queriesByTarget.get(i.targetId);if(s.length>1){n.queriesByTarget.set(i.targetId,s.filter(e=>!at(e,t))),n.queryViewsByQuery.delete(t);return}n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await d5(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&fA(n.remoteStore,i.targetId),pW(n,i.targetId)}).catch(re)):(pW(n,i.targetId),await d5(n.localStore,i.targetId,!0))}async function pP(e,t){let r=tb(e),n=r.queryViewsByQuery.get(t),i=r.queriesByTarget.get(n.targetId);r.isPrimaryClient&&1===i.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),fA(r.remoteStore,n.targetId))}async function pM(e,t,r){let n=gr(e);try{let e=await dW(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),p$(n,e.batchId,r),await pX(n,e.changes),await f$(n.remoteStore)}catch(t){let e=f8(t,"Failed to persist write");r.reject(e)}}async function pj(e,t){let r=tb(e);try{let e=await dJ(r.localStore,t);t.targetChanges.forEach((e,t)=>{let n=r.activeLimboResolutionsByTarget.get(t);n&&(tv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.receivedDocument=!0:e.modifiedDocuments.size>0?tv(n.receivedDocument):e.removedDocuments.size>0&&(tv(n.receivedDocument),n.receivedDocument=!1))}),await pX(r,e,t)}catch(e){await re(e)}}function pL(e,t,r){let n=tb(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.queryViewsByQuery.forEach((r,n)=>{let i=n.view.applyOnlineStateChange(t);i.snapshot&&e.push(i.snapshot)}),pu(n.eventManager,t),e.length&&n.syncEngineListener.onWatchChange(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function pB(e,t,r){let n=tb(e);n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.activeLimboResolutionsByTarget.get(t),s=i&&i.key;if(s){let e=new nF(tW.comparator);e=e.insert(s,i9.newNoDocument(s,tU.min()));let r=ax().add(s),i=new oE(tU.min(),new Map,new nF(tP),e,r);await pj(n,i),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(s),n.activeLimboResolutionsByTarget.delete(t),pY(n)}else await d5(n.localStore,t,!1).then(()=>pW(n,t,r)).catch(re)}async function pF(e,t){let r=tb(e),n=t.batch.batchId;try{let e=await dK(r.localStore,t);pG(r,n,null),pz(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await pX(r,e)}catch(e){await re(e)}}async function pU(e,t,r){let n=tb(e);try{let e=await dQ(n.localStore,t);pG(n,t,r),pz(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await pX(n,e)}catch(e){await re(e)}}async function pV(e,t){let r=tb(e);fP(r.remoteStore)||tf(pC,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let e=await dY(r.localStore);if(e===ia)return void t.resolve();let n=r.pendingWritesCallbacks.get(e)||[];n.push(t),r.pendingWritesCallbacks.set(e,n)}catch(r){let e=f8(r,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}}function pz(e,t){(e.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),e.pendingWritesCallbacks.delete(t)}function pq(e,t){e.pendingWritesCallbacks.forEach(e=>{e.forEach(e=>{e.reject(new tw(tS.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function p$(e,t,r){let n=e.mutationUserCallbacks[e.currentUser.toKey()];n||(n=new nF(tP)),n=n.insert(t,r),e.mutationUserCallbacks[e.currentUser.toKey()]=n}function pG(e,t,r){let n=tb(e),i=n.mutationUserCallbacks[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.mutationUserCallbacks[n.currentUser.toKey()]=i}}function pW(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.queriesByTarget.get(t)))e.queryViewsByQuery.delete(n),r&&e.syncEngineListener.onWatchError(n,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(t=>{e.limboDocumentRefs.containsKey(t)||pK(e,t)})}function pK(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);null!==r&&(fA(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),pY(e))}function pH(e,t,r){for(let n of r)n instanceof pS?(e.limboDocumentRefs.addReference(n.key,t),pQ(e,n)):n instanceof pw?(tf(pC,"Document no longer in limbo: "+n.key),e.limboDocumentRefs.removeReference(n.key,t),e.limboDocumentRefs.containsKey(n.key)||pK(e,n.key)):ty()}function pQ(e,t){let r=t.key,n=r.path.canonicalString();e.activeLimboTargetsByKey.get(r)||e.enqueuedLimboResolutions.has(n)||(tf(pC,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(n),pY(e))}function pY(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new tW(tq.fromString(t)),n=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(n,new p_(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,n),fI(e.remoteStore,new lK(s3(sY(r.path)),n,"TargetPurposeLimboResolution",rS.INVALID))}}async function pX(e,t,r){let n=tb(e),i=[],s=[],a=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((e,o)=>{a.push(n.applyDocChanges(o,t,r).then(e=>{var t;if((e||r)&&n.isPrimaryClient){let i=e?!e.fromCache:null==(t=null==r?void 0:r.targetChanges.get(o.targetId))?void 0:t.current;n.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);let t=pg.fromSnapshot(o.targetId,e);s.push(t)}}))}),await Promise.all(a),n.syncEngineListener.onWatchChange(i),await d1(n.localStore,s))}async function pJ(e,t,r,n){let i=t.view.computeDocChanges(r);i.needsRefill&&(i=await d8(e.localStore,t.query,!1).then(({documents:e})=>t.view.computeDocChanges(e,i)));let s=n&&n.targetChanges.get(t.targetId),a=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return pH(e,t.targetId,o.limboChanges),o.snapshot}async function pZ(e,t){let r=tb(e);if(!r.currentUser.isEqual(t)){tf(pC,"User change. New user:",t.toKey());let e=await dG(r.localStore,t);r.currentUser=t,pq(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await pX(r,e.affectedDocuments)}}function p0(e,t){let r=tb(e),n=r.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return ax().add(n.key);{let e=ax(),n=r.queriesByTarget.get(t);if(!n)return e;for(let t of n){let n=r.queryViewsByQuery.get(t);e=e.unionWith(n.view.syncedDocuments)}return e}}async function p1(e,t){let r=tb(e),n=await d8(r.localStore,t.query,!0),i=t.view.synchronizeWithPersistedState(n);return r.isPrimaryClient&&pH(r,t.targetId,i.limboChanges),i}async function p2(e,t){let r=tb(e);return hn(r.localStore,t).then(e=>pX(r,e))}async function p3(e,t,r,n){let i=tb(e),s=await d9(i.localStore,t);if(null===s)return void tf(pC,"Cannot apply mutation batch with id: "+t);"pending"===r?await f$(i.remoteStore):"acknowledged"===r||"rejected"===r?(pG(i,t,n||null),pz(i,t),he(i.localStore,t)):ty(),await pX(i,s)}async function p6(e,t){let r=tb(e);if(gt(r),gr(r),!0===t&&!0!==r._isPrimaryClient){let e=r.sharedClientState.getAllActiveQueryTargets(),t=await p5(r,e.toArray());for(let e of(r._isPrimaryClient=!0,await f2(r.remoteStore,!0),t))fI(r.remoteStore,e)}else if(!1===t&&!1!==r._isPrimaryClient){let e=[],t=Promise.resolve();r.queriesByTarget.forEach((n,i)=>{r.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(pW(r,i),d5(r.localStore,i,!0))),fA(r.remoteStore,i)}),await t,await p5(r,e),p4(r),r._isPrimaryClient=!1,await f2(r.remoteStore,!1)}}function p4(e){let t=tb(e);t.activeLimboResolutionsByTarget.forEach((e,r)=>{fA(t.remoteStore,r)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new nF(tW.comparator)}async function p5(e,t,r){let n=tb(e),i=[],s=[];for(let e of t){let t,r=n.queriesByTarget.get(e);if(r&&0!==r.length)for(let e of(t=await d6(n.localStore,s3(r[0])),r)){let t=n.queryViewsByQuery.get(e),r=await p1(n,t);r.snapshot&&s.push(r.snapshot)}else{let r=await hr(n.localStore,e);t=await d6(n.localStore,r),await pD(n,p8(r),e,!1,t.resumeToken)}i.push(t)}return n.syncEngineListener.onWatchChange(s),i}function p8(e){return sQ(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function p7(e){return ht(tb(e).localStore)}async function p9(e,t,r,n){let i=tb(e);if(i._isPrimaryClient)return void tf(pC,"Ignoring unexpected query state notification.");let s=i.queriesByTarget.get(t);if(s&&s.length>0)switch(r){case"current":case"not-current":{let e=await hn(i.localStore,au(s[0])),n=oE.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,nY.EMPTY_BYTE_STRING);await pX(i,e,n);break}case"rejected":await d5(i.localStore,t,!0),pW(i,t,n);break;default:ty()}}async function ge(e,t,r){let n=gt(e);if(n._isPrimaryClient){for(let e of t){if(n.queriesByTarget.has(e)&&n.sharedClientState.isActiveQueryTarget(e)){tf(pC,"Adding an already active target "+e);continue}let t=await hr(n.localStore,e),r=await d6(n.localStore,t);await pD(n,p8(t),r.targetId,!1,r.resumeToken),fI(n.remoteStore,r)}for(let e of r)n.queriesByTarget.has(e)&&await d5(n.localStore,e,!1).then(()=>{fA(n.remoteStore,e),pW(n,e)}).catch(re)}}function gt(e){let t=tb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pj.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=p0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pB.bind(null,t),t.syncEngineListener.onWatchChange=po.bind(null,t.eventManager),t.syncEngineListener.onWatchError=pl.bind(null,t.eventManager),t}function gr(e){let t=tb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pF.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pU.bind(null,t),t}function gn(e,t,r){let n=tb(e);gi(n,t,r).then(e=>{n.sharedClientState.notifyBundleLoaded(e)})}async function gi(e,t,r){try{let n=await t.getMetadata();if(await ho(e.localStore,n))return await t.close(),r._completeWith(pb(n)),Promise.resolve(new Set);r._updateProgress(pv(n));let i=new py(n,e.localStore,t.serializer),s=await t.nextElement();for(;s;){let e=await i.addSizedElement(s);e&&r._updateProgress(e),s=await t.nextElement()}let a=await i.complete();return await pX(e,a.changedDocs,void 0),await hl(e.localStore,n),r._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(e){return tg(pC,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}}class gs{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=h4(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return d$(this.persistence,new hy,e.initialUser,this.serializer)}createPersistence(e){return new dn(ds.factory,this.serializer)}createSharedClientState(e){return new hB}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gs.provider={build:()=>new gs};class ga extends gs{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){return tv(this.persistence.referenceDelegate instanceof da),new cM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createPersistence(e){let t=void 0!==this.cacheSizeBytes?cI.withCacheSize(this.cacheSizeBytes):cI.DEFAULT;return new dn(e=>da.factory(e,t),this.serializer)}}class go extends gs{constructor(e,t,r){super(),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.onlineComponentProvider.initialize(this,e),await gr(this.onlineComponentProvider.syncEngine),await f$(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return d$(this.persistence,new hy,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new cM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new rb(t,this.persistence);return new rv(e.asyncQueue,r)}createPersistence(e){let t=dB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cI.withCacheSize(this.cacheSizeBytes):cI.DEFAULT;return new dM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,h3(),h6(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hB}}class gl extends go{constructor(e,t){super(e,t,!1),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.onlineComponentProvider.syncEngine;this.sharedClientState instanceof hj&&(this.sharedClientState.syncEngine={applyBatchState:p3.bind(null,t),applyTargetState:p9.bind(null,t),applyActiveTargetsChange:ge.bind(null,t),getActiveClients:p7.bind(null,t),synchronizeWithChangedDocuments:p2.bind(null,t)},await this.sharedClientState.start()),await this.persistence.setPrimaryStateListener(async e=>{await p6(this.onlineComponentProvider.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){let t=h3();if(!hj.isAvailable(t))throw new tw(tS.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=dB(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hj(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pL(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pZ.bind(null,this.syncEngine),await f2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return pr()}createDatastore(e){let t=h4(e.databaseInfo.databaseId),r=h1(e.databaseInfo);return fu(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return fT(this.localStore,this.datastore,e.asyncQueue,e=>pL(this.syncEngine,e,0),h2())}createSyncEngine(e,t){return pI(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await fO(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}gu.provider={build:()=>new gu};let gc=10240;function gd(e,t=gc){let r=0;return{async read(){if(r<e.byteLength){let n={value:e.slice(r,r+t),done:!1};return r+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}function gh(e,t,r){if(!r)throw new tw(tS.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gf(e,t,r,n){if(!0===t&&!0===n)throw new tw(tS.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function gp(e){if(!tW.isDocumentKey(e))throw new tw(tS.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function gg(e){if(tW.isDocumentKey(e))throw new tw(tS.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gm(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function gy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e)if(e instanceof Array)return"an array";else{let t=gv(e);return t?`a custom ${t} object`:"an object"}else if("function"==typeof e)return"a function";else return ty()}function gv(e){return e.constructor?e.constructor.name:null}function gb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t))if(t.name===e.constructor.name)throw new tw(tS.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");else{let r=gy(e);throw new tw(tS.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}return e}function gS(e,t){if(t<=0)throw new tw(tS.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function gw(e,t){if(!(e instanceof Uint8Array))throw new tw(tS.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${gy(e)}`);return gd(e,t)}class gT{constructor(e){this.observer=e,this.muted=!1}next(e){!this.muted&&this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,e):tp("Uncaught Error in snapshot listener:",e.toString()))}mute(){this.muted=!0}scheduleEvent(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class gE{constructor(e,t){this.payload=e,this.byteLength=t}isBundleMetadata(){return"metadata"in this.payload}}class gC{constructor(e,t){this.reader=e,this.serializer=t,this.metadata=new tT,this.buffer=new Uint8Array,this.textDecoder=oy(),this.nextElementImpl().then(e=>{e&&e.isBundleMetadata()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let e=await this.readLength();if(null===e)return null;let t=this.textDecoder.decode(e),r=Number(t);return isNaN(r)&&this.raiseError(`length string (${t}) is not valid number`),new gE(JSON.parse(await this.readJsonString(r)),e.length+r)}indexOfOpenBracket(){return this.buffer.findIndex(e=>123===e)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async readJsonString(e){for(;this.buffer.length<e;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let t=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}raiseError(e){throw this.reader.cancel(),Error(`Invalid bundle format: ${e}`)}async pullMoreDataToBuffer(){let e=await this.reader.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}function gx(e,t){return new gC(e,t)}class g_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new tw(tS.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await fd(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new or(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=tW.fromPath(t);this.mutations.push(new os(r,this.precondition(r)))}),await fc(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else if(e.isNoDocument())t=tU.min();else throw ty();let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new tw(tS.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return this.writtenDocs.has(e.toString())||!t?aQ.none():t.isEqual(tU.min())?aQ.exists(!1):aQ.updateTime(t)}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return aQ.exists(!0);if(t.isEqual(tU.min()))throw new tw(tS.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return aQ.updateTime(t)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gO{constructor(e,t,r,n,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=n,this.deferred=i,this.attemptsRemaining=r.maxAttempts,this.backoff=new fe(this.asyncQueue,"transaction_retry")}run(){this.attemptsRemaining-=1,this.runWithBackOff()}runWithBackOff(){this.backoff.backoffAndRun(async()=>{let e=new g_(this.datastore),t=this.tryRunUpdateFunction(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.handleTransactionError(e)}))}).catch(e=>{this.handleTransactionError(e)})})}tryRunUpdateFunction(e){try{let t=this.updateFunction(e);if(io(t)||!t.catch||!t.then)return this.deferred.reject(Error("Transaction callback must return a Promise")),null;return t}catch(e){return this.deferred.reject(e),null}}handleTransactionError(e){this.attemptsRemaining>0&&this.isRetryableTransactionError(e)?(this.attemptsRemaining-=1,this.asyncQueue.enqueueAndForget(()=>(this.runWithBackOff(),Promise.resolve()))):this.deferred.reject(e)}isRetryableTransactionError(e){if("FirebaseError"===e.name){let t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!oc(t)}return!1}}let gI="FirestoreClient",gA=100,gk=11,gR=20,gD=22;class gN{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=to.UNAUTHENTICATED,this.clientId=tN.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{tf(gI,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(tf(gI,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:gA}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new tT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=f8(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function gP(e,t){e.asyncQueue.verifyOperationInProgress(),tf(gI,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await dG(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function gM(e,t){e.asyncQueue.verifyOperationInProgress();let r=await gL(e);tf(gI,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>f1(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>f1(t.remoteStore,r)),e._onlineComponents=t}function gj(e){return"FirebaseError"===e.name?e.code===tS.FAILED_PRECONDITION||e.code===tS.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||e.code===gD||e.code===gR||e.code===gk}async function gL(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tf(gI,"Using user provided OfflineComponentProvider");try{await gP(e,e._uninitializedComponentsProvider._offline)}catch(r){let t=r;if(!gj(t))throw t;tg("Error using user provided cache. Falling back to memory cache: "+t),await gP(e,new gs)}}else tf(gI,"Using default OfflineComponentProvider"),await gP(e,new gs);return e._offlineComponents}async function gB(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tf(gI,"Using user provided OnlineComponentProvider"),await gM(e,e._uninitializedComponentsProvider._online)):(tf(gI,"Using default OnlineComponentProvider"),await gM(e,new gu))),e._onlineComponents}function gF(e){return gL(e).then(e=>e.persistence)}function gU(e){return gL(e).then(e=>e.localStore)}function gV(e){return gB(e).then(e=>e.remoteStore)}function gz(e){return gB(e).then(e=>e.syncEngine)}function gq(e){return gB(e).then(e=>e.datastore)}async function g$(e){let t=await gB(e),r=t.eventManager;return r.onListen=pA.bind(null,t.syncEngine),r.onUnlisten=pN.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=pk.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=pP.bind(null,t.syncEngine),r}function gG(e,t,r={}){let n=new tT;return e.asyncQueue.enqueueAndForget(async()=>gJ(await g$(e),e.asyncQueue,t,r,n)),n.promise}function gW(e,t,r){let n=new tT;return e.asyncQueue.enqueueAndForget(async()=>{try{let i=await gq(e);n.resolve(fh(i,t,r))}catch(e){n.reject(e)}}),n.promise}function gK(e,t){let r=new tT;return e.asyncQueue.enqueueAndForget(async()=>pM(await gz(e),t,r)),r.promise}function gH(e,t,r){let n=new tT;return e.asyncQueue.enqueueAndForget(async()=>{let i=await gq(e);new gO(e.asyncQueue,i,r,t,n).run()}),n.promise}async function gQ(e,t,r){try{let n=await d3(e,t);n.isFoundDocument()?r.resolve(n):n.isNoDocument()?r.resolve(null):r.reject(new tw(tS.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(n){let e=f8(n,`Failed to get document '${t} from cache`);r.reject(e)}}function gY(e,t,r,n,i){let s=new gT({next:o=>{s.mute(),t.enqueueAndForget(()=>pa(e,a));let l=o.docs.has(r);!l&&o.fromCache?i.reject(new tw(tS.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&n&&"server"===n.source?i.reject(new tw(tS.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new pp(sY(r.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return ps(e,a)}async function gX(e,t,r){try{let n=await d8(e,t,!0),i=new pT(t,n.remoteKeys),s=i.computeDocChanges(n.documents),a=i.applyChanges(s,!1);r.resolve(a.snapshot)}catch(n){let e=f8(n,`Failed to execute query '${t} against cache`);r.reject(e)}}function gJ(e,t,r,n,i){let s=new gT({next:r=>{s.mute(),t.enqueueAndForget(()=>pa(e,a)),r.fromCache&&"server"===n.source?i.reject(new tw(tS.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),a=new pp(r,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return ps(e,a)}function gZ(e,t){let r;return gx(gw(r="string"==typeof e?om().encode(e):e),t)}function g0(e,t){return e.asyncQueue.enqueue(async()=>hh(await gU(e),t))}function g1(e,t){return e.timeoutSeconds===t.timeoutSeconds}function g2(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let g3="ComponentProvider",g6=new Map;function g4(e){let t=g6.get(e);t&&(tf(g3,"Removing Datastore"),g6.delete(e),t.terminate())}function g5(e,t,r,n){return new it(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,g2(n.experimentalLongPollingOptions),n.useFetchStreams)}let g8="firestore.googleapis.com",g7=!0,g9=5,me=30,mt=!0;class mr{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new tw(tS.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=g8,this.ssl=g7}else this.host=e.host,this.ssl=null!=(t=e.ssl)?t:g7;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=cO;else if(e.cacheSizeBytes!==c_&&e.cacheSizeBytes<ck)throw new tw(tS.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${ck}`);else this.cacheSizeBytes=e.cacheSizeBytes;gf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=mt:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g2(null!=(r=e.experimentalLongPollingOptions)?r:{}),mn(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&g1(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}function mn(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new tw(tS.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<g9)throw new tw(tS.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is ${g9})`);if(e.timeoutSeconds>me)throw new tw(tS.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is ${me})`)}}class mi{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mr({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tw(tS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tw(tS.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mr(e),void 0!==e.credentials&&(this._authCredentials=tR(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return g4(this),Promise.resolve()}}function ms(e,t,r,n={}){var i;let s=(e=gb(e,mi))._getSettings(),a=`${t}:${r}`;if(s.host!==g8&&s.host!==a&&tg("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=to.MOCK_USER;else{t=k(n.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new tw(tS.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new to(s)}e._authCredentials=new tx(new tE(t,r))}}class ma{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ma(this.firestore,e,this._query)}}class mo{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ml(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mo(this.firestore,e,this._key)}}class ml extends ma{constructor(e,t,r){super(e,t,sY(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mo(this.firestore,null,new tW(e))}withConverter(e){return new ml(this.firestore,e,this._path)}}function mu(e,t,...r){if(e=W(e),gh("collection","path",t),e instanceof mi){let n=tq.fromString(t,...r);return gg(n),new ml(e,null,n)}{if(!(e instanceof mo)&&!(e instanceof ml))throw new tw(tS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(tq.fromString(t,...r));return gg(n),new ml(e.firestore,null,n)}}let mc="AsyncQueue";class md{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new fe(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new tT;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(ru(e))tf(mc,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(e=>{throw this.failure=e,this.operationInProgress=!1,tp("INTERNAL UNHANDLED ERROR: ",mh(e)),e}).then(e=>(this.operationInProgress=!1,e))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let n=f5.createAndSchedule(this,e,t,r,e=>this.removeDelayedOperation(e));return this.delayedOperations.push(n),n}verifyNotFailed(){this.failure&&ty()}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{for(let t of(this.delayedOperations.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.delayedOperations))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}}function mh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class mf extends mi{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new md,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new md(e),this._firestoreClient=void 0,await e}}}function mp(e,t){let r="object"==typeof e?e:e$(),n="string"==typeof e?e:t||ir,i=eF(r,"firestore").getImmediate({identifier:n});if(!i._initialized){let e=O("firestore");e&&ms(i,...e)}return i}function mg(e){if(e._terminated)throw new tw(tS.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||mm(e),e._firestoreClient}function mm(e){var t,r,n;let i=e._freezeSettings(),s=g5(e._databaseId,(null==(t=e._app)?void 0:t.options.appId)||"",e._persistenceKey,i);!e._componentsProvider&&(null==(r=i.localCache)?void 0:r._offlineComponentProvider)&&(null==(n=i.localCache)?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new gN(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&my(e._componentsProvider))}function my(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}function mv(e,t=!0){tu(ez),eB(new K("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new mf(new t_(e.getProvider("auth-internal")),new tk(e.getProvider("app-check-internal")),is(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),eK(ts,ta,e),eK(ts,ta,"esm2017")}class mb{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class mS{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class mw{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class mT{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mT(nY.fromBase64String(e))}catch(e){throw new tw(tS.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mT(nY.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class mE{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tw(tS.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tG(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mC{constructor(e){this._methodName=e}}class mx{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tw(tS.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tw(tS.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tP(this._lat,e._lat)||tP(this._long,e._long)}}class m_{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return dU(this._values,e._values)}}let mO=/^__.*__$/;class mI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new a5(e,this.data,this.fieldMask,t,this.fieldTransforms):new a3(e,this.data,t,this.fieldTransforms)}}class mA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new a5(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ty()}}class mR{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new mR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return m1(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(mk(this.dataSource)&&mO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class mD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||h4(e)}createContext(e,t,r,n=!1){return new mR({dataSource:e,methodName:t,targetDoc:r,path:tG.emptyPath(),arrayElement:!1,hasConverter:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mN(e){let t=e._freezeSettings(),r=h4(e._databaseId);return new mD(e._databaseId,!!t.ignoreUndefinedProperties,r)}function mP(e,t,r,n,i,s={}){let a,o,l=e.createContext(s.merge||s.mergeFields?2:0,t,r,i);mX("Data must be an object, but it was:",l,n);let u=mG(n,l);if(s.merge)a=new nK(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=mJ(t,n,r);if(!l.contains(i))throw new tw(tS.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);m2(e,i)||e.push(i)}a=new nK(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new mI(new i8(u),a,o)}class mM extends mC{_toFieldTransform(e){if(2===e.dataSource)e.fieldMask.push(e.path);else if(1===e.dataSource)throw e.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof mM}}function mj(e,t,r){return new mR({dataSource:3,targetDoc:t.settings.targetDoc,methodName:e._methodName,arrayElement:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class mL extends mC{_toFieldTransform(e){return new aG(e.path,new aj)}isEqual(e){return e instanceof mL}}class mB extends mC{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=mj(this,e,!0),r=new aL(this._elements.map(e=>m$(e,t)));return new aG(e.path,r)}isEqual(e){return e instanceof mB&&z(this._elements,e._elements)}}class mF extends mC{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=mj(this,e,!0),r=new aF(this._elements.map(e=>m$(e,t)));return new aG(e.path,r)}isEqual(e){return e instanceof mF&&z(this._elements,e._elements)}}class mU extends mC{constructor(e,t){super(e),this._operand=t}_toFieldTransform(e){let t=new aV(e.serializer,ak(e.serializer,this._operand));return new aG(e.path,t)}isEqual(e){return e instanceof mU&&this._operand===e._operand}}function mV(e,t,r,n){let i=e.createContext(1,t,r);mX("Data must be an object, but it was:",i,n);let s=[],a=i8.empty();return nj(n,(e,n)=>{let o=m0(t,e,r);n=W(n);let l=i.childContextForFieldPath(o);if(n instanceof mM)s.push(o);else{let e=m$(n,l);null!=e&&(s.push(o),a.set(o,e))}}),new mA(a,new nK(s),i.fieldTransforms)}function mz(e,t,r,n,i,s){let a=e.createContext(1,t,r),o=[mJ(t,n,r)],l=[i];if(s.length%2!=0)throw new tw(tS.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(mJ(t,s[e])),l.push(s[e+1]);let u=[],c=i8.empty();for(let e=o.length-1;e>=0;--e)if(!m2(u,o[e])){let t=o[e],r=l[e];r=W(r);let n=a.childContextForFieldPath(t);if(r instanceof mM)u.push(t);else{let e=m$(r,n);null!=e&&(u.push(t),c.set(t,e))}}return new mA(c,new nK(u),a.fieldTransforms)}function mq(e,t,r,n=!1){return m$(r,e.createContext(n?4:3,t))}function m$(e,t){if(mY(e=W(e)))return mX("Unsupported field value:",t,e),mG(e,t);if(e instanceof mC)return mK(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),!(e instanceof Array))return mH(e,t);if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return mW(e,t)}function mG(e,t){let r={};return nB(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nj(e,(e,n)=>{let i=m$(n,t.childContextForField(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function mW(e,t){let r=[],n=0;for(let i of e){let e=m$(i,t.childContextForArray(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}function mK(e,t){if(!mk(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}function mH(e,t){if(null===(e=W(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ak(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=tF.fromDate(e);return{timestampValue:oV(t.serializer,r)}}else if(e instanceof tF){let r=new tF(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:oV(t.serializer,r)}}else if(e instanceof mx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};else if(e instanceof mT)return{bytesValue:oq(t.serializer,e._byteString)};else if(e instanceof mo){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:oK(e.firestore._databaseId||t.databaseId,e._key.path)}}else if(e instanceof m_)return mQ(e,t);else throw t.createError(`Unsupported field value: ${gy(e)}`)}function mQ(e,t){return{mapValue:{fields:{[ic]:{stringValue:ip},[ig]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return aI(t.serializer,e)})}}}}}}function mY(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof tF)&&!(e instanceof mx)&&!(e instanceof mT)&&!(e instanceof mo)&&!(e instanceof mC)&&!(e instanceof m_)}function mX(e,t,r){if(!mY(r)||!gm(r)){let n=gy(r);if("an object"===n)throw t.createError(e+" a custom object");throw t.createError(e+" "+n)}}function mJ(e,t,r){if((t=W(t))instanceof mE)return t._internalPath;if("string"==typeof t)return m0(e,t);throw m1("Field path arguments must be of type string or ",e,!1,void 0,r)}let mZ=RegExp("[~\\*/\\[\\]]");function m0(e,t,r){if(t.search(mZ)>=0)throw m1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new mE(...t.split("."))._internalPath}catch(n){throw m1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function m1(e,t,r,n,i){let s=n&&!n.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new tw(tS.INVALID_ARGUMENT,o+e+l)}function m2(e,t){return e.some(e=>e.isEqual(t))}class m3{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new mo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let e=new m6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}}}get(e){if(this._document){let t=this._document.data.field(m4("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class m6 extends m3{data(){return super.data()}}function m4(e,t){return"string"==typeof t?m0(e,t):t instanceof mE?t._internalPath:t._delegate._internalPath}function m5(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tw(tS.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m8{}class m7 extends m8{}function m9(e,t,...r){let n=[];for(let i of(t instanceof m8&&n.push(t),yb(n=n.concat(r)),n))e=i._apply(e);return e}class ye extends m7{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new ye(e,t,r)}_apply(e){let t=this._parse(e);return ym(e._query,t),new ma(e.firestore,e.converter,s5(e._query,t))}_parse(e){let t=mN(e.firestore);return yu(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function yt(e,t,r){let n=t,i=m4("where",e);return ye._create(i,n,r)}class yr extends m8{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new yr(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:sh.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(yy(e._query,t),new ma(e.firestore,e.converter,s5(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class yn extends m7{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new yn(e,t)}_apply(e){let t=yc(e._query,this._field,this._direction);return new ma(e.firestore,e.converter,s8(e._query,t))}}class yi extends m7{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yi(e,t,r)}_apply(e){return new ma(e.firestore,e.converter,s7(e._query,this._limit,this._limitType))}}function ys(e){return gS("limit",e),yi._create("limit",e,"F")}class ya extends m7{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ya(e,t,r)}_apply(e){let t=yl(e,this.type,this._docOrFields,this._inclusive);return new ma(e.firestore,e.converter,s9(e._query,t))}}class yo extends m7{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new yo(e,t,r)}_apply(e){let t=yl(e,this.type,this._docOrFields,this._inclusive);return new ma(e.firestore,e.converter,ae(e._query,t))}}function yl(e,t,r,n){if(r[0]=W(r[0]),r[0]instanceof m3)return yd(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=mN(e.firestore);return yh(e._query,e.firestore._databaseId,i,t,r,n)}}function yu(e,t,r,n,i,s,a){let o;if(i.isKeyField())if("array-contains"===s||"array-contains-any"===s)throw new tw(tS.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);else if("in"===s||"not-in"===s){yp(a,s);let t=[];for(let r of a)t.push(yf(n,e,r));o={arrayValue:{values:t}}}else o=yf(n,e,a);else("in"===s||"not-in"===s||"array-contains-any"===s)&&yp(a,s),o=mq(r,t,a,"in"===s||"not-in"===s);return sd.create(i,s,o)}function yc(e,t,r){if(null!==e.startAt)throw new tw(tS.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new tw(tS.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sa(t,r)}function yd(e,t,r,n,i){if(!n)throw new tw(tS.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of s2(e))if(r.field.isKeyField())s.push(iG(t,n.key));else{let e=n.data.field(r.field);if(n8(e))throw new tw(tS.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==e)s.push(e);else{let e=r.field.canonicalString();throw new tw(tS.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}}return new st(s,i)}function yh(e,t,r,n,i,s){let a=e.explicitOrderBy;if(i.length>a.length)throw new tw(tS.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let o=[];for(let s=0;s<i.length;s++){let l=i[s];if(a[s].field.isKeyField()){if("string"!=typeof l)throw new tw(tS.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!s1(e)&&-1!==l.indexOf("/"))throw new tw(tS.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(tq.fromString(l));if(!tW.isDocumentKey(r))throw new tw(tS.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new tW(r);o.push(iG(t,i))}else{let e=mq(r,n,l);o.push(e)}}return new st(o,s)}function yf(e,t,r){if("string"==typeof(r=W(r))){if(""===r)throw new tw(tS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s1(t)&&-1!==r.indexOf("/"))throw new tw(tS.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(tq.fromString(r));if(!tW.isDocumentKey(n))throw new tw(tS.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return iG(e,new tW(n))}if(r instanceof mo)return iG(e,r._key);throw new tw(tS.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gy(r)}.`)}function yp(e,t){if(!Array.isArray(e)||0===e.length)throw new tw(tS.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yg(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function ym(e,t){let r=yv(e.filters,yg(t.op));if(null!==r)if(r===t.op)throw new tw(tS.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`);else throw new tw(tS.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}function yy(e,t){let r=e;for(let e of t.getFlattenedFilters())ym(r,e),r=s5(r,e)}function yv(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}function yb(e){let t=e.filter(e=>e instanceof yr).length,r=e.filter(e=>e instanceof ye).length;if(t>1||t>0&&r>0)throw new tw(tS.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}class yS{convertValue(e,t="none"){switch(iy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return n1(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(n2(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ty()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return nj(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new m_(null==(n=null==(r=null==(t=e.fields)?void 0:t[ig].arrayValue)?void 0:r.values)?void 0:n.map(e=>n1(e.doubleValue)))}convertGeoPoint(e){return new mx(n1(e.latitude),n1(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=n9(e);if(null==r)return null;return this.convertValue(r,t);case"estimate":return this.convertTimestamp(ie(e));default:return null}}convertTimestamp(e){let t=n0(e);return new tF(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=tq.fromString(e);tv(lW(r));let n=new ii(r.get(1),r.get(3)),i=new tW(r.popFirst(5));return n.isEqual(t)||tp(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function yw(e,t,r){let n;return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class yT extends yS{constructor(e){super(),this.firestore=e}convertBytes(e){return new mT(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new mo(this.firestore,null,t)}}function yE(e,t){if("object"!=typeof e||null===e)return!1;let r=e;for(let e of t)if(e in r&&"function"==typeof r[e])return!0;return!1}class yC{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yx extends m3{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);{let t=new y_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}}}get(e,t={}){if(this._document){let r=this._document.data.field(m4("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class y_ extends yx{data(e={}){return super.data(e)}}class yO{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new yC(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new y_(this._firestore,this._userDataWriter,r.key,r,new yC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tw(tS.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=yI(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yI(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new y_(e._firestore,e._userDataWriter,r.doc.key,r.doc,new yC(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new y_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yC(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:yA(t.type),doc:n,oldIndex:i,newIndex:s}})}}function yA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ty()}}class yk extends yS{constructor(e){super(),this.firestore=e}convertBytes(e){return new mT(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new mo(this.firestore,null,t)}}function yR(e){e=gb(e,ma);let t=gb(e.firestore,mf),r=mg(t),n=new yk(t);return m5(e._query),gG(r,e._query).then(r=>new yO(t,n,e,r))}function yD(e,t,r){return new mw(t,new yk(e),r)}class yN{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=gu.provider,this._offlineComponentProvider={build:t=>new go(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function yP(e){return new yN(null==e?void 0:e.forceOwnership)}let yM={maxAttempts:5};function yj(e){if(e.maxAttempts<1)throw new tw(tS.INVALID_ARGUMENT,"Max attempts must be at least 1")}function yL(e,t){if((e=W(e)).firestore===t)return e;throw new tw(tS.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.")}class yB{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=mN(e)}get(e){let t=yL(e,this._firestore),r=new yT(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return ty();let n=e[0];if(n.isFoundDocument())return new m3(this._firestore,r,n.key,n,t.converter);if(n.isNoDocument())return new m3(this._firestore,r,t._key,null,t.converter);throw ty()})}set(e,t,r){let n=yL(e,this._firestore),i=yw(n.converter,t,r),s=mP(this._dataReader,"Transaction.set",n._key,i,null!==n.converter,r);return this._transaction.set(n._key,s),this}update(e,t,r,...n){let i,s=yL(e,this._firestore);return i="string"==typeof(t=W(t))||t instanceof mE?mz(this._dataReader,"Transaction.update",s._key,t,r,n):mV(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){let t=yL(e,this._firestore);return this._transaction.delete(t._key),this}}class yF extends yB{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=yL(e,this._firestore),r=new yk(this._firestore);return super.get(e).then(e=>new yx(this._firestore,r,t._key,e._document,new yC(!1,!1),t.converter))}}function yU(e,t,r){e=gb(e,mf);let n=Object.assign(Object.assign({},yM),r);return yj(n),gH(mg(e),r=>t(new yF(e,r)),n)}function yV(){return new mL("serverTimestamp")}function yz(e){try{return JSON.parse(e)}catch(e){throw new tw(tS.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}function yq(e,t){if("string"!=typeof e[t])throw new tw(tS.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}new WeakMap;class y${constructor(){this.existenceFilterMismatchCallbacksById=new Map}static get instance(){return yG||og(yG=new y$),yG}notifyOnExistenceFilterMismatch(e){this.existenceFilterMismatchCallbacksById.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.existenceFilterMismatchCallbacksById;return r.set(t,e),()=>r.delete(t)}}let yG=null;mv("node");let yW={projectId:"bybit-balance-view",appId:"1:701023944234:web:fc234862537d441eae0d53",storageBucket:"bybit-balance-view.firebasestorage.app",apiKey:"AIzaSyBTKk45FMy6sGdeErxwTfx8gP_Upz1oqKY",authDomain:"bybit-balance-view.firebaseapp.com",measurementId:"",messagingSenderId:"701023944234"},yK=mp(eG().length?e$():eq(yW));async function yH(){try{let e="https://api-demo.bybit.com",t="/v5/market/kline",r=new URLSearchParams({category:"linear",symbol:"DOGEUSDT",interval:"1",limit:"200"}),n=`${e}${t}?${r.toString()}`,i=await fetch(`${n}&timestamp=${Date.now()}`,{next:{revalidate:0}});if(!i.ok){let e=await i.text();throw console.error("Bybit Chart API Error:",e),Error(`Failed to fetch chart data: ${i.statusText}`)}let s=await i.json();if(0!==s.retCode)throw Error(`Bybit API returned an error: ${s.retMsg}`);return s.result.list.map(e=>({time:parseInt(e[0]),open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseFloat(e[5])})).sort((e,t)=>e.time-t.time)}catch(e){return console.error("Error in getChartData:",e),[]}}async function yQ(e){let t=mu(yK,"signals");try{if(await yU(yK,async r=>{let n=m9(t,yt("time","==",e.time),ys(1));if(!(await yR(n)).empty)return console.log(`Signal for timestamp ${e.time} already exists. Skipping.`),!1;let i=mu(yK,"signals").doc();return r.set(i,{...e,serverTime:yV()}),!0}))return console.log("Document written for time: ",e.time),{success:!0};return{success:!1,message:"Signal already exists."}}catch(e){return console.error("Error adding document: ",e),{success:!1,error:e.message}}}(0,r(33331).D)([yH,yQ]),(0,c.A)(yH,"0082de5f59ecb8d9b4d31c7df31dae0e74950a5314",null),(0,c.A)(yQ,"4042c32fafe714b24fbd62a126e443cd8141fe27c1",null)},3076:(e,t,r)=>{"use strict";e.exports=o;var n=r(77968);((o.prototype=Object.create(n.prototype)).constructor=o).className="Service";var i=r(71202),s=r(93107),a=r(27236);function o(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var r=new o(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},o.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},o.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},o.prototype.create=function(e,t,r){for(var n,i=new a.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var l=s.lcFirst((n=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");i[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},3105:e=>{e.exports=function(e){return e.split("")}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;let n=r(86777),i=r(60070),s=r(71271),a=r(60776);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o;class l{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=l;class u{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=u;let c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},d={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class h{constructor(e,t){var r,n,i,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:null!=(r=t.start)?r:d.start,sendMessage:null!=(n=t.sendMessage)?n:d.sendMessage,halfClose:null!=(i=t.halfClose)?i:d.halfClose,cancel:null!=(s=t.cancel)?s:d.cancel}:this.requester=d}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,a,o,l;let u={onReceiveMetadata:null!=(n=null==(r=null==t?void 0:t.onReceiveMetadata)?void 0:r.bind(t))?n:e=>{},onReceiveMessage:null!=(a=null==(s=null==t?void 0:t.onReceiveMessage)?void 0:s.bind(t))?a:e=>{},onReceiveStatus:null!=(l=null==(o=null==t?void 0:t.onReceiveStatus)?void 0:o.bind(t))?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,(e,t)=>{var r,n,s;let a;if(this.processingMetadata=!1,(0,i.isInterceptingListener)(t))a=t;else{let e={onReceiveMetadata:null!=(r=t.onReceiveMetadata)?r:c.onReceiveMetadata,onReceiveMessage:null!=(n=t.onReceiveMessage)?n:c.onReceiveMessage,onReceiveStatus:null!=(s=t.onReceiveStatus)?s:c.onReceiveStatus};a=new i.InterceptingListenerImpl(e,u)}this.nextCall.start(e,a),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}}function f(e,t,r){var n,i;let s=null!=(n=r.deadline)?n:1/0,a=r.host,o=null!=(i=r.parent)?i:null,l=r.propagate_flags,u=r.credentials,c=e.createCall(t,s,a,o,l);return u&&c.setCredentials(u),c}t.InterceptingCall=h;class p{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,a.getErrorMessage)(e)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null==(r=null==t?void 0:t.onReceiveMetadata)||r.call(t,e)},onReceiveMessage:e=>{var i;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,a.getErrorMessage)(e)}`,metadata:new n.Metadata},this.call.cancelWithStatus(r.code,r.details);return}null==(i=null==t?void 0:t.onReceiveMessage)||i.call(t,o)},onReceiveStatus:e=>{var n,i;r?null==(n=null==t?void 0:t.onReceiveStatus)||n.call(t,r):null==(i=null==t?void 0:t.onReceiveStatus)||i.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class g extends p{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=!1,s={onReceiveMetadata:null!=(n=null==(r=null==t?void 0:t.onReceiveMetadata)?void 0:r.bind(t))?n:e=>{},onReceiveMessage:e=>{var r;i=!0,null==(r=null==t?void 0:t.onReceiveMessage)||r.call(t,e)},onReceiveStatus:e=>{var r,n;i||null==(r=null==t?void 0:t.onReceiveMessage)||r.call(t,null),null==(n=null==t?void 0:t.onReceiveStatus)||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class m extends p{}function y(e,t,r){let n=f(e,r.path,t);return r.responseStream?new m(n,r):new g(n,r)}t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];i=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);let s=Object.assign({},r,{method_definition:t});return i.reduceRight((e,t)=>r=>t(r,e),e=>y(n,e,t))(s)}},4227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;let n=r(73496),i=r(71271),s=r(17492),a=r(19420),o=r(5674),l=r(31359),u=r(43356),c=r(26786),d=r(66827),h=0x7fffffff,f=0x7fffffff,p=2e4,{HTTP2_HEADER_PATH:g}=n.constants,m="server";function y(){}function v(e){return{code:i.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function b(e,t){let r=v(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw Error(`Invalid handlerType ${e}`)}}class S{constructor(e){var t,r,n,i;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new d.ChannelzTrace,this.callTracker=new d.ChannelzCallTracker,this.listenerChildrenTracker=new d.ChannelzChildrenTracker,this.sessionChildrenTracker=new d.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,d.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!=(t=this.options["grpc.max_connection_age_ms"])?t:h,this.maxConnectionAgeGraceMs=null!=(r=this.options["grpc.max_connection_age_grace_ms"])?r:h,this.keepaliveTimeMs=null!=(n=this.options["grpc.keepalive_time_ms"])?n:f,this.keepaliveTimeoutMs=null!=(i=this.options["grpc.keepalive_timeout_ms"])?i:p,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;let i,s=this.sessions.get(e),a=e.socket,o=a.remoteAddress?(0,u.stringToSubchannelAddress)(a.remoteAddress,a.remotePort):null,l=a.localAddress?(0,u.stringToSubchannelAddress)(a.localAddress,a.localPort):null;if(e.encrypted){let e=a,r=e.getCipher(),n=e.getCertificate(),s=e.getPeerCertificate();i={cipherSuiteStandardName:null!=(t=r.standardName)?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:l,security:i,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!=(r=e.state.localWindowSize)?r:null,remoteFlowControlWindow:null!=(n=e.state.remoteWindowSize)?n:null}}}trace(e){l.trace(i.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+e)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw Error("addService() requires two objects as arguments");let r=Object.keys(e);if(0===r.length)throw Error("Cannot add an empty service to a server");r.forEach(r=>{let n,i,s=e[r];n=s.requestStream?s.responseStream?"bidi":"clientStream":s.responseStream?"serverStream":"unary";let a=t[r];if(void 0===a&&"string"==typeof s.originalName&&(a=t[s.originalName]),i=void 0!==a?a.bind(t):b(n,r),!1===this.register(s.path,i,s.responseSerialize,s.requestDeserialize,n))throw Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{let r=e[t];this.unregister(r.path)})}bind(e,t){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw Error("server is already started");if(this.shutdown)throw Error("bindAsync called after shutdown");if("string"!=typeof e)throw TypeError("port must be a string");if(null===t||!(t instanceof a.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw TypeError("callback must be a function");let s=(0,c.parseUri)(e);if(null===s)throw Error(`Could not parse port "${e}"`);let h=(0,o.mapUriDefaultScheme)(s);if(null===h)throw Error(`Could not get a default scheme for port "${e}"`);let f={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?f.maxSessionMemory=this.options["grpc-node.max_session_memory"]:f.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(f.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let p=(e,t)=>{process.nextTick(()=>r(e,t))},g=()=>{let e;if(t._isSecure()){let r=Object.assign(f,t._getSettings());r.enableTrace=1===this.options["grpc-node.tls_enable_trace"],(e=n.createSecureServer(r)).on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})})}else e=n.createServer(f);return e.setTimeout(0,y),this._setupHandlers(e),e},m=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map(e=>{let r;this.trace("Attempting to bind "+(0,u.subchannelAddressToString)(e)),r=(0,u.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;let n=g();return new Promise((i,s)=>{let a=t=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(e)+" with error "+t.message),i(t)};n.once("error",a),n.listen(r,()=>{let e;if(this.shutdown){n.close(),i(Error("bindAsync failed because server is shutdown"));return}let r=n.address();e="string"==typeof r?{path:r}:{host:r.address,port:r.port};let s=(0,d.registerChannelzSocket)((0,u.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:n,channelzRef:s}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(e)),i("port"in e?e.port:t),n.removeListener("error",a)})})})).then(e=>{let n=0;for(let r of e)if("number"==typeof r&&(n+=1,r!==t))throw Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}}),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});let t=e[0],r=g();return new Promise((n,i)=>{let s=r=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,()=>{if(this.shutdown){r.close(),n({port:0,count:0});return}let t=r.address(),i={host:t.address,port:t.port},a=(0,d.registerChannelzSocket)((0,u.subchannelAddressToString)(i),()=>({localAddress:i,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(a),this.http2ServerList.push({server:r,channelzRef:a}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(i)),n(m(e.slice(1),t.port,1)),r.removeListener("error",s)})})},b={onSuccessfulResolution:(t,r,n)=>{let s;if(b.onSuccessfulResolution=()=>{},this.shutdown&&p(Error("bindAsync failed because server is shutdown"),0),0===t.length)return void p(Error(`No addresses resolved for port ${e}`),0);(s=(0,u.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):m(t,t[0].port,0):m(t,1,0)).then(e=>{if(0===e.count){let e=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,e),p(Error(e),0)}else e.count<t.length&&l.log(i.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),p(null,e.port)},e=>{let r=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,r),p(Error(r),0)})},onError:e=>{p(Error(e.details),0)}};(0,o.createResolver)(h,b,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,n,i){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:e})=>!0!==e.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=t=>{this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef),e(t)},r=0;function n(){0==--r&&t()}for(let{server:e,channelzRef:t}of(this.started=!1,this.shutdown=!0,this.http2ServerList))e.listening&&(r++,e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t)),n()}));this.sessions.forEach((e,t)=>{t.closed||(r+=1,t.close(n))}),0===r&&t()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return"string"==typeof r&&!!r.startsWith("application/grpc")||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return void 0===t?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=i.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==r||r.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed();return}let n=t[g],a=this._retrieveHandler(n);if(!a)return void this._respondWithError(v(n),e,r);let o=new s.Http2ServerCallStream(e,a,this.options);o.once("callEnd",e=>{e===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",e=>{e?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,a,t)||(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed(),o.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${a.type}`}))}_streamHandler(e,t){if(!0!==this._verifyContentType(e,t))return;let r=t[g],n=this._retrieveHandler(r);if(!n)return void this._respondWithError(v(r),e,null);let a=new s.Http2ServerCallStream(e,n,this.options);this._runHandlerForCall(a,n,t)||a.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${n.type}`})}_runHandlerForCall(e,t,r){var n;let i=e.receiveMetadata(r),s=null!=(n=i.get("grpc-encoding")[0])?n:"identity";i.remove("grpc-encoding");let{type:a}=t;if("unary"===a)w(e,t,i,s);else if("clientStream"===a)T(e,t,i,s);else if("serverStream"===a)E(e,t,i,s);else{if("bidi"!==a)return!1;C(e,t,i,s)}return!0}_setupHandlers(e){if(null===e)return;let t=e.address(),r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",e=>{var t,r,i,s,a;if(!this.started)return void e.destroy();let o=(0,d.registerChannelzSocket)(null!=(t=e.socket.remoteAddress)?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled),l={ref:o,streamTracker:new d.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,l);let u=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+u),this.sessionChildrenTracker.refChild(o));let c=null,f=null,p=!1;if(this.maxConnectionAgeMs!==h){let t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;c=null==(i=(r=setTimeout(()=>{var t,r;p=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+u);try{e.goaway(n.constants.NGHTTP2_NO_ERROR,0x7fffffff,Buffer.from("max_age"))}catch(t){e.destroy();return}e.close(),this.maxConnectionAgeGraceMs!==h&&(f=null==(r=(t=setTimeout(()=>{e.destroy()},this.maxConnectionAgeGraceMs)).unref)?void 0:r.call(t))},this.maxConnectionAgeMs+s)).unref)?void 0:i.call(r)}let g=null==(a=(s=setInterval(()=>{var t,r;let n=null==(r=(t=setTimeout(()=>{p=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+u),e.close()},this.keepaliveTimeoutMs)).unref)?void 0:r.call(t);try{e.ping((e,t,r)=>{clearTimeout(n)})}catch(t){e.destroy()}},this.keepaliveTimeMs)).unref)?void 0:a.call(s);e.on("close",()=>{this.channelzEnabled&&(p||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+u),this.sessionChildrenTracker.unrefChild(o),(0,d.unregisterChannelzRef)(o)),c&&clearTimeout(c),f&&clearTimeout(f),g&&clearTimeout(g),this.sessions.delete(e)})})}}async function w(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerUnaryCallImpl(e,r,i);t.func(a,(t,r,n,i)=>{e.sendUnaryMessage(t,r,n,i)})}catch(t){e.sendError(t)}}function T(e,t,r,n){let i=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function a(t,r,n,s){i.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(i.on("error",a),t.func(i,a))}async function E(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerWritableStreamImpl(e,r,t.serialize,i);t.func(a)}catch(t){e.sendError(t)}}function C(e,t,r,n){let i=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(i)}t.Server=S},4518:(e,t,r)=>{"use strict";e.exports=o;var n=r(94313),i=r(51841),s=r(77350);function a(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function o(e){for(var t,r,o=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var u=l[t].resolve(),c=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,h=i.basic[d];r="m"+s.safeProp(u.name),u.map?(o("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===h?o("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,r):o(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,r),o("}")("}")):u.repeated?(o("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==i.packed[d]?o("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",d,r)("w.ldelim()"):(o("for(var i=0;i<%s.length;++i)",r),void 0===h?a(o,u,c,r+"[i]"):o("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,r)),o("}")):(u.optional&&o("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===h?a(o,u,c,r):o("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,r))}return o("return w")}},4719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0;class r{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}}t.BaseSubchannelWrapper=r},4780:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var n=r(49384),i=r(82348);function s(...e){return(0,i.QP)((0,n.$)(e))}},4999:(e,t,r)=>{e.exports=r(85718).Uint8Array},5231:(e,t,r)=>{var n=r(29395),i=r(55048),s="[object AsyncFunction]",a="[object Function]",o="[object GeneratorFunction]",l="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=n(e);return t==a||t==o||t==s||t==l}},5359:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},5566:(e,t,r)=>{var n=r(41011),i=r(34117),s=r(66713),a=r(42403);e.exports=function(e){return function(t){var r=i(t=a(t))?s(t):void 0,o=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return o[e]()+l}}},5674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;let n=r(26786),i={},s=null;t.registerResolver=function(e,t){i[e]=t},t.registerDefaultScheme=function(e){s=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in i)return new i[e.scheme](e,t,r);throw Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in i)return i[e.scheme].getDefaultAuthority(e);throw Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){if(void 0===e.scheme||!(e.scheme in i))if(null!==s)return{scheme:s,authority:void 0,path:(0,n.uriToString)(e)};else return null;return e}},6053:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},6330:e=>{e.exports=function(){return[]}},6341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getPreviouslyRevalidatedTags:function(){return y},getUtils:function(){return m},interpolateDynamicPath:function(){return p},normalizeDynamicRouteParams:function(){return g},normalizeVercelUrl:function(){return f}});let n=r(79551),i=r(11959),s=r(12437),a=r(2015),o=r(78034),l=r(15526),u=r(72887),c=r(74722),d=r(46143),h=r(47912);function f(e,t,r){let i=(0,n.parse)(e.url,!0);for(let e of(delete i.search,Object.keys(i.query))){let n=e!==d.NEXT_QUERY_PARAM_PREFIX&&e.startsWith(d.NEXT_QUERY_PARAM_PREFIX),s=e!==d.NEXT_INTERCEPTION_MARKER_PREFIX&&e.startsWith(d.NEXT_INTERCEPTION_MARKER_PREFIX);(n||s||t.includes(e)||r&&Object.keys(r.groups).includes(e))&&delete i.query[e]}e.url=(0,n.format)(i)}function p(e,t,r){if(!r)return e;for(let n of Object.keys(r.groups)){let i,{optional:s,repeat:a}=r.groups[n],o=`[${a?"...":""}${n}]`;s&&(o=`[${o}]`);let l=t[n];i=Array.isArray(l)?l.map(e=>e&&encodeURIComponent(e)).join("/"):l?encodeURIComponent(l):"",e=e.replaceAll(o,i)}return e}function g(e,t,r,n){let i=!0,s={};for(let i of Object.keys(t.groups)){let a=e[i];"string"==typeof a?a=(0,c.normalizeRscURL)(a):Array.isArray(a)&&(a=a.map(c.normalizeRscURL));let o=r[i],l=t.groups[i].optional;if((Array.isArray(o)?o.some(e=>Array.isArray(a)?a.some(t=>t.includes(e)):null==a?void 0:a.includes(e)):null==a?void 0:a.includes(o))||void 0===a&&!(l&&n))return{params:{},hasValidParams:!1};l&&(!a||Array.isArray(a)&&1===a.length&&("index"===a[0]||a[0]===`[[...${i}]]`))&&(a=void 0,delete e[i]),a&&"string"==typeof a&&t.groups[i].repeat&&(a=a.split("/")),a&&(s[i]=a)}return{params:s,hasValidParams:i}}function m({page:e,i18n:t,basePath:r,rewrites:n,pageIsDynamic:c,trailingSlash:d,caseSensitive:m}){let y,v,b;function S(e){if(!y)return null;let{groups:t,routeKeys:r}=y,n=(0,o.getRouteMatcher)({re:{exec:e=>{let n=Object.fromEntries(new URLSearchParams(e));for(let[e,t]of Object.entries(n)){let r=(0,h.normalizeNextQueryParam)(e);r&&(n[r]=t,delete n[e])}let i={};for(let e of Object.keys(r)){let s=r[e];if(!s)continue;let a=t[s],o=n[e];if(!a.optional&&!o)return null;i[a.pos]=o}return i}},groups:t})(e);return n||null}return c&&(y=(0,a.getNamedRouteRegex)(e,{prefixRouteKeys:!1}),b=(v=(0,o.getRouteMatcher)(y))(e)),{handleRewrites:function(a,o){let h={},f=o.pathname,p=()=>{let t=(0,u.removeTrailingSlash)(f||"");return t===(0,u.removeTrailingSlash)(e)||(null==v?void 0:v(t))},g=n=>{let u=(0,s.getPathMatch)(n.source+(d?"(/)?":""),{removeUnnamedParams:!0,strict:!0,sensitive:!!m});if(!o.pathname)return!1;let p=u(o.pathname);if((n.has||n.missing)&&p){let e=(0,l.matchHas)(a,o.query,n.has,n.missing);e?Object.assign(p,e):p=!1}if(p){let{parsedDestination:s,destQuery:a}=(0,l.prepareDestination)({appendParamsToQuery:!0,destination:n.destination,params:p,query:o.query});if(s.protocol)return!0;if(Object.assign(h,a,p),Object.assign(o.query,s.query),delete s.query,Object.assign(o,s),!(f=o.pathname))return!1;if(r&&(f=f.replace(RegExp(`^${r}`),"")||"/"),t){let e=(0,i.normalizeLocalePath)(f,t.locales);f=e.pathname,o.query.nextInternalLocale=e.detectedLocale||p.nextInternalLocale}if(f===e)return!0;if(c&&v){let e=v(f);if(e)return o.query={...o.query,...e},!0}}return!1};for(let e of n.beforeFiles||[])g(e);if(f!==e){let e=!1;for(let t of n.afterFiles||[])if(e=g(t))break;if(!e&&!p()){for(let t of n.fallback||[])if(e=g(t))break}}return h},defaultRouteRegex:y,dynamicRouteMatcher:v,defaultRouteMatches:b,getParamsFromRouteMatches:S,normalizeDynamicRouteParams:(e,t)=>y&&b?g(e,y,b,t):{params:{},hasValidParams:!1},normalizeVercelUrl:(e,t)=>f(e,t,y),interpolateDynamicPath:(e,t)=>p(e,t,y)}}function y(e,t){return"string"==typeof e[d.NEXT_CACHE_REVALIDATED_TAGS_HEADER]&&e[d.NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER]===t?e[d.NEXT_CACHE_REVALIDATED_TAGS_HEADER].split(","):[]}},6475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return s},findSourceMapURL:function(){return i.findSourceMapURL}});let n=r(11264),i=r(11448),s=r(19357).createServerReference},6843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},7153:(e,t,r)=>{"use strict";e.exports=r(65239).vendored["react-rsc"].React},7162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;let n=r(91645),i=r(21574),s=r(21858),a=r(59571),o=r(24664),l=r(43943);function u(e){return{channel_id:e.id,name:e.name}}function c(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{server_id:e.id}}function h(e){return{socket_id:e.id,name:e.name}}let f=32;class p{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(null==r?void 0:r.kind)==="channel"?r:void 0,childSubchannel:(null==r?void 0:r.kind)==="subchannel"?r:void 0}),this.events.length>=2*f&&(this.events=this.events.slice(f)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:O(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:O(e.timestamp),channel_ref:e.childChannel?u(e.childChannel):null,subchannel_ref:e.childSubchannel?c(e.childSubchannel):null}))}}}t.ChannelzTrace=p;class g{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!=(t=this.channelChildren.get(e.id))?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!=(r=this.subchannelChildren.get(e.id))?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!=(n=this.socketChildren.get(e.id))?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t)}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t))}}}getChildLists(){let e=[];for(let{ref:t}of this.channelChildren.values())e.push(t);let t=[];for(let{ref:e}of this.subchannelChildren.values())t.push(e);let r=[];for(let{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=g;class m{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=m;let y=1;function v(){return y++}let b=[],S=[],w=[],T=[];function E(e){let t=Number.parseInt(e,16);return[t/256|0,t%256]}function C(e){return""===e?[]:[].concat(...e.split(":").map(e=>E(e)))}function x(e){if((0,n.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))));if(!(0,n.isIPv6)(e))return null;{let t,r,n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));let i=Buffer.from(C(t)),s=Buffer.from(C(r)),a=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,a,s])}}function _(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function O(e){if(!e)return null;let t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function I(e){let t=e.getInfo();return{ref:u(e.ref),data:{target:t.target,state:_(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:O(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>u(e)),subchannel_ref:t.children.subchannels.map(e=>c(e))}}function A(e,t){let r=Number.parseInt(e.request.channel_id),n=b[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});t(null,{channel:I(n)})}function k(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_channel_id);for(;i<b.length;i++){let e=b[i];if(void 0!==e&&(n.push(I(e)),n.length>=r))break}t(null,{channel:n,end:i>=w.length})}function R(e){let t=e.getInfo();return{ref:d(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:O(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>h(e))}}function D(e,t){let r=Number.parseInt(e.request.server_id),n=w[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});t(null,{server:R(n)})}function N(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_server_id);for(;i<w.length;i++){let e=w[i];if(void 0!==e&&(n.push(R(e)),n.length>=r))break}t(null,{server:n,end:i>=w.length})}function P(e,t){let r=Number.parseInt(e.request.subchannel_id),n=S[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});let i=n.getInfo();t(null,{subchannel:{ref:c(n.ref),data:{target:i.target,state:_(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:O(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(e=>h(e))}})}function M(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!=(t=x(e.host))?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function j(e,t){var r,n,i,a,o;let l=Number.parseInt(e.request.socket_id),u=T[l];if(void 0===u)return void t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});let c=u.getInfo(),d=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!=(r=c.security.cipherSuiteStandardName)?r:void 0,other_name:null!=(n=c.security.cipherSuiteOtherName)?n:void 0,local_certificate:null!=(i=c.security.localCertificate)?i:void 0,remote_certificate:null!=(a=c.security.remoteCertificate)?a:void 0}}:null;t(null,{socket:{ref:h(u.ref),local:c.localAddress?M(c.localAddress):null,remote:c.remoteAddress?M(c.remoteAddress):null,remote_name:null!=(o=c.remoteName)?o:void 0,security:d,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:O(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:O(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:O(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:O(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}}})}function L(e,t){let r=Number.parseInt(e.request.server_id),n=w[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});let i=Number.parseInt(e.request.start_socket_id),a=Number.parseInt(e.request.max_results),o=n.getInfo().sessionChildren.sockets.sort((e,t)=>e.id-t.id),l=[],u=0;for(;u<o.length&&(!(o[u].id>=i)||(l.push(h(o[u])),!(l.length>=a)));u++);t(null,{socket_ref:l,end:u>=o.length})}function B(){return{GetChannel:A,GetTopChannels:k,GetServer:D,GetServers:N,GetSubchannel:P,GetSocket:j,GetServerSockets:L}}t.registerChannelzChannel=function(e,t,r){let n=v(),i={id:n,name:e,kind:"channel"};return r&&(b[n]={ref:i,getInfo:t}),i},t.registerChannelzSubchannel=function(e,t,r){let n=v(),i={id:n,name:e,kind:"subchannel"};return r&&(S[n]={ref:i,getInfo:t}),i},t.registerChannelzServer=function(e,t){let r=v(),n={id:r,kind:"server"};return t&&(w[r]={ref:n,getInfo:e}),n},t.registerChannelzSocket=function(e,t,r){let n=v(),i={id:n,name:e,kind:"socket"};return r&&(T[n]={ref:i,getInfo:t}),i},t.unregisterChannelzRef=function(e){switch(e.kind){case"channel":delete b[e.id];return;case"subchannel":delete S[e.id];return;case"server":delete w[e.id];return;case"socket":delete T[e.id];return}},t.getChannelzHandlers=B;let F=null;function U(){if(F)return F;let e=(0,r(33742).Yi)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return F=(0,l.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service}t.getChannelzServiceDefinition=U,t.setup=function(){(0,o.registerAdminService)(U,B)}},7383:(e,t,r)=>{var n=r(67009),i=r(32269),s=r(38428),a=r(55048);e.exports=function(e,t,r){if(!a(r))return!1;var o=typeof t;return("number"==o?!!(i(r)&&s(t,r.length)):"string"==o&&t in r)&&n(r[t],e)}},7485:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,a=/\n/g,o=/\s/,l=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"	"};function c(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function d(e,l){e=e.toString();var u=0,d=e.length,h=1,f=0,p={},g=[],m=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(){var t="'"===m?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw y("string");return u=t.lastIndex,C(m),m=null,c(i[1])}function b(t){return e.charAt(t)}function S(t,r,n){var o,u={type:e.charAt(t++),lineEmpty:!1,leading:n},c=t-(l?2:3);do if(--c<0||"\n"===(o=e.charAt(c))){u.lineEmpty=!0;break}while(" "===o||"	"===o);for(var d=e.substring(t,r).split(a),g=0;g<d.length;++g)d[g]=d[g].replace(l?s:i,"").trim();u.text=d.join("\n").trim(),p[h]=u,f=h}function w(t){var r=T(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function T(e){for(var t=e;t<d&&"\n"!==b(t);)t++;return t}function E(){if(g.length>0)return g.shift();if(m)return v();var r,n,i,s,a,c=0===u;do{if(u===d)return null;for(r=!1;o.test(i=b(u));)if("\n"===i&&(c=!0,++h),++u===d)return null;if("/"===b(u)){if(++u===d)throw y("comment");if("/"===b(u))if(l){if(s=u,a=!1,w(u-1)){a=!0;do if((u=T(u))===d||(u++,!c))break;while(w(u))}else u=Math.min(d,T(u)+1);a&&(S(s,u,c),c=!0),h++,r=!0}else{for(a="/"===b(s=u+1);"\n"!==b(++u);)if(u===d)return null;++u,a&&(S(s,u-1,c),c=!0),++h,r=!0}else{if("*"!==(i=b(u)))return"/";s=u+1,a=l||"*"===b(s);do{if("\n"===i&&++h,++u===d)throw y("comment");n=i,i=b(u)}while("*"!==n||"/"!==i);++u,a&&(S(s,u-2,c),c=!0),r=!0}}}while(r);var f=u;if(t.lastIndex=0,!t.test(b(f++)))for(;f<d&&!t.test(b(f));)++f;var p=e.substring(u,u=f);return('"'===p||"'"===p)&&(m=p),p}function C(e){g.push(e)}function x(){if(!g.length){var e=E();if(null===e)return null;C(e)}return g[0]}function _(e,t){var r=x();if(r===e)return E(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1}function O(e){var t,r=null;return void 0===e?(t=p[h-1],delete p[h-1],t&&(l||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(f<e&&x(),t=p[e],delete p[e],t&&!t.lineEmpty&&(l||"/"===t.type)&&(r=t.leading?null:t.text)),r}return Object.defineProperty({next:E,peek:x,push:C,skip:_,cmnt:O},"line",{get:function(){return h}})}d.unescape=c},7538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;let n=r(21858),i=r(66284),s=r(1014),a="retrying_call";class o{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}t.RetryThrottler=o;class l{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let n=null!=(r=this.allocatedPerCall.get(t))?r:0;return!(this.limitPerCall-n<e)&&!(this.totalLimit-this.totalAllocated<e)&&(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let n=null!=(r=this.allocatedPerCall.get(t))?r:0;if(n<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;let r=null!=(t=this.allocatedPerCall.get(e))?t:0;if(this.totalAllocated<r)throw Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}}t.MessageBufferTracker=l;let u="grpc-previous-rpc-attempts";class c{constructor(e,t,r,n,i,s,a,o,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.bufferTracker=o,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(n.LogVerbosity.DEBUG,a,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null==(t=this.listener)||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){for(let{call:r}of(this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new i.Metadata}),this.underlyingCalls))r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!=(t=this.writeBuffer[e-this.writeBufferOffset])?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(let[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>e===t||e.toString().toLowerCase()===n.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=null==(e=this.callConfig)?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){let r;if("RETRY"!==this.state)return void t(!1);let n=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return void t(!1);if(null===e)r=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var e,r;if("RETRY"!==this.state)return void t(!1);(null==(r=null==(e=this.retryThrottler)?void 0:e.canRetryCall())||r)&&(t(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)(null==t?void 0:t.state)==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,i,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!=(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)?n:[],e.code)){let n;if(null==(i=this.retryThrottler)||i.addCallFailed(),null===r)n=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else n=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null==(s=this.retryThrottler)||s.addCallFailed(),this.maybeRetryCall(r,r=>{r||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return -1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK){null==(r=this.retryThrottler)||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if("COMMITTED"===this.state)return void this.reportStatus(e);let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return;let i=null!=(e=n.hedgingDelay)?e:"0s",s=Number(i.substring(0,i.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*s),null==(r=(t=this.hedgingTimer).unref)||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(u,`${r}`);let i=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),i=!0,r>0&&n.set(u,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!i&&r>0&&n.metadata.set(u,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let n=this.underlyingCalls[e],i=n.nextMessageToSend;null==(r=(t=this.getBufferEntry(i)).callback)||r.call(t),this.clearSentMessages(),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let n={message:t,flags:e.flags},i=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated)for(let[n,s]of(null==(r=e.callback)||r.call(e),this.underlyingCalls.entries()))"ACTIVE"===s.state&&s.nextMessageToSend===i&&s.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(n)}},t);else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;let r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===i&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){for(let e of(this.trace("startRead called"),this.readStarted=!0,this.underlyingCalls))(null==e?void 0:e.state)==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();for(let t of(this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1}),this.underlyingCalls))(null==t?void 0:t.state)==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}t.RetryingCall=c},7651:(e,t,r)=>{var n=r(82038),i=r(52931),s=r(32269);e.exports=function(e){return s(e)?n(e):i(e)}},7775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;let n=r(24168),i=r(18453),s=r(18155),a=r(71271),o=r(86777),l=r(3712),u=Symbol(),c=Symbol(),d=Symbol(),h=Symbol();function f(e){return"function"==typeof e}function p(e){return e.stack.split("\n").slice(1).join("\n")}class g{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[c]=null!=(n=r.interceptors)?n:[],delete r.interceptors,this[d]=null!=(s=r.interceptor_providers)?s:[],delete r.interceptor_providers,this[c].length>0&&this[d].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[u]=r.channelOverride;else if(r.channelFactoryOverride){let n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[u]=n(e,t,r)}else this[u]=new i.ChannelImplementation(e,t,r)}close(){this[u].close()}getChannel(){return this[u]}waitForReady(e,t){let r=n=>{let i;if(n)return void t(Error("Failed to connect before the deadline"));try{i=this[u].getConnectivityState(!0)}catch(e){t(Error("The channel has been closed"));return}if(i===s.ConnectivityState.READY)t();else try{this[u].watchConnectivityState(i,e,r)}catch(e){t(Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(f(e))return{metadata:new o.Metadata,options:{},callback:e};if(f(t))if(e instanceof o.Metadata)return{metadata:e,options:{},callback:t};else return{metadata:new o.Metadata,options:e,callback:t};if(!(e instanceof o.Metadata&&t instanceof Object&&f(r)))throw Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,f){var g,m;let y=this.checkOptionalUnaryResponseArguments(s,o,f),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},b={argument:i,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[u],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(b=this[h](b));let S=b.call,w={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(g=b.callOptions.interceptors)?g:[],callInterceptorProviders:null!=(m=b.callOptions.interceptor_providers)?m:[]},T=(0,l.getInterceptingCall)(w,b.methodDefinition,b.callOptions,b.channel);S.call=T;let E=null,C=!1,x=Error();return T.start(b.metadata,{onReceiveMetadata:e=>{S.emit("metadata",e)},onReceiveMessage(e){null!==E&&T.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),E=e},onReceiveStatus(e){if(!C){if(C=!0,e.code===a.Status.OK)if(null===E){let t=p(x);b.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else b.callback(null,E);else{let t=p(x);b.callback((0,n.callErrorFromStatus)(e,t))}x=null,S.emit("status",e)}}}),T.sendMessage(i),T.halfClose(),S}makeClientStreamRequest(e,t,r,i,s,o){var f,g;let m=this.checkOptionalUnaryResponseArguments(i,s,o),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:m.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[u],methodDefinition:y,callOptions:m.options,callback:m.callback};this[h]&&(v=this[h](v));let b=v.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(f=v.callOptions.interceptors)?f:[],callInterceptorProviders:null!=(g=v.callOptions.interceptor_providers)?g:[]},w=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);b.call=w;let T=null,E=!1,C=Error();return w.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==T&&w.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),T=e},onReceiveStatus(e){if(!E){if(E=!0,e.code===a.Status.OK)if(null===T){let t=p(C);v.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,T);else{let t=p(C);v.callback((0,n.callErrorFromStatus)(e,t))}C=null,b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let r,n;return e instanceof o.Metadata?(r=e,n=t||{}):(n=e||{},r=new o.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,o){var f,g;let m=this.checkMetadataAndOptions(s,o),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:i,metadata:m.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[u],methodDefinition:y,callOptions:m.options};this[h]&&(v=this[h](v));let b=v.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(f=v.callOptions.interceptors)?f:[],callInterceptorProviders:null!=(g=v.callOptions.interceptor_providers)?g:[]},w=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);b.call=w;let T=!1,E=Error();return w.start(v.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!T){if(T=!0,b.push(null),e.code!==a.Status.OK){let t=p(E);b.emit("error",(0,n.callErrorFromStatus)(e,t))}E=null,b.emit("status",e)}}}),w.sendMessage(i),w.halfClose(),b}makeBidiStreamRequest(e,t,r,i,s){var o,f;let g=this.checkMetadataAndOptions(i,s),m={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},y={metadata:g.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[u],methodDefinition:m,callOptions:g.options};this[h]&&(y=this[h](y));let v=y.call,b={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(o=y.callOptions.interceptors)?o:[],callInterceptorProviders:null!=(f=y.callOptions.interceptor_providers)?f:[]},S=(0,l.getInterceptingCall)(b,y.methodDefinition,y.callOptions,y.channel);v.call=S;let w=!1,T=Error();return S.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!w){if(w=!0,v.push(null),e.code!==a.Status.OK){let t=p(T);v.emit("error",(0,n.callErrorFromStatus)(e,t))}T=null,v.emit("status",e)}}}),v}}t.Client=g},7995:(e,t,r)=>{"use strict";t.Service=r(53547)},8004:(e,t,r)=>{"use strict";e.exports=a;var n=r(62886);((a.prototype=Object.create(n.prototype)).constructor=a).className="MapField";var i=r(51841),s=r(77350);function a(e,t,r,i,a,o){if(n.call(this,e,t,i,void 0,void 0,a,o),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new a(i,e,t,r))}}},8304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_METADATA_ROUTE_EXTENSIONS:function(){return o},STATIC_METADATA_IMAGES:function(){return a},getExtensionRegexString:function(){return l},isMetadataPage:function(){return d},isMetadataRoute:function(){return h},isMetadataRouteFile:function(){return u},isStaticMetadataRoute:function(){return c}});let n=r(12958),i=r(74722),s=r(70554),a={icon:{filename:"icon",extensions:["ico","jpg","jpeg","png","svg"]},apple:{filename:"apple-icon",extensions:["jpg","jpeg","png"]},favicon:{filename:"favicon",extensions:["ico"]},openGraph:{filename:"opengraph-image",extensions:["jpg","jpeg","png","gif"]},twitter:{filename:"twitter-image",extensions:["jpg","jpeg","png","gif"]}},o=["js","jsx","ts","tsx"],l=(e,t)=>t&&0!==t.length?`(?:\\.(${e.join("|")})|(\\.(${t.join("|")})))`:`(\\.(?:${e.join("|")}))`;function u(e,t,r){let i=(r?"":"?")+"$",s="\\d?",o=r?"":"(-\\w{6})?",u=`${s}${o}`,c=[RegExp(`^[\\\\/]robots${l(t.concat("txt"),null)}${i}`),RegExp(`^[\\\\/]manifest${l(t.concat("webmanifest","json"),null)}${i}`),RegExp("^[\\\\/]favicon\\.ico$"),RegExp(`[\\\\/]sitemap${l(["xml"],t)}${i}`),RegExp(`[\\\\/]${a.icon.filename}${u}${l(a.icon.extensions,t)}${i}`),RegExp(`[\\\\/]${a.apple.filename}${u}${l(a.apple.extensions,t)}${i}`),RegExp(`[\\\\/]${a.openGraph.filename}${u}${l(a.openGraph.extensions,t)}${i}`),RegExp(`[\\\\/]${a.twitter.filename}${u}${l(a.twitter.extensions,t)}${i}`)],d=(0,n.normalizePathSep)(e);return c.some(e=>e.test(d))}function c(e){let t=e.replace(/\/route$/,"");return(0,s.isAppRouteRoute)(e)&&u(t,[],!0)&&"/robots.txt"!==t&&"/manifest.webmanifest"!==t&&!t.endsWith("/sitemap.xml")}function d(e){return!(0,s.isAppRouteRoute)(e)&&u(e,[],!1)}function h(e){let t=(0,i.normalizeAppPath)(e).replace(/^\/?app\//,"").replace("/[__metadata_id__]","").replace(/\/route$/,"");return"/"!==t[0]&&(t="/"+t),(0,s.isAppRouteRoute)(e)&&u(t,[],!1)}},8336:(e,t,r)=>{var n=r(45803);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},8707:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(75108),n.base64=r(35108),n.EventEmitter=r(84553),n.float=r(13127),n.inquire=r(89644),n.utf8=r(61996),n.pool=r(83273),n.LongBits=r(31156),n.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},8852:(e,t,r)=>{var n=r(1707);e.exports=function(e){return function(t){return n(t,e)}}},8920:(e,t,r)=>{"use strict";e.exports=i;var n=r(8707);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},9227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;let n=r(29021);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,s=null;t.getDefaultRootsData=function(){return i?(null===s&&(s=n.readFileSync(i)),s):null}},9611:(e,t,r)=>{"use strict";e.exports=i;var n=r(29750);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},9672:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(36735),n.BufferWriter=r(76567),n.Reader=r(12687),n.BufferReader=r(87316),n.util=r(29750),n.rpc=r(7995),n.roots=r(68037),n.configure=i,i()},10079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;t.getNextCallNumber=function(){return r++}},10090:(e,t,r)=>{var n=r(80458),i=r(89624),s=r(47282),a=s&&s.isTypedArray;e.exports=a?i(a):n},10275:(e,t,r)=>{"use strict";e.exports=i;var n=r(29750);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/0x100000000>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++n>0xffffffff&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e))if(!n.Long)return i.fromNumber(parseInt(e,10));else e=n.Long.fromString(e);return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+0x100000000*r)}return this.lo+0x100000000*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var o=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?s:new i((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},10504:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;let n=r(21820),i=r(71271),s=r(86239),a=/^\d+(\.\d{1,9})?s$/,o="node";function l(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof e.service}`);if(!("method"in e)||""===e.method)return{service:e.service};if("string"!=typeof e.method)throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof e.service}`);return{service:e.service,method:e.method}}if("method"in e&&void 0!==e.method)throw Error("Invalid method config name: method set with empty or unset service");return{}}function u(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!a.test(e.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!a.test(e.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e&&Array.isArray(e.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}function c(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!a.test(e.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(let t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}function d(e){var t;let r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw Error("Invalid method config: invalid name array");for(let t of e.name)r.name.push(l(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else if("string"==typeof e.timeout&&a.test(e.timeout)){let n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:(null!=(t=n[1])?t:0)|0}}else throw Error("Invalid method config: invalid timeout");if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e)if("hedgingPolicy"in e)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");else r.retryPolicy=u(e.retryPolicy);else"hedgingPolicy"in e&&(r.hedgingPolicy=c(e.hedgingPolicy));return r}function h(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function f(e){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e)if("string"==typeof e.loadBalancingPolicy)t.loadBalancingPolicy=e.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in e)if(Array.isArray(e.loadBalancingConfig))for(let r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r));else throw Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in e&&Array.isArray(e.methodConfig))for(let r of e.methodConfig)t.methodConfig.push(d(r));"retryThrottling"in e&&(t.retryThrottling=h(e.retryThrottling));let r=[];for(let e of t.methodConfig)for(let t of e.name){for(let e of r)if(t.service===e.service&&t.method===e.method)throw Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function p(e){if(!("serviceConfig"in e))throw Error("Invalid service config choice: missing service config");let t={serviceConfig:f(e.serviceConfig)};if("clientLanguage"in e)if(Array.isArray(e.clientLanguage))for(let r of(t.clientLanguage=[],e.clientLanguage))if("string"==typeof r)t.clientLanguage.push(r);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in e)if(Array.isArray(e.clientHostname))for(let r of(t.clientHostname=[],e.clientHostname))if("string"==typeof r)t.clientHostname.push(r);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname");if("percentage"in e)if("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100)t.percentage=e.percentage;else throw Error("Invalid service config choice: invalid percentage");let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let t in e)if(!r.includes(t))throw Error(`Invalid service config choice: unexpected field ${t}`);return t}function g(e,t){if(!Array.isArray(e))throw Error("Invalid service config list");for(let r of e){let e=p(r);if("number"!=typeof e.percentage||!(t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(let r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(let r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw Error("No matching service config found")}t.validateRetryThrottling=h,t.validateServiceConfig=f,t.extractAndSelectServiceConfig=function(e,t){for(let r of e)if(r.length>0&&r[0].startsWith("grpc_config="))return g(JSON.parse(r.join("").substring(12)),t);return null}},10653:(e,t,r)=>{var n=r(21456),i=r(63979),s=r(7651);e.exports=function(e){return n(e,s,i)}},10663:e=>{e.exports="object"==typeof global&&global&&global.Object===Object&&global},10788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0;class r{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}t.StatusBuilder=r},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11117:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,s),!0;case 6:return c.fn.call(c.context,t,n,i,s,a),!0}for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[s]=1===u.length?u[0]:u:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},11422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;let n=r(21858),i=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];t.restrictControlPlaneStatusCode=function(e,t){return i.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}}},11424:(e,t,r)=>{var n=r(47603);e.exports=r(66400)(n)},11539:(e,t,r)=>{var n=r(37643),i=r(55048),s=r(49227),a=0/0,o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=l.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):o.test(e)?a:+e}},12290:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},12344:(e,t,r)=>{e.exports=r(65984)()},12437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPathMatch",{enumerable:!0,get:function(){return i}});let n=r(35362);function i(e,t){let r=[],i=(0,n.pathToRegexp)(e,r,{delimiter:"/",sensitive:"boolean"==typeof(null==t?void 0:t.sensitive)&&t.sensitive,strict:null==t?void 0:t.strict}),s=(0,n.regexpToFunction)((null==t?void 0:t.regexModifier)?new RegExp(t.regexModifier(i.source),i.flags):i,r);return(e,n)=>{if("string"!=typeof e)return!1;let i=s(e);if(!i)return!1;if(null==t?void 0:t.removeUnnamedParams)for(let e of r)"number"==typeof e.name&&delete i.params[e.name];return{...n,...i.params}}}},12529:(e,t,r)=>{"use strict";e.exports=a;var n=r(76139);((a.prototype=Object.create(n.prototype)).constructor=a).className="OneOf";var i=r(62886),s=r(77350);function a(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}o(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},12630:(e,t,r)=>{"use strict";e.exports=a;var n=r(64824);((a.prototype=Object.create(n.prototype)).constructor=a).className="OneOf";var i=r(73267),s=r(93107);function a(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}o(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},12687:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(29750),s=i.LongBits,a=i.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},c=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var e=0xffffffff;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do if(this.pos>=this.len)throw o(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=c(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},12958:(e,t)=>{"use strict";function r(e){return e.replace(/\\/g,"/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizePathSep",{enumerable:!0,get:function(){return r}})},13127:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?!function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function o(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?a:o,e.readFloatBE=n?o:a}():!function(){function t(e,t,r,n){var i=+(t<0);if(i&&(t=-t),0===t)e(1/t>0?0:0x80000000,r,n);else if(isNaN(t))e(0x7fc00000,r,n);else if(t>34028234663852886e22)e((i<<31|0x7f800000)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((i<<31|s+127<<23|a)>>>0,r,n)}}function a(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,a=8388607&n;return 255===s?a?NaN:1/0*i:0===s?1401298464324817e-60*i*a:i*Math.pow(2,s-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,i),e.readFloatBE=a.bind(null,s)}(),"undefined"!=typeof Float64Array?!function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function o(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?a:o,e.readDoubleBE=n?o:a}():!function(){function t(e,t,r,n,i,s){var a,o=+(n<0);if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:0x80000000,i,s+r);else if(isNaN(n))e(0,i,s+t),e(0x7ff80000,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|0x7ff00000)>>>0,i,s+r);else if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,s+t),e((o<<31|a/0x100000000)>>>0,i,s+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(0x10000000000000*(a=n*Math.pow(2,-l))>>>0,i,s+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}function a(e,t,r,n,i){var s=e(n,i+t),a=e(n,i+r),o=(a>>31)*2+1,l=a>>>20&2047,u=0x100000000*(1048575&a)+s;return 2047===l?u?NaN:1/0*o:0===l?5e-324*o*u:o*Math.pow(2,l-1075)*(u+0x10000000000000)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,i,0,4),e.readDoubleBE=a.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},13944:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DetachedPromise",{enumerable:!0,get:function(){return r}});class r{constructor(){let e,t;this.promise=new Promise((r,n)=>{e=r,t=n}),this.resolve=e,this.reject=t}}},14426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;let n=r(73496),i=r(21858),s=r(28651),a=r(62251),o=r(40649),l=r(1014),u=r(59571),c=r(38717),d=r(7162),h=0x7fffffff,f=0x7fffffff,p=2e4,{HTTP2_HEADER_PATH:g}=n.constants,m="server";function y(){}function v(e){return{code:i.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function b(e,t){let r=v(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw Error(`Invalid handlerType ${e}`)}}class S{constructor(e){var t,r,n,i;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new d.ChannelzTrace,this.callTracker=new d.ChannelzCallTracker,this.listenerChildrenTracker=new d.ChannelzChildrenTracker,this.sessionChildrenTracker=new d.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,d.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!=(t=this.options["grpc.max_connection_age_ms"])?t:h,this.maxConnectionAgeGraceMs=null!=(r=this.options["grpc.max_connection_age_grace_ms"])?r:h,this.keepaliveTimeMs=null!=(n=this.options["grpc.keepalive_time_ms"])?n:f,this.keepaliveTimeoutMs=null!=(i=this.options["grpc.keepalive_timeout_ms"])?i:p,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;let i,s=this.sessions.get(e),a=e.socket,o=a.remoteAddress?(0,u.stringToSubchannelAddress)(a.remoteAddress,a.remotePort):null,l=a.localAddress?(0,u.stringToSubchannelAddress)(a.localAddress,a.localPort):null;if(e.encrypted){let e=a,r=e.getCipher(),n=e.getCertificate(),s=e.getPeerCertificate();i={cipherSuiteStandardName:null!=(t=r.standardName)?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:l,security:i,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!=(r=e.state.localWindowSize)?r:null,remoteFlowControlWindow:null!=(n=e.state.remoteWindowSize)?n:null}}}trace(e){l.trace(i.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+e)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw Error("addService() requires two objects as arguments");let r=Object.keys(e);if(0===r.length)throw Error("Cannot add an empty service to a server");r.forEach(r=>{let n,i,s=e[r];n=s.requestStream?s.responseStream?"bidi":"clientStream":s.responseStream?"serverStream":"unary";let a=t[r];if(void 0===a&&"string"==typeof s.originalName&&(a=t[s.originalName]),i=void 0!==a?a.bind(t):b(n,r),!1===this.register(s.path,i,s.responseSerialize,s.requestDeserialize,n))throw Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{let r=e[t];this.unregister(r.path)})}bind(e,t){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw Error("server is already started");if(this.shutdown)throw Error("bindAsync called after shutdown");if("string"!=typeof e)throw TypeError("port must be a string");if(null===t||!(t instanceof a.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw TypeError("callback must be a function");let s=(0,c.parseUri)(e);if(null===s)throw Error(`Could not parse port "${e}"`);let h=(0,o.mapUriDefaultScheme)(s);if(null===h)throw Error(`Could not get a default scheme for port "${e}"`);let f={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?f.maxSessionMemory=this.options["grpc-node.max_session_memory"]:f.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(f.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let p=(e,t)=>{process.nextTick(()=>r(e,t))},g=()=>{let e;if(t._isSecure()){let r=Object.assign(f,t._getSettings());r.enableTrace=1===this.options["grpc-node.tls_enable_trace"],(e=n.createSecureServer(r)).on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})})}else e=n.createServer(f);return e.setTimeout(0,y),this._setupHandlers(e),e},m=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map(e=>{let r;this.trace("Attempting to bind "+(0,u.subchannelAddressToString)(e)),r=(0,u.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;let n=g();return new Promise((i,s)=>{let a=t=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(e)+" with error "+t.message),i(t)};n.once("error",a),n.listen(r,()=>{let e;if(this.shutdown){n.close(),i(Error("bindAsync failed because server is shutdown"));return}let r=n.address();e="string"==typeof r?{path:r}:{host:r.address,port:r.port};let s=(0,d.registerChannelzSocket)((0,u.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:n,channelzRef:s}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(e)),i("port"in e?e.port:t),n.removeListener("error",a)})})})).then(e=>{let n=0;for(let r of e)if("number"==typeof r&&(n+=1,r!==t))throw Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}}),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});let t=e[0],r=g();return new Promise((n,i)=>{let s=r=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,()=>{if(this.shutdown){r.close(),n({port:0,count:0});return}let t=r.address(),i={host:t.address,port:t.port},a=(0,d.registerChannelzSocket)((0,u.subchannelAddressToString)(i),()=>({localAddress:i,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(a),this.http2ServerList.push({server:r,channelzRef:a}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(i)),n(m(e.slice(1),t.port,1)),r.removeListener("error",s)})})},b={onSuccessfulResolution:(t,r,n)=>{let s;if(b.onSuccessfulResolution=()=>{},this.shutdown&&p(Error("bindAsync failed because server is shutdown"),0),0===t.length)return void p(Error(`No addresses resolved for port ${e}`),0);(s=(0,u.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):m(t,t[0].port,0):m(t,1,0)).then(e=>{if(0===e.count){let e=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,e),p(Error(e),0)}else e.count<t.length&&l.log(i.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),p(null,e.port)},e=>{let r=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,r),p(Error(r),0)})},onError:e=>{p(Error(e.details),0)}};(0,o.createResolver)(h,b,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,n,i){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:e})=>!0!==e.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=t=>{this.channelzEnabled&&(0,d.unregisterChannelzRef)(this.channelzRef),e(t)},r=0;function n(){0==--r&&t()}for(let{server:e,channelzRef:t}of(this.started=!1,this.shutdown=!0,this.http2ServerList))e.listening&&(r++,e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,d.unregisterChannelzRef)(t)),n()}));this.sessions.forEach((e,t)=>{t.closed||(r+=1,t.close(n))}),0===r&&t()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return"string"==typeof r&&!!r.startsWith("application/grpc")||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return void 0===t?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=i.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==r||r.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed();return}let n=t[g],a=this._retrieveHandler(n);if(!a)return void this._respondWithError(v(n),e,r);let o=new s.Http2ServerCallStream(e,a,this.options);o.once("callEnd",e=>{e===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",e=>{e?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,a,t)||(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed(),o.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${a.type}`}))}_streamHandler(e,t){if(!0!==this._verifyContentType(e,t))return;let r=t[g],n=this._retrieveHandler(r);if(!n)return void this._respondWithError(v(r),e,null);let a=new s.Http2ServerCallStream(e,n,this.options);this._runHandlerForCall(a,n,t)||a.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${n.type}`})}_runHandlerForCall(e,t,r){var n;let i=e.receiveMetadata(r),s=null!=(n=i.get("grpc-encoding")[0])?n:"identity";i.remove("grpc-encoding");let{type:a}=t;if("unary"===a)w(e,t,i,s);else if("clientStream"===a)T(e,t,i,s);else if("serverStream"===a)E(e,t,i,s);else{if("bidi"!==a)return!1;C(e,t,i,s)}return!0}_setupHandlers(e){if(null===e)return;let t=e.address(),r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",e=>{var t,r,i,s,a;if(!this.started)return void e.destroy();let o=(0,d.registerChannelzSocket)(null!=(t=e.socket.remoteAddress)?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled),l={ref:o,streamTracker:new d.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,l);let u=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+u),this.sessionChildrenTracker.refChild(o));let c=null,f=null,p=!1;if(this.maxConnectionAgeMs!==h){let t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;c=null==(i=(r=setTimeout(()=>{var t,r;p=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+u);try{e.goaway(n.constants.NGHTTP2_NO_ERROR,0x7fffffff,Buffer.from("max_age"))}catch(t){e.destroy();return}e.close(),this.maxConnectionAgeGraceMs!==h&&(f=null==(r=(t=setTimeout(()=>{e.destroy()},this.maxConnectionAgeGraceMs)).unref)?void 0:r.call(t))},this.maxConnectionAgeMs+s)).unref)?void 0:i.call(r)}let g=null==(a=(s=setInterval(()=>{var t,r;let n=null==(r=(t=setTimeout(()=>{p=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+u),e.close()},this.keepaliveTimeoutMs)).unref)?void 0:r.call(t);try{e.ping((e,t,r)=>{clearTimeout(n)})}catch(t){e.destroy()}},this.keepaliveTimeMs)).unref)?void 0:a.call(s);e.on("close",()=>{this.channelzEnabled&&(p||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+u),this.sessionChildrenTracker.unrefChild(o),(0,d.unregisterChannelzRef)(o)),c&&clearTimeout(c),f&&clearTimeout(f),g&&clearTimeout(g),this.sessions.delete(e)})})}}async function w(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerUnaryCallImpl(e,r,i);t.func(a,(t,r,n,i)=>{e.sendUnaryMessage(t,r,n,i)})}catch(t){e.sendError(t)}}function T(e,t,r,n){let i=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function a(t,r,n,s){i.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(i.on("error",a),t.func(i,a))}async function E(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerWritableStreamImpl(e,r,t.serialize,i);t.func(a)}catch(t){e.sendError(t)}}function C(e,t,r,n){let i=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(i)}t.Server=S},14675:e=>{e.exports=function(e){return function(){return e}}},14947:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>y});var n=r(60687),i=r(29867),s=r(43210),a=r(84966),o=r(24224),l=r(78726),u=r(4780);let c=a.Kq,d=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.LM,{ref:r,className:(0,u.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));d.displayName=a.LM.displayName;let h=(0,o.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=s.forwardRef(({className:e,variant:t,...r},i)=>(0,n.jsx)(a.bL,{ref:i,className:(0,u.cn)(h({variant:t}),e),...r}));f.displayName=a.bL.displayName,s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.rc,{ref:r,className:(0,u.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=a.rc.displayName;let p=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.bm,{ref:r,className:(0,u.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:(0,n.jsx)(l.A,{className:"h-4 w-4"})}));p.displayName=a.bm.displayName;let g=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.hE,{ref:r,className:(0,u.cn)("text-sm font-semibold",e),...t}));g.displayName=a.hE.displayName;let m=s.forwardRef(({className:e,...t},r)=>(0,n.jsx)(a.VY,{ref:r,className:(0,u.cn)("text-sm opacity-90",e),...t}));function y(){let{toasts:e}=(0,i.dj)();return(0,n.jsxs)(c,{children:[e.map(function({id:e,title:t,description:r,action:i,...s}){return(0,n.jsxs)(f,{...s,children:[(0,n.jsxs)("div",{className:"grid gap-1",children:[t&&(0,n.jsx)(g,{children:t}),r&&(0,n.jsx)(m,{children:r})]}),i,(0,n.jsx)(p,{})]},e)}),(0,n.jsx)(d,{})]})}m.displayName=a.VY.displayName},15451:(e,t,r)=>{var n=r(29395),i=r(27467),s="[object Arguments]";e.exports=function(e){return i(e)&&n(e)==s}},15526:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{compileNonPath:function(){return h},matchHas:function(){return d},parseDestination:function(){return f},prepareDestination:function(){return p}});let n=r(35362),i=r(53293),s=r(76759),a=r(71437),o=r(88212);function l(e){let t="";for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);(n>64&&n<91||n>96&&n<123)&&(t+=e[r])}return t}function u(e,t){return e.replace(RegExp(":"+(0,i.escapeStringRegexp)(t),"g"),"__ESC_COLON_"+t)}function c(e){return e.replace(/__ESC_COLON_/gi,":")}function d(e,t,r,n){void 0===r&&(r=[]),void 0===n&&(n=[]);let i={},s=r=>{let n,s=r.key;switch(r.type){case"header":s=s.toLowerCase(),n=e.headers[s];break;case"cookie":n="cookies"in e?e.cookies[r.key]:(0,o.getCookieParser)(e.headers)()[r.key];break;case"query":n=t[s];break;case"host":{let{host:t}=(null==e?void 0:e.headers)||{};n=null==t?void 0:t.split(":",1)[0].toLowerCase()}}if(!r.value&&n)return i[l(s)]=n,!0;if(n){let e=RegExp("^"+r.value+"$"),t=Array.isArray(n)?n.slice(-1)[0].match(e):n.match(e);if(t)return Array.isArray(t)&&(t.groups?Object.keys(t.groups).forEach(e=>{i[e]=t.groups[e]}):"host"===r.type&&t[0]&&(i.host=t[0])),!0}return!1};return!(!r.every(e=>s(e))||n.some(e=>s(e)))&&i}function h(e,t){if(!e.includes(":"))return e;for(let r of Object.keys(t))e.includes(":"+r)&&(e=e.replace(RegExp(":"+r+"\\*","g"),":"+r+"--ESCAPED_PARAM_ASTERISKS").replace(RegExp(":"+r+"\\?","g"),":"+r+"--ESCAPED_PARAM_QUESTION").replace(RegExp(":"+r+"\\+","g"),":"+r+"--ESCAPED_PARAM_PLUS").replace(RegExp(":"+r+"(?!\\w)","g"),"--ESCAPED_PARAM_COLON"+r));return e=e.replace(/(:|\*|\?|\+|\(|\)|\{|\})/g,"\\$1").replace(/--ESCAPED_PARAM_PLUS/g,"+").replace(/--ESCAPED_PARAM_COLON/g,":").replace(/--ESCAPED_PARAM_QUESTION/g,"?").replace(/--ESCAPED_PARAM_ASTERISKS/g,"*"),(0,n.compile)("/"+e,{validate:!1})(t).slice(1)}function f(e){let t=e.destination;for(let r of Object.keys({...e.params,...e.query}))r&&(t=u(t,r));let r=(0,s.parseUrl)(t),n=r.pathname;n&&(n=c(n));let i=r.href;i&&(i=c(i));let a=r.hostname;a&&(a=c(a));let o=r.hash;return o&&(o=c(o)),{...r,pathname:n,hostname:a,href:i,hash:o}}function p(e){let t,r,i=Object.assign({},e.query),s=f(e),{hostname:o,query:l}=s,u=s.pathname;s.hash&&(u=""+u+s.hash);let d=[],p=[];for(let e of((0,n.pathToRegexp)(u,p),p))d.push(e.name);if(o){let e=[];for(let t of((0,n.pathToRegexp)(o,e),e))d.push(t.name)}let g=(0,n.compile)(u,{validate:!1});for(let[r,i]of(o&&(t=(0,n.compile)(o,{validate:!1})),Object.entries(l)))Array.isArray(i)?l[r]=i.map(t=>h(c(t),e.params)):"string"==typeof i&&(l[r]=h(c(i),e.params));let m=Object.keys(e.params).filter(e=>"nextInternalLocale"!==e);if(e.appendParamsToQuery&&!m.some(e=>d.includes(e)))for(let t of m)t in l||(l[t]=e.params[t]);if((0,a.isInterceptionRouteAppPath)(u))for(let t of u.split("/")){let r=a.INTERCEPTION_ROUTE_MARKERS.find(e=>t.startsWith(e));if(r){"(..)(..)"===r?(e.params["0"]="(..)",e.params["1"]="(..)"):e.params["0"]=r;break}}try{let[n,i]=(r=g(e.params)).split("#",2);t&&(s.hostname=t(e.params)),s.pathname=n,s.hash=(i?"#":"")+(i||""),delete s.search}catch(e){if(e.message.match(/Expected .*? to not repeat, but got an array/))throw Object.defineProperty(Error("To use a multi-match in the destination you must add `*` at the end of the param name to signify it should repeat. https://nextjs.org/docs/messages/invalid-multi-match"),"__NEXT_ERROR_CODE",{value:"E329",enumerable:!1,configurable:!0});throw e}return s.query={...i,...s.query},{newUrl:r,destQuery:l,parsedDestination:s}}},15696:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},15871:(e,t,r)=>{var n=r(36341),i=r(27467);function s(e,t,r,a,o){return e===t||(null!=e&&null!=t&&(i(e)||i(t))?n(e,t,r,a,s,o):e!=e&&t!=t)}e.exports=s},15883:(e,t,r)=>{var n=r(2984),i=r(46063),s=r(48169);e.exports=function(e){return e&&e.length?n(e,s,i):void 0}},15909:(e,t,r)=>{var n=r(87506),i=r(66930),s=r(658);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},16239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;let n=r(31359),i=r(71271),s=r(5674),a=r(81630),o=r(34631),l=r(31359),u=r(43356),c=r(26786),d=r(79551),h=r(44660),f="proxy";function p(e){l.trace(i.LogVerbosity.DEBUG,f,e)}function g(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,n.log)(i.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(i.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(i.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);let a=e.hostname,o=e.port;""===o&&(o="80");let l={address:`${a}:${o}`};return s&&(l.creds=s),p("Proxy server "+l.address+" set by environment variable "+r),l}function m(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return(e||(e=process.env.no_proxy,t="no_proxy"),e)?(p("No proxy server list set by environment variable "+t),e.split(",")):[]}t.mapProxyName=function(e,t){var r;let n={target:e,extraOptions:{}};if((null!=(r=t["grpc.enable_http_proxy"])?r:1)===0||"unix"===e.scheme)return n;let i=g();if(!i.address)return n;let s=(0,c.splitHostPort)(e.path);if(!s)return n;let a=s.host;for(let t of m())if(t===a)return p("Not using proxy for target in no_proxy list: "+(0,c.uriToString)(e)),n;let o={"grpc.http_connect_target":(0,c.uriToString)(e)};return i.creds&&(o["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:o}},t.getProxiedConnection=function(e,t,r){var l;if(!("grpc.http_connect_target"in t))return Promise.resolve({});let d=t["grpc.http_connect_target"],f=(0,c.parseUri)(d);if(null===f)return Promise.resolve({});let g=(0,c.splitHostPort)(f.path);if(null===g)return Promise.resolve({});let m=`${g.host}:${null!=(l=g.port)?l:h.DEFAULT_PORT}`,y={method:"CONNECT",path:m},v={Host:m};(0,u.isTcpSubchannelAddress)(e)?(y.host=e.host,y.port=e.port):y.socketPath=e.path,"grpc.http_connect_creds"in t&&(v["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),y.headers=v;let b=(0,u.subchannelAddressToString)(e);return p("Using proxy "+b+" to connect to "+y.path),new Promise((e,t)=>{let l=a.request(y);l.once("connect",(a,u,d)=>{var h;if(l.removeAllListeners(),u.removeAllListeners(),200===a.statusCode)if(p("Successfully connected to "+y.path+" through proxy "+b),"secureContext"in r){let n=(0,s.getDefaultAuthority)(f),i=(0,c.splitHostPort)(n),a=null!=(h=null==i?void 0:i.host)?h:n,l=o.connect(Object.assign({host:a,servername:a,socket:u},r),()=>{p("Successfully established a TLS connection to "+y.path+" through proxy "+b),e({socket:l,realTarget:f})});l.on("error",e=>{p("Failed to establish a TLS connection to "+y.path+" through proxy "+b+" with error "+e.message),t()})}else p("Successfully established a plaintext connection to "+y.path+" through proxy "+b),e({socket:u,realTarget:f});else(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to "+y.path+" through proxy "+b+" with status "+a.statusCode),t()}),l.once("error",e=>{l.removeAllListeners(),(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to proxy "+b+" with error "+e.message),t()}),l.end()})}},16591:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},16854:e=>{e.exports=function(e){return this.__data__.has(e)}},16973:(e,t,r)=>{"use strict";e.exports=l;var n=r(32110),i=r(93107);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),o(t,u,"k[i]"),a(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c),a(t,u,l,c+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}a(t,u,l,c)}u.optional&&t("}")}return t("return null")}},17061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;let r=[];t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(let{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}},17492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;let n=r(94735),i=r(73496),s=r(27910),a=r(74075),o=r(71271),l=r(86777),u=r(71037),c=r(31359),d=r(60776),h="server_call";function f(e){c.trace(o.LogVerbosity.DEBUG,h,e)}let p="grpc-message",g="grpc-status",m="grpc-timeout",y=/(\d{1,8})\s*([HMSmun])/,v={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},b={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},S={[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},w={waitForTrailers:!0};class T extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=T;class E extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=E;class C extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let t=this.call.serializeMessage(e);if(!this.call.write(t))return void this.call.once("drain",r)}catch(e){this.emit("error",{details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:o.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=C;class x extends s.Duplex{constructor(e,t,r,n,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=x,x.prototype._read=E.prototype._read,x.prototype._write=C.prototype._write,x.prototype._final=C.prototype._final;class _ extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;f("Request to method "+(null==(e=this.handler)?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),!this.statusSent&&(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:o.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if("identity"===t)return r;if("deflate"!==t&&"gzip"!==t)return Promise.reject({code:o.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`});{let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise((t,n)=>{let i=0,s=[];e.on("data",t=>{s.push(t),i+=t.byteLength,-1!==this.maxReceiveMessageSize&&i>this.maxReceiveMessageSize&&(e.destroy(),n({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(s))}),e.write(r),e.end()})}}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},S),b),t);this.stream.respond(r,w)}receiveMetadata(e){let t=l.Metadata.fromHttp2Headers(e);c.isTracerEnabled(h)&&f("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(m);if(r.length>0){let e=r[0].toString().match(y);if(null===e){let e=Error("Invalid deadline");return e.code=o.Status.OUT_OF_RANGE,this.sendError(e),t}let n=e[1]*v[e[2]]|0,i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n),this.deadlineTimer=setTimeout(O,n,this),t.remove(m)}return t.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(i.constants.HTTP2_HEADER_TE),t.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:n}=this,i=0,s=this,a=[],l=this.maxReceiveMessageSize;function u(e){if(i+=e.byteLength,-1!==l&&i>l){n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),r({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${i} vs. ${l})`});return}a.push(e)}function c(l){if(n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),void 0!==l)return void r({code:o.Status.INTERNAL,details:l.message});if(0===i)return void r({code:o.Status.INTERNAL,details:"received empty unary message"});s.emit("receiveMessage");let d=Buffer.concat(a,i),h=1===d.readUInt8(0)?e:"identity",f=s.getDecompressedMessage(d,h);if(Buffer.isBuffer(f))return void t(s.deserializeMessageWithInternalError(f));f.then(e=>t(s.deserializeMessageWithInternalError(e)),t=>r(t.code?t:{code:o.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}this.stream.on("data",u),this.stream.on("end",c),this.stream.on("error",c)})}async deserializeMessageWithInternalError(e){try{return this.deserializeMessage(e)}catch(e){throw{details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL}}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let e=this.serializeMessage(t);this.write(e),this.sendStatus({code:o.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===o.Status.OK),!this.checkCancelled())if(f("Request to method "+(null==(t=this.handler)?void 0:t.path)+" ended with status code: "+o.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var t;let r=Object.assign({[g]:e.code,[p]:encodeURI(e.details)},null==(t=e.metadata)?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0}),this.stream.end());else{let t=Object.assign(Object.assign({[g]:e.code,[p]:encodeURI(e.details)},S),null==(r=e.metadata)?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}sendError(e){let t={code:o.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled())return -1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize?void this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`}):(this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e))}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new u.StreamDecoder(this.maxReceiveMessageSize),n=!1,i=!1,s=!1,a=async()=>{s||!n||i||(s=!0,await this.pushOrBufferMessage(e,null))};this.stream.on("data",async n=>{let s;try{s=r.write(n)}catch(e){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:e.message});return}for(let r of(i=!0,this.stream.pause(),s)){let n;this.emit("receiveMessage");let i=1===r.readUInt8(0)?t:"identity";try{n=await this.getDecompressedMessage(r,i)}catch(e){this.sendError(e);return}if(!n)return;await this.pushOrBufferMessage(e,n)}i=!1,this.stream.resume(),await a()}),this.stream.once("end",async()=>{n=!0,await a()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):await this.pushMessage(e,t)}async pushMessage(e,t){if(null===t){f("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}f("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let t=(0,d.getErrorCode)(r);(null===t||t<o.Status.OK||t>o.Status.UNAUTHENTICATED)&&(t=o.Status.INTERNAL),e.emit("error",{details:(0,d.getErrorMessage)(r),code:t})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){var e;let t=null==(e=this.stream.session)?void 0:e.socket;return null!=t&&t.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function O(e){let t=Error("Deadline exceeded");t.code=o.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=_},17518:(e,t,r)=>{var n=r(21367),i=r(1707),s=r(22),a=r(54765),o=r(43378),l=r(89624),u=r(65727),c=r(48169),d=r(40542);e.exports=function(e,t,r){t=t.length?n(t,function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e}):[c];var h=-1;return t=n(t,l(s)),o(a(e,function(e,r,i){return{criteria:n(t,function(t){return t(e)}),index:++h,value:e}}),function(e,t){return u(e,t,r)})}},17757:(e,t,r)=>{"use strict";e.exports=s;var n=r(75108),i=r(89644)("fs");function s(e,t,r){return("function"==typeof t?(r=t,t={}):t||(t={}),r)?!t.xhr&&i&&i.readFile?i.readFile(e,function(n,i){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},17765:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;let i=r(66284),s=r(21858);!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(n||(t.PickResultType=n={}));class a{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new i.Metadata},e)}pick(e){return{pickResultType:n.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}t.UnavailablePicker=a;class o{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:n.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}t.QueuePicker=o},17830:(e,t,r)=>{e.exports=r(41547)(r(85718),"WeakMap")},18155:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},18234:(e,t,r)=>{var n=r(91290),i=r(22),s=r(84482),a=Math.max;e.exports=function(e,t,r){var o=null==e?0:e.length;if(!o)return -1;var l=null==r?0:s(r);return l<0&&(l=a(o+l,0)),n(e,i(t,3),l)}},18453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;let n=r(56070),i=r(88295);class s{constructor(e,t,r){if("string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.internalChannel=new i.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,i)}}t.ChannelImplementation=s},18864:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;let n=r(9227);class i{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let e=0;e<t.length;e++){let r=t[e];if(null===r||"object"!=typeof r)throw TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);i.push(r.cert_chain),s.push(r.private_key)}return new a({ca:e||(0,n.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=i;class s extends i{_isSecure(){return!1}_getSettings(){return null}}class a extends i{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},19771:e=>{"use strict";e.exports=require("process")},19976:(e,t,r)=>{var n=r(8336);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this}},20040:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},20540:(e,t,r)=>{var n=r(55048),i=r(70151),s=r(11539),a="Expected a function",o=Math.max,l=Math.min;e.exports=function(e,t,r){var u,c,d,h,f,p,g=0,m=!1,y=!1,v=!0;if("function"!=typeof e)throw TypeError(a);function b(t){var r=u,n=c;return u=c=void 0,g=t,h=e.apply(n,r)}function S(e){return g=e,f=setTimeout(E,t),m?b(e):h}function w(e){var r=e-p,n=e-g,i=t-r;return y?l(i,d-n):i}function T(e){var r=e-p,n=e-g;return void 0===p||r>=t||r<0||y&&n>=d}function E(){var e=i();if(T(e))return C(e);f=setTimeout(E,w(e))}function C(e){return(f=void 0,v&&u)?b(e):(u=c=void 0,h)}function x(){return void 0===f?h:C(i())}function _(){var e=i(),r=T(e);if(u=arguments,c=this,p=e,r){if(void 0===f)return S(p);if(y)return clearTimeout(f),f=setTimeout(E,t),b(p)}return void 0===f&&(f=setTimeout(E,t)),h}return t=s(t)||0,n(r)&&(m=!!r.leading,d=(y="maxWait"in r)?o(s(r.maxWait)||0,t):d,v="trailing"in r?!!r.trailing:v),_.cancel=function(){void 0!==f&&clearTimeout(f),g=0,u=p=c=f=void 0},_.flush=x,_}},20623:(e,t,r)=>{var n=r(15871),i=r(40491),s=r(2896),a=r(67619),o=r(34883),l=r(41132),u=r(46436),c=1,d=2;e.exports=function(e,t){return a(e)&&o(t)?l(u(e),t):function(r){var a=i(r,e);return void 0===a&&a===t?s(r,e):n(t,a,c|d)}}},21135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;let n=r(74075),i=r(68655),s=r(71271),a=r(40962),o=r(31359),l=e=>"number"==typeof e&&"string"==typeof i.CompressionAlgorithms[e];class u{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(+!!t,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){let t=1===e.readUInt8(0),r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class c extends u{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class d extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.deflate(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createInflate();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class h extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.gzip(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createGunzip();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class f extends u{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function p(e,t){switch(e){case"identity":return new c;case"deflate":return new d(t);case"gzip":return new h(t);default:return new f(e)}}class g extends a.BaseFilter{constructor(e,t){var r,n;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";let a=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!=(r=e["grpc.max_receive_message_length"])?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,void 0!==a)if(l(a)){let e=i.CompressionAlgorithms[a],r=null==(n=t.serverSupportedEncodingHeader)?void 0:n.split(",");(!r||r.includes(e))&&(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm,-1))}else o.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${a}`)}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let e=t[0];"string"==typeof e&&(this.receiveCompression=p(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r,n=await e;return r=!(this.sendCompression instanceof c)&&((null!=(t=n.flags)?t:0)&2)==0,{message:await this.sendCompression.writeMessage(n.message,r),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=g;class m{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new g(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=m},21204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/page.tsx","default")},21367:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},21456:(e,t,r)=>{var n=r(41693),i=r(40542);e.exports=function(e,t,r){var s=t(e);return i(e)?s:n(s,r(e))}},21574:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},21592:(e,t,r)=>{var n=r(42205),i=r(61837);e.exports=function(e,t){return n(i(e,t),1)}},21630:(e,t,r)=>{var n=r(10653),i=1,s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,o,l){var u=r&i,c=n(e),d=c.length;if(d!=n(t).length&&!u)return!1;for(var h=d;h--;){var f=c[h];if(!(u?f in t:s.call(t,f)))return!1}var p=l.get(e),g=l.get(t);if(p&&g)return p==t&&g==e;var m=!0;l.set(e,t),l.set(t,e);for(var y=u;++h<d;){var v=e[f=c[h]],b=t[f];if(a)var S=u?a(b,v,f,t,e,l):a(v,b,f,e,t,l);if(!(void 0===S?v===b||o(v,b,r,a,l):S)){m=!1;break}y||(y="constructor"==f)}if(m&&!y){var w=e.constructor,T=t.constructor;w!=T&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof T&&T instanceof T)&&(m=!1)}return l.delete(e),l.delete(t),m}},21820:e=>{"use strict";e.exports=require("os")},21858:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n||(t.LogVerbosity=n={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(i||(t.Propagate=i={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},22964:(e,t,r)=>{e.exports=r(23729)(r(18234))},23302:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"InvariantError",{enumerable:!0,get:function(){return r}});class r extends Error{constructor(e,t){super("Invariant: "+(e.endsWith(".")?e:e+".")+" This is a bug in Next.js.",t),this.name="InvariantError"}}},23729:(e,t,r)=>{var n=r(22),i=r(32269),s=r(7651);e.exports=function(e){return function(t,r,a){var o=Object(t);if(!i(t)){var l=n(r,3);t=s(t),r=function(e){return l(o[e],e,o)}}var u=e(t,r,a);return u>-1?o[l?t[u]:u]:void 0}}},23736:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseRelativeUrl",{enumerable:!0,get:function(){return i}}),r(44827);let n=r(42785);function i(e,t,r){void 0===r&&(r=!0);let i=new URL("http://n"),s=t?new URL(t,i):e.startsWith(".")?new URL("http://n"):i,{pathname:a,searchParams:o,search:l,hash:u,href:c,origin:d}=new URL(e,s);if(d!==i.origin)throw Object.defineProperty(Error("invariant: invalid relative URL, router received "+e),"__NEXT_ERROR_CODE",{value:"E159",enumerable:!1,configurable:!0});return{pathname:a,query:r?(0,n.searchParamsToUrlQuery)(o):void 0,search:l,hash:u,href:c.slice(d.length)}}},23879:(e,t)=>{"use strict";function r(e){return null!==e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isThenable",{enumerable:!0,get:function(){return r}})},24168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;let n=r(94735),i=r(27910),s=r(71271);t.callErrorFromStatus=function(e,t){let r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=Error(r),i=`${n.stack}
for call at
${t}`;return Object.assign(Error(r),e,{stack:i})};class a extends n.EventEmitter{constructor(){super()}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}}t.ClientUnaryCallImpl=a;class o extends i.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_read(e){var t;null==(t=this.call)||t.startRead()}}t.ClientReadableStreamImpl=o;class l extends i.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null==(n=this.call)||n.sendMessageWithContext(i,e)}_final(e){var t;null==(t=this.call)||t.halfClose(),e()}}t.ClientWritableStreamImpl=l;class u extends i.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_read(e){var t;null==(t=this.call)||t.startRead()}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null==(n=this.call)||n.sendMessageWithContext(i,e)}_final(e){var t;null==(t=this.call)||t.halfClose(),e()}}t.ClientDuplexStreamImpl=u},24353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;let n=r(18155),i=r(50268),s=r(31359),a=r(71271),o=r(26786),l=r(43356),u=r(66827),c="subchannel",d=0x7fffffff;class h{constructor(e,t,r,s,a){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=a,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new u.ChannelzCallTracker,this.childrenTracker=new u.ChannelzChildrenTracker,this.streamTracker=new u.ChannelzCallTracker;let c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new i.BackoffTimeout(()=>{this.handleBackoffTimer()},c),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!=(o=r["grpc.keepalive_time_ms"])?o:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new u.ChannelzTrace,this.channelzRef=(0,u.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(a.LogVerbosity.DEBUG,c,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(a.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,d);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(a.LogVerbosity.ERROR,`Connection to ${(0,o.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,r){var i,s;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t]);let a=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null==(i=this.transport)||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null==(s=this.transport)||s.shutdown(),this.transport=null;break;default:throw Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let e of this.stateListeners)e(this,a,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,u.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){let i;if(!this.transport)throw Error("Cannot create call, subchannel not READY");return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),i={onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):i={},this.transport.createCall(e,t,r,n,i)}startConnecting(){process.nextTick(()=>{this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState!==n.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}t.Subchannel=h},24664:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;let r=[];t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(let{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}},24859:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,a=r(76139);((d.prototype=Object.create(a.prototype)).constructor=d).className="Namespace";var o=r(62886),l=r(77350),u=r(12529);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=c,d.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},d.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},d.prototype.addJSON=function(e){var t=this;if(e)for(var r,a=Object.keys(e),l=0;l<a.length;++l)r=e[a[l]],t.add((void 0!==r.fields?n.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?i.fromJSON:void 0!==r.id?o.fromJSON:d.fromJSON)(a[l],r));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof n||e instanceof u||e instanceof s||e instanceof i||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t)if(t instanceof d&&e instanceof d&&!(t instanceof n||t instanceof i)){for(var r=t.nestedArray,a=0;a<r.length;++a)e.add(r[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){n=e,i=t,s=r}},25118:e=>{e.exports=function(e){return this.__data__.has(e)}},25130:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?!function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function o(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?a:o,e.readFloatBE=n?o:a}():!function(){function t(e,t,r,n){var i=+(t<0);if(i&&(t=-t),0===t)e(1/t>0?0:0x80000000,r,n);else if(isNaN(t))e(0x7fc00000,r,n);else if(t>34028234663852886e22)e((i<<31|0x7f800000)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((i<<31|s+127<<23|a)>>>0,r,n)}}function a(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,a=8388607&n;return 255===s?a?NaN:1/0*i:0===s?1401298464324817e-60*i*a:i*Math.pow(2,s-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,i),e.readFloatBE=a.bind(null,s)}(),"undefined"!=typeof Float64Array?!function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function o(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?a:o,e.readDoubleBE=n?o:a}():!function(){function t(e,t,r,n,i,s){var a,o=+(n<0);if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:0x80000000,i,s+r);else if(isNaN(n))e(0,i,s+t),e(0x7ff80000,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|0x7ff00000)>>>0,i,s+r);else if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,s+t),e((o<<31|a/0x100000000)>>>0,i,s+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(0x10000000000000*(a=n*Math.pow(2,-l))>>>0,i,s+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}function a(e,t,r,n,i){var s=e(n,i+t),a=e(n,i+r),o=(a>>31)*2+1,l=a>>>20&2047,u=0x100000000*(1048575&a)+s;return 2047===l?u?NaN:1/0*o:0===l?5e-324*o*u:o*Math.pow(2,l-1075)*(u+0x10000000000000)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,i,0,4),e.readDoubleBE=a.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},25585:(e,t,r)=>{"use strict";e.exports=a;var n=r(73267);((a.prototype=Object.create(n.prototype)).constructor=a).className="MapField";var i=r(61810),s=r(93107);function a(e,t,r,i,a,o){if(n.call(this,e,t,i,void 0,void 0,a,o),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new a(i,e,t,r))}}},26412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=function(...e){let t=1/0;for(let r of e){let e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t};let r=[["m",1],["S",1e3],["M",6e4],["H",36e5]];t.getDeadlineTimeoutString=function(e){let t=new Date().getTime();e instanceof Date&&(e=e.getTime());let n=Math.max(e-t,0);for(let[e,t]of r){let r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw Error("Deadline is too far in the future")};let n=0x7fffffff;t.getRelativeTimeout=function(e){let t=(e instanceof Date?e.getTime():e)-new Date().getTime();return t<0?0:t>n?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{let t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}},26415:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{var e=t;e.parse=a,e.serialize=o;var r=decodeURIComponent,n=encodeURIComponent,i=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var n={},s=t||{},a=e.split(i),o=s.decode||r,u=0;u<a.length;u++){var c=a[u],d=c.indexOf("=");if(!(d<0)){var h=c.substr(0,d).trim(),f=c.substr(++d,c.length).trim();'"'==f[0]&&(f=f.slice(1,-1)),void 0==n[h]&&(n[h]=l(f,o))}}return n}function o(e,t,r){var i=r||{},a=i.encode||n;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!s.test(e))throw TypeError("argument name is invalid");var o=a(t);if(o&&!s.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(i.domain){if(!s.test(i.domain))throw TypeError("option domain is invalid");l+="; Domain="+i.domain}if(i.path){if(!s.test(i.path))throw TypeError("option path is invalid");l+="; Path="+i.path}if(i.expires){if("function"!=typeof i.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+i.expires.toUTCString()}if(i.httpOnly&&(l+="; HttpOnly"),i.secure&&(l+="; Secure"),i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l}function l(e,t){try{return t(e)}catch(t){return e}}})(),e.exports=t})()},26786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;let r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;t.parseUri=function(e){let t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}};let n=/^\d+$/;t.splitHostPort=function(e){if(e.startsWith("[")){let t=e.indexOf("]");if(-1===t)return null;let r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(!(e.length>t+1))return{host:r};if(":"!==e[t+1])return null;{let i=e.substring(t+2);return n.test(i)?{host:r,port:+i}:null}}{let t=e.split(":");return 2!==t.length?{host:e}:n.test(t[1])?{host:t[0],port:+t[1]}:null}},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path}},26996:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(8707),s=i.LongBits,a=i.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},c=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new s(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var e=0xffffffff;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return h(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|h(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do if(this.pos>=this.len)throw o(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=c(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},27006:(e,t,r)=>{var n=r(46328),i=r(99525),s=r(58276),a=1,o=2;e.exports=function(e,t,r,l,u,c){var d=r&a,h=e.length,f=t.length;if(h!=f&&!(d&&f>h))return!1;var p=c.get(e),g=c.get(t);if(p&&g)return p==t&&g==e;var m=-1,y=!0,v=r&o?new n:void 0;for(c.set(e,t),c.set(t,e);++m<h;){var b=e[m],S=t[m];if(l)var w=d?l(S,b,m,t,e,c):l(b,S,m,e,t,c);if(void 0!==w){if(w)continue;y=!1;break}if(v){if(!i(t,function(e,t){if(!s(v,t)&&(b===e||u(b,e,r,l,c)))return v.push(t)})){y=!1;break}}else if(!(b===S||u(b,S,r,l,c))){y=!1;break}}return c.delete(e),c.delete(t),y}},27236:(e,t,r)=>{"use strict";t.Service=r(86984)},27275:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;let r=1e3,n=1.6,i=12e4,s=.2;function a(e,t){return Math.random()*(t-e)+e}class o{constructor(e,t){this.callback=e,this.initialDelay=r,this.multiplier=n,this.maxDelay=i,this.jitter=s,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||null==(r=(t=this.timerId).unref)||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+a(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null==(t=(e=this.timerId).ref)||t.call(e)}unref(){var e,t;this.hasRef=!1,null==(t=(e=this.timerId).unref)||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=o},27405:(e,t,r)=>{"use strict";e.exports=s;var n=r(76139);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(77350);function s(e,t,r,s,a,o,l,u,c){if(i.isObject(a)?(l=a,a=o=void 0):i.isObject(o)&&(l=o,o=void 0),!(void 0===t||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=s,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=c}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},27408:(e,t,r)=>{"use strict";e.exports=C,C.filename=null,C.defaults={keepCase:!1};var n=r(60158),i=r(82703),s=r(54351),a=r(73267),o=r(25585),l=r(12630),u=r(32110),c=r(3076),d=r(71202),h=r(61810),f=r(93107),p=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function C(e,t,r){t instanceof i||(r=t,t=new i),r||(r=C.defaults);var x,_,O,I,A,k=r.preferTrailingComment||!1,R=n(e,r.alternateCommentMode||!1),D=R.next,N=R.push,P=R.peek,M=R.skip,j=R.cmnt,L=!0,B=!1,F=t,U=r.keepCase?function(e){return e}:f.camelCase;function V(e,t,r){var n=C.filename;return r||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+R.line+")")}function z(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw V(e);t.push(D()),M(e),e=P()}while('"'===e||"'"===e);return t.join("")}function q(e){var t=D();switch(t){case"'":case'"':return N(t),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return G(t,!0)}catch(r){if(e&&T.test(t))return t;throw V(t,"value")}}function $(e,t){do t&&('"'===(r=P())||"'"===r)?e.push(z()):e.push([n=W(D()),M("to",!0)?W(D()):n]);while(M(",",!0));var r,n,i={options:void 0};i.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},X(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)})}function G(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(m.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw V(e,"number",t)}function W(e,t){switch(e){case"max":case"MAX":case"Max":return 0x1fffffff;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(g.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw V(e,"id")}function K(){if(void 0!==_)throw V("package");if(_=D(),!T.test(_))throw V(_,"name");F=F.define(_),M(";")}function H(){var e,t=P();switch(t){case"weak":e=I||(I=[]),D();break;case"public":D();default:e=O||(O=[])}t=z(),M(";"),e.push(t)}function Q(){if(M("="),!(B="proto3"===(A=z()))&&"proto2"!==A)throw V(A,"syntax");t.setOption("syntax",A),M(";")}function Y(e,t){switch(t){case"option":return es(e,t),M(";"),!0;case"message":return J(e,t),!0;case"enum":return en(e,t),!0;case"service":return ec(e,t),!0;case"extend":return eh(e,t),!0}return!1}function X(e,t,r){var n,i=R.line;if(e&&("string"!=typeof e.comment&&(e.comment=j()),e.filename=C.filename),M("{",!0)){for(;"}"!==(n=D());)t(n);M(";",!0)}else r&&r(),M(";"),e&&("string"!=typeof e.comment||k)&&(e.comment=j(i)||e.comment)}function J(e,t){if(!w.test(t=D()))throw V(t,"type name");var r=new s(t);X(r,function(e){if(!Y(r,e))switch(e){case"map":et(r,e);break;case"required":case"repeated":Z(r,e);break;case"optional":B?Z(r,"proto3_optional"):Z(r,"optional");break;case"oneof":er(r,e);break;case"extensions":$(r.extensions||(r.extensions=[]));break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:if(!B||!T.test(e))throw V(e);N(e),Z(r,"optional")}}),e.add(r)}function Z(e,t,r){var n=D();if("group"===n)return void ee(e,t);for(;n.endsWith(".")||P().startsWith(".");)n+=D();if(!T.test(n))throw V(n,"type");var i=D();if(!w.test(i))throw V(i,"name");i=U(i),M("=");var s=new a(i,W(D()),n,t,r);if(X(s,function(e){if("option"===e)es(s,e),M(";");else throw V(e)},function(){eu(s)}),"proto3_optional"===t){var o=new l("_"+i);s.setOption("proto3_optional",!0),o.add(s),e.add(o)}else e.add(s);!B&&s.repeated&&(void 0!==h.packed[n]||void 0===h.basic[n])&&s.setOption("packed",!1,!0)}function ee(e,t){var r=D();if(!w.test(r))throw V(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),M("=");var i=W(D()),o=new s(r);o.group=!0;var l=new a(n,i,r,t);l.filename=C.filename,X(o,function(e){switch(e){case"option":es(o,e),M(";");break;case"required":case"repeated":Z(o,e);break;case"optional":B?Z(o,"proto3_optional"):Z(o,"optional");break;case"message":J(o,e);break;case"enum":en(o,e);break;default:throw V(e)}}),e.add(o).add(l)}function et(e){M("<");var t=D();if(void 0===h.mapKey[t])throw V(t,"type");M(",");var r=D();if(!T.test(r))throw V(r,"type");M(">");var n=D();if(!w.test(n))throw V(n,"name");M("=");var i=new o(U(n),W(D()),t,r);X(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)}),e.add(i)}function er(e,t){if(!w.test(t=D()))throw V(t,"name");var r=new l(U(t));X(r,function(e){"option"===e?(es(r,e),M(";")):(N(e),Z(r,"optional"))}),e.add(r)}function en(e,t){if(!w.test(t=D()))throw V(t,"name");var r=new u(t);X(r,function(e){switch(e){case"option":es(r,e),M(";");break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:ei(r,e)}}),e.add(r)}function ei(e,t){if(!w.test(t))throw V(t,"name");M("=");var r=W(D(),!0),n={options:void 0};n.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},X(n,function(e){if("option"===e)es(n,e),M(";");else throw V(e)},function(){eu(n)}),e.add(t,r,n.comment,n.options)}function es(e,t){var r,n=M("(",!0);if(!T.test(t=D()))throw V(t,"name");var i=t,s=i;n&&(M(")"),s=i="("+i+")",t=P(),E.test(t)&&(r=t.slice(1),i+=t,D())),M("=");var a=ea(e,i);el(e,s,a,r)}function ea(e,t){if(M("{",!0)){for(var r={};!M("}",!0);){if(!w.test(x=D()))throw V(x,"name");if(null===x)throw V(x,"end of input");var n,i,s=x;if(M(":",!0),"{"===P())n=ea(e,t+"."+x);else if("["===P()){if(n=[],M("[",!0)){do i=q(!0),n.push(i);while(M(",",!0));M("]"),void 0!==i&&eo(e,t+"."+x,i)}}else n=q(!0),eo(e,t+"."+x,n);var a=r[s];a&&(n=[].concat(a).concat(n)),r[s]=n,M(",",!0),M(";",!0)}return r}var o=q(!0);return eo(e,t,o),o}function eo(e,t,r){e.setOption&&e.setOption(t,r)}function el(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function eu(e){if(M("[",!0)){do es(e,"option");while(M(",",!0));M("]")}return e}function ec(e,t){if(!w.test(t=D()))throw V(t,"service name");var r=new c(t);X(r,function(e){if(!Y(r,e))if("rpc"===e)ed(r,e);else throw V(e)}),e.add(r)}function ed(e,t){var r=j(),n=t;if(!w.test(t=D()))throw V(t,"name");var i,s,a,o,l=t;if(M("("),M("stream",!0)&&(s=!0),!T.test(t=D())||(i=t,M(")"),M("returns"),M("("),M("stream",!0)&&(o=!0),!T.test(t=D())))throw V(t);a=t,M(")");var u=new d(l,n,i,a,s,o);u.comment=r,X(u,function(e){if("option"===e)es(u,e),M(";");else throw V(e)}),e.add(u)}function eh(e,t){if(!T.test(t=D()))throw V(t,"reference");var r=t;X(null,function(t){switch(t){case"required":case"repeated":Z(e,t,r);break;case"optional":B?Z(e,"proto3_optional",r):Z(e,"optional",r);break;default:if(!B||!T.test(t))throw V(t);N(t),Z(e,"optional",r)}})}for(;null!==(x=D());)switch(x){case"package":if(!L)throw V(x);K();break;case"import":if(!L)throw V(x);H();break;case"syntax":if(!L)throw V(x);Q();break;case"option":es(F,x),M(";");break;default:if(Y(F,x)){L=!1;continue}throw V(x)}return C.filename=null,{package:_,imports:O,weakImports:I,syntax:A,root:t}}},27467:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},27603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;let n=r(29021),i=r(33873),s=r(68474);function a(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s))return s;for(let e of t){let t=i.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}t.loadProtosWithOptions=async function(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));a(r,t.includeDirs)}let n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");a(r,t.includeDirs)}let n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){let e=r(82566),t=r(20040),n=r(56271),i=r(96138);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",i.nested.google.nested.protobuf.nested)}},27669:e=>{e.exports=function(){this.__data__=[],this.size=0}},27910:e=>{"use strict";e.exports=require("stream")},28048:(e,t)=>{var r,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function i(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var s={},a={};function o(e,t){var r,n,i;if(t)return(e>>>=0,(i=0<=e&&e<256)&&(n=a[e]))?n:(r=u(e,0,!0),i&&(a[e]=r),r);return(e|=0,(i=-128<=e&&e<128)&&(n=s[e]))?n:(r=u(e,e<0?-1:0,!1),i&&(s[e]=r),r)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=p)return E}else{if(e<=-g)return C;if(e+1>=g)return T}return e<0?l(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=u;var c=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if((r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var n,i=l(c(r,8)),s=y,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+o),r);if(o<8){var h=l(c(r,o));s=s.mul(h).add(l(u))}else s=(s=s.mul(i)).add(l(u))}return s.unsigned=t,s}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var f=0x100000000,p=0xffffffffffffffff,g=0x8000000000000000,m=o(0x1000000),y=o(0);r.ZERO=y;var v=o(0,!0);r.UZERO=v;var b=o(1);r.ONE=b;var S=o(1,!0);r.UONE=S;var w=o(-1);r.NEG_ONE=w;var T=u(-1,0x7fffffff,!1);r.MAX_VALUE=T;var E=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=E;var C=u(0,-0x80000000,!1);r.MIN_VALUE=C;var x=r.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},x.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(!this.eq(C))return"-"+this.neg().toString(e);else{var t=l(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var i=l(c(e,6),this.unsigned),s=this,a="";;){var o=s.div(i),u=(s.sub(o.mul(i)).toInt()>>>0).toString(e);if((s=o).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},x.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&(0!==this.low||-2097152!==this.high)},x.isZero=function(){return 0===this.high&&0===this.low},x.eqz=x.isZero,x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return(1&this.low)==1},x.isEven=function(){return(1&this.low)==0},x.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.ne=x.notEquals,x.lessThan=function(e){return 0>this.comp(e)},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return 0>=this.comp(e)},x.lte=x.lessThanOrEqual,x.le=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.ge=x.greaterThanOrEqual,x.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},x.neg=x.negate,x.add=function(e){n(e)||(e=h(e));var t,r,i=this.high>>>16,s=65535&this.high,a=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,f=65535&e.low,p=0,g=0;return t=0+((r=0+(o+f))>>>16),r&=65535,t+=a+d,g+=t>>>16,t&=65535,g+=s+c,p+=g>>>16,g&=65535,p+=i+l,u(t<<16|r,(p&=65535)<<16|g,this.unsigned)},x.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:y;if(this.eq(C))return e.isOdd()?C:y;if(e.eq(C))return this.isOdd()?C:y;if(this.isNegative())if(e.isNegative())return this.neg().mul(e.neg());else return this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var r,i,s=this.high>>>16,a=65535&this.high,o=this.low>>>16,c=65535&this.low,d=e.high>>>16,f=65535&e.high,p=e.low>>>16,g=65535&e.low,b=0,S=0;return r=0+((i=0+c*g)>>>16),i&=65535,r+=o*g,S+=r>>>16,r&=65535,r+=c*p,S+=r>>>16,r&=65535,S+=a*g,b+=S>>>16,S&=65535,S+=o*p,b+=S>>>16,S&=65535,S+=c*f,b+=S>>>16,S&=65535,b+=s*g+a*p+o*f+c*d,u(r<<16|i,(b&=65535)<<16|S,this.unsigned)},x.mul=x.multiply,x.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");if(t){var r,i,s;return this.unsigned||-0x80000000!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return S;s=v}else{if(this.eq(C))if(e.eq(b)||e.eq(w))return C;else return e.eq(C)?b:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:w:(i=this.sub(e.mul(r)),s=r.add(i.div(e)));if(e.eq(C))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(i=this;i.gte(e);){for(var a=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())))/Math.LN2),o=a<=48?1:c(2,a-48),d=l(r),f=d.mul(e);f.isNegative()||f.gt(i);)r-=o,f=(d=l(r,this.unsigned)).mul(e);d.isZero()&&(d=b),s=s.add(d),i=i.sub(f)}return s},x.div=x.divide,x.modulo=function(e){return(n(e)||(e=h(e)),t)?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},x.mod=x.modulo,x.rem=x.modulo,x.not=function(){return u(~this.low,~this.high,this.unsigned)},x.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},x.clz=x.countLeadingZeros,x.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},x.ctz=x.countTrailingZeros,x.and=function(e){return n(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return n(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return n(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):32===e?u(this.high,0,this.unsigned):u(this.high>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.shr_u=x.shiftRightUnsigned,x.rotateLeft=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},x.rotl=x.rotateLeft,x.rotateRight=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},x.rotr=x.rotateRight,x.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(r.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},r.fromValue=function(e,t){return"bigint"==typeof e?fromBigInt(e,t):h(e,t)},x.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=r,"default"in e?e.default:e}({});void 0===(r=(function(){return n}).apply(t,[]))||(e.exports=r)},28354:e=>{"use strict";e.exports=require("util")},28592:e=>{"use strict";e.exports={rE:"1.9.15"}},28651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;let n=r(94735),i=r(73496),s=r(27910),a=r(74075),o=r(21858),l=r(66284),u=r(87764),c=r(1014),d=r(6843),h="server_call";function f(e){c.trace(o.LogVerbosity.DEBUG,h,e)}let p="grpc-message",g="grpc-status",m="grpc-timeout",y=/(\d{1,8})\s*([HMSmun])/,v={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},b={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},S={[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},w={waitForTrailers:!0};class T extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=T;class E extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=E;class C extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let t=this.call.serializeMessage(e);if(!this.call.write(t))return void this.call.once("drain",r)}catch(e){this.emit("error",{details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:o.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=C;class x extends s.Duplex{constructor(e,t,r,n,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=x,x.prototype._read=E.prototype._read,x.prototype._write=C.prototype._write,x.prototype._final=C.prototype._final;class _ extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;f("Request to method "+(null==(e=this.handler)?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),!this.statusSent&&(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:o.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if("identity"===t)return r;if("deflate"!==t&&"gzip"!==t)return Promise.reject({code:o.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`});{let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise((t,n)=>{let i=0,s=[];e.on("data",t=>{s.push(t),i+=t.byteLength,-1!==this.maxReceiveMessageSize&&i>this.maxReceiveMessageSize&&(e.destroy(),n({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(s))}),e.write(r),e.end()})}}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},S),b),t);this.stream.respond(r,w)}receiveMetadata(e){let t=l.Metadata.fromHttp2Headers(e);c.isTracerEnabled(h)&&f("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(m);if(r.length>0){let e=r[0].toString().match(y);if(null===e){let e=Error("Invalid deadline");return e.code=o.Status.OUT_OF_RANGE,this.sendError(e),t}let n=e[1]*v[e[2]]|0,i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n),this.deadlineTimer=setTimeout(O,n,this),t.remove(m)}return t.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(i.constants.HTTP2_HEADER_TE),t.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:n}=this,i=0,s=this,a=[],l=this.maxReceiveMessageSize;function u(e){if(i+=e.byteLength,-1!==l&&i>l){n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),r({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${i} vs. ${l})`});return}a.push(e)}function c(l){if(n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),void 0!==l)return void r({code:o.Status.INTERNAL,details:l.message});if(0===i)return void r({code:o.Status.INTERNAL,details:"received empty unary message"});s.emit("receiveMessage");let d=Buffer.concat(a,i),h=1===d.readUInt8(0)?e:"identity",f=s.getDecompressedMessage(d,h);if(Buffer.isBuffer(f))return void t(s.deserializeMessageWithInternalError(f));f.then(e=>t(s.deserializeMessageWithInternalError(e)),t=>r(t.code?t:{code:o.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}this.stream.on("data",u),this.stream.on("end",c),this.stream.on("error",c)})}async deserializeMessageWithInternalError(e){try{return this.deserializeMessage(e)}catch(e){throw{details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL}}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let e=this.serializeMessage(t);this.write(e),this.sendStatus({code:o.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,d.getErrorMessage)(e),code:o.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===o.Status.OK),!this.checkCancelled())if(f("Request to method "+(null==(t=this.handler)?void 0:t.path)+" ended with status code: "+o.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var t;let r=Object.assign({[g]:e.code,[p]:encodeURI(e.details)},null==(t=e.metadata)?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0}),this.stream.end());else{let t=Object.assign(Object.assign({[g]:e.code,[p]:encodeURI(e.details)},S),null==(r=e.metadata)?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}sendError(e){let t={code:o.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled())return -1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize?void this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`}):(this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e))}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new u.StreamDecoder(this.maxReceiveMessageSize),n=!1,i=!1,s=!1,a=async()=>{s||!n||i||(s=!0,await this.pushOrBufferMessage(e,null))};this.stream.on("data",async n=>{let s;try{s=r.write(n)}catch(e){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:e.message});return}for(let r of(i=!0,this.stream.pause(),s)){let n;this.emit("receiveMessage");let i=1===r.readUInt8(0)?t:"identity";try{n=await this.getDecompressedMessage(r,i)}catch(e){this.sendError(e);return}if(!n)return;await this.pushOrBufferMessage(e,n)}i=!1,this.stream.resume(),await a()}),this.stream.once("end",async()=>{n=!0,await a()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):await this.pushMessage(e,t)}async pushMessage(e,t){if(null===t){f("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}f("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let t=(0,d.getErrorCode)(r);(null===t||t<o.Status.OK||t>o.Status.UNAUTHENTICATED)&&(t=o.Status.INTERNAL),e.emit("error",{details:(0,d.getErrorMessage)(r),code:t})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){var e;let t=null==(e=this.stream.session)?void 0:e.socket;return null!=t&&t.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function O(e){let t=Error("Deadline exceeded");t.code=o.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=_},28837:(e,t,r)=>{var n=r(57797),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},28977:(e,t,r)=>{var n=r(11539),i=1/0,s=17976931348623157e292;e.exports=function(e){return e?(e=n(e))===i||e===-i?(e<0?-1:1)*s:e==e?e:0:0===e?e:0}},29021:e=>{"use strict";e.exports=require("fs")},29205:(e,t,r)=>{var n=r(8336);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=!!t,t}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29395:(e,t,r)=>{var n=r(79474),i=r(70222),s=r(84713),a="[object Null]",o="[object Undefined]",l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?o:a:l&&l in Object(e)?i(e):s(e)}},29508:(e,t,r)=>{var n=r(8336);e.exports=function(e){return n(this,e).get(e)}},29632:(e,t,r)=>{"use strict";e.exports=r(97668)},29750:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(89367),n.base64=r(64719),n.EventEmitter=r(81968),n.float=r(25130),n.inquire=r(67359),n.utf8=r(65127),n.pool=r(98940),n.LongBits=r(10275),n.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},29867:(e,t,r)=>{"use strict";r.d(t,{dj:()=>g});var n=r(43210);let i=1,s=1e6,a=0;function o(){return(a=(a+1)%Number.MAX_SAFE_INTEGER).toString()}let l=new Map,u=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),f({type:"REMOVE_TOAST",toastId:e})},s);l.set(e,t)},c=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,i)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?u(r):e.toasts.forEach(e=>{u(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],h={toasts:[]};function f(e){h=c(h,e),d.forEach(e=>{e(h)})}function p({...e}){let t=o(),r=e=>f({type:"UPDATE_TOAST",toast:{...e,id:t}}),n=()=>f({type:"DISMISS_TOAST",toastId:t});return f({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:r}}function g(){let[e,t]=n.useState(h);return n.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:p,dismiss:e=>f({type:"DISMISS_TOAST",toastId:e})}}},30015:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;let n=r(86239),i=r(18155),s=r(72910),a=r(43356),o=r(31359),l=r(71271),u="round_robin";function c(e){o.trace(l.LogVerbosity.DEBUG,u,e)}let d="round_robin";class h{getLoadBalancerName(){return d}constructor(){}toJsonObject(){return{[d]:{}}}static createFromJson(e){return new h}}class f{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class p{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=i.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(e,t,r,n,s)=>{this.calculateAndUpdateState(),(r===i.ConnectivityState.TRANSIENT_FAILURE||r===i.ConnectivityState.IDLE)&&(s&&(this.lastError=s),this.channelControlHelper.requestReresolution(),e.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(i.ConnectivityState.READY)>0){let e=this.subchannels.filter(e=>e.getConnectivityState()===i.ConnectivityState.READY),t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(t=0),this.updateState(i.ConnectivityState.READY,new f(e,t))}else this.countSubchannelsWithState(i.ConnectivityState.CONNECTING)>0?this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.countSubchannelsWithState(i.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){c(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),e===i.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){for(let t of(this.resetSubchannelList(),c("Connect to address list "+e.map(e=>(0,a.subchannelAddressToString)(e))),this.subchannels=e.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels)){t.ref(),t.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(t.getChannelzRef());let e=t.getConnectivityState();(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.TRANSIENT_FAILURE)&&t.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return d}}t.RoundRobinLoadBalancer=p,t.setup=function(){(0,n.registerLoadBalancerType)(d,p,h)}},30316:(e,t,r)=>{var n=r(67554);e.exports=function(e,t){var r=!0;return n(e,function(e,n,i){return r=!!t(e,n,i)}),r}},30401:(e,t,r)=>{e.exports=r(41547)(r(85718),"Promise")},30660:(e,t)=>{"use strict";function r(e){let t=5381;for(let r=0;r<e.length;r++)t=(t<<5)+t+e.charCodeAt(r)|0;return t>>>0}function n(e){return r(e).toString(36).slice(0,5)}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{djb2Hash:function(){return r},hexHash:function(){return n}})},30847:(e,t,r)=>{"use strict";e.exports=o;var n=r(32110),i=r(61810),s=r(93107);function a(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function o(e){for(var t,r,o=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var u=l[t].resolve(),c=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,h=i.basic[d];r="m"+s.safeProp(u.name),u.map?(o("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===h?o("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,r):o(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,r),o("}")("}")):u.repeated?(o("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==i.packed[d]?o("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",d,r)("w.ldelim()"):(o("for(var i=0;i<%s.length;++i)",r),void 0===h?a(o,u,c,r+"[i]"):o("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,r)),o("}")):(u.optional&&o("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===h?a(o,u,c,r):o("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,r))}return o("return w")}},30854:(e,t,r)=>{var n=r(66930),i=r(658),s=r(95746),a=200;e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!i||o.length<a-1)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(o)}return r.set(e,t),this.size=r.size,this}},31156:(e,t,r)=>{"use strict";e.exports=i;var n=r(8707);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/0x100000000>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++n>0xffffffff&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e))if(!n.Long)return i.fromNumber(parseInt(e,10));else e=n.Long.fromString(e);return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+0x100000000*r)}return this.lo+0x100000000*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var o=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?s:new i((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},31359:(e,t,r)=>{"use strict";var n,i,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;let o=r(71271),l=r(19771),u=r(28592).rE,c={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},d=o.LogVerbosity.ERROR;switch((null!=(i=null!=(n=process.env.GRPC_NODE_VERBOSITY)?n:process.env.GRPC_VERBOSITY)?i:"").toUpperCase()){case"DEBUG":d=o.LogVerbosity.DEBUG;break;case"INFO":d=o.LogVerbosity.INFO;break;case"ERROR":d=o.LogVerbosity.ERROR;break;case"NONE":d=o.LogVerbosity.NONE}t.getLogger=()=>c,t.setLogger=e=>{c=e},t.setLoggerVerbosity=e=>{d=e},t.log=(e,...t)=>{let r;if(e>=d){switch(e){case o.LogVerbosity.DEBUG:r=c.debug;break;case o.LogVerbosity.INFO:r=c.info;break;case o.LogVerbosity.ERROR:r=c.error}r||(r=c.error),r&&r.bind(c)(...t)}};let h=null!=(a=null!=(s=process.env.GRPC_NODE_TRACE)?s:process.env.GRPC_TRACE)?a:"",f=new Set,p=new Set;for(let e of h.split(","))e.startsWith("-")?p.add(e.substring(1)):f.add(e);let g=f.has("all");function m(e,r,n){y(r)&&(0,t.log)(e,new Date().toISOString()+" | v"+u+" "+l.pid+" | "+r+" | "+n)}function y(e){return!p.has(e)&&(g||f.has(e))}t.trace=m,t.isTracerEnabled=y},31658:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fillMetadataSegment:function(){return f},normalizeMetadataPageToRoute:function(){return g},normalizeMetadataRoute:function(){return p}});let n=r(8304),i=d(r(78671)),s=r(6341),a=r(2015),o=r(30660),l=r(74722),u=r(12958),c=r(35499);function d(e){return e&&e.__esModule?e:{default:e}}function h(e){let t=i.default.dirname(e);if(e.endsWith("/sitemap"))return"";let r="";return t.split("/").some(e=>(0,c.isGroupSegment)(e)||(0,c.isParallelRouteSegment)(e))&&(r=(0,o.djb2Hash)(t).toString(36).slice(0,6)),r}function f(e,t,r){let n=(0,l.normalizeAppPath)(e),o=(0,a.getNamedRouteRegex)(n,{prefixRouteKeys:!1}),c=(0,s.interpolateDynamicPath)(n,t,o),{name:d,ext:f}=i.default.parse(r),p=h(i.default.posix.join(e,d)),g=p?`-${p}`:"";return(0,u.normalizePathSep)(i.default.join(c,`${d}${g}${f}`))}function p(e){if(!(0,n.isMetadataPage)(e))return e;let t=e,r="";if("/robots"===e?t+=".txt":"/manifest"===e?t+=".webmanifest":r=h(e),!t.endsWith("/route")){let{dir:e,name:n,ext:s}=i.default.parse(t);t=i.default.posix.join(e,`${n}${r?`-${r}`:""}${s}`,"route")}return t}function g(e,t){let r=e.endsWith("/route"),n=r?e.slice(0,-6):e,i=n.endsWith("/sitemap")?".xml":"";return(t?`${n}/[__metadata_id__]`:`${n}${i}`)+(r?"/route":"")}},31722:(e,t,r)=>{"use strict";e.exports=o;var n=r(94313),i=r(51841),s=r(77350);function a(e){return"missing required '"+e.name+"'"}function o(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),l=o.resolvedType instanceof n?"int32":o.type,u="m"+s.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[o.keyType]?t("k=%j",i.defaults[o.keyType]):t("k=null"),void 0!==i.defaults[l]?t("value=%j",i.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===i.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[o.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",u)):o.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===i.basic[l]?t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,l)):void 0===i.basic[l]?t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",a(c))}return t("return m")}},32110:(e,t,r)=>{"use strict";e.exports=a;var n=r(64824);((a.prototype=Object.create(n.prototype)).constructor=a).className="Enum";var i=r(77968),s=r(93107);function a(e,t,r,i,s,a){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=a,this.reserved=void 0,t)for(var o=Object.keys(t),l=0;l<o.length;++l)"number"==typeof t[o[l]]&&(this.valuesById[this.values[o[l]]=t[o[l]]]=o[l])}a.fromJSON=function(e,t){var r=new a(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},32269:(e,t,r)=>{var n=r(5231),i=r(69619);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},33331:(e,t)=>{"use strict";var r;function n(e){for(let t=0;t<e.length;t++){let r=e[t];if("function"!=typeof r)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof r}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}r={value:!0},Object.defineProperty(t,"D",{enumerable:!0,get:function(){return n}})},33663:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.DEFAULT_PORT=void 0;let n=r(40649),i=r(37366),s=r(28354),a=r(56427),o=r(21858),l=r(66284),u=r(1014),c=r(21858),d=r(38717),h=r(91645),f=r(27275),p="dns_resolver";function g(e){u.trace(c.LogVerbosity.DEBUG,p,e)}t.DEFAULT_PORT=443;let m=3e4,y=s.promisify(i.resolveTxt),v=s.promisify(i.lookup);function b(...e){let t=[];for(let r=0;r<Math.max.apply(null,e.map(e=>e.length));r++)for(let n of e)r<n.length&&t.push(n[r]);return t}class S{constructor(e,r,n){var i,s,a;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,g("Resolver constructed for target "+(0,d.uriToString)(e));let u=(0,d.splitHostPort)(e.path);null===u?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(u.host)||(0,h.isIPv6)(u.host)?(this.ipResult=[{host:u.host,port:null!=(i=u.port)?i:t.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=u.host,this.port=null!=(s=u.port)?s:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===n["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,d.uriToString)(this.target)}`,metadata:new l.Metadata};let c={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new f.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!=(a=n["grpc.dns_min_time_between_resolutions_ms"])?a:m,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){this.returnedIpResult||(g("Returning IP address for target "+(0,d.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(null===this.dnsHostname)g("Failed to parse DNS address "+(0,d.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,d.uriToString)(this.target)}`,metadata:new l.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;g("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=v(e,{all:!0}),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let t=e.filter(e=>4===e.family),r=e.filter(e=>6===e.family);this.latestLookupResult=b(r,t).map(e=>({host:e.address,port:+this.port}));let n="["+this.latestLookupResult.map(e=>e.host+":"+e.port).join(",")+"]";if(g("Resolved addresses for target "+(0,d.uriToString)(this.target)+": "+n),0===this.latestLookupResult.length)return void this.listener.onError(this.defaultResolutionError);this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{null!==this.pendingLookupPromise&&(g("Resolution error for target "+(0,d.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=y(e),this.pendingTxtPromise.then(e=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,a.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new l.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},e=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null==(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?g('resolution update delayed by "min time between resolutions" rate limit'):g("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}t.setup=function(){(0,n.registerResolver)("dns",S),(0,n.registerDefaultScheme)("dns")}},33742:(e,t,r)=>{"use strict";var n,i;n={value:!0},n=n=t.rS=t.Yi=n=t.Ib=n=n=void 0;let s=r(90),a=r(85961),o=r(79253),l=r(52230);n=r(28048),n=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(i=t.Ib||(t.Ib={}));let u={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){return""===e?t:e+"."+t}function d(e){return e instanceof a.Service||e instanceof a.Type||e instanceof a.Enum}function h(e){return e instanceof a.Namespace||e instanceof a.Root}function f(e,t){let r=c(t,e.name);return d(e)?[[r,e]]:h(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>f(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function p(e,t){return function(r){return e.toObject(e.decode(r),t)}}function g(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function m(e){return(e||[]).reduce((e,t)=>{for(let[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e},{deprecated:!1,idempotency_level:i.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function y(e,t,r,n){let i=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:g(i),requestDeserialize:p(i,r),responseSerialize:g(a),responseDeserialize:p(a,r),originalName:s(e.name),requestType:b(i,n),responseType:b(a,n),options:m(e.parsedOptions)}}function v(e,t,r,n){let i={};for(let s of e.methodsArray)i[s.name]=y(s,t,r,n);return i}function b(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function S(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function w(e,t,r,n){if(e instanceof a.Service)return v(e,t,r,n);if(e instanceof a.Type)return b(e,n);if(e instanceof a.Enum)return S(e,n);throw Error("Type mismatch in reflection object handling")}function T(e,t){let r={};e.resolveAll();let n=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[i,s]of f(e,""))r[i]=w(s,i,t,n);return r}function E(e,t){t=t||{};let r=a.Root.fromDescriptor(e);return r.resolveAll(),T(r,t)}n=function(e,t){return(0,l.loadProtosWithOptions)(e,t).then(e=>T(e,t))},t.Yi=function(e,t){return T((0,l.loadProtosWithOptionsSync)(e,t),t)},t.rS=function(e,t){t=t||{};let r=a.Root.fromJSON(e);return r.resolveAll(),T(r,t)},n=function(e,t){return E(o.FileDescriptorSet.decode(e),t)},n=function(e,t){return E(o.FileDescriptorSet.fromObject(e),t)},(0,l.addCommonProtos)()},33771:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0;class r{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}t.StatusBuilder=r},33873:e=>{"use strict";e.exports=require("path")},34117:e=>{var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},34346:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},34360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{chainStreams:function(){return h},continueDynamicHTMLResume:function(){return k},continueDynamicPrerender:function(){return I},continueFizzStream:function(){return O},continueStaticPrerender:function(){return A},createBufferedTransformStream:function(){return y},createDocumentClosingStream:function(){return R},createRootLayoutValidatorStream:function(){return x},renderToInitialFizzStream:function(){return v},streamFromBuffer:function(){return p},streamFromString:function(){return f},streamToBuffer:function(){return g},streamToString:function(){return m}});let n=r(44334),i=r(2720),s=r(13944),a=r(97748),o=r(42503),l=r(88477),u=r(54806);function c(){}let d=new TextEncoder;function h(...e){if(0===e.length)throw Object.defineProperty(Error("Invariant: chainStreams requires at least one stream"),"__NEXT_ERROR_CODE",{value:"E437",enumerable:!1,configurable:!0});if(1===e.length)return e[0];let{readable:t,writable:r}=new TransformStream,n=e[0].pipeTo(r,{preventClose:!0}),i=1;for(;i<e.length-1;i++){let t=e[i];n=n.then(()=>t.pipeTo(r,{preventClose:!0}))}let s=e[i];return(n=n.then(()=>s.pipeTo(r))).catch(c),t}function f(e){return new ReadableStream({start(t){t.enqueue(d.encode(e)),t.close()}})}function p(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})}async function g(e){let t=e.getReader(),r=[];for(;;){let{done:e,value:n}=await t.read();if(e)break;r.push(n)}return Buffer.concat(r)}async function m(e,t){let r=new TextDecoder("utf-8",{fatal:!0}),n="";for await(let i of e){if(null==t?void 0:t.aborted)return n;n+=r.decode(i,{stream:!0})}return n+r.decode()}function y(){let e,t=[],r=0,n=n=>{if(e)return;let i=new s.DetachedPromise;e=i,(0,a.scheduleImmediate)(()=>{try{let e=new Uint8Array(r),i=0;for(let r=0;r<t.length;r++){let n=t[r];e.set(n,i),i+=n.byteLength}t.length=0,r=0,n.enqueue(e)}catch{}finally{e=void 0,i.resolve()}})};return new TransformStream({transform(e,i){t.push(e),r+=e.byteLength,n(i)},flush(){if(e)return e.promise}})}function v({ReactDOMServer:e,element:t,streamOptions:r}){return(0,n.getTracer)().trace(i.AppRenderSpan.renderToReadableStream,async()=>e.renderToReadableStream(t,r))}function b(e){let t=!1,r=!1;return new TransformStream({async transform(n,i){r=!0;let s=await e();if(t){if(s){let e=d.encode(s);i.enqueue(e)}i.enqueue(n)}else{let e=(0,l.indexOfUint8Array)(n,o.ENCODED_TAGS.CLOSED.HEAD);if(-1!==e){if(s){let t=d.encode(s),r=new Uint8Array(n.length+t.length);r.set(n.slice(0,e)),r.set(t,e),r.set(n.slice(e),e+t.length),i.enqueue(r)}else i.enqueue(n);t=!0}else s&&i.enqueue(d.encode(s)),i.enqueue(n),t=!0}},async flush(t){if(r){let r=await e();r&&t.enqueue(d.encode(r))}}})}function S(e){let t,r=!1,n=r=>{let n=new s.DetachedPromise;t=n,(0,a.scheduleImmediate)(()=>{try{r.enqueue(d.encode(e))}catch{}finally{t=void 0,n.resolve()}})};return new TransformStream({transform(e,t){t.enqueue(e),r||(r=!0,n(t))},flush(n){if(t)return t.promise;r||n.enqueue(d.encode(e))}})}function w(e){let t=null,r=!1;async function n(n){if(t)return;let i=e.getReader();await (0,a.atLeastOneTask)();try{for(;;){let{done:e,value:t}=await i.read();if(e){r=!0;return}n.enqueue(t)}}catch(e){n.error(e)}}return new TransformStream({transform(e,r){r.enqueue(e),t||(t=n(r))},flush(e){if(!r)return t||n(e)}})}let T="</body></html>";function E(){let e=!1;return new TransformStream({transform(t,r){if(e)return r.enqueue(t);let n=(0,l.indexOfUint8Array)(t,o.ENCODED_TAGS.CLOSED.BODY_AND_HTML);if(n>-1){if(e=!0,t.length===o.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length)return;let i=t.slice(0,n);if(r.enqueue(i),t.length>o.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length+n){let e=t.slice(n+o.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length);r.enqueue(e)}}else r.enqueue(t)},flush(e){e.enqueue(o.ENCODED_TAGS.CLOSED.BODY_AND_HTML)}})}function C(){return new TransformStream({transform(e,t){(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.BODY)||(0,l.isEquivalentUint8Arrays)(e,o.ENCODED_TAGS.CLOSED.HTML)||(e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.BODY),e=(0,l.removeFromUint8Array)(e,o.ENCODED_TAGS.CLOSED.HTML),t.enqueue(e))}})}function x(){let e=!1,t=!1;return new TransformStream({async transform(r,n){!e&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.HTML)>-1&&(e=!0),!t&&(0,l.indexOfUint8Array)(r,o.ENCODED_TAGS.OPENING.BODY)>-1&&(t=!0),n.enqueue(r)},flush(r){let n=[];e||n.push("html"),t||n.push("body"),n.length&&r.enqueue(d.encode(`<html id="__next_error__">
            <template
              data-next-error-message="Missing ${n.map(e=>`<${e}>`).join(n.length>1?" and ":"")} tags in the root layout.
Read more at https://nextjs.org/docs/messages/missing-root-layout-tags""
              data-next-error-digest="${u.MISSING_ROOT_TAGS_ERROR}"
              data-next-error-stack=""
            ></template>
          `))}})}function _(e,t){let r=e;for(let e of t)e&&(r=r.pipeThrough(e));return r}async function O(e,{suffix:t,inlinedDataStream:r,isStaticGeneration:n,getServerInsertedHTML:i,getServerInsertedMetadata:s,validateRootLayout:a}){let o=t?t.split(T,1)[0]:null;return n&&"allReady"in e&&await e.allReady,_(e,[y(),b(s),null!=o&&o.length>0?S(o):null,r?w(r):null,a?x():null,E(),b(i)])}async function I(e,{getServerInsertedHTML:t,getServerInsertedMetadata:r}){return e.pipeThrough(y()).pipeThrough(C()).pipeThrough(b(t)).pipeThrough(b(r))}async function A(e,{inlinedDataStream:t,getServerInsertedHTML:r,getServerInsertedMetadata:n}){return e.pipeThrough(y()).pipeThrough(b(r)).pipeThrough(b(n)).pipeThrough(w(t)).pipeThrough(E())}async function k(e,{inlinedDataStream:t,getServerInsertedHTML:r,getServerInsertedMetadata:n}){return e.pipeThrough(y()).pipeThrough(b(r)).pipeThrough(b(n)).pipeThrough(w(t)).pipeThrough(E())}function R(){return f(T)}},34405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r(1014);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var i=r(40649);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return i.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return i.createResolver}});var s=r(38717);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var a=r(83847);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return a.durationToMs}});var o=r(27275);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return o.BackoffTimeout}});var l=r(72374);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return l.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return l.validateLoadBalancingConfig}});var u=r(59571);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return u.subchannelAddressToString}});var c=r(78332);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return c.ChildLoadBalancerHandler}});var d=r(17765);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var h=r(58821);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return h.BaseFilter}});var f=r(79070);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return f.FilterStackFactory}});var p=r(24664);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return p.registerAdminService}});var g=r(85330);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return g.BaseSubchannelWrapper}});var m=r(60087);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return m.OutlierDetectionLoadBalancingConfig}})},34452:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},34466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;let n=r(66284);function i(e){return"getRequestHeaders"in e&&"function"==typeof e.getRequestHeaders}class s{static createFromMetadataGenerator(e){return new o(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;(s=i(e)?e.getRequestHeaders(t.service_url):new Promise((r,n)=>{e.getRequestMetadata(t.service_url,(e,t)=>e?void n(e):t?void r(t):void n(Error("Headers not set by metadata plugin")))})).then(e=>{let t=new n.Metadata;for(let r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new l}}t.CallCredentials=s;class a extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new n.Metadata;for(let r of(await Promise.all(this.creds.map(t=>t.generateMetadata(e)))))t.merge(r);return t}compose(e){return new a(this.creds.concat([e]))}_equals(e){return this===e||e instanceof a&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class o extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,n)=>{void 0!==n?t(n):r(e)})})}compose(e){return new a([this,e])}_equals(e){return this===e||e instanceof o&&this.metadataGenerator===e.metadataGenerator}}class l extends s{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof l}}},34631:e=>{"use strict";e.exports=require("tls")},34746:e=>{e.exports=function(e){return this.__data__.get(e)}},34772:(e,t,r)=>{e.exports=r(41547)(r(85718),"Set")},34821:(e,t,r)=>{"use strict";var n=r(68790),i={stream:!0};function s(e,t){if(e){var r=e[t[0]];if(e=r&&r[t[2]])r=e.name;else{if(!(e=r&&r["*"]))throw Error('Could not find the module "'+t[0]+'" in the React Server Consumer Manifest. This is probably a bug in the React Server Components bundler.');r=t[2]}return 4===t.length?[e.id,e.chunks,r,1]:[e.id,e.chunks,r]}return t}function a(e,t){var r="",n=e[t];if(n)r=n.name;else{var i=t.lastIndexOf("#");if(-1!==i&&(r=t.slice(i+1),n=e[t.slice(0,i)]),!n)throw Error('Could not find the module "'+t+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return n.async?[n.id,n.chunks,r,1]:[n.id,n.chunks,r]}var o=new Map;function l(e){var t=globalThis.__next_require__(e);return"function"!=typeof t.then||"fulfilled"===t.status?null:(t.then(function(e){t.status="fulfilled",t.value=e},function(e){t.status="rejected",t.reason=e}),t)}function u(){}function c(e){for(var t=e[1],n=[],i=0;i<t.length;){var s=t[i++];t[i++];var a=o.get(s);if(void 0===a){a=r.e(s),n.push(a);var c=o.set.bind(o,s,null);a.then(c,u),o.set(s,a)}else null!==a&&n.push(a)}return 4===e.length?0===n.length?l(e[0]):Promise.all(n).then(function(){return l(e[0])}):0<n.length?Promise.all(n):null}function d(e){var t=globalThis.__next_require__(e[0]);if(4===e.length&&"function"==typeof t.then)if("fulfilled"===t.status)t=t.value;else throw t.reason;return"*"===e[2]?t:""===e[2]?t.__esModule?t.default:t:t[e[2]]}function h(e,t,r){if(null!==e)for(var n=1;n<t.length;n+=2){var i=r,s=f.d,a=s.X,o=e.prefix+t[n],l=e.crossOrigin;l="string"==typeof l?"use-credentials"===l?l:"":void 0,a.call(s,o,{crossOrigin:l,nonce:i})}}var f=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,p=Symbol.for("react.transitional.element"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=m&&e[m]||e["@@iterator"])?e:null}var v=Symbol.asyncIterator,b=Array.isArray,S=Object.getPrototypeOf,w=Object.prototype,T=new WeakMap;function E(e){return Number.isFinite(e)?0===e&&-1/0==1/e?"$-0":e:1/0===e?"$Infinity":-1/0===e?"$-Infinity":"$NaN"}function C(e,t,r,n,i){function s(e,r){r=new Blob([new Uint8Array(r.buffer,r.byteOffset,r.byteLength)]);var n=h++;return null===m&&(m=new FormData),m.append(t+n,r),"$"+e+n.toString(16)}function a(e){function r(l){l.done?(l=h++,s.append(t+l,new Blob(o)),s.append(t+a,'"$o'+l.toString(16)+'"'),s.append(t+a,"C"),0==--f&&n(s)):(o.push(l.value),e.read(new Uint8Array(1024)).then(r,i))}null===m&&(m=new FormData);var s=m;f++;var a=h++,o=[];return e.read(new Uint8Array(1024)).then(r,i),"$r"+a.toString(16)}function o(e){function r(o){if(o.done)s.append(t+a,"C"),0==--f&&n(s);else try{var l=JSON.stringify(o.value,c);s.append(t+a,l),e.read().then(r,i)}catch(e){i(e)}}null===m&&(m=new FormData);var s=m;f++;var a=h++;return e.read().then(r,i),"$R"+a.toString(16)}function l(e){try{var t=e.getReader({mode:"byob"})}catch(t){return o(e.getReader())}return a(t)}function u(e,r){function s(e){if(e.done){if(void 0===e.value)a.append(t+o,"C");else try{var l=JSON.stringify(e.value,c);a.append(t+o,"C"+l)}catch(e){i(e);return}0==--f&&n(a)}else try{var u=JSON.stringify(e.value,c);a.append(t+o,u),r.next().then(s,i)}catch(e){i(e)}}null===m&&(m=new FormData);var a=m;f++;var o=h++;return e=e===r,r.next().then(s,i),"$"+(e?"x":"X")+o.toString(16)}function c(e,a){if(null===a)return null;if("object"==typeof a){switch(a.$$typeof){case p:if(void 0!==r&&-1===e.indexOf(":")){var o=C.get(this);if(void 0!==o)return r.set(o+":"+e,a),"$T"}throw Error("React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.");case g:o=a._payload;var _=a._init;null===m&&(m=new FormData),f++;try{var O=_(o),I=h++,A=d(O,I);return m.append(t+I,A),"$"+I.toString(16)}catch(e){if("object"==typeof e&&null!==e&&"function"==typeof e.then){f++;var k=h++;return o=function(){try{var e=d(a,k),r=m;r.append(t+k,e),f--,0===f&&n(r)}catch(e){i(e)}},e.then(o,o),"$"+k.toString(16)}return i(e),null}finally{f--}}if("function"==typeof a.then){null===m&&(m=new FormData),f++;var R=h++;return a.then(function(e){try{var r=d(e,R);(e=m).append(t+R,r),f--,0===f&&n(e)}catch(e){i(e)}},i),"$@"+R.toString(16)}if(void 0!==(o=C.get(a)))if(x!==a)return o;else x=null;else -1===e.indexOf(":")&&void 0!==(o=C.get(this))&&(e=o+":"+e,C.set(a,e),void 0!==r&&r.set(e,a));if(b(a))return a;if(a instanceof FormData){null===m&&(m=new FormData);var D=m,N=t+(e=h++)+"_";return a.forEach(function(e,t){D.append(N+t,e)}),"$K"+e.toString(16)}if(a instanceof Map)return e=h++,o=d(Array.from(a),e),null===m&&(m=new FormData),m.append(t+e,o),"$Q"+e.toString(16);if(a instanceof Set)return e=h++,o=d(Array.from(a),e),null===m&&(m=new FormData),m.append(t+e,o),"$W"+e.toString(16);if(a instanceof ArrayBuffer)return e=new Blob([a]),o=h++,null===m&&(m=new FormData),m.append(t+o,e),"$A"+o.toString(16);if(a instanceof Int8Array)return s("O",a);if(a instanceof Uint8Array)return s("o",a);if(a instanceof Uint8ClampedArray)return s("U",a);if(a instanceof Int16Array)return s("S",a);if(a instanceof Uint16Array)return s("s",a);if(a instanceof Int32Array)return s("L",a);if(a instanceof Uint32Array)return s("l",a);if(a instanceof Float32Array)return s("G",a);if(a instanceof Float64Array)return s("g",a);if(a instanceof BigInt64Array)return s("M",a);if(a instanceof BigUint64Array)return s("m",a);if(a instanceof DataView)return s("V",a);if("function"==typeof Blob&&a instanceof Blob)return null===m&&(m=new FormData),e=h++,m.append(t+e,a),"$B"+e.toString(16);if(e=y(a))return(o=e.call(a))===a?(e=h++,o=d(Array.from(o),e),null===m&&(m=new FormData),m.append(t+e,o),"$i"+e.toString(16)):Array.from(o);if("function"==typeof ReadableStream&&a instanceof ReadableStream)return l(a);if("function"==typeof(e=a[v]))return u(a,e.call(a));if((e=S(a))!==w&&(null===e||null!==S(e))){if(void 0===r)throw Error("Only plain objects, and a few built-ins, can be passed to Server Functions. Classes or null prototypes are not supported.");return"$T"}return a}if("string"==typeof a)return"Z"===a[a.length-1]&&this[e]instanceof Date?"$D"+a:e="$"===a[0]?"$"+a:a;if("boolean"==typeof a)return a;if("number"==typeof a)return E(a);if(void 0===a)return"$undefined";if("function"==typeof a){if(void 0!==(o=T.get(a)))return e=JSON.stringify({id:o.id,bound:o.bound},c),null===m&&(m=new FormData),o=h++,m.set(t+o,e),"$F"+o.toString(16);if(void 0!==r&&-1===e.indexOf(":")&&void 0!==(o=C.get(this)))return r.set(o+":"+e,a),"$T";throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof a){if(void 0!==r&&-1===e.indexOf(":")&&void 0!==(o=C.get(this)))return r.set(o+":"+e,a),"$T";throw Error("Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.")}if("bigint"==typeof a)return"$n"+a.toString(10);throw Error("Type "+typeof a+" is not supported as an argument to a Server Function.")}function d(e,t){return"object"==typeof e&&null!==e&&(t="$"+t.toString(16),C.set(e,t),void 0!==r&&r.set(t,e)),x=e,JSON.stringify(e,c)}var h=1,f=0,m=null,C=new WeakMap,x=e,_=d(e,0);return null===m?n(_):(m.set(t+"0",_),0===f&&n(m)),function(){0<f&&(f=0,null===m?n(_):n(m))}}var x=new WeakMap;function _(e){var t,r,n=new Promise(function(e,n){t=e,r=n});return C(e,"",void 0,function(e){if("string"==typeof e){var r=new FormData;r.append("0",e),e=r}n.status="fulfilled",n.value=e,t(e)},function(e){n.status="rejected",n.reason=e,r(e)}),n}function O(e){var t=T.get(this);if(!t)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var r=null;if(null!==t.bound){if((r=x.get(t))||(r=_({id:t.id,bound:t.bound}),x.set(t,r)),"rejected"===r.status)throw r.reason;if("fulfilled"!==r.status)throw r;t=r.value;var n=new FormData;t.forEach(function(t,r){n.append("$ACTION_"+e+":"+r,t)}),r=n,t="$ACTION_REF_"+e}else t="$ACTION_ID_"+t.id;return{name:t,method:"POST",encType:"multipart/form-data",data:r}}function I(e,t){var r=T.get(this);if(!r)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(r.id!==e)return!1;var n=r.bound;if(null===n)return 0===t;switch(n.status){case"fulfilled":return n.value.length===t;case"pending":throw n;case"rejected":throw n.reason;default:throw"string"!=typeof n.status&&(n.status="pending",n.then(function(e){n.status="fulfilled",n.value=e},function(e){n.status="rejected",n.reason=e})),n}}function A(e,t,r,n){T.has(e)||(T.set(e,{id:t,originalBind:e.bind,bound:r}),Object.defineProperties(e,{$$FORM_ACTION:{value:void 0===n?O:function(){var e=T.get(this);if(!e)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var t=e.bound;return null===t&&(t=Promise.resolve([])),n(e.id,t)}},$$IS_SIGNATURE_EQUAL:{value:I},bind:{value:D}}))}var k=Function.prototype.bind,R=Array.prototype.slice;function D(){var e=T.get(this);if(!e)return k.apply(this,arguments);var t=e.originalBind.apply(this,arguments),r=R.call(arguments,1),n=null;return n=null!==e.bound?Promise.resolve(e.bound).then(function(e){return e.concat(r)}):Promise.resolve(r),T.set(t,{id:e.id,originalBind:t.bind,bound:n}),Object.defineProperties(t,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:I},bind:{value:D}}),t}function N(e,t,r){function n(){var e=Array.prototype.slice.call(arguments);return s?"fulfilled"===s.status?t(i,s.value.concat(e)):Promise.resolve(s).then(function(r){return t(i,r.concat(e))}):t(i,e)}var i=e.id,s=e.bound;return A(n,i,s,r),n}function P(e,t,r){function n(){var r=Array.prototype.slice.call(arguments);return t(e,r)}return A(n,e,null,r),n}function M(e,t,r,n){this.status=e,this.value=t,this.reason=r,this._response=n}function j(e){switch(e.status){case"resolved_model":W(e);break;case"resolved_module":K(e)}switch(e.status){case"fulfilled":return e.value;case"pending":case"blocked":throw e;default:throw e.reason}}function L(e){return new M("pending",null,null,e)}function B(e,t){for(var r=0;r<e.length;r++)(0,e[r])(t)}function F(e,t,r){switch(e.status){case"fulfilled":B(t,e.value);break;case"pending":case"blocked":if(e.value)for(var n=0;n<t.length;n++)e.value.push(t[n]);else e.value=t;if(e.reason){if(r)for(t=0;t<r.length;t++)e.reason.push(r[t])}else e.reason=r;break;case"rejected":r&&B(r,e.reason)}}function U(e,t){if("pending"!==e.status&&"blocked"!==e.status)e.reason.error(t);else{var r=e.reason;e.status="rejected",e.reason=t,null!==r&&B(r,t)}}function V(e,t,r){return new M("resolved_model",(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}",null,e)}function z(e,t,r){q(e,(r?'{"done":true,"value":':'{"done":false,"value":')+t+"}")}function q(e,t){if("pending"!==e.status)e.reason.enqueueModel(t);else{var r=e.value,n=e.reason;e.status="resolved_model",e.value=t,null!==r&&(W(e),F(e,r,n))}}function $(e,t){if("pending"===e.status||"blocked"===e.status){var r=e.value,n=e.reason;e.status="resolved_module",e.value=t,null!==r&&(K(e),F(e,r,n))}}M.prototype=Object.create(Promise.prototype),M.prototype.then=function(e,t){switch(this.status){case"resolved_model":W(this);break;case"resolved_module":K(this)}switch(this.status){case"fulfilled":e(this.value);break;case"pending":case"blocked":e&&(null===this.value&&(this.value=[]),this.value.push(e)),t&&(null===this.reason&&(this.reason=[]),this.reason.push(t));break;default:t&&t(this.reason)}};var G=null;function W(e){var t=G;G=null;var r=e.value;e.status="blocked",e.value=null,e.reason=null;try{var n=JSON.parse(r,e._response._fromJSON),i=e.value;if(null!==i&&(e.value=null,e.reason=null,B(i,n)),null!==G){if(G.errored)throw G.value;if(0<G.deps){G.value=n,G.chunk=e;return}}e.status="fulfilled",e.value=n}catch(t){e.status="rejected",e.reason=t}finally{G=t}}function K(e){try{var t=d(e.value);e.status="fulfilled",e.value=t}catch(t){e.status="rejected",e.reason=t}}function H(e,t){e._closed=!0,e._closedReason=t,e._chunks.forEach(function(e){"pending"===e.status&&U(e,t)})}function Q(e){return{$$typeof:g,_payload:e,_init:j}}function Y(e,t){var r=e._chunks,n=r.get(t);return n||(n=e._closed?new M("rejected",null,e._closedReason,e):L(e),r.set(t,n)),n}function X(e,t,r,n,i,s){function a(e){for(var u=1;u<s.length;u++){for(;e.$$typeof===g;)if((e=e._payload)===l.chunk)e=l.value;else if("fulfilled"===e.status)e=e.value;else{s.splice(0,u-1),e.then(a,o);return}e=e[s[u]]}u=i(n,e,t,r),t[r]=u,""===r&&null===l.value&&(l.value=u),t[0]===p&&"object"==typeof l.value&&null!==l.value&&l.value.$$typeof===p&&(e=l.value,"3"===r)&&(e.props=u),l.deps--,0===l.deps&&null!==(u=l.chunk)&&"blocked"===u.status&&(e=u.value,u.status="fulfilled",u.value=l.value,null!==e&&B(e,l.value))}function o(e){if(!l.errored){l.errored=!0,l.value=e;var t=l.chunk;null!==t&&"blocked"===t.status&&U(t,e)}}if(G){var l=G;l.deps++}else l=G={parent:null,chunk:null,value:null,deps:1,errored:!1};return e.then(a,o),null}function J(e,t,r,n){if(!e._serverReferenceConfig)return N(t,e._callServer,e._encodeFormAction);var i=a(e._serverReferenceConfig,t.id),s=c(i);if(s)t.bound&&(s=Promise.all([s,t.bound]));else{if(!t.bound)return A(s=d(i),t.id,t.bound,e._encodeFormAction),s;s=Promise.resolve(t.bound)}if(G){var o=G;o.deps++}else o=G={parent:null,chunk:null,value:null,deps:1,errored:!1};return s.then(function(){var s=d(i);if(t.bound){var a=t.bound.value.slice(0);a.unshift(null),s=s.bind.apply(s,a)}A(s,t.id,t.bound,e._encodeFormAction),r[n]=s,""===n&&null===o.value&&(o.value=s),r[0]===p&&"object"==typeof o.value&&null!==o.value&&o.value.$$typeof===p&&(a=o.value,"3"===n)&&(a.props=s),o.deps--,0===o.deps&&null!==(s=o.chunk)&&"blocked"===s.status&&(a=s.value,s.status="fulfilled",s.value=o.value,null!==a&&B(a,o.value))},function(e){if(!o.errored){o.errored=!0,o.value=e;var t=o.chunk;null!==t&&"blocked"===t.status&&U(t,e)}}),null}function Z(e,t,r,n,i){var s=parseInt((t=t.split(":"))[0],16);switch((s=Y(e,s)).status){case"resolved_model":W(s);break;case"resolved_module":K(s)}switch(s.status){case"fulfilled":var a=s.value;for(s=1;s<t.length;s++){for(;a.$$typeof===g;)if("fulfilled"!==(a=a._payload).status)return X(a,r,n,e,i,t.slice(s-1));else a=a.value;a=a[t[s]]}return i(e,a,r,n);case"pending":case"blocked":return X(s,r,n,e,i,t);default:return G?(G.errored=!0,G.value=s.reason):G={parent:null,chunk:null,value:s.reason,deps:0,errored:!0},null}}function ee(e,t){return new Map(t)}function et(e,t){return new Set(t)}function er(e,t){return new Blob(t.slice(1),{type:t[0]})}function en(e,t){e=new FormData;for(var r=0;r<t.length;r++)e.append(t[r][0],t[r][1]);return e}function ei(e,t){return t[Symbol.iterator]()}function es(e,t){return t}function ea(e,t,r,n){if("$"===n[0]){if("$"===n)return null!==G&&"0"===r&&(G={parent:G,chunk:null,value:null,deps:0,errored:!1}),p;switch(n[1]){case"$":return n.slice(1);case"L":return Q(e=Y(e,t=parseInt(n.slice(2),16)));case"@":if(2===n.length)return new Promise(function(){});return Y(e,t=parseInt(n.slice(2),16));case"S":return Symbol.for(n.slice(2));case"F":return Z(e,n=n.slice(2),t,r,J);case"T":if(t="$"+n.slice(2),null==(e=e._tempRefs))throw Error("Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.");return e.get(t);case"Q":return Z(e,n=n.slice(2),t,r,ee);case"W":return Z(e,n=n.slice(2),t,r,et);case"B":return Z(e,n=n.slice(2),t,r,er);case"K":return Z(e,n=n.slice(2),t,r,en);case"Z":return em();case"i":return Z(e,n=n.slice(2),t,r,ei);case"I":return 1/0;case"-":return"$-0"===n?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(n.slice(2)));case"n":return BigInt(n.slice(2));default:return Z(e,n=n.slice(1),t,r,es)}}return n}function eo(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function el(e,t,r,n,i,s,a){var o=new Map;this._bundlerConfig=e,this._serverReferenceConfig=t,this._moduleLoading=r,this._callServer=void 0!==n?n:eo,this._encodeFormAction=i,this._nonce=s,this._chunks=o,this._stringDecoder=new TextDecoder,this._fromJSON=null,this._rowLength=this._rowTag=this._rowID=this._rowState=0,this._buffer=[],this._closed=!1,this._closedReason=null,this._tempRefs=a,this._fromJSON=eS(this)}function eu(e,t,r){var n=e._chunks,i=n.get(t);i&&"pending"!==i.status?i.reason.enqueueValue(r):n.set(t,new M("fulfilled",r,null,e))}function ec(e,t,r){var n=e._chunks,i=n.get(t);r=JSON.parse(r,e._fromJSON);var a=s(e._bundlerConfig,r);if(h(e._moduleLoading,r[1],e._nonce),r=c(a)){if(i){var o=i;o.status="blocked"}else o=new M("blocked",null,null,e),n.set(t,o);r.then(function(){return $(o,a)},function(e){return U(o,e)})}else i?$(i,a):n.set(t,new M("resolved_module",a,null,e))}function ed(e,t,r,n){var i=e._chunks,s=i.get(t);s?"pending"===s.status&&(e=s.value,s.status="fulfilled",s.value=r,s.reason=n,null!==e&&B(e,s.value)):i.set(t,new M("fulfilled",r,n,e))}function eh(e,t,r){var n=null;r=new ReadableStream({type:r,start:function(e){n=e}});var i=null;ed(e,t,r,{enqueueValue:function(e){null===i?n.enqueue(e):i.then(function(){n.enqueue(e)})},enqueueModel:function(t){if(null===i){var r=new M("resolved_model",t,null,e);W(r),"fulfilled"===r.status?n.enqueue(r.value):(r.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=r)}else{r=i;var s=L(e);s.then(function(e){return n.enqueue(e)},function(e){return n.error(e)}),i=s,r.then(function(){i===s&&(i=null),q(s,t)})}},close:function(){if(null===i)n.close();else{var e=i;i=null,e.then(function(){return n.close()})}},error:function(e){if(null===i)n.error(e);else{var t=i;i=null,t.then(function(){return n.error(e)})}}})}function ef(){return this}function ep(e){return(e={next:e})[v]=ef,e}function eg(e,t,r){var n=[],i=!1,s=0,a={};a[v]=function(){var t=0;return ep(function(r){if(void 0!==r)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(t===n.length){if(i)return new M("fulfilled",{done:!0,value:void 0},null,e);n[t]=L(e)}return n[t++]})},ed(e,t,r?a[v]():a,{enqueueValue:function(t){if(s===n.length)n[s]=new M("fulfilled",{done:!1,value:t},null,e);else{var r=n[s],i=r.value,a=r.reason;r.status="fulfilled",r.value={done:!1,value:t},null!==i&&F(r,i,a)}s++},enqueueModel:function(t){s===n.length?n[s]=V(e,t,!1):z(n[s],t,!1),s++},close:function(t){for(i=!0,s===n.length?n[s]=V(e,t,!0):z(n[s],t,!0),s++;s<n.length;)z(n[s++],'"$undefined"',!0)},error:function(t){for(i=!0,s===n.length&&(n[s]=L(e));s<n.length;)U(n[s++],t)}})}function em(){var e=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.");return e.stack="Error: "+e.message,e}function ey(e,t){for(var r=e.length,n=t.length,i=0;i<r;i++)n+=e[i].byteLength;n=new Uint8Array(n);for(var s=i=0;s<r;s++){var a=e[s];n.set(a,i),i+=a.byteLength}return n.set(t,i),n}function ev(e,t,r,n,i,s){eu(e,t,i=new i((r=0===r.length&&0==n.byteOffset%s?n:ey(r,n)).buffer,r.byteOffset,r.byteLength/s))}function eb(e,t,r,n,s){switch(r){case 65:eu(e,t,ey(n,s).buffer);return;case 79:ev(e,t,n,s,Int8Array,1);return;case 111:eu(e,t,0===n.length?s:ey(n,s));return;case 85:ev(e,t,n,s,Uint8ClampedArray,1);return;case 83:ev(e,t,n,s,Int16Array,2);return;case 115:ev(e,t,n,s,Uint16Array,2);return;case 76:ev(e,t,n,s,Int32Array,4);return;case 108:ev(e,t,n,s,Uint32Array,4);return;case 71:ev(e,t,n,s,Float32Array,4);return;case 103:ev(e,t,n,s,Float64Array,8);return;case 77:ev(e,t,n,s,BigInt64Array,8);return;case 109:ev(e,t,n,s,BigUint64Array,8);return;case 86:ev(e,t,n,s,DataView,1);return}for(var a=e._stringDecoder,o="",l=0;l<n.length;l++)o+=a.decode(n[l],i);switch(n=o+=a.decode(s),r){case 73:ec(e,t,n);break;case 72:switch(t=n[0],e=JSON.parse(n=n.slice(1),e._fromJSON),n=f.d,t){case"D":n.D(e);break;case"C":"string"==typeof e?n.C(e):n.C(e[0],e[1]);break;case"L":t=e[0],r=e[1],3===e.length?n.L(t,r,e[2]):n.L(t,r);break;case"m":"string"==typeof e?n.m(e):n.m(e[0],e[1]);break;case"X":"string"==typeof e?n.X(e):n.X(e[0],e[1]);break;case"S":"string"==typeof e?n.S(e):n.S(e[0],0===e[1]?void 0:e[1],3===e.length?e[2]:void 0);break;case"M":"string"==typeof e?n.M(e):n.M(e[0],e[1])}break;case 69:r=JSON.parse(n),(n=em()).digest=r.digest,(s=(r=e._chunks).get(t))?U(s,n):r.set(t,new M("rejected",null,n,e));break;case 84:(s=(r=e._chunks).get(t))&&"pending"!==s.status?s.reason.enqueueValue(n):r.set(t,new M("fulfilled",n,null,e));break;case 78:case 68:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");case 82:eh(e,t,void 0);break;case 114:eh(e,t,"bytes");break;case 88:eg(e,t,!1);break;case 120:eg(e,t,!0);break;case 67:(e=e._chunks.get(t))&&"fulfilled"===e.status&&e.reason.close(""===n?'"$undefined"':n);break;default:(s=(r=e._chunks).get(t))?q(s,n):r.set(t,new M("resolved_model",n,null,e))}}function eS(e){return function(t,r){if("string"==typeof r)return ea(e,this,t,r);if("object"==typeof r&&null!==r){if(r[0]===p){if(t={$$typeof:p,type:r[1],key:r[2],ref:null,props:r[3]},null!==G){if(G=(r=G).parent,r.errored)t=Q(t=new M("rejected",null,r.value,e));else if(0<r.deps){var n=new M("blocked",null,null,e);r.value=t,r.chunk=n,t=Q(n)}}}else t=r;return t}return r}}function ew(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function eT(e){return new el(e.serverConsumerManifest.moduleMap,e.serverConsumerManifest.serverModuleMap,e.serverConsumerManifest.moduleLoading,ew,e.encodeFormAction,"string"==typeof e.nonce?e.nonce:void 0,e&&e.temporaryReferences?e.temporaryReferences:void 0)}function eE(e,t){function r(t){var s=t.value;if(t.done)H(e,Error("Connection closed."));else{var a=0,o=e._rowState;t=e._rowID;for(var l=e._rowTag,u=e._rowLength,c=e._buffer,d=s.length;a<d;){var h=-1;switch(o){case 0:58===(h=s[a++])?o=1:t=t<<4|(96<h?h-87:h-48);continue;case 1:84===(o=s[a])||65===o||79===o||111===o||85===o||83===o||115===o||76===o||108===o||71===o||103===o||77===o||109===o||86===o?(l=o,o=2,a++):64<o&&91>o||35===o||114===o||120===o?(l=o,o=3,a++):(l=0,o=3);continue;case 2:44===(h=s[a++])?o=4:u=u<<4|(96<h?h-87:h-48);continue;case 3:h=s.indexOf(10,a);break;case 4:(h=a+u)>s.length&&(h=-1)}var f=s.byteOffset+a;if(-1<h)eb(e,t,l,c,u=new Uint8Array(s.buffer,f,h-a)),a=h,3===o&&a++,u=t=l=o=0,c.length=0;else{s=new Uint8Array(s.buffer,f,s.byteLength-a),c.push(s),u-=s.byteLength;break}}return e._rowState=o,e._rowID=t,e._rowTag=l,e._rowLength=u,i.read().then(r).catch(n)}}function n(t){H(e,t)}var i=t.getReader();i.read().then(r).catch(n)}t.createFromFetch=function(e,t){var r=eT(t);return e.then(function(e){eE(r,e.body)},function(e){H(r,e)}),Y(r,0)},t.createFromReadableStream=function(e,t){return eE(t=eT(t),e),Y(t,0)},t.createServerReference=function(e){return P(e,ew)},t.createTemporaryReferenceSet=function(){return new Map},t.encodeReply=function(e,t){return new Promise(function(r,n){var i=C(e,"",t&&t.temporaryReferences?t.temporaryReferences:void 0,r,n);if(t&&t.signal){var s=t.signal;if(s.aborted)i(s.reason);else{var a=function(){i(s.reason),s.removeEventListener("abort",a)};s.addEventListener("abort",a)}}})},t.registerServerReference=function(e,t,r){return A(e,t,null,r),e}},34883:(e,t,r)=>{var n=r(55048);e.exports=function(e){return e==e&&!n(e)}},34990:(e,t,r)=>{e.exports=r(87321)()},35108:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=Array(64),i=Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,s=null,a=[],o=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[o++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:a[o++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:a[o++]=n[i|u>>6],a[o++]=n[63&u],l=0}o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0)}return(l&&(a[o++]=n[i],a[o++]=61,1===l&&(a[o++]=61)),s)?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,o=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&o>1)break;if(void 0===(u=i[u]))throw Error(a);switch(o){case 0:n=u,o=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:t[r++]=(3&n)<<6|u,o=0}}if(1===o)throw Error(a);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},35142:(e,t,r)=>{var n=r(40542),i=r(67619),s=r(51449),a=r(42403);e.exports=function(e,t){return n(e)?e:i(e,t)?[e]:s(a(e))}},35163:(e,t,r)=>{var n=r(15451),i=r(27467),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable;e.exports=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!o.call(e,"callee")}},35362:e=>{(()=>{"use strict";"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab=__dirname+"/");var t={};(()=>{var e=t;function r(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var i="",s=r+1;s<e.length;){var a=e.charCodeAt(s);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a){i+=e[s++];continue}break}if(!i)throw TypeError("Missing parameter name at "+r);t.push({type:"NAME",index:r,value:i}),r=s;continue}if("("===n){var o=1,l="",s=r+1;if("?"===e[s])throw TypeError('Pattern cannot start with "?" at '+s);for(;s<e.length;){if("\\"===e[s]){l+=e[s++]+e[s++];continue}if(")"===e[s]){if(0==--o){s++;break}}else if("("===e[s]&&(o++,"?"!==e[s+1]))throw TypeError("Capturing groups are not allowed at "+s);l+=e[s++]}if(o)throw TypeError("Unbalanced pattern at "+r);if(!l)throw TypeError("Missing pattern at "+r);t.push({type:"PATTERN",index:r,value:l}),r=s;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function n(e,t){void 0===t&&(t={});for(var n=r(e),i=t.prefixes,s=void 0===i?"./":i,o="[^"+a(t.delimiter||"/#?")+"]+?",l=[],u=0,c=0,d="",h=function(e){if(c<n.length&&n[c].type===e)return n[c++].value},f=function(e){var t=h(e);if(void 0!==t)return t;var r=n[c];throw TypeError("Unexpected "+r.type+" at "+r.index+", expected "+e)},p=function(){for(var e,t="";e=h("CHAR")||h("ESCAPED_CHAR");)t+=e;return t};c<n.length;){var g=h("CHAR"),m=h("NAME"),y=h("PATTERN");if(m||y){var v=g||"";-1===s.indexOf(v)&&(d+=v,v=""),d&&(l.push(d),d=""),l.push({name:m||u++,prefix:v,suffix:"",pattern:y||o,modifier:h("MODIFIER")||""});continue}var b=g||h("ESCAPED_CHAR");if(b){d+=b;continue}if(d&&(l.push(d),d=""),h("OPEN")){var v=p(),S=h("NAME")||"",w=h("PATTERN")||"",T=p();f("CLOSE"),l.push({name:S||(w?u++:""),pattern:S&&!w?o:w,prefix:v,suffix:T,modifier:h("MODIFIER")||""});continue}f("END")}return l}function i(e,t){void 0===t&&(t={});var r=o(t),n=t.encode,i=void 0===n?function(e){return e}:n,s=t.validate,a=void 0===s||s,l=e.map(function(e){if("object"==typeof e)return RegExp("^(?:"+e.pattern+")$",r)});return function(t){for(var r="",n=0;n<e.length;n++){var s=e[n];if("string"==typeof s){r+=s;continue}var o=t?t[s.name]:void 0,u="?"===s.modifier||"*"===s.modifier,c="*"===s.modifier||"+"===s.modifier;if(Array.isArray(o)){if(!c)throw TypeError('Expected "'+s.name+'" to not repeat, but got an array');if(0===o.length){if(u)continue;throw TypeError('Expected "'+s.name+'" to not be empty')}for(var d=0;d<o.length;d++){var h=i(o[d],s);if(a&&!l[n].test(h))throw TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but got "'+h+'"');r+=s.prefix+h+s.suffix}continue}if("string"==typeof o||"number"==typeof o){var h=i(String(o),s);if(a&&!l[n].test(h))throw TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+h+'"');r+=s.prefix+h+s.suffix;continue}if(!u){var f=c?"an array":"a string";throw TypeError('Expected "'+s.name+'" to be '+f)}}return r}}function s(e,t,r){void 0===r&&(r={});var n=r.decode,i=void 0===n?function(e){return e}:n;return function(r){var n=e.exec(r);if(!n)return!1;for(var s=n[0],a=n.index,o=Object.create(null),l=function(e){if(void 0===n[e])return"continue";var r=t[e-1];"*"===r.modifier||"+"===r.modifier?o[r.name]=n[e].split(r.prefix+r.suffix).map(function(e){return i(e,r)}):o[r.name]=i(n[e],r)},u=1;u<n.length;u++)l(u);return{path:s,index:a,params:o}}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function o(e){return e&&e.sensitive?"":"i"}function l(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:"",suffix:"",modifier:"",pattern:""});return e}function u(e,t,r){return RegExp("(?:"+e.map(function(e){return h(e,t,r).source}).join("|")+")",o(r))}function c(e,t,r){return d(n(e,r),t,r)}function d(e,t,r){void 0===r&&(r={});for(var n=r.strict,i=void 0!==n&&n,s=r.start,l=void 0===s||s,u=r.end,c=void 0===u||u,d=r.encode,h=void 0===d?function(e){return e}:d,f="["+a(r.endsWith||"")+"]|$",p="["+a(r.delimiter||"/#?")+"]",g=l?"^":"",m=0,y=e;m<y.length;m++){var v=y[m];if("string"==typeof v)g+=a(h(v));else{var b=a(h(v.prefix)),S=a(h(v.suffix));if(v.pattern)if(t&&t.push(v),b||S)if("+"===v.modifier||"*"===v.modifier){var w="*"===v.modifier?"?":"";g+="(?:"+b+"((?:"+v.pattern+")(?:"+S+b+"(?:"+v.pattern+"))*)"+S+")"+w}else g+="(?:"+b+"("+v.pattern+")"+S+")"+v.modifier;else g+="("+v.pattern+")"+v.modifier;else g+="(?:"+b+S+")"+v.modifier}}if(c)i||(g+=p+"?"),g+=r.endsWith?"(?="+f+")":"$";else{var T=e[e.length-1],E="string"==typeof T?p.indexOf(T[T.length-1])>-1:void 0===T;i||(g+="(?:"+p+"(?="+f+"))?"),E||(g+="(?="+p+"|"+f+")")}return new RegExp(g,o(r))}function h(e,t,r){return e instanceof RegExp?l(e,t):Array.isArray(e)?u(e,t,r):c(e,t,r)}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=n,e.compile=function(e,t){return i(n(e,t),t)},e.tokensToFunction=i,e.match=function(e,t){var r=[];return s(h(e,r,t),r,t)},e.regexpToFunction=s,e.tokensToRegexp=d,e.pathToRegexp=h})(),e.exports=t})()},35697:(e,t,r)=>{var n=r(79474),i=r(4999),s=r(67009),a=r(27006),o=r(59774),l=r(2408),u=1,c=2,d="[object Boolean]",h="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",m="[object RegExp]",y="[object Set]",v="[object String]",b="[object Symbol]",S="[object ArrayBuffer]",w="[object DataView]",T=n?n.prototype:void 0,E=T?T.valueOf:void 0;e.exports=function(e,t,r,n,T,C,x){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case S:if(e.byteLength!=t.byteLength||!C(new i(e),new i(t)))break;return!0;case d:case h:case g:return s(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case v:return e==t+"";case p:var _=o;case y:var O=n&u;if(_||(_=l),e.size!=t.size&&!O)break;var I=x.get(e);if(I)return I==t;n|=c,x.set(e,t);var A=a(_(e),_(t),n,T,C,x);return x.delete(e),A;case b:if(E)return E.call(e)==E.call(t)}return!1}},35800:(e,t,r)=>{var n=r(57797);e.exports=function(e){return n(this.__data__,e)>-1}},35858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;let n=r(29021);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,s=null;t.getDefaultRootsData=function(){return i?(null===s&&(s=n.readFileSync(i)),s):null}},36142:(e,t,r)=>{"use strict";m={value:!0},m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=t.ex=m=m=m=m=m=m=t.OS=t.z3=void 0;let n=r(37391);m={enumerable:!0,get:function(){return n.CallCredentials}};let i=r(18453);m={enumerable:!0,get:function(){return i.ChannelImplementation}};let s=r(68655);m={enumerable:!0,get:function(){return s.CompressionAlgorithms}};let a=r(18155);m={enumerable:!0,get:function(){return a.ConnectivityState}};let o=r(56070);m={enumerable:!0,get:function(){return o.ChannelCredentials}};let l=r(7775);m={enumerable:!0,get:function(){return l.Client}};let u=r(71271);m={enumerable:!0,get:function(){return u.LogVerbosity}},m={enumerable:!0,get:function(){return u.Status}},m={enumerable:!0,get:function(){return u.Propagate}};let c=r(31359),d=r(61480);Object.defineProperty(t,"ex",{enumerable:!0,get:function(){return d.loadPackageDefinition}}),m={enumerable:!0,get:function(){return d.makeClientConstructor}},m={enumerable:!0,get:function(){return d.makeClientConstructor}};let h=r(86777);Object.defineProperty(t,"OS",{enumerable:!0,get:function(){return h.Metadata}});let f=r(4227);m={enumerable:!0,get:function(){return f.Server}};let p=r(19420);m={enumerable:!0,get:function(){return p.ServerCredentials}};let g=r(10788);m={enumerable:!0,get:function(){return g.StatusBuilder}},t.z3={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:o.ChannelCredentials.createInsecure,createSsl:o.ChannelCredentials.createSsl,createFromSecureContext:o.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},m=e=>e.close(),m=(e,t,r)=>e.waitForReady(t,r),m=(e,t)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},m=(e,t,r)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},m=e=>{c.setLogger(e)},m=e=>{c.setLoggerVerbosity(e)};var m=e=>l.Client.prototype.getChannel.call(e),y=r(3712);m={enumerable:!0,get:function(){return y.ListenerBuilder}},m={enumerable:!0,get:function(){return y.RequesterBuilder}},m={enumerable:!0,get:function(){return y.InterceptingCall}},m={enumerable:!0,get:function(){return y.InterceptorConfigurationError}};var v=r(66827);m={enumerable:!0,get:function(){return v.getChannelzServiceDefinition}},m={enumerable:!0,get:function(){return v.getChannelzHandlers}};var b=r(17061);m={enumerable:!0,get:function(){return b.addAdminServicesToServer}},m=r(76250);let S=r(44660),w=r(85481),T=r(1470),E=r(37386),C=r(30015),x=r(1532),_=r(66827);(()=>{S.setup(),w.setup(),T.setup(),E.setup(),C.setup(),x.setup(),_.setup()})()},36315:(e,t,r)=>{var n=r(22),i=r(92662);e.exports=function(e,t){return e&&e.length?i(e,n(t,2)):[]}},36341:(e,t,r)=>{var n=r(67200),i=r(27006),s=r(35697),a=r(21630),o=r(1566),l=r(40542),u=r(80329),c=r(10090),d=1,h="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,m,y,v){var b=l(e),S=l(t),w=b?f:o(e),T=S?f:o(t);w=w==h?p:w,T=T==h?p:T;var E=w==p,C=T==p,x=w==T;if(x&&u(e)){if(!u(t))return!1;b=!0,E=!1}if(x&&!E)return v||(v=new n),b||c(e)?i(e,t,r,m,y,v):s(e,t,w,r,m,y,v);if(!(r&d)){var _=E&&g.call(e,"__wrapped__"),O=C&&g.call(t,"__wrapped__");if(_||O){var I=_?e.value():e,A=O?t.value():t;return v||(v=new n),y(I,A,r,m,v)}}return!!x&&(v||(v=new n),a(e,t,r,m,y,v))}},36735:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(29750),s=i.LongBits,a=i.base64,o=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function g(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},g.prototype=Object.create(l.prototype),g.prototype.fn=p,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new g((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,+!!e)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=d.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},36942:(e,t,r)=>{"use strict";var n=e.exports=r(90673);n.build="full",n.tokenize=r(7485),n.parse=r(55855),n.common=r(67865),n.Root._configure(n.Type,n.parse,n.common)},36959:e=>{e.exports=function(){}},37366:e=>{"use strict";e.exports=require("dns")},37386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.shuffled=t.PickFirstLoadBalancingConfig=void 0;let n=r(86239),i=r(18155),s=r(72910),a=r(31359),o=r(71271),l="pick_first";function u(e){a.trace(o.LogVerbosity.DEBUG,l,e)}let c="pick_first",d=250;class h{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return c}toJsonObject(){return{[c]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new h(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=h;class f{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function p(e){let t=e.slice();for(let e=t.length-1;e>1;e--){let r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}t.shuffled=p;class g{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=i.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,n,i)=>{this.onSubchannelStateUpdate(e,t,r,i)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(i.ConnectivityState.READY,new f(this.currentPick)):0===this.children.length?this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){for(let{subchannel:e}of(this.stickyTransientFailureMode=!0,this.children))e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,n){var s;if(null==(s=this.currentPick)?void 0:s.realSubchannelEquals(e)){r!==i.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[t,s]of this.children.entries())if(e.realSubchannelEquals(s.subchannel)){r===i.ConnectivityState.READY&&this.pickSubchannel(s.subchannel),r===i.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=!0,n&&(this.lastError=n),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),s.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let e=r.subchannel.getConnectivityState();if(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.CONNECTING)return void this.startConnecting(t)}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===i.ConnectivityState.IDLE&&(u("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null==(t=this.children[e])||t.subchannel.startConnecting()})),this.connectionDelayTimeout=null==(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},d)).unref)?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(u("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){u(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,{}),hasReportedTransientFailure:!1}));for(let{subchannel:e}of t)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(let{subchannel:e}of(this.resetSubchannelList(),this.children=t,this.children))if(e.addConnectivityStateListener(this.subchannelStateListener),e.getConnectivityState()===i.ConnectivityState.READY)return void this.pickSubchannel(e);for(let e of this.children)e.subchannel.getConnectivityState()===i.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof h&&(t.getShuffleAddressList()&&(e=p(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===i.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return c}}t.PickFirstLoadBalancer=g,t.setup=function(){(0,n.registerLoadBalancerType)(c,g,h),(0,n.registerDefaultLoadBalancerType)(c)}},37391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;let n=r(86777);function i(e){return"getRequestHeaders"in e&&"function"==typeof e.getRequestHeaders}class s{static createFromMetadataGenerator(e){return new o(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;(s=i(e)?e.getRequestHeaders(t.service_url):new Promise((r,n)=>{e.getRequestMetadata(t.service_url,(e,t)=>e?void n(e):t?void r(t):void n(Error("Headers not set by metadata plugin")))})).then(e=>{let t=new n.Metadata;for(let r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new l}}t.CallCredentials=s;class a extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new n.Metadata;for(let r of(await Promise.all(this.creds.map(t=>t.generateMetadata(e)))))t.merge(r);return t}compose(e){return new a(this.creds.concat([e]))}_equals(e){return this===e||e instanceof a&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class o extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,n)=>{void 0!==n?t(n):r(e)})})}compose(e){return new a([this,e])}_equals(e){return this===e||e instanceof o&&this.metadataGenerator===e.metadataGenerator}}class l extends s{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof l}}},37456:e=>{e.exports=function(e){return null==e}},37461:(e,t)=>{"use strict";function r(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===n}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isHangingPromiseRejectionError:function(){return r},makeHangingPromise:function(){return a}});let n="HANGING_PROMISE_REJECTION";class i extends Error{constructor(e){super(`During prerendering, ${e} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${e} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context.`),this.expression=e,this.digest=n}}let s=new WeakMap;function a(e,t){if(e.aborted)return Promise.reject(new i(t));{let r=new Promise((r,n)=>{let a=n.bind(null,new i(t)),o=s.get(e);if(o)o.push(a);else{let t=[a];s.set(e,t),e.addEventListener("abort",()=>{for(let e=0;e<t.length;e++)t[e]()},{once:!0})}});return r.catch(o),r}}function o(){}},37575:(e,t,r)=>{var n=r(66930);e.exports=function(){this.__data__=new n,this.size=0}},37643:(e,t,r)=>{var n=r(6053),i=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},38248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DynamicServerError:function(){return n},isDynamicServerError:function(){return i}});let r="DYNAMIC_SERVER_USAGE";class n extends Error{constructor(e){super("Dynamic server usage: "+e),this.description=e,this.digest=r}}function i(e){return"object"==typeof e&&null!==e&&"digest"in e&&"string"==typeof e.digest&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38404:(e,t,r)=>{var n=r(29395),i=r(65932),s=r(27467),a="[object Object]",o=Object.prototype,l=Function.prototype.toString,u=o.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!s(e)||n(e)!=a)return!1;var t=i(e);if(null===t)return!0;var r=u.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==c}},38428:e=>{var t=0x1fffffffffffff,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var i=typeof e;return!!(n=null==n?t:n)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<n}},38717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;let r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;t.parseUri=function(e){let t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}};let n=/^\d+$/;t.splitHostPort=function(e){if(e.startsWith("[")){let t=e.indexOf("]");if(-1===t)return null;let r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(!(e.length>t+1))return{host:r};if(":"!==e[t+1])return null;{let i=e.substring(t+2);return n.test(i)?{host:r,port:+i}:null}}{let t=e.split(":");return 2!==t.length?{host:e}:n.test(t[1])?{host:t[0],port:+t[1]}:null}},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path}},38954:(e,t,r)=>{"use strict";e.exports=v;var n=r(24859);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(94313),s=r(12529),a=r(62886),o=r(8004),l=r(84723),u=r(9611),c=r(12687),d=r(36735),h=r(77350),f=r(4518),p=r(31722),g=r(77780),m=r(61386),y=r(96506);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)r.add((void 0!==t.fields[u[c]].keyType?o.fromJSON:a.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)r.add(s.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var d=t.nested[u[c]];r.add((void 0!==d.id?a.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?l.fromJSON:n.fromJSON)(u[c],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:c,types:t,util:h}),this.verify=g(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},39672:(e,t,r)=>{var n=r(58141),i="__lodash_hash_undefined__";e.exports=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=n&&void 0===t?i:t,this}},39774:e=>{e.exports=function(e){return e!=e}},40491:(e,t,r)=>{var n=r(1707);e.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},40542:e=>{e.exports=Array.isArray},40649:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;let n=r(38717),i={},s=null;t.registerResolver=function(e,t){i[e]=t},t.registerDefaultScheme=function(e){s=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in i)return new i[e.scheme](e,t,r);throw Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in i)return i[e.scheme].getDefaultAuthority(e);throw Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){if(void 0===e.scheme||!(e.scheme in i))if(null!==s)return{scheme:s,authority:void 0,path:(0,n.uriToString)(e)};else return null;return e}},40962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0;class r{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}t.BaseFilter=r},41011:(e,t,r)=>{var n=r(41353);e.exports=function(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:n(e,t,r)}},41132:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},41157:(e,t,r)=>{var n=r(91928);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},41353:e=>{e.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}},41547:(e,t,r)=>{var n=r(61548),i=r(90851);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},41693:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},42082:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},42087:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{decryptActionBoundArgs:function(){return y},encryptActionBoundArgs:function(){return m}}),r(54387);let n=r(74932),i=r(64390),s=r(34360),a=r(46295),o=r(63033),l=r(75124),u=c(r(7153));function c(e){return e&&e.__esModule?e:{default:e}}let d=!1,h=new TextEncoder,f=new TextDecoder;async function p(e,t){let r=await (0,a.getActionEncryptionKey)();if(void 0===r)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=atob(t),i=n.slice(0,16),s=n.slice(16),o=f.decode(await (0,a.decrypt)(r,(0,a.stringToUint8Array)(i),(0,a.stringToUint8Array)(s)));if(!o.startsWith(e))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return o.slice(e.length)}async function g(e,t){let r=await (0,a.getActionEncryptionKey)();if(void 0===r)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let n=new Uint8Array(16);o.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(n));let i=(0,a.arrayBufferToString)(n.buffer),s=await (0,a.encrypt)(r,n,h.encode(e+t));return btoa(i+(0,a.arrayBufferToString)(s))}let m=u.default.cache(async function e(t,...r){let{clientModules:i}=(0,a.getClientReferenceManifestForRsc)(),u=Error();Error.captureStackTrace(u,e);let c=!1,d=o.workUnitAsyncStorage.getStore(),h=(null==d?void 0:d.type)==="prerender"?(0,l.createHangingInputAbortSignal)(d):void 0,f=await (0,s.streamToString)((0,n.renderToReadableStream)(r,i,{signal:h,onError(e){(null==h||!h.aborted)&&(c||(c=!0,u.message=e instanceof Error?e.message:String(e)))}}),h);if(c)throw u;if(!d)return g(t,f);let p=(0,o.getPrerenderResumeDataCache)(d),m=(0,o.getRenderResumeDataCache)(d),y=t+f,v=(null==p?void 0:p.encryptedBoundArgs.get(y))??(null==m?void 0:m.encryptedBoundArgs.get(y));if(v)return v;let b="prerender"===d.type?d.cacheSignal:void 0;null==b||b.beginRead();let S=await g(t,f);return null==b||b.endRead(),null==p||p.encryptedBoundArgs.set(y,S),S});async function y(e,t){let r,n=await t,s=o.workUnitAsyncStorage.getStore();if(s){let t="prerender"===s.type?s.cacheSignal:void 0,i=(0,o.getPrerenderResumeDataCache)(s),a=(0,o.getRenderResumeDataCache)(s);(r=(null==i?void 0:i.decryptedBoundArgs.get(n))??(null==a?void 0:a.decryptedBoundArgs.get(n)))||(null==t||t.beginRead(),r=await p(e,n),null==t||t.endRead(),null==i||i.decryptedBoundArgs.set(n,r))}else r=await p(e,n);let{edgeRscModuleMapping:l,rscModuleMapping:u}=(0,a.getClientReferenceManifestForRsc)();return await (0,i.createFromReadableStream)(new ReadableStream({start(e){e.enqueue(h.encode(r)),(null==s?void 0:s.type)==="prerender"?s.renderSignal.aborted?e.close():s.renderSignal.addEventListener("abort",()=>e.close(),{once:!0}):e.close()}}),{serverConsumerManifest:{moduleLoading:null,moduleMap:d?l:u,serverModuleMap:(0,a.getServerModuleMap)()}})}},42205:(e,t,r)=>{var n=r(41693),i=r(85450);function s(e,t,r,a,o){var l=-1,u=e.length;for(r||(r=i),o||(o=[]);++l<u;){var c=e[l];t>0&&r(c)?t>1?s(c,t-1,r,a,o):n(o,c):a||(o[o.length]=c)}return o}e.exports=s},42403:(e,t,r)=>{var n=r(80195);e.exports=function(e){return null==e?"":n(e)}},42503:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ENCODED_TAGS",{enumerable:!0,get:function(){return r}});let r={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])}}},42785:(e,t)=>{"use strict";function r(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function n(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[r,i]of Object.entries(e))if(Array.isArray(i))for(let e of i)t.append(r,n(e));else t.set(r,n(i));return t}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(let t of r){for(let r of t.keys())e.delete(r);for(let[r,n]of t.entries())e.append(r,n)}return e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{assign:function(){return s},searchParamsToUrlQuery:function(){return r},urlQueryToSearchParams:function(){return i}})},43356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;let n=r(91645);function i(e){return"port"in e}t.isTcpSubchannelAddress=i,t.subchannelAddressEqual=function(e,t){return!e&&!t||!!e&&!!t&&(i(e)?i(t)&&e.host===t.host&&e.port===t.port:!i(t)&&e.path===t.path)},t.subchannelAddressToString=function(e){return i(e)?e.host+":"+e.port:e.path};let s=443;t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:s}:{path:e}}},43378:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},43436:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},43943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;let n=r(88494),i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function a(e,t,r){r||(r={});class a extends n.Client{}return Object.keys(e).forEach(t=>{let r;if(s(t))return;let n=e[t];if("string"==typeof t&&"$"===t.charAt(0))throw Error("Method names cannot start with $");r=n.requestStream?n.responseStream?"bidi":"client_stream":n.responseStream?"server_stream":"unary";let l=n.requestSerialize,u=n.responseDeserialize,c=o(i[r],n.path,l,u);a.prototype[t]=c,Object.assign(a.prototype[t],n),n.originalName&&!s(n.originalName)&&(a.prototype[n.originalName]=a.prototype[t])}),a.service=e,a.serviceName=t,a}function o(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function l(e){return"format"in e}t.makeClientConstructor=a,t.loadPackageDefinition=function(e){let t={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r],i=r.split(".");if(i.some(e=>s(e)))continue;let o=i[i.length-1],u=t;for(let e of i.slice(0,-1))u[e]||(u[e]={}),u=u[e];l(n)?u[o]=n:u[o]=a(n,o,{})}return t}},44334:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BubbledError:function(){return h},SpanKind:function(){return c},SpanStatusCode:function(){return u},getTracer:function(){return w},isBubbledError:function(){return f}});let i=r(2720),s=r(23879);try{n=r(95006)}catch(e){n=r(73214)}let{context:a,propagation:o,trace:l,SpanStatusCode:u,SpanKind:c,ROOT_CONTEXT:d}=n;class h extends Error{constructor(e,t){super(),this.bubble=e,this.result=t}}function f(e){return"object"==typeof e&&null!==e&&e instanceof h}let p=(e,t)=>{f(t)&&t.bubble?e.setAttribute("next.bubble",!0):(t&&e.recordException(t),e.setStatus({code:u.ERROR,message:null==t?void 0:t.message})),e.end()},g=new Map,m=n.createContextKey("next.rootSpanId"),y=0,v=()=>y++,b={set(e,t,r){e.push({key:t,value:r})}};class S{getTracerInstance(){return l.getTracer("next.js","0.0.1")}getContext(){return a}getTracePropagationData(){let e=a.active(),t=[];return o.inject(e,t,b),t}getActiveScopeSpan(){return l.getSpan(null==a?void 0:a.active())}withPropagatedContext(e,t,r){let n=a.active();if(l.getSpanContext(n))return t();let i=o.extract(n,e,r);return a.with(i,t)}trace(...e){var t;let[r,n,o]=e,{fn:u,options:c}="function"==typeof n?{fn:n,options:{}}:{fn:o,options:{...n}},h=c.spanName??r;if(!i.NextVanillaSpanAllowlist.includes(r)&&"1"!==process.env.NEXT_OTEL_VERBOSE||c.hideSpan)return u();let f=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan()),y=!1;f?(null==(t=l.getSpanContext(f))?void 0:t.isRemote)&&(y=!0):(f=(null==a?void 0:a.active())??d,y=!0);let b=v();return c.attributes={"next.span_name":h,"next.span_type":r,...c.attributes},a.with(f.setValue(m,b),()=>this.getTracerInstance().startActiveSpan(h,c,e=>{let t="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0,n=()=>{g.delete(b),t&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX&&i.LogSpanAllowList.includes(r||"")&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(r.split(".").pop()||"").replace(/[A-Z]/g,e=>"-"+e.toLowerCase())}`,{start:t,end:performance.now()})};y&&g.set(b,new Map(Object.entries(c.attributes??{})));try{if(u.length>1)return u(e,t=>p(e,t));let t=u(e);if((0,s.isThenable)(t))return t.then(t=>(e.end(),t)).catch(t=>{throw p(e,t),t}).finally(n);return e.end(),n(),t}catch(t){throw p(e,t),n(),t}}))}wrap(...e){let t=this,[r,n,s]=3===e.length?e:[e[0],{},e[1]];return i.NextVanillaSpanAllowlist.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof s&&(e=e.apply(this,arguments));let i=arguments.length-1,o=arguments[i];if("function"!=typeof o)return t.trace(r,e,()=>s.apply(this,arguments));{let n=t.getContext().bind(a.active(),o);return t.trace(r,e,(e,t)=>(arguments[i]=function(e){return null==t||t(e),n.apply(this,arguments)},s.apply(this,arguments)))}}:s}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){return e?l.setSpan(a.active(),e):void 0}getRootSpanAttributes(){let e=a.active().getValue(m);return g.get(e)}setRootSpanAttribute(e,t){let r=a.active().getValue(m),n=g.get(r);n&&n.set(e,t)}}let w=(()=>{let e=new S;return()=>e})()},44660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.DEFAULT_PORT=void 0;let n=r(5674),i=r(37366),s=r(28354),a=r(10504),o=r(71271),l=r(86777),u=r(31359),c=r(71271),d=r(26786),h=r(91645),f=r(50268),p="dns_resolver";function g(e){u.trace(c.LogVerbosity.DEBUG,p,e)}t.DEFAULT_PORT=443;let m=3e4,y=s.promisify(i.resolveTxt),v=s.promisify(i.lookup);function b(...e){let t=[];for(let r=0;r<Math.max.apply(null,e.map(e=>e.length));r++)for(let n of e)r<n.length&&t.push(n[r]);return t}class S{constructor(e,r,n){var i,s,a;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,g("Resolver constructed for target "+(0,d.uriToString)(e));let u=(0,d.splitHostPort)(e.path);null===u?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,h.isIPv4)(u.host)||(0,h.isIPv6)(u.host)?(this.ipResult=[{host:u.host,port:null!=(i=u.port)?i:t.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=u.host,this.port=null!=(s=u.port)?s:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===n["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,d.uriToString)(this.target)}`,metadata:new l.Metadata};let c={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new f.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!=(a=n["grpc.dns_min_time_between_resolutions_ms"])?a:m,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){this.returnedIpResult||(g("Returning IP address for target "+(0,d.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(null===this.dnsHostname)g("Failed to parse DNS address "+(0,d.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,d.uriToString)(this.target)}`,metadata:new l.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;g("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=v(e,{all:!0}),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let t=e.filter(e=>4===e.family),r=e.filter(e=>6===e.family);this.latestLookupResult=b(r,t).map(e=>({host:e.address,port:+this.port}));let n="["+this.latestLookupResult.map(e=>e.host+":"+e.port).join(",")+"]";if(g("Resolved addresses for target "+(0,d.uriToString)(this.target)+": "+n),0===this.latestLookupResult.length)return void this.listener.onError(this.defaultResolutionError);this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{null!==this.pendingLookupPromise&&(g("Resolution error for target "+(0,d.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=y(e),this.pendingTxtPromise.then(e=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,a.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new l.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},e=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null==(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?g('resolution update delayed by "min time between resolutions" rate limit'):g("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}t.setup=function(){(0,n.registerResolver)("dns",S),(0,n.registerDefaultScheme)("dns")}},44827:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DecodeError:function(){return p},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return y},NormalizeError:function(){return g},PageNotFoundError:function(){return m},SP:function(){return h},ST:function(){return f},WEB_VITALS:function(){return r},execOnce:function(){return n},getDisplayName:function(){return l},getLocationOrigin:function(){return a},getURL:function(){return o},isAbsoluteUrl:function(){return s},isResSent:function(){return u},loadGetInitialProps:function(){return d},normalizeRepeatedSlashes:function(){return c},stringifyError:function(){return b}});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return r||(r=!0,t=e(...i)),t}}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,s=e=>i.test(e);function a(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=a();return e.substring(t.length)}function l(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function u(e){return e.finished||e.headersSent}function c(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function d(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await d(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&u(r))return n;if(!n)throw Object.defineProperty(Error('"'+l(e)+'.getInitialProps()" should resolve to an object. But found "'+n+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="undefined"!=typeof performance,f=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class p extends Error{}class g extends Error{}class m extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class y extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},45058:(e,t,r)=>{var n=r(42082),i=r(8852),s=r(67619),a=r(46436);e.exports=function(e){return s(e)?n(a(e)):i(e)}},45603:(e,t,r)=>{var n=r(20540),i=r(55048),s="Expected a function";e.exports=function(e,t,r){var a=!0,o=!0;if("function"!=typeof e)throw TypeError(s);return i(r)&&(a="leading"in r?!!r.leading:a,o="trailing"in r?!!r.trailing:o),n(e,t,{leading:a,maxWait:t,trailing:o})}},45803:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},46063:e=>{e.exports=function(e,t){return e<t}},46229:(e,t,r)=>{var n=r(48169),i=r(66354),s=r(11424);e.exports=function(e,t){return s(i(e,t,n),e+"")}},46295:(e,t,r)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{arrayBufferToString:function(){return o},decrypt:function(){return c},encrypt:function(){return u},getActionEncryptionKey:function(){return g},getClientReferenceManifestForRsc:function(){return p},getServerModuleMap:function(){return f},setReferenceManifestsSingleton:function(){return h},stringToUint8Array:function(){return l}});let i=r(23302),s=r(79535),a=r(29294);function o(e){let t=new Uint8Array(e),r=t.byteLength;if(r<65535)return String.fromCharCode.apply(null,t);let n="";for(let e=0;e<r;e++)n+=String.fromCharCode(t[e]);return n}function l(e){let t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r}function u(e,t,r){return crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,r)}function c(e,t,r){return crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,r)}let d=Symbol.for("next.server.action-manifests");function h({page:e,clientReferenceManifest:t,serverActionsManifest:r,serverModuleMap:n}){var i;let a=null==(i=globalThis[d])?void 0:i.clientReferenceManifestsPerPage;globalThis[d]={clientReferenceManifestsPerPage:{...a,[(0,s.normalizeAppPath)(e)]:t},serverActionsManifest:r,serverModuleMap:n}}function f(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return e.serverModuleMap}function p(){let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:t}=e,r=a.workAsyncStorage.getStore();if(!r)return m(t);let n=t[r.route];if(!n)throw Object.defineProperty(new i.InvariantError(`Missing Client Reference Manifest for ${r.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return n}async function g(){if(n)return n;let e=globalThis[d];if(!e)throw Object.defineProperty(new i.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let t=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||e.serverActionsManifest.encryptionKey;if(void 0===t)throw Object.defineProperty(new i.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return n=await crypto.subtle.importKey("raw",l(atob(t)),"AES-GCM",!0,["encrypt","decrypt"])}function m(e){let t=Object.values(e),r={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let e of t)r.clientModules={...r.clientModules,...e.clientModules},r.edgeRscModuleMapping={...r.edgeRscModuleMapping,...e.edgeRscModuleMapping},r.rscModuleMapping={...r.rscModuleMapping,...e.rscModuleMapping};return r}},46328:(e,t,r)=>{var n=r(95746),i=r(89185),s=r(16854);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=s,e.exports=a},46436:(e,t,r)=>{var n=r(49227),i=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},46642:e=>{"use strict";e.exports={}},47099:e=>{var t=1/0,r="[object Symbol]",n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\ud800-\udfff",a="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\ufe0e\\ufe0f",h="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="['’]",p="["+s+"]",g="["+h+"]",m="["+a+o+"]",y="\\d+",v="["+l+"]",b="["+u+"]",S="[^"+s+h+y+l+u+c+"]",w="\ud83c[\udffb-\udfff]",T="[^"+s+"]",E="(?:\ud83c[\udde6-\uddff]){2}",C="[\ud800-\udbff][\udc00-\udfff]",x="["+c+"]",_="\\u200d",O="(?:"+b+"|"+S+")",I="(?:"+x+"|"+S+")",A="(?:"+f+"(?:d|ll|m|re|s|t|ve))?",k="(?:"+f+"(?:D|LL|M|RE|S|T|VE))?",R="(?:"+m+"|"+w+")?",D="["+d+"]?",N="(?:"+_+"(?:"+[T,E,C].join("|")+")"+D+R+")*",P=D+R+N,M="(?:"+[v,E,C].join("|")+")"+P,j="(?:"+[T+m+"?",m,E,C,p].join("|")+")",L=RegExp(f,"g"),B=RegExp(m,"g"),F=RegExp(w+"(?="+w+")|"+j+P,"g"),U=RegExp([x+"?"+b+"+"+A+"(?="+[g,x,"$"].join("|")+")",I+"+"+k+"(?="+[g,x+O,"$"].join("|")+")",x+"?"+O+"+"+A,x+"+"+k,y,M].join("|"),"g"),V=RegExp("["+_+s+a+o+d+"]"),z=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,q={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},$="object"==typeof global&&global&&global.Object===Object&&global,G="object"==typeof self&&self&&self.Object===Object&&self,W=$||G||Function("return this")();function K(e,t,r,n){var i=-1,s=e?e.length:0;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function H(e){return e.split("")}function Q(e){return e.match(n)||[]}var Y=function(e){return function(t){return null==e?void 0:e[t]}}(q);function X(e){return V.test(e)}function J(e){return z.test(e)}function Z(e){return X(e)?ee(e):H(e)}function ee(e){return e.match(F)||[]}function et(e){return e.match(U)||[]}var er=Object.prototype.toString,en=W.Symbol,ei=en?en.prototype:void 0,es=ei?ei.toString:void 0;function ea(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}function eo(e){if("string"==typeof e)return e;if(ed(e))return es?es.call(e):"";var r=e+"";return"0"==r&&1/e==-t?"-0":r}function el(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ea(e,t,r)}function eu(e){return function(t){var r=X(t=eh(t))?Z(t):void 0,n=r?r[0]:t.charAt(0),i=r?el(r,1).join(""):t.slice(1);return n[e]()+i}}function ec(e){return!!e&&"object"==typeof e}function ed(e){return"symbol"==typeof e||ec(e)&&er.call(e)==r}function eh(e){return null==e?"":eo(e)}var ef=function(e){return function(t){return K(ey(eg(t).replace(L,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?ep(t):t)});function ep(e){return em(eh(e).toLowerCase())}function eg(e){return(e=eh(e))&&e.replace(i,Y).replace(B,"")}var em=eu("toUpperCase");function ey(e,t,r){return(e=eh(e),void 0===(t=r?void 0:t))?J(e)?et(e):Q(e):e.match(t)||[]}e.exports=ef},47212:(e,t,r)=>{var n=r(87270),i=r(30316),s=r(22),a=r(40542),o=r(7383);e.exports=function(e,t,r){var l=a(e)?n:i;return r&&o(e,t,r)&&(t=void 0),l(e,s(t,3))}},47282:(e,t,r)=>{e=r.nmd(e);var n=r(10663),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,a=s&&s.exports===i&&n.process,o=function(){try{var e=s&&s.require&&s.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o},47603:(e,t,r)=>{var n=r(14675),i=r(91928),s=r(48169);e.exports=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s},48169:e=>{e.exports=function(e){return e}},48327:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=function(...e){let t=1/0;for(let r of e){let e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t};let r=[["m",1],["S",1e3],["M",6e4],["H",36e5]];t.getDeadlineTimeoutString=function(e){let t=new Date().getTime();e instanceof Date&&(e=e.getTime());let n=Math.max(e-t,0);for(let[e,t]of r){let r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw Error("Deadline is too far in the future")};let n=0x7fffffff;t.getRelativeTimeout=function(e){let t=(e instanceof Date?e.getTime():e)-new Date().getTime();return t<0?0:t>n?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{let t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}},48385:e=>{var t="\ud800-\udfff",r="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\ud83c[\udffb-\udfff]",s="[^"+t+"]",a="(?:\ud83c[\udde6-\uddff]){2}",o="[\ud800-\udbff][\udc00-\udfff]",l="(?:"+n+"|"+i+")?",u="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[s,a,o].join("|")+")"+u+l+")*",d=u+l+c,h=RegExp(i+"(?="+i+")|"+("(?:"+[s+n+"?",n,a,o,r].join("|"))+")"+d,"g");e.exports=function(e){return e.match(h)||[]}},49227:(e,t,r)=>{var n=r(29395),i=r(27467),s="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&n(e)==s}},50268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;let r=1e3,n=1.6,i=12e4,s=.2;function a(e,t){return Math.random()*(t-e)+e}class o{constructor(e,t){this.callback=e,this.initialDelay=r,this.multiplier=n,this.maxDelay=i,this.jitter=s,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||null==(r=(t=this.timerId).unref)||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+a(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null==(t=(e=this.timerId).ref)||t.call(e)}unref(){var e,t;this.hasRef=!1,null==(t=(e=this.timerId).unref)||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=o},50952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;let n=r(72374),i=r(56427),s=r(21574),a=r(40649),o=r(17765),l=r(27275),u=r(21858),c=r(66284),d=r(1014),h=r(21858),f=r(38717),p=r(78332),g="resolving_load_balancer";function m(e){d.trace(h.LogVerbosity.DEBUG,g,e)}let y=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function v(e,t,r,n){for(let i of r.name)switch(n){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===e&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===e&&i.method===t)return!0}return!1}function b(e,t,r,n){for(let i of r)if(v(e,t,i,n))return i;return null}function S(e){return function(t,r){var n,i;let s=t.split("/").filter(e=>e.length>0),a=null!=(n=s[0])?n:"",o=null!=(i=s[1])?i:"";if(e&&e.methodConfig)for(let t of y){let r=b(a,o,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}}class w{constructor(e,t,r,d,h){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=d,this.onFailedResolution=h,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,i.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new o.QueuePicker(this)),this.childLoadBalancer=new p.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(m("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,a.createResolver)(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var a;this.backoffTimeout.stop(),this.backoffTimeout.reset();let o=null;null===t?null===r?(this.previousServiceConfig=null,o=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):o=this.previousServiceConfig:(o=t,this.previousServiceConfig=t);let l=null!=(a=null==o?void 0:o.loadBalancingConfig)?a:[],d=(0,n.getFirstUsableConfig)(l,!0);if(null===d)return void this.handleResolutionFailure({code:u.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new c.Metadata});this.childLoadBalancer.updateAddressList(e,d,s);let h=null!=o?o:this.defaultServiceConfig;this.onSuccessfulResolution(h,null!=i?i:S(h))},onError:e=>{this.handleResolutionFailure(e)}},r);let f={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},f),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new o.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){m((0,f.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new o.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new o.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=w},51449:(e,t,r)=>{var n=r(85745),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g;e.exports=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(s,"$1"):r||e)}),t})},51841:(e,t,r)=>{"use strict";var n=t,i=r(77350),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},52230:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;let n=r(29021),i=r(33873),s=r(85961);function a(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s))return s;for(let e of t){let t=i.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}t.loadProtosWithOptions=async function(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));a(r,t.includeDirs)}let n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");a(r,t.includeDirs)}let n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){let e=r(96491),t=r(43436),n=r(15696),i=r(16591);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",i.nested.google.nested.protobuf.nested)}},52599:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var a=e[r];t(a,r,e)&&(s[i++]=a)}return s}},52823:(e,t,r)=>{var n=r(85406),i=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},52931:(e,t,r)=>{var n=r(77834),i=r(89605),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},52955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;let n=r(61789),i=r(95824),s=r(59571),a=r(38717),o=r(95146),l=1e4;class u{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},l),null==(t=(e=this.cleanupTimer).unref)||t.call(e))}getOrCreateSubchannel(e,t,r,l){this.ensureCleanupTask();let u=(0,a.uriToString)(e);if(u in this.pool){for(let e of this.pool[u])if((0,s.subchannelAddressEqual)(t,e.subchannelAddress)&&(0,n.channelOptionsEqual)(r,e.channelArguments)&&l._equals(e.channelCredentials))return e.subchannel}let c=new i.Subchannel(e,t,r,l,new o.Http2SubchannelConnector(e));return u in this.pool||(this.pool[u]=[]),this.pool[u].push({subchannelAddress:t,channelArguments:r,channelCredentials:l,subchannel:c}),c.ref(),c}}t.SubchannelPool=u;let c=new u;t.getSubchannelPool=function(e){return e?c:new u}},53293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escapeStringRegexp",{enumerable:!0,get:function(){return i}});let r=/[|\\{}()[\]^$+*?.-]/,n=/[|\\{}()[\]^$+*?.-]/g;function i(e){return r.test(e)?e.replace(n,"\\$&"):e}},53547:(e,t,r)=>{"use strict";e.exports=i;var n=r(29750);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,a){if(!s)throw TypeError("request must be specified");var o=this;if(!a)return n.asPromise(e,o,t,r,i,s);if(!o.rpcImpl)return void setTimeout(function(){a(Error("already ended"))},0);try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return o.emit("error",e,t),a(e);if(null===r)return void o.end(!0);if(!(r instanceof i))try{r=i[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",r,t),a(null,r)})}catch(e){o.emit("error",e,t),setTimeout(function(){a(e)},0);return}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},54003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=n},54351:(e,t,r)=>{"use strict";e.exports=v;var n=r(77968);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(32110),s=r(12630),a=r(73267),o=r(25585),l=r(3076),u=r(8920),c=r(26996),d=r(96120),h=r(93107),f=r(30847),p=r(62823),g=r(16973),m=r(97659),y=r(63695);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)r.add((void 0!==t.fields[u[c]].keyType?o.fromJSON:a.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)r.add(s.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var d=t.nested[u[c]];r.add((void 0!==d.id?a.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?l.fromJSON:n.fromJSON)(u[c],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:c,types:t,util:h}),this.verify=g(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},54369:(e,t,r)=>{"use strict";e.exports=s;var n=r(96120);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(8707);function s(){n.call(this)}function a(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},s._configure()},54387:()=>{},54765:(e,t,r)=>{var n=r(67554),i=r(32269);e.exports=function(e,t){var r=-1,s=i(e)?Array(e.length):[];return n(e,function(e,n,i){s[++r]=t(e,n,i)}),s}},54806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MISSING_ROOT_TAGS_ERROR",{enumerable:!0,get:function(){return r}});let r="NEXT_MISSING_ROOT_TAGS";("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55048:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},55511:e=>{"use strict";e.exports=require("crypto")},55855:(e,t,r)=>{"use strict";e.exports=C,C.filename=null,C.defaults={keepCase:!1};var n=r(7485),i=r(58278),s=r(38954),a=r(62886),o=r(8004),l=r(12529),u=r(94313),c=r(84723),d=r(27405),h=r(51841),f=r(77350),p=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,w=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function C(e,t,r){t instanceof i||(r=t,t=new i),r||(r=C.defaults);var x,_,O,I,A,k=r.preferTrailingComment||!1,R=n(e,r.alternateCommentMode||!1),D=R.next,N=R.push,P=R.peek,M=R.skip,j=R.cmnt,L=!0,B=!1,F=t,U=r.keepCase?function(e){return e}:f.camelCase;function V(e,t,r){var n=C.filename;return r||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+R.line+")")}function z(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw V(e);t.push(D()),M(e),e=P()}while('"'===e||"'"===e);return t.join("")}function q(e){var t=D();switch(t){case"'":case'"':return N(t),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return G(t,!0)}catch(r){if(e&&T.test(t))return t;throw V(t,"value")}}function $(e,t){do t&&('"'===(r=P())||"'"===r)?e.push(z()):e.push([n=W(D()),M("to",!0)?W(D()):n]);while(M(",",!0));var r,n,i={options:void 0};i.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},X(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)})}function G(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(m.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw V(e,"number",t)}function W(e,t){switch(e){case"max":case"MAX":case"Max":return 0x1fffffff;case"0":return 0}if(!t&&"-"===e.charAt(0))throw V(e,"id");if(g.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw V(e,"id")}function K(){if(void 0!==_)throw V("package");if(_=D(),!T.test(_))throw V(_,"name");F=F.define(_),M(";")}function H(){var e,t=P();switch(t){case"weak":e=I||(I=[]),D();break;case"public":D();default:e=O||(O=[])}t=z(),M(";"),e.push(t)}function Q(){if(M("="),!(B="proto3"===(A=z()))&&"proto2"!==A)throw V(A,"syntax");t.setOption("syntax",A),M(";")}function Y(e,t){switch(t){case"option":return es(e,t),M(";"),!0;case"message":return J(e,t),!0;case"enum":return en(e,t),!0;case"service":return ec(e,t),!0;case"extend":return eh(e,t),!0}return!1}function X(e,t,r){var n,i=R.line;if(e&&("string"!=typeof e.comment&&(e.comment=j()),e.filename=C.filename),M("{",!0)){for(;"}"!==(n=D());)t(n);M(";",!0)}else r&&r(),M(";"),e&&("string"!=typeof e.comment||k)&&(e.comment=j(i)||e.comment)}function J(e,t){if(!w.test(t=D()))throw V(t,"type name");var r=new s(t);X(r,function(e){if(!Y(r,e))switch(e){case"map":et(r,e);break;case"required":case"repeated":Z(r,e);break;case"optional":B?Z(r,"proto3_optional"):Z(r,"optional");break;case"oneof":er(r,e);break;case"extensions":$(r.extensions||(r.extensions=[]));break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:if(!B||!T.test(e))throw V(e);N(e),Z(r,"optional")}}),e.add(r)}function Z(e,t,r){var n=D();if("group"===n)return void ee(e,t);for(;n.endsWith(".")||P().startsWith(".");)n+=D();if(!T.test(n))throw V(n,"type");var i=D();if(!w.test(i))throw V(i,"name");i=U(i),M("=");var s=new a(i,W(D()),n,t,r);if(X(s,function(e){if("option"===e)es(s,e),M(";");else throw V(e)},function(){eu(s)}),"proto3_optional"===t){var o=new l("_"+i);s.setOption("proto3_optional",!0),o.add(s),e.add(o)}else e.add(s);!B&&s.repeated&&(void 0!==h.packed[n]||void 0===h.basic[n])&&s.setOption("packed",!1,!0)}function ee(e,t){var r=D();if(!w.test(r))throw V(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r)),M("=");var i=W(D()),o=new s(r);o.group=!0;var l=new a(n,i,r,t);l.filename=C.filename,X(o,function(e){switch(e){case"option":es(o,e),M(";");break;case"required":case"repeated":Z(o,e);break;case"optional":B?Z(o,"proto3_optional"):Z(o,"optional");break;case"message":J(o,e);break;case"enum":en(o,e);break;default:throw V(e)}}),e.add(o).add(l)}function et(e){M("<");var t=D();if(void 0===h.mapKey[t])throw V(t,"type");M(",");var r=D();if(!T.test(r))throw V(r,"type");M(">");var n=D();if(!w.test(n))throw V(n,"name");M("=");var i=new o(U(n),W(D()),t,r);X(i,function(e){if("option"===e)es(i,e),M(";");else throw V(e)},function(){eu(i)}),e.add(i)}function er(e,t){if(!w.test(t=D()))throw V(t,"name");var r=new l(U(t));X(r,function(e){"option"===e?(es(r,e),M(";")):(N(e),Z(r,"optional"))}),e.add(r)}function en(e,t){if(!w.test(t=D()))throw V(t,"name");var r=new u(t);X(r,function(e){switch(e){case"option":es(r,e),M(";");break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:ei(r,e)}}),e.add(r)}function ei(e,t){if(!w.test(t))throw V(t,"name");M("=");var r=W(D(),!0),n={options:void 0};n.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},X(n,function(e){if("option"===e)es(n,e),M(";");else throw V(e)},function(){eu(n)}),e.add(t,r,n.comment,n.options)}function es(e,t){var r,n=M("(",!0);if(!T.test(t=D()))throw V(t,"name");var i=t,s=i;n&&(M(")"),s=i="("+i+")",t=P(),E.test(t)&&(r=t.slice(1),i+=t,D())),M("=");var a=ea(e,i);el(e,s,a,r)}function ea(e,t){if(M("{",!0)){for(var r={};!M("}",!0);){if(!w.test(x=D()))throw V(x,"name");if(null===x)throw V(x,"end of input");var n,i,s=x;if(M(":",!0),"{"===P())n=ea(e,t+"."+x);else if("["===P()){if(n=[],M("[",!0)){do i=q(!0),n.push(i);while(M(",",!0));M("]"),void 0!==i&&eo(e,t+"."+x,i)}}else n=q(!0),eo(e,t+"."+x,n);var a=r[s];a&&(n=[].concat(a).concat(n)),r[s]=n,M(",",!0),M(";",!0)}return r}var o=q(!0);return eo(e,t,o),o}function eo(e,t,r){e.setOption&&e.setOption(t,r)}function el(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function eu(e){if(M("[",!0)){do es(e,"option");while(M(",",!0));M("]")}return e}function ec(e,t){if(!w.test(t=D()))throw V(t,"service name");var r=new c(t);X(r,function(e){if(!Y(r,e))if("rpc"===e)ed(r,e);else throw V(e)}),e.add(r)}function ed(e,t){var r=j(),n=t;if(!w.test(t=D()))throw V(t,"name");var i,s,a,o,l=t;if(M("("),M("stream",!0)&&(s=!0),!T.test(t=D())||(i=t,M(")"),M("returns"),M("("),M("stream",!0)&&(o=!0),!T.test(t=D())))throw V(t);a=t,M(")");var u=new d(l,n,i,a,s,o);u.comment=r,X(u,function(e){if("option"===e)es(u,e),M(";");else throw V(e)}),e.add(u)}function eh(e,t){if(!T.test(t=D()))throw V(t,"reference");var r=t;X(null,function(t){switch(t){case"required":case"repeated":Z(e,t,r);break;case"optional":B?Z(e,"proto3_optional",r):Z(e,"optional",r);break;default:if(!B||!T.test(t))throw V(t);N(t),Z(e,"optional",r)}})}for(;null!==(x=D());)switch(x){case"package":if(!L)throw V(x);K();break;case"import":if(!L)throw V(x);H();break;case"syntax":if(!L)throw V(x);Q();break;case"option":es(F,x),M(";");break;default:if(Y(F,x)){L=!1;continue}throw V(x)}return C.filename=null,{package:_,imports:O,weakImports:I,syntax:A,root:t}}},56061:(e,t)=>{var r,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function i(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var s={},a={};function o(e,t){var r,n,i;if(t)return(e>>>=0,(i=0<=e&&e<256)&&(n=a[e]))?n:(r=u(e,0,!0),i&&(a[e]=r),r);return(e|=0,(i=-128<=e&&e<128)&&(n=s[e]))?n:(r=u(e,e<0?-1:0,!1),i&&(s[e]=r),r)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=p)return E}else{if(e<=-g)return C;if(e+1>=g)return T}return e<0?l(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=u;var c=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if((r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var n,i=l(c(r,8)),s=y,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+o),r);if(o<8){var h=l(c(r,o));s=s.mul(h).add(l(u))}else s=(s=s.mul(i)).add(l(u))}return s.unsigned=t,s}function h(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var f=0x100000000,p=0xffffffffffffffff,g=0x8000000000000000,m=o(0x1000000),y=o(0);r.ZERO=y;var v=o(0,!0);r.UZERO=v;var b=o(1);r.ONE=b;var S=o(1,!0);r.UONE=S;var w=o(-1);r.NEG_ONE=w;var T=u(-1,0x7fffffff,!1);r.MAX_VALUE=T;var E=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=E;var C=u(0,-0x80000000,!1);r.MIN_VALUE=C;var x=r.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},x.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(!this.eq(C))return"-"+this.neg().toString(e);else{var t=l(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var i=l(c(e,6),this.unsigned),s=this,a="";;){var o=s.div(i),u=(s.sub(o.mul(i)).toInt()>>>0).toString(e);if((s=o).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},x.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&(0!==this.low||-2097152!==this.high)},x.isZero=function(){return 0===this.high&&0===this.low},x.eqz=x.isZero,x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return(1&this.low)==1},x.isEven=function(){return(1&this.low)==0},x.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.ne=x.notEquals,x.lessThan=function(e){return 0>this.comp(e)},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return 0>=this.comp(e)},x.lte=x.lessThanOrEqual,x.le=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.ge=x.greaterThanOrEqual,x.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},x.neg=x.negate,x.add=function(e){n(e)||(e=h(e));var t,r,i=this.high>>>16,s=65535&this.high,a=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,f=65535&e.low,p=0,g=0;return t=0+((r=0+(o+f))>>>16),r&=65535,t+=a+d,g+=t>>>16,t&=65535,g+=s+c,p+=g>>>16,g&=65535,p+=i+l,u(t<<16|r,(p&=65535)<<16|g,this.unsigned)},x.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:y;if(this.eq(C))return e.isOdd()?C:y;if(e.eq(C))return this.isOdd()?C:y;if(this.isNegative())if(e.isNegative())return this.neg().mul(e.neg());else return this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return l(this.toNumber()*e.toNumber(),this.unsigned);var r,i,s=this.high>>>16,a=65535&this.high,o=this.low>>>16,c=65535&this.low,d=e.high>>>16,f=65535&e.high,p=e.low>>>16,g=65535&e.low,b=0,S=0;return r=0+((i=0+c*g)>>>16),i&=65535,r+=o*g,S+=r>>>16,r&=65535,r+=c*p,S+=r>>>16,r&=65535,S+=a*g,b+=S>>>16,S&=65535,S+=o*p,b+=S>>>16,S&=65535,S+=c*f,b+=S>>>16,S&=65535,b+=s*g+a*p+o*f+c*d,u(r<<16|i,(b&=65535)<<16|S,this.unsigned)},x.mul=x.multiply,x.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");if(t){var r,i,s;return this.unsigned||-0x80000000!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return S;s=v}else{if(this.eq(C))if(e.eq(b)||e.eq(w))return C;else return e.eq(C)?b:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:w:(i=this.sub(e.mul(r)),s=r.add(i.div(e)));if(e.eq(C))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(i=this;i.gte(e);){for(var a=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())))/Math.LN2),o=a<=48?1:c(2,a-48),d=l(r),f=d.mul(e);f.isNegative()||f.gt(i);)r-=o,f=(d=l(r,this.unsigned)).mul(e);d.isZero()&&(d=b),s=s.add(d),i=i.sub(f)}return s},x.div=x.divide,x.modulo=function(e){return(n(e)||(e=h(e)),t)?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},x.mod=x.modulo,x.rem=x.modulo,x.not=function(){return u(~this.low,~this.high,this.unsigned)},x.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},x.clz=x.countLeadingZeros,x.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},x.ctz=x.countTrailingZeros,x.and=function(e){return n(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return n(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return n(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):32===e?u(this.high,0,this.unsigned):u(this.high>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.shr_u=x.shiftRightUnsigned,x.rotateLeft=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},x.rotl=x.rotateLeft,x.rotateRight=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},x.rotr=x.rotateRight,x.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(r.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},r.fromValue=function(e,t){return"bigint"==typeof e?fromBigInt(e,t):h(e,t)},x.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=r,"default"in e?e.default:e}({});void 0===(r=(function(){return n}).apply(t,[]))||(e.exports=r)},56070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;let n=r(34631),i=r(37391),s=r(9227);function a(e,t){if(e&&!(e instanceof Buffer))throw TypeError(`${t}, if provided, must be a Buffer.`)}class o{constructor(e){this.callCredentials=e||i.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var o;if(a(e,"Root certificate"),a(t,"Private key"),a(r,"Certificate chain"),t&&!r)throw Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw Error("Certificate chain must be given with accompanying private key");return new u((0,n.createSecureContext)({ca:null!=(o=null!=e?e:(0,s.getDefaultRootsData)())?o:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES}),null!=i?i:{})}static createFromSecureContext(e,t){return new u(e,null!=t?t:{})}static createInsecure(){return new l}}t.ChannelCredentials=o;class l extends o{constructor(e){super(e)}compose(e){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof l}}class u extends o{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){return new c(this,this.callCredentials.compose(e))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class c extends o{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new c(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof c&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},56271:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},56427:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;let n=r(21820),i=r(21858),s=r(72374),a=/^\d+(\.\d{1,9})?s$/,o="node";function l(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof e.service}`);if(!("method"in e)||""===e.method)return{service:e.service};if("string"!=typeof e.method)throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof e.service}`);return{service:e.service,method:e.method}}if("method"in e&&void 0!==e.method)throw Error("Invalid method config name: method set with empty or unset service");return{}}function u(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!a.test(e.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!a.test(e.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e&&Array.isArray(e.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}function c(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!a.test(e.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(let t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}function d(e){var t;let r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw Error("Invalid method config: invalid name array");for(let t of e.name)r.name.push(l(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else if("string"==typeof e.timeout&&a.test(e.timeout)){let n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:(null!=(t=n[1])?t:0)|0}}else throw Error("Invalid method config: invalid timeout");if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e)if("hedgingPolicy"in e)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");else r.retryPolicy=u(e.retryPolicy);else"hedgingPolicy"in e&&(r.hedgingPolicy=c(e.hedgingPolicy));return r}function h(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function f(e){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e)if("string"==typeof e.loadBalancingPolicy)t.loadBalancingPolicy=e.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in e)if(Array.isArray(e.loadBalancingConfig))for(let r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r));else throw Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in e&&Array.isArray(e.methodConfig))for(let r of e.methodConfig)t.methodConfig.push(d(r));"retryThrottling"in e&&(t.retryThrottling=h(e.retryThrottling));let r=[];for(let e of t.methodConfig)for(let t of e.name){for(let e of r)if(t.service===e.service&&t.method===e.method)throw Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function p(e){if(!("serviceConfig"in e))throw Error("Invalid service config choice: missing service config");let t={serviceConfig:f(e.serviceConfig)};if("clientLanguage"in e)if(Array.isArray(e.clientLanguage))for(let r of(t.clientLanguage=[],e.clientLanguage))if("string"==typeof r)t.clientLanguage.push(r);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in e)if(Array.isArray(e.clientHostname))for(let r of(t.clientHostname=[],e.clientHostname))if("string"==typeof r)t.clientHostname.push(r);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname");if("percentage"in e)if("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100)t.percentage=e.percentage;else throw Error("Invalid service config choice: invalid percentage");let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let t in e)if(!r.includes(t))throw Error(`Invalid service config choice: unexpected field ${t}`);return t}function g(e,t){if(!Array.isArray(e))throw Error("Invalid service config list");for(let r of e){let e=p(r);if("number"!=typeof e.percentage||!(t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(let r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(let r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw Error("No matching service config found")}t.validateRetryThrottling=h,t.validateServiceConfig=f,t.extractAndSelectServiceConfig=function(e,t){for(let r of e)if(r.length>0&&r[0].startsWith("grpc_config="))return g(JSON.parse(r.join("").substring(12)),t);return null}},56506:(e,t,r)=>{var n=r(32269);e.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var s=r.length,a=t?s:-1,o=Object(r);(t?a--:++a<s)&&!1!==i(o[a],a,o););return r}}},57018:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},57202:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},57307:(e,t,r)=>{Promise.resolve().then(r.bind(r,14947))},57354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0},t.channelOptionsEqual=function(e,t){let r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i+=1)if(r[i]!==n[i]||e[r[i]]!==t[n[i]])return!1;return!0}},57521:(e,t,r)=>{Promise.resolve().then(r.bind(r,66702))},57797:(e,t,r)=>{var n=r(67009);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return -1}},58141:(e,t,r)=>{e.exports=r(41547)(Object,"create")},58276:e=>{e.exports=function(e,t){return e.has(t)}},58278:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,a=r(24859);((d.prototype=Object.create(a.prototype)).constructor=d).className="Root";var o=r(62886),l=r(94313),u=r(12529),c=r(77350);function d(e){a.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=c.path.resolve,d.prototype.fetch=c.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var a=this;if(!n)return c.asPromise(e,a,t,r);var o=n===h;function l(e,t){if(n){if(o)throw e;var r=n;n=null,r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function d(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var n,s=i(t,a,r),d=0;if(s.imports)for(;d<s.imports.length;++d)(n=u(s.imports[d])||a.resolvePath(e,s.imports[d]))&&f(n);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(n=u(s.weakImports[d])||a.resolvePath(e,s.weakImports[d]))&&f(n,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}o||p||l(null,a)}function f(e,t){if(e=u(e)||e,!(a.files.indexOf(e)>-1)){if(a.files.push(e),e in s)return void(o?d(e,s[e]):(++p,setTimeout(function(){--p,d(e,s[e])})));if(o){var r;try{r=c.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}d(e,r)}else++p,a.fetch(e,function(r,i){if(--p,n){if(r)return void(t?p||l(null,a):l(r));d(e,i)}})}}var p=0;c.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=a.resolvePath("",t[m]))&&f(g);if(o)return a;p||l(null,a)},d.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n),!0)}return!1}d.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||p(this,e)||this.deferred.push(e);else if(e instanceof l)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){n=e,i=t,s=r}},58546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;let n=r(71271),i=r(26412),s=r(86777),a=r(31359),o=r(73911),l="resolving_call";class u{constructor(e,t,r,s,a,o){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=a,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&n.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(n.Status.CANCELLED,"Cancelled by parent call")}),r.flags&n.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,i.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(n.LogVerbosity.DEBUG,l,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,i.deadlineToString)(this.deadline));let e=(0,i.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null==(e=this.listener)||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));let t=e.config;if(t.status!==n.Status.OK){let{code:e,details:r}=(0,o.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata});return}if(t.methodConfig.timeout){let e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,i.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null==(t=this.metadata)?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null==(r=this.child)||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!=(t=null==(e=this.child)?void 0:e.getPeer())?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}t.ResolvingCall=u},58744:(e,t,r)=>{var n=r(57797);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},58821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0;class r{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}t.BaseFilter=r},59467:(e,t,r)=>{var n=r(35142),i=r(35163),s=r(40542),a=r(38428),o=r(69619),l=r(46436);e.exports=function(e,t,r){t=n(t,e);for(var u=-1,c=t.length,d=!1;++u<c;){var h=l(t[u]);if(!(d=null!=e&&r(e,h)))break;e=e[h]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&o(c)&&a(h,c)&&(s(e)||i(e))}},59571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;let n=r(91645);function i(e){return"port"in e}t.isTcpSubchannelAddress=i,t.subchannelAddressEqual=function(e,t){return!e&&!t||!!e&&!!t&&(i(e)?i(t)&&e.host===t.host&&e.port===t.port:!i(t)&&e.path===t.path)},t.subchannelAddressToString=function(e){return i(e)?e.host+":"+e.port:e.path};let s=443;t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:s}:{path:e}}},59774:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},60070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length};class r{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}t.InterceptingListenerImpl=r},60087:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;let i=r(21574),s=r(21858),a=r(83847),o=r(34405),l=r(72374),u=r(78332),c=r(17765),d=r(59571),h=r(85330),f=r(1014),p="outlier_detection";function g(e){f.trace(s.LogVerbosity.DEBUG,p,e)}let m="outlier_detection",y=(null!=(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)?n:"true")==="true",v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function S(e,t,r,n){if(t in e&&typeof e[t]!==r){let i=n?`${n}.${t}`:t;throw Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function w(e,t,r){let n=r?`${r}.${t}`:t;if(t in e){if(!(0,a.isDuration)(e[t]))throw Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=0x3b9ac9ff))throw Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function T(e,t,r){let n=r?`${r}.${t}`:t;if(S(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class E{constructor(e,t,r,n,i,s,a){if(this.childPolicy=a,a.length>0&&"pick_first"===a[0].getLoadBalancerName())throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=i?Object.assign(Object.assign({},v),i):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return m}toJsonObject(){return{interval:(0,a.msToDuration)(this.intervalMs),base_ejection_time:(0,a.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,a.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new E(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(w(e,"interval"),w(e,"base_ejection_time"),w(e,"max_ejection_time"),T(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");S(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),T(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),S(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),S(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");T(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),T(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),S(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),S(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new E(e.interval?(0,a.durationToMs)(e.interval):null,e.base_ejection_time?(0,a.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,a.durationToMs)(e.max_ejection_time):null,null!=(t=e.max_ejection_percent)?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(l.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=E;class C extends h.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((e,t,r,n)=>{if(this.childSubchannelState=r,!this.ejected)for(let e of this.stateListeners)e(this,t,r,n)})}getConnectivityState(){return this.ejected?i.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){for(let e of(this.ejected=!0,this.stateListeners))e(this,this.childSubchannelState,i.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){for(let e of(this.ejected=!1,this.stateListeners))e(this,i.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function x(){return{success:0,failure:0}}class _{constructor(){this.activeBucket=x(),this.inactiveBucket=x()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=x()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class O{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType!==c.PickResultType.COMPLETE)return t;{let e=t.subchannel,r=e.getMapEntry();if(!r)return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()});{let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null==(n=t.onCallEnded)||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}}}}class I{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new u.ChildLoadBalancerHandler((0,o.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let n=e.createSubchannel(t,r),i=this.addressMap.get((0,d.subchannelAddressToString)(t)),s=new C(n,i);return(null==i?void 0:i.currentEjectionTimestamp)!==null&&s.eject(),null==i||i.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===i.ConnectivityState.READY?e.updateState(t,new O(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;g("Running success rate check");let r=t.request_volume,n=0,i=[];for(let[e,t]of this.addressMap){let s=t.counter.getLastSuccesses(),a=t.counter.getLastFailures();g("Stats for "+e+": successes="+s+" failures="+a+" targetRequestVolume="+r),s+a>=r&&(n+=1,i.push(s/(s+a)))}if(g("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]"),n<t.minimum_hosts)return;let s=i.reduce((e,t)=>e+t)/i.length,a=0;for(let e of i){let t=e-s;a+=t*t}let o=Math.sqrt(a/i.length),l=s-o*(t.stdev_factor/1e3);for(let[n,i]of(g("stdev="+o+" ejectionThreshold="+l),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let s=i.counter.getLastSuccesses(),a=i.counter.getLastFailures();if(s+a<r)continue;let o=s/(s+a);if(g("Checking candidate "+n+" successRate="+o),o<l){let r=100*Math.random();g("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(g("Ejecting candidate "+n),this.eject(i,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;g("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(let[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let i=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if((g("Candidate successes="+i+" failures="+s),!(i+s<t.request_volume))&&100*s/(s+i)>t.threshold){let i=100*Math.random();g("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage),i<t.enforcement_percentage&&(g("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){for(let t of(e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1,e.subchannelWrappers))t.eject()}uneject(e){for(let t of(e.currentEjectionTimestamp=null,e.subchannelWrappers))t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null==(r=(t=this.ejectionTimer).unref)||r.call(t)}runChecks(){let e=new Date;if(g("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[t,r]of(this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e),this.addressMap.entries()))if(null===r.currentEjectionTimestamp)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let e=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),i=new Date(r.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(e*r.ejectionTimeMultiplier,Math.max(e,n))),i<new Date&&(g("Unejecting "+t),this.uneject(r))}}updateAddressList(e,t,r){if(!(t instanceof E))return;let n=new Set;for(let t of e)n.add((0,d.subchannelAddressToString)(t));for(let e of n)this.addressMap.has(e)||(g("Adding map entry for "+e),this.addressMap.set(e,{counter:new _,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let e of this.addressMap.keys())n.has(e)||(g("Removing map entry for "+e),this.addressMap.delete(e));let i=(0,l.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,i,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){g("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let e=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(e)}else g("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else for(let e of(g("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(e),e.ejectionTimeMultiplier=0;this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return m}}t.OutlierDetectionLoadBalancer=I,t.setup=function(){y&&(0,o.registerLoadBalancerType)(m,I,E)}},60158:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,a=/\n/g,o=/\s/,l=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"	"};function c(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function d(e,l){e=e.toString();var u=0,d=e.length,h=1,f=0,p={},g=[],m=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(){var t="'"===m?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw y("string");return u=t.lastIndex,C(m),m=null,c(i[1])}function b(t){return e.charAt(t)}function S(t,r,n){var o,u={type:e.charAt(t++),lineEmpty:!1,leading:n},c=t-(l?2:3);do if(--c<0||"\n"===(o=e.charAt(c))){u.lineEmpty=!0;break}while(" "===o||"	"===o);for(var d=e.substring(t,r).split(a),g=0;g<d.length;++g)d[g]=d[g].replace(l?s:i,"").trim();u.text=d.join("\n").trim(),p[h]=u,f=h}function w(t){var r=T(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function T(e){for(var t=e;t<d&&"\n"!==b(t);)t++;return t}function E(){if(g.length>0)return g.shift();if(m)return v();var r,n,i,s,a,c=0===u;do{if(u===d)return null;for(r=!1;o.test(i=b(u));)if("\n"===i&&(c=!0,++h),++u===d)return null;if("/"===b(u)){if(++u===d)throw y("comment");if("/"===b(u))if(l){if(s=u,a=!1,w(u-1)){a=!0;do if((u=T(u))===d||(u++,!c))break;while(w(u))}else u=Math.min(d,T(u)+1);a&&(S(s,u,c),c=!0),h++,r=!0}else{for(a="/"===b(s=u+1);"\n"!==b(++u);)if(u===d)return null;++u,a&&(S(s,u-1,c),c=!0),++h,r=!0}else{if("*"!==(i=b(u)))return"/";s=u+1,a=l||"*"===b(s);do{if("\n"===i&&++h,++u===d)throw y("comment");n=i,i=b(u)}while("*"!==n||"/"!==i);++u,a&&(S(s,u-2,c),c=!0),r=!0}}}while(r);var f=u;if(t.lastIndex=0,!t.test(b(f++)))for(;f<d&&!t.test(b(f));)++f;var p=e.substring(u,u=f);return('"'===p||"'"===p)&&(m=p),p}function C(e){g.push(e)}function x(){if(!g.length){var e=E();if(null===e)return null;C(e)}return g[0]}function _(e,t){var r=x();if(r===e)return E(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1}function O(e){var t,r=null;return void 0===e?(t=p[h-1],delete p[h-1],t&&(l||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(f<e&&x(),t=p[e],delete p[e],t&&!t.lineEmpty&&(l||"/"===t.type)&&(r=t.leading?null:t.text)),r}return Object.defineProperty({next:E,peek:x,push:C,skip:_,cmnt:O},"line",{get:function(){return h}})}d.unescape=c},60720:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},60776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},61135:()=>{},61320:(e,t,r)=>{var n=r(8336);e.exports=function(e){return n(this,e).has(e)}},61386:(e,t,r)=>{"use strict";var n=t,i=r(94313),s=r(77350);function a(e,t,r,n){var s=!1;if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var a=t.resolvedType.values,o=Object.keys(a),l=0;l<o.length;++l)a[o[l]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",o[l])("case %i:",a[o[l]])("m%s=%j",n,a[o[l]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function o(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),l=s.safeProp(o.name);o.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(r,o,n,l+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(r,o,n,l+"[i]")("}")("}")):(o.resolvedType instanceof i||r("if(d%s!=null){",l),a(r,o,n,l),o.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?a:l).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),u=0;u<a.length;++u)r("d%s={}",s.safeProp(a[u].name));r("}")}if(l.length){for(r("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],d=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var h="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,c.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){var c=t[u],p=e._fieldsArray.indexOf(c),d=s.safeProp(c.name);c.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),o(r,c,p,d+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),o(r,c,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,c.name),o(r,c,p,d),c.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}},61480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;let n=r(7775),i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function a(e,t,r){r||(r={});class a extends n.Client{}return Object.keys(e).forEach(t=>{let r;if(s(t))return;let n=e[t];if("string"==typeof t&&"$"===t.charAt(0))throw Error("Method names cannot start with $");r=n.requestStream?n.responseStream?"bidi":"client_stream":n.responseStream?"server_stream":"unary";let l=n.requestSerialize,u=n.responseDeserialize,c=o(i[r],n.path,l,u);a.prototype[t]=c,Object.assign(a.prototype[t],n),n.originalName&&!s(n.originalName)&&(a.prototype[n.originalName]=a.prototype[t])}),a.service=e,a.serviceName=t,a}function o(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function l(e){return"format"in e}t.makeClientConstructor=a,t.loadPackageDefinition=function(e){let t={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r],i=r.split(".");if(i.some(e=>s(e)))continue;let o=i[i.length-1],u=t;for(let e of i.slice(0,-1))u[e]||(u[e]={}),u=u[e];l(n)?u[o]=n:u[o]=a(n,o,{})}return t}},61548:(e,t,r)=>{var n=r(5231),i=r(52823),s=r(55048),a=r(12290),o=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,d=u.hasOwnProperty,h=RegExp("^"+c.call(d).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!s(e)||i(e))&&(n(e)?h:l).test(a(e))}},61614:(e,t,r)=>{"use strict";var n=r(68474);e.exports=t=n.descriptor=n.Root.fromJSON(r(20040)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,a=n.Enum,o=n.Type,l=n.Field,u=n.MapField,c=n.OneOf,d=n.Service,h=n.Method;function f(e,r,n){var u=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(u.syntax=n),e instanceof s||(u.package=e.fullName.substring(1));for(var c,h=0;h<e.nestedArray.length;++h)(c=e._nestedArray[h])instanceof o?u.messageType.push(c.toDescriptor(n)):c instanceof a?u.enumType.push(c.toDescriptor()):c instanceof l?u.extension.push(c.toDescriptor(n)):c instanceof d?u.service.push(c.toDescriptor()):c instanceof i&&f(c,r,n);u.options=C(e.options,t.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&r.push(u)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,i,u,c=0;c<e.file.length;++c){if(i=r,(n=e.file[c]).package&&n.package.length&&(i=r.define(n.package)),n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(u=0;u<n.messageType.length;++u)i.add(o.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(a.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var h=E(n.options,t.FileOptions);if(h){var f=Object.keys(h);for(u=0;u<f.length;++u)i.setOption(f[u],h[f[u]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return f(this,r.file,e),r};var p=0;o.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,i=new o(e.name.length?e.name:"Type"+p++,E(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)i.add(c.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=l.fromDescriptor(e.field[n],r);i.add(s),e.field[n].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)i.add(l.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)i.add(o.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)i.add(a.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(n=0,i.extensions=[];n<e.extensionRange.length;++n)i.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)i.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)i.reserved.push(e.reservedName[n])}return i},o.prototype.toDescriptor=function(e){var r,n,i=t.DescriptorProto.create({name:this.name});for(n=0;n<this.fieldsArray.length;++n)if(i.field.push(r=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof u){var s=T(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),c=T(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=11===c||14===c?this._fieldsArray[n].resolvedType&&x(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;i.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:c,typeName:d})],options:t.MessageOptions.create({mapEntry:!0})}))}for(n=0;n<this.oneofsArray.length;++n)i.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof l?i.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof o?i.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof a&&i.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)i.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)"string"==typeof this.reserved[n]?i.reservedName.push(this.reserved[n]):i.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return i.options=C(this.options,t.MessageOptions),i};var g=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:S(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var n,i,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var a=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);if(a.options=E(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var o=e.defaultValue;switch(o){case"true":case"TRUE":o=!0;break;case"false":case"FALSE":o=!1;break;default:g.exec(o)&&(o=parseInt(o))}a.setOption("default",o)}return w(e.type)&&("proto3"===r?e.options&&!e.options.packed&&a.setOption("packed",!1):e.options&&e.options.packed||a.setOption("packed",!1)),a},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=T(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?x(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=C(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var m=0;a.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new a(e.name&&e.name.length?e.name:"Enum"+m++,r,E(e.options,t.EnumOptions))},a.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:C(this.options,t.EnumOptions)})};var y=0;c.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new c(e.name&&e.name.length?e.name:"oneof"+y++)},c.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;d.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new d(e.name&&e.name.length?e.name:"Service"+v++,E(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(h.fromDescriptor(e.method[n]));return r},d.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:C(this.options,t.ServiceOptions)})};var b=0;function S(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function w(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function T(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof a)return 14;if(t instanceof o)return t.group?10:11;throw Error("illegal type: "+e)}function E(e,t){if(e){for(var r,i,s,o=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(i=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(i)&&(s=e[i],r.resolvedType instanceof a&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),o.push(_(i),s));return o.length?n.util.toObject(o):void 0}}function C(e,t){if(e){for(var r,i,s=[],a=0,o=Object.keys(e);a<o.length;++a)if(i=e[r=o[a]],"default"!==r){var l=t.fields[r];(l||(l=t.fields[r=n.util.camelCase(r)]))&&s.push(r,i)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function x(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),a=0,o=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)for(;a<r.length&&o<l&&r[a]===n[o];){var u=t.lookup(r[a++],!0);if(null!==u&&u!==t)break;++o}else for(;a<r.length&&o<l&&r[a]===n[o];++a,++o);return n.slice(o).join(".")}function _(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,E(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:C(this.options,t.MethodOptions)})}},61789:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0},t.channelOptionsEqual=function(e,t){let r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i+=1)if(r[i]!==n[i]||e[r[i]]!==t[n[i]])return!1;return!0}},61810:(e,t,r)=>{"use strict";var n=t,i=r(93107),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},61837:(e,t,r)=>{var n=r(21367),i=r(22),s=r(54765),a=r(40542);e.exports=function(e,t){return(a(e)?n:s)(e,i(t,3))}},61996:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],a=0;t<r;)(n=e[t++])<128?s[a++]=n:n>191&&n<224?s[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(n>>10),s[a++]=56320+(1023&n)):s[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(e,t,r){for(var n,i,s=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=e.charCodeAt(a+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-s}},62251:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;let n=r(35858);class i{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let e=0;e<t.length;e++){let r=t[e];if(null===r||"object"!=typeof r)throw TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);i.push(r.cert_chain),s.push(r.private_key)}return new a({ca:e||(0,n.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=i;class s extends i{_isSecure(){return!1}_getSettings(){return null}}class a extends i{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},62823:(e,t,r)=>{"use strict";e.exports=o;var n=r(32110),i=r(61810),s=r(93107);function a(e){return"missing required '"+e.name+"'"}function o(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),l=o.resolvedType instanceof n?"int32":o.type,u="m"+s.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[o.keyType]?t("k=%j",i.defaults[o.keyType]):t("k=null"),void 0!==i.defaults[l]?t("value=%j",i.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===i.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[o.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",u)):o.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===i.basic[l]?t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,l)):void 0===i.basic[l]?t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",a(c))}return t("return m")}},62886:(e,t,r)=>{"use strict";e.exports=u;var n,i=r(76139);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var s=r(94313),a=r(51841),o=r(77350),l=/^required|optional|repeated$/;function u(e,t,r,n,s,u,c){if(o.isObject(n)?(c=s,u=n,n=s=void 0):o.isObject(s)&&(c=u,u=s,s=void 0),i.call(this,e,u),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!l.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!o.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(i,s){o.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){n=e}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63065:(e,t,r)=>{"use strict";m={value:!0},m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=m=t.ex=m=m=m=m=m=m=t.OS=t.z3=void 0;let n=r(34466);m={enumerable:!0,get:function(){return n.CallCredentials}};let i=r(92e3);m={enumerable:!0,get:function(){return i.ChannelImplementation}};let s=r(57018);m={enumerable:!0,get:function(){return s.CompressionAlgorithms}};let a=r(21574);m={enumerable:!0,get:function(){return a.ConnectivityState}};let o=r(74017);m={enumerable:!0,get:function(){return o.ChannelCredentials}};let l=r(88494);m={enumerable:!0,get:function(){return l.Client}};let u=r(21858);m={enumerable:!0,get:function(){return u.LogVerbosity}},m={enumerable:!0,get:function(){return u.Status}},m={enumerable:!0,get:function(){return u.Propagate}};let c=r(1014),d=r(43943);Object.defineProperty(t,"ex",{enumerable:!0,get:function(){return d.loadPackageDefinition}}),m={enumerable:!0,get:function(){return d.makeClientConstructor}},m={enumerable:!0,get:function(){return d.makeClientConstructor}};let h=r(66284);Object.defineProperty(t,"OS",{enumerable:!0,get:function(){return h.Metadata}});let f=r(14426);m={enumerable:!0,get:function(){return f.Server}};let p=r(62251);m={enumerable:!0,get:function(){return p.ServerCredentials}};let g=r(33771);m={enumerable:!0,get:function(){return g.StatusBuilder}},t.z3={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:o.ChannelCredentials.createInsecure,createSsl:o.ChannelCredentials.createSsl,createFromSecureContext:o.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},m=e=>e.close(),m=(e,t,r)=>e.waitForReady(t,r),m=(e,t)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},m=(e,t,r)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},m=e=>{c.setLogger(e)},m=e=>{c.setLoggerVerbosity(e)};var m=e=>l.Client.prototype.getChannel.call(e),y=r(92219);m={enumerable:!0,get:function(){return y.ListenerBuilder}},m={enumerable:!0,get:function(){return y.RequesterBuilder}},m={enumerable:!0,get:function(){return y.InterceptingCall}},m={enumerable:!0,get:function(){return y.InterceptorConfigurationError}};var v=r(7162);m={enumerable:!0,get:function(){return v.getChannelzServiceDefinition}},m={enumerable:!0,get:function(){return v.getChannelzHandlers}};var b=r(24664);m={enumerable:!0,get:function(){return b.addAdminServicesToServer}},m=r(34405);let S=r(33663),w=r(82380),T=r(71777),E=r(72741),C=r(82018),x=r(60087),_=r(7162);(()=>{S.setup(),w.setup(),T.setup(),E.setup(),C.setup(),x.setup(),_.setup()})()},63695:(e,t,r)=>{"use strict";var n=t,i=r(8920);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return -1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var a=this.lookup(s);a&&(e=a.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===n&&(n=r),s=n+l,o["@type"]=s,o}return this.toObject(e,t)}}},63866:(e,t,r)=>{var n=r(29395),i=r(40542),s=r(27467),a="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&s(e)&&n(e)==a}},63979:(e,t,r)=>{var n=r(52599),i=r(6330),s=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols;e.exports=a?function(e){return null==e?[]:n(a(e=Object(e)),function(t){return s.call(e,t)})}:i},64390:(e,t,r)=>{"use strict";e.exports=r(34821)},64719:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=Array(64),i=Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,s=null,a=[],o=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[o++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:a[o++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:a[o++]=n[i|u>>6],a[o++]=n[63&u],l=0}o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0)}return(l&&(a[o++]=n[i],a[o++]=61,1===l&&(a[o++]=61)),s)?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,o=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&o>1)break;if(void 0===(u=i[u]))throw Error(a);switch(o){case 0:n=u,o=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:t[r++]=(3&n)<<6|u,o=0}}if(1===o)throw Error(a);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},64824:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(93107);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var a=s[e];i.setProperty(a,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var o={};o[e]=t,n.push(o)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},65127:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],a=0;t<r;)(n=e[t++])<128?s[a++]=n:n>191&&n<224?s[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(n>>10),s[a++]=56320+(1023&n)):s[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(e,t,r){for(var n,i,s=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=e.charCodeAt(a+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-s}},65313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;let n=r(73496),i=r(21820),s=r(21858),a=r(66284),o=r(87764),l=r(1014),u=r(21858),c="subchannel_call";function d(e){for(let[t,r]of Object.entries(i.constants.errno))if(r===e)return t;return"Unknown system error "+e}class h{constructor(e,t,r,i,l){var u;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=l,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let c=null!=(u=i.getOptions()["grpc.max_receive_message_length"])?u:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new o.StreamDecoder(c),e.on("response",(e,t)=>{let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=a.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new a.Metadata});return}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{let t;if(!this.statusOutput){this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message);return}for(let e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var t;let r;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null==(t=this.finalStatus)?void 0:t.code)===s.Status.OK)return;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,i="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,i=this.internalError.message):i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new a.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+d(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new a.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){l.trace(u.LogVerbosity.DEBUG,c,"["+this.callId+"] "+e)}endCall(e){(null===this.finalStatus||this.finalStatus.code===s.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null===this.finalStatus||this.finalStatus.code===s.Status.OK&&(!this.readsClosed||0!==this.unpushedReadMessages.length||this.isReadFilterPending||this.isPushPending)||this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){let t;this.callEventTracker.onStreamEnd(!0);let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=a.Metadata.fromHttp2Headers(e)}catch(e){t=new a.Metadata}let n=t.getMap(),i=this.mappedStatusCode;if(i===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){let e=Number(n["grpc-status"]);e in s.Status&&(i=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let o="";if("string"==typeof n["grpc-message"]){try{o=decodeURI(n["grpc-message"])}catch(e){o=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let l={code:i,details:o,metadata:t};this.endCall(l)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null==(e=this.finalStatus)?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new a.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=t=>{process.nextTick(()=>{var r;let n=s.Status.UNAVAILABLE;(null==t?void 0:t.code)==="ERR_STREAM_WRITE_AFTER_END"&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null==(r=e.callback)||r.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new a.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}t.Http2SubchannelCall=h},65662:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},65727:(e,t,r)=>{var n=r(81957);e.exports=function(e,t,r){for(var i=-1,s=e.criteria,a=t.criteria,o=s.length,l=r.length;++i<o;){var u=n(s[i],a[i]);if(u){if(i>=l)return u;return u*("desc"==r[i]?-1:1)}}return e.index-t.index}},65932:(e,t,r)=>{e.exports=r(65662)(Object.getPrototypeOf,Object)},65984:e=>{e.exports=function(e){return function(t,r,n){for(var i=-1,s=Object(t),a=n(t),o=a.length;o--;){var l=a[e?o:++i];if(!1===r(s[l],l,s))break}return t}}},66224:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{StaticGenBailoutError:function(){return n},isStaticGenBailoutError:function(){return i}});let r="NEXT_STATIC_GEN_BAILOUT";class n extends Error{constructor(...e){super(...e),this.code=r}}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&e.code===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},66284:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;let n=r(1014),i=r(21858),s=r(6843),a=/^[0-9a-z_.-]+$/,o=/^[ -~]*$/;function l(e){return a.test(e)}function u(e){return o.test(e)}function c(e){return e.endsWith("-bin")}function d(e){return!e.startsWith("grpc-")}function h(e){return e.toLowerCase()}function f(e,t){if(!l(e))throw Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(c(e)){if(!Buffer.isBuffer(t))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw Error("keys that don't end with '-bin' must have String values");if(!u(t))throw Error('Metadata string value "'+t+'" contains illegal characters')}}class p{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){f(e=h(e),t),this.internalRepr.set(e,[t])}add(e,t){f(e=h(e),t);let r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=h(e),this.internalRepr.delete(e)}get(e){return e=h(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){let e=new p(this.options),t=e.internalRepr;for(let[e,r]of this.internalRepr){let n=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,n)}return e}merge(e){for(let[t,r]of e.internalRepr){let e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(g);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new p;for(let r of Object.keys(e)){if(":"===r.charAt(0))continue;let a=e[r];try{c(r)?Array.isArray(a)?a.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==a&&(d(r)?a.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(a,"base64"))):Array.isArray(a)?a.forEach(e=>{t.add(r,e)}):void 0!==a&&t.add(r,a)}catch(t){let e=`Failed to add metadata entry ${r}: ${a}. ${(0,s.getErrorMessage)(t)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(i.LogVerbosity.ERROR,e)}}return t}}t.Metadata=p;let g=e=>Buffer.isBuffer(e)?e.toString("base64"):e},66354:(e,t,r)=>{var n=r(85244),i=Math.max;e.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,a=-1,o=i(s.length-t,0),l=Array(o);++a<o;)l[a]=s[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=s[a];return u[t]=r(l),n(e,this,u)}}},66400:e=>{var t=800,r=16,n=Date.now;e.exports=function(e){var i=0,s=0;return function(){var a=n(),o=r-(a-s);if(s=a,o>0){if(++i>=t)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}},66683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;let n=r(71271),i=r(86777),s=r(31359),a="retrying_call";class o{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}t.RetryThrottler=o;class l{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let n=null!=(r=this.allocatedPerCall.get(t))?r:0;return!(this.limitPerCall-n<e)&&!(this.totalLimit-this.totalAllocated<e)&&(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let n=null!=(r=this.allocatedPerCall.get(t))?r:0;if(n<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;let r=null!=(t=this.allocatedPerCall.get(e))?t:0;if(this.totalAllocated<r)throw Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}}t.MessageBufferTracker=l;let u="grpc-previous-rpc-attempts";class c{constructor(e,t,r,n,i,s,a,o,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.bufferTracker=o,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(n.LogVerbosity.DEBUG,a,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null==(t=this.listener)||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){for(let{call:r}of(this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new i.Metadata}),this.underlyingCalls))r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!=(t=this.writeBuffer[e-this.writeBufferOffset])?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(let[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>e===t||e.toString().toLowerCase()===n.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=null==(e=this.callConfig)?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){let r;if("RETRY"!==this.state)return void t(!1);let n=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return void t(!1);if(null===e)r=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var e,r;if("RETRY"!==this.state)return void t(!1);(null==(r=null==(e=this.retryThrottler)?void 0:e.canRetryCall())||r)&&(t(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)(null==t?void 0:t.state)==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,i,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!=(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)?n:[],e.code)){let n;if(null==(i=this.retryThrottler)||i.addCallFailed(),null===r)n=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else n=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null==(s=this.retryThrottler)||s.addCallFailed(),this.maybeRetryCall(r,r=>{r||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return -1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK){null==(r=this.retryThrottler)||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if("COMMITTED"===this.state)return void this.reportStatus(e);let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return;let i=null!=(e=n.hedgingDelay)?e:"0s",s=Number(i.substring(0,i.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*s),null==(r=(t=this.hedgingTimer).unref)||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(u,`${r}`);let i=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),i=!0,r>0&&n.set(u,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!i&&r>0&&n.metadata.set(u,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let n=this.underlyingCalls[e],i=n.nextMessageToSend;null==(r=(t=this.getBufferEntry(i)).callback)||r.call(t),this.clearSentMessages(),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let n={message:t,flags:e.flags},i=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated)for(let[n,s]of(null==(r=e.callback)||r.call(e),this.underlyingCalls.entries()))"ACTIVE"===s.state&&s.nextMessageToSend===i&&s.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(n)}},t);else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;let r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===i&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){for(let e of(this.trace("startRead called"),this.readStarted=!0,this.underlyingCalls))(null==e?void 0:e.state)==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();for(let t of(this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1}),this.underlyingCalls))(null==t?void 0:t.state)==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}t.RetryingCall=c},66702:(e,t,r)=>{"use strict";let n,i;r.r(t),r.d(t,{default:()=>VU});var s,a,o,l,u,c,d,h={};r.r(h),r.d(h,{scaleBand:()=>ap,scaleDiverging:()=>dU,scaleDivergingLog:()=>dV,scaleDivergingPow:()=>dq,scaleDivergingSqrt:()=>d$,scaleDivergingSymlog:()=>dz,scaleIdentity:()=>l8,scaleImplicit:()=>ah,scaleLinear:()=>l5,scaleLog:()=>ul,scaleOrdinal:()=>af,scalePoint:()=>am,scalePow:()=>uy,scaleQuantile:()=>uk,scaleQuantize:()=>uR,scaleRadial:()=>uw,scaleSequential:()=>dD,scaleSequentialLog:()=>dN,scaleSequentialPow:()=>dM,scaleSequentialQuantile:()=>dL,scaleSequentialSqrt:()=>dj,scaleSequentialSymlog:()=>dP,scaleSqrt:()=>uv,scaleSymlog:()=>uh,scaleThreshold:()=>uD,scaleTime:()=>dI,scaleUtc:()=>dA,tickFormat:()=>l6});var f=r(60687),p=r(43210),g=r.n(p),m=r(4780);let y=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{ref:r,className:(0,m.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));y.displayName="Card";let v=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{ref:r,className:(0,m.cn)("flex flex-col space-y-1.5 p-6",e),...t}));v.displayName="CardHeader";let b=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{ref:r,className:(0,m.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));b.displayName="CardTitle";let S=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{ref:r,className:(0,m.cn)("text-sm text-muted-foreground",e),...t}));S.displayName="CardDescription";let w=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{ref:r,className:(0,m.cn)("p-6 pt-0",e),...t}));w.displayName="CardContent",p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{ref:r,className:(0,m.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var T=r(49384),E=r(45603),C=r.n(E),x=r(63866),_=r.n(x),O=r(77822),I=r.n(O),A=r(40491),k=r.n(A),R=r(93490),D=r.n(R),N=function(e){return 0===e?0:e>0?1:-1},P=function(e){return _()(e)&&e.indexOf("%")===e.length-1},M=function(e){return D()(e)&&!I()(e)},j=function(e){return M(e)||_()(e)},L=0,B=function(e){var t=++L;return"".concat(e||"").concat(t)},F=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!M(e)&&!_()(e))return n;if(P(e)){var s=e.indexOf("%");r=t*parseFloat(e.slice(0,s))/100}else r=+e;return I()(r)&&(r=n),i&&r>t&&(r=t),r},U=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},V=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(r[e[n]])return!0;else r[e[n]]=!0;return!1},z=function(e,t){return M(e)&&M(t)?function(r){return e+r*(t-e)}:function(){return t}};function q(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):k()(e,t))===r}):null}var $=!1,G=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if($&&"undefined"!=typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(t.replace(/%s/g,function(){return n[s++]}))}},W=r(37456),K=r.n(W),H=r(5231),Q=r.n(H),Y=r(55048),X=r.n(Y),J=r(29632);function Z(e,t){for(var r in e)if(({}).hasOwnProperty.call(e,r)&&(!({}).hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if(({}).hasOwnProperty.call(t,n)&&!({}).hasOwnProperty.call(e,n))return!1;return!0}function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var et=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],er=["points","pathLength"],en={svg:["viewBox","children"],polygon:er,polyline:er},ei=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],es=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if((0,p.isValidElement)(e)&&(r=e.props),!X()(r))return null;var n={};return Object.keys(r).forEach(function(e){ei.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},ea=function(e,t,r){return function(n){return e(t,r,n),null}},eo=function(e,t,r){if(!X()(e)||"object"!==ee(e))return null;var n=null;return Object.keys(e).forEach(function(i){var s=e[i];ei.includes(i)&&"function"==typeof s&&(n||(n={}),n[i]=ea(s,t,r))}),n},el=["children"],eu=["children"];function ec(e,t){if(null==e)return{};var r,n,i=ed(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ed(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function eh(e){return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ef={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ep=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},eg=null,em=null,ey=function e(t){if(t===eg&&Array.isArray(em))return em;var r=[];return p.Children.forEach(t,function(t){K()(t)||((0,J.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))}),em=r,eg=t,r};function ev(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return ep(e)}):[ep(t)],ey(e).forEach(function(e){var t=k()(e,"type.displayName")||k()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function eb(e,t){var r=ev(e,t);return r&&r[0]}var eS=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!!M(r)&&!(r<=0)&&!!M(n)&&!(n<=0)},ew=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],eT=function(e){return e&&e.type&&_()(e.type)&&ew.indexOf(e.type)>=0},eE=function(e){return e&&"object"===eh(e)&&"clipDot"in e},eC=function(e,t,r,n){var i,s=null!=(i=null==en?void 0:en[n])?i:[];return!Q()(e)&&(n&&s.includes(t)||et.includes(t))||r&&ei.includes(t)},ex=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if((0,p.isValidElement)(e)&&(n=e.props),!X()(n))return null;var i={};return Object.keys(n).forEach(function(e){var s;eC(null==(s=n)?void 0:s[e],e,t,r)&&(i[e]=n[e])}),i},e_=function e(t,r){if(t===r)return!0;var n=p.Children.count(t);if(n!==p.Children.count(r))return!1;if(0===n)return!0;if(1===n)return eO(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],a=r[i];if(Array.isArray(s)||Array.isArray(a)){if(!e(s,a))return!1}else if(!eO(s,a))return!1}return!0},eO=function(e,t){if(K()(e)&&K()(t))return!0;if(!K()(e)&&!K()(t)){var r=e.props||{},n=r.children,i=ec(r,el),s=t.props||{},a=s.children,o=ec(s,eu);if(n&&a)return Z(i,o)&&e_(n,a);if(!n&&!a)return Z(i,o)}return!1},eI=function(e,t){var r=[],n={};return ey(e).forEach(function(e,i){if(eT(e))r.push(e);else if(e){var s=ep(e.type),a=t[s]||{},o=a.handler,l=a.once;if(o&&(!l||!n[s])){var u=o(e,s,i);r.push(u),n[s]=!0}}}),r},eA=function(e){var t=e&&e.type;return t&&ef[t]?ef[t]:null},ek=function(e,t){return ey(t).indexOf(e)};function eR(e){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){eP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eP(e,t,r){return(t=eM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eM(e){var t=ej(e,"string");return"symbol"==eR(t)?t:t+""}function ej(e,t){if("object"!=eR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eR(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function eL(e,t){return ez(e)||eV(e,t)||eF(e,t)||eB()}function eB(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eF(e,t){if(e){if("string"==typeof e)return eU(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eU(e,t)}}function eU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eV(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function ez(e){if(Array.isArray(e))return e}var eq=(0,p.forwardRef)(function(e,t){var r=e.aspect,n=e.initialDimension,i=void 0===n?{width:-1,height:-1}:n,s=e.width,a=void 0===s?"100%":s,o=e.height,l=void 0===o?"100%":o,u=e.minWidth,c=void 0===u?0:u,d=e.minHeight,h=e.maxHeight,f=e.children,m=e.debounce,y=void 0===m?0:m,v=e.id,b=e.className,S=e.onResize,w=e.style,E=void 0===w?{}:w,x=(0,p.useRef)(null),_=(0,p.useRef)();_.current=S,(0,p.useImperativeHandle)(t,function(){return Object.defineProperty(x.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),x.current},configurable:!0})});var O=eL((0,p.useState)({containerWidth:i.width,containerHeight:i.height}),2),I=O[0],A=O[1],k=(0,p.useCallback)(function(e,t){A(function(r){var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]);(0,p.useEffect)(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,i=r.height;k(n,i),null==(t=_.current)||t.call(_,n,i)};y>0&&(e=C()(e,y,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=x.current.getBoundingClientRect();return k(r.width,r.height),t.observe(x.current),function(){t.disconnect()}},[k,y]);var R=(0,p.useMemo)(function(){var e=I.containerWidth,t=I.containerHeight;if(e<0||t<0)return null;G(P(a)||P(l),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,l),G(!r||r>0,"The aspect(%s) must be greater than zero.",r);var n=P(a)?e:a,i=P(l)?t:l;r&&r>0&&(n?i=n/r:i&&(n=i*r),h&&i>h&&(i=h)),G(n>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",n,i,a,l,c,d,r);var s=!Array.isArray(f)&&ep(f.type).endsWith("Chart");return g().Children.map(f,function(e){return g().isValidElement(e)?(0,p.cloneElement)(e,eN({width:n,height:i},s?{style:eN({height:"100%",width:"100%",maxHeight:i,maxWidth:n},e.props.style)}:{})):e})},[r,f,l,h,d,c,I,a]);return g().createElement("div",{id:v?"".concat(v):void 0,className:(0,T.A)("recharts-responsive-container",b),style:eN(eN({},E),{},{width:a,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:x},R)}),e$=r(85938),eG=r.n(e$);function eW(e){return(eW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eK(){return(eK=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function eH(e,t){return eZ(e)||eJ(e,t)||eY(e,t)||eQ()}function eQ(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function eY(e,t){if(e){if("string"==typeof e)return eX(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eX(e,t)}}function eX(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eJ(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function eZ(e){if(Array.isArray(e))return e}function e0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e0(Object(r),!0).forEach(function(t){e2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function e2(e,t,r){return(t=e3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e3(e){var t=e6(e,"string");return"symbol"==eW(t)?t:t+""}function e6(e,t){if("object"!=eW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eW(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function e4(e){return Array.isArray(e)&&j(e[0])&&j(e[1])?e.join(" ~ "):e}var e5=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,i=void 0===n?{}:n,s=e.itemStyle,a=void 0===s?{}:s,o=e.labelStyle,l=void 0===o?{}:o,u=e.payload,c=e.formatter,d=e.itemSorter,h=e.wrapperClassName,f=e.labelClassName,p=e.label,m=e.labelFormatter,y=e.accessibilityLayer,v=void 0!==y&&y,b=function(){if(u&&u.length){var e={padding:0,margin:0},t=(d?eG()(u,d):u).map(function(e,t){if("none"===e.type)return null;var n=e1({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),i=e.formatter||c||e4,s=e.value,o=e.name,l=s,d=o;if(i&&null!=l&&null!=d){var h=i(s,o,e,t,u);if(Array.isArray(h)){var f=eH(h,2);l=f[0],d=f[1]}else l=h}return g().createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},j(d)?g().createElement("span",{className:"recharts-tooltip-item-name"},d):null,j(d)?g().createElement("span",{className:"recharts-tooltip-item-separator"},r):null,g().createElement("span",{className:"recharts-tooltip-item-value"},l),g().createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return g().createElement("ul",{className:"recharts-tooltip-item-list",style:e},t)}return null},S=e1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=e1({margin:0},l),E=!K()(p),C=E?p:"",x=(0,T.A)("recharts-default-tooltip",h),_=(0,T.A)("recharts-tooltip-label",f);E&&m&&null!=u&&(C=m(p,u));var O=v?{role:"status","aria-live":"assertive"}:{};return g().createElement("div",eK({className:x,style:S},O),g().createElement("p",{className:_,style:w},g().isValidElement(C)?C:"".concat(C)),b())};function e8(e){return(e8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e7(e,t,r){return(t=e9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e9(e){var t=te(e,"string");return"symbol"==e8(t)?t:t+""}function te(e,t){if("object"!=e8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=e8(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var tt="recharts-tooltip-wrapper",tr={visibility:"hidden"};function tn(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return(0,T.A)(tt,e7(e7(e7(e7({},"".concat(tt,"-right"),M(r)&&t&&M(t.x)&&r>=t.x),"".concat(tt,"-left"),M(r)&&t&&M(t.x)&&r<t.x),"".concat(tt,"-bottom"),M(n)&&t&&M(t.y)&&n>=t.y),"".concat(tt,"-top"),M(n)&&t&&M(t.y)&&n<t.y))}function ti(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,s=e.position,a=e.reverseDirection,o=e.tooltipDimension,l=e.viewBox,u=e.viewBoxDimension;if(s&&M(s[n]))return s[n];var c=r[n]-o-i,d=r[n]+i;return t[n]?a[n]?c:d:a[n]?c<l[n]?Math.max(d,l[n]):Math.max(c,l[n]):d+o>l[n]+u?Math.max(c,l[n]):Math.max(d,l[n])}function ts(e){var t=e.translateX,r=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function ta(e){var t,r,n,i=e.allowEscapeViewBox,s=e.coordinate,a=e.offsetTopLeft,o=e.position,l=e.reverseDirection,u=e.tooltipBox,c=e.useTranslate3d,d=e.viewBox;return{cssProperties:t=u.height>0&&u.width>0&&s?ts({translateX:r=ti({allowEscapeViewBox:i,coordinate:s,key:"x",offsetTopLeft:a,position:o,reverseDirection:l,tooltipDimension:u.width,viewBox:d,viewBoxDimension:d.width}),translateY:n=ti({allowEscapeViewBox:i,coordinate:s,key:"y",offsetTopLeft:a,position:o,reverseDirection:l,tooltipDimension:u.height,viewBox:d,viewBoxDimension:d.height}),useTranslate3d:c}):tr,cssClasses:tn({translateX:r,translateY:n,coordinate:s})}}function to(e){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(r),!0).forEach(function(t){tS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tc(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function td(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tw(n.key),n)}}function th(e,t,r){return t&&td(e.prototype,t),r&&td(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tf(e,t,r){return t=ty(t),tp(e,tm()?Reflect.construct(t,r||[],ty(e).constructor):t.apply(e,r))}function tp(e,t){if(t&&("object"===to(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tg(e)}function tg(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tm(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tm=function(){return!!e})()}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tv(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tb(e,t)}function tb(e,t){return(tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tS(e,t,r){return(t=tw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tw(e){var t=tT(e,"string");return"symbol"==to(t)?t:t+""}function tT(e,t){if("object"!=to(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=to(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var tE=1,tC=function(e){function t(){var e;tc(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return tS(e=tf(this,t,[].concat(n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),tS(e,"handleKeyDown",function(t){if("Escape"===t.key){var r,n,i,s;e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!=(r=null==(n=e.props.coordinate)?void 0:n.x)?r:0,y:null!=(i=null==(s=e.props.coordinate)?void 0:s.y)?i:0}})}}),e}return tv(t,e),th(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>tE||Math.abs(e.height-this.state.lastBoundingBox.height)>tE)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else(-1!==this.state.lastBoundingBox.width||-1!==this.state.lastBoundingBox.height)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null==(e=this.props.coordinate)?void 0:e.x)!==this.state.dismissedAtCoordinate.x||(null==(t=this.props.coordinate)?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,i=t.animationDuration,s=t.animationEasing,a=t.children,o=t.coordinate,l=t.hasPayload,u=t.isAnimationActive,c=t.offset,d=t.position,h=t.reverseDirection,f=t.useTranslate3d,p=t.viewBox,m=t.wrapperStyle,y=ta({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:c,position:d,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:f,viewBox:p}),v=y.cssClasses,b=y.cssProperties,S=tu(tu({transition:u&&r?"transform ".concat(i,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&l?"visible":"hidden",position:"absolute",top:0,left:0},m);return g().createElement("div",{tabIndex:-1,className:v,style:S,ref:function(t){e.wrapperNode=t}},a)}}])}(p.PureComponent),tx={isSsr:function(){return!0}(),get:function(e){return tx[e]},set:function(e,t){if("string"==typeof e)tx[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){tx[t]=e[t]})}}},t_=r(36315),tO=r.n(t_);function tI(e,t,r){return!0===t?tO()(e,r):Q()(t)?tO()(e,t):e}function tA(e){return(tA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(r),!0).forEach(function(t){tz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tD(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function tN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tq(n.key),n)}}function tP(e,t,r){return t&&tN(e.prototype,t),r&&tN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tM(e,t,r){return t=tF(t),tj(e,tB()?Reflect.construct(t,r||[],tF(e).constructor):t.apply(e,r))}function tj(e,t){if(t&&("object"===tA(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tL(e)}function tL(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(tB=function(){return!!e})()}function tF(e){return(tF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tU(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tV(e,t)}function tV(e,t){return(tV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tz(e,t,r){return(t=tq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tq(e){var t=t$(e,"string");return"symbol"==tA(t)?t:t+""}function t$(e,t){if("object"!=tA(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=tA(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function tG(e){return e.dataKey}function tW(e,t){return g().isValidElement(e)?g().cloneElement(e,t):"function"==typeof e?g().createElement(e,t):g().createElement(e5,t)}var tK=function(e){function t(){return tD(this,t),tM(this,t,arguments)}return tU(t,e),tP(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.active,n=t.allowEscapeViewBox,i=t.animationDuration,s=t.animationEasing,a=t.content,o=t.coordinate,l=t.filterNull,u=t.isAnimationActive,c=t.offset,d=t.payload,h=t.payloadUniqBy,f=t.position,p=t.reverseDirection,m=t.useTranslate3d,y=t.viewBox,v=t.wrapperStyle,b=null!=d?d:[];l&&b.length&&(b=tI(d.filter(function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)}),h,tG));var S=b.length>0;return g().createElement(tC,{allowEscapeViewBox:n,animationDuration:i,animationEasing:s,isAnimationActive:u,active:r,coordinate:o,hasPayload:S,offset:c,position:f,reverseDirection:p,useTranslate3d:m,viewBox:y,wrapperStyle:v},tW(a,tR(tR({},this.props),{},{payload:b})))}}])}(p.PureComponent);tz(tK,"displayName","Tooltip"),tz(tK,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!tx.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var tH=["children","width","height","viewBox","className","style","title","desc"];function tQ(){return(tQ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function tY(e,t){if(null==e)return{};var r,n,i=tX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tX(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function tJ(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,a=e.style,o=e.title,l=e.desc,u=tY(e,tH),c=i||{width:r,height:n,x:0,y:0},d=(0,T.A)("recharts-surface",s);return g().createElement("svg",tQ({},ex(u,!0,"svg"),{className:d,width:r,height:n,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),g().createElement("title",null,o),g().createElement("desc",null,l),t)}var tZ=r(69433),t0=r.n(tZ);let t1=Math.cos,t2=Math.min,t3=Math.sin,t6=Math.sqrt,t4=Math.PI,t5=2*t4,t8={draw(e,t){let r=t6(t/t4);e.moveTo(r,0),e.arc(0,0,r,0,t5)}},t7={draw(e,t){let r=t6(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},t9=t6(1/3),re=2*t9,rt={draw(e,t){let r=t6(t/re),n=r*t9;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},rr={draw(e,t){let r=t6(t),n=-r/2;e.rect(n,n,r,r)}},rn=.8908130915292852,ri=t3(t4/10)/t3(7*t4/10),rs=t3(t5/10)*ri,ra=-t1(t5/10)*ri,ro={draw(e,t){let r=t6(t*rn),n=rs*r,i=ra*r;e.moveTo(0,-r),e.lineTo(n,i);for(let t=1;t<5;++t){let s=t5*t/5,a=t1(s),o=t3(s);e.lineTo(o*r,-a*r),e.lineTo(a*n-o*i,o*n+a*i)}e.closePath()}},rl=t6(3),ru={draw(e,t){let r=-t6(t/(3*rl));e.moveTo(0,2*r),e.lineTo(-rl*r,-r),e.lineTo(rl*r,-r),e.closePath()}},rc=-.5,rd=t6(3)/2,rh=1/t6(12),rf=(rh/2+1)*3,rp={draw(e,t){let r=t6(t/rf),n=r/2,i=r*rh,s=n,a=r*rh+r,o=-s,l=a;e.moveTo(n,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(rc*n-rd*i,rd*n+rc*i),e.lineTo(rc*s-rd*a,rd*s+rc*a),e.lineTo(rc*o-rd*l,rd*o+rc*l),e.lineTo(rc*n+rd*i,rc*i-rd*n),e.lineTo(rc*s+rd*a,rc*a-rd*s),e.lineTo(rc*o+rd*l,rc*l-rd*o),e.closePath()}};function rg(e){return function(){return e}}let rm=Math.PI,ry=2*rm,rv=1e-6,rb=ry-1e-6;function rS(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function rw(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return rS;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}class rT{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?rS:rw(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,s){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+s}`}arcTo(e,t,r,n,i){if(e*=1,t*=1,r*=1,n*=1,(i*=1)<0)throw Error(`negative radius: ${i}`);let s=this._x1,a=this._y1,o=r-e,l=n-t,u=s-e,c=a-t,d=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>rv)if(Math.abs(c*o-l*u)>rv&&i){let h=r-s,f=n-a,p=o*o+l*l,g=Math.sqrt(p),m=Math.sqrt(d),y=i*Math.tan((rm-Math.acos((p+d-(h*h+f*f))/(2*g*m)))/2),v=y/m,b=y/g;Math.abs(v-1)>rv&&this._append`L${e+v*u},${t+v*c}`,this._append`A${i},${i},0,0,${+(c*h>u*f)},${this._x1=e+b*o},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,n,i,s){if(e*=1,t*=1,r*=1,s=!!s,r<0)throw Error(`negative radius: ${r}`);let a=r*Math.cos(n),o=r*Math.sin(n),l=e+a,u=t+o,c=1^s,d=s?n-i:i-n;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>rv||Math.abs(this._y1-u)>rv)&&this._append`L${l},${u}`,r&&(d<0&&(d=d%ry+ry),d>rb?this._append`A${r},${r},0,1,${c},${e-a},${t-o}A${r},${r},0,1,${c},${this._x1=l},${this._y1=u}`:d>rv&&this._append`A${r},${r},0,${+(d>=rm)},${c},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r*=1}v${+n}h${-r}Z`}toString(){return this._}}function rE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw RangeError(`invalid digits: ${r}`);t=e}return e},()=>new rT(t)}rT.prototype;let rC=t6(3),rx=t6(3);function r_(e,t){let r=null,n=rE(i);function i(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"==typeof e?e:rg(e||t8),t="function"==typeof t?t:rg(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:rg(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:rg(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i}function rO(e){return(rO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var rI=["type","size","sizeType"];function rA(){return(rA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rk(Object(r),!0).forEach(function(t){rD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rD(e,t,r){return(t=rN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rN(e){var t=rP(e,"string");return"symbol"==rO(t)?t:t+""}function rP(e,t){if("object"!=rO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rO(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function rM(e,t){if(null==e)return{};var r,n,i=rj(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rj(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var rL={symbolCircle:t8,symbolCross:t7,symbolDiamond:rt,symbolSquare:rr,symbolStar:ro,symbolTriangle:ru,symbolWye:rp},rB=Math.PI/180,rF=function(e){return rL["symbol".concat(t0()(e))]||t8},rU=function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*rB;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rV=function(e){var t=e.type,r=void 0===t?"circle":t,n=e.size,i=void 0===n?64:n,s=e.sizeType,a=void 0===s?"area":s,o=rR(rR({},rM(e,rI)),{},{type:r,size:i,sizeType:a}),l=function(){var e=rF(r);return r_().type(e).size(rU(i,a,r))()},u=o.className,c=o.cx,d=o.cy,h=ex(o,!0);return c===+c&&d===+d&&i===+i?g().createElement("path",rA({},h,{className:(0,T.A)("recharts-symbols",u),transform:"translate(".concat(c,", ").concat(d,")"),d:l()})):null};function rz(e){return(rz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rq(){return(rq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(t){r2(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rW(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function rK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r3(n.key),n)}}function rH(e,t,r){return t&&rK(e.prototype,t),r&&rK(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rQ(e,t,r){return t=rZ(t),rY(e,rJ()?Reflect.construct(t,r||[],rZ(e).constructor):t.apply(e,r))}function rY(e,t){if(t&&("object"===rz(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return rX(e)}function rX(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(rJ=function(){return!!e})()}function rZ(e){return(rZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r0(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r1(e,t)}function r1(e,t){return(r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r2(e,t,r){return(t=r3(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r3(e){var t=r6(e,"string");return"symbol"==rz(t)?t:t+""}function r6(e,t){if("object"!=rz(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=rz(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}rV.registerSymbol=function(e,t){rL["symbol".concat(t0()(e))]=t};var r4=32,r5=function(e){function t(){return rW(this,t),rQ(this,t,arguments)}return r0(t,e),rH(t,[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=r4/2,n=r4/6,i=r4/3,s=e.inactive?t:e.color;if("plainline"===e.type)return g().createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:r4,y2:r,className:"recharts-legend-icon"});if("line"===e.type)return g().createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(r,"h").concat(i,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(2*i,",").concat(r,"\n            H").concat(r4,"M").concat(2*i,",").concat(r,"\n            A").concat(n,",").concat(n,",0,1,1,").concat(i,",").concat(r),className:"recharts-legend-icon"});if("rect"===e.type)return g().createElement("path",{stroke:"none",fill:s,d:"M0,".concat(r4/8,"h").concat(r4,"v").concat(3*r4/4,"h").concat(-r4,"z"),className:"recharts-legend-icon"});if(g().isValidElement(e.legendIcon)){var a=rG({},e);return delete a.legendIcon,g().cloneElement(e.legendIcon,a)}return g().createElement(rV,{fill:s,cx:r,cy:r,size:r4,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,i=t.layout,s=t.formatter,a=t.inactiveColor,o={x:0,y:0,width:r4,height:r4},l={display:"horizontal"===i?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var i=t.formatter||s,c=(0,T.A)(r2(r2({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=Q()(t.value)?null:t.value;G(!Q()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var h=t.inactive?a:t.color;return g().createElement("li",rq({className:c,style:l,key:"legend-item-".concat(r)},eo(e.props,t,r)),g().createElement(tJ,{width:n,height:n,viewBox:o,style:u},e.renderIcon(t)),g().createElement("span",{className:"recharts-legend-item-text",style:{color:h}},i?i(d,t,r):d))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===r?n:"left"};return g().createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}])}(p.PureComponent);function r8(e){return(r8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r2(r5,"displayName","Legend"),r2(r5,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var r7=["ref"];function r9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?r9(Object(r),!0).forEach(function(t){nd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nt(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nh(n.key),n)}}function nn(e,t,r){return t&&nr(e.prototype,t),r&&nr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ni(e,t,r){return t=nl(t),ns(e,no()?Reflect.construct(t,r||[],nl(e).constructor):t.apply(e,r))}function ns(e,t){if(t&&("object"===r8(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return na(e)}function na(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function no(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(no=function(){return!!e})()}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nu(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nc(e,t)}function nc(e,t){return(nc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function nd(e,t,r){return(t=nh(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nh(e){var t=nf(e,"string");return"symbol"==r8(t)?t:t+""}function nf(e,t){if("object"!=r8(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=r8(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function np(e,t){if(null==e)return{};var r,n,i=ng(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ng(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function nm(e){return e.value}function ny(e,t){if(g().isValidElement(e))return g().cloneElement(e,t);if("function"==typeof e)return g().createElement(e,t);t.ref;var r=np(t,r7);return g().createElement(r5,r)}var nv=1,nb=function(e){function t(){var e;nt(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return nd(e=ni(this,t,[].concat(n)),"lastBoundingBox",{width:-1,height:-1}),e}return nu(t,e),nn(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>nv||Math.abs(t.height-this.lastBoundingBox.height)>nv)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):(-1!==this.lastBoundingBox.width||-1!==this.lastBoundingBox.height)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ne({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,i=n.layout,s=n.align,a=n.verticalAlign,o=n.margin,l=n.chartWidth,u=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===s&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===s?{right:o&&o.right||0}:{left:o&&o.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===a?{top:((u||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:o&&o.bottom||0}:{top:o&&o.top||0}),ne(ne({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,i=t.height,s=t.wrapperStyle,a=t.payloadUniqBy,o=t.payload,l=ne(ne({position:"absolute",width:n||"auto",height:i||"auto"},this.getDefaultPosition(s)),s);return g().createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},ny(r,ne(ne({},this.props),{},{payload:tI(o,a,nm)})))}}],[{key:"getWithHeight",value:function(e,t){var r=ne(ne({},this.defaultProps),e.props).layout;return"vertical"===r&&M(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}])}(p.PureComponent);nd(nb,"displayName","Legend"),nd(nb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});let nS={light:"",dark:".dark"},nw=p.createContext(null);function nT(){let e=p.useContext(nw);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let nE=p.forwardRef(({id:e,className:t,children:r,config:n,...i},s)=>{let a=p.useId(),o=`chart-${e||a.replace(/:/g,"")}`;return(0,f.jsx)(nw.Provider,{value:{config:n},children:(0,f.jsxs)("div",{"data-chart":o,ref:s,className:(0,m.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...i,children:[(0,f.jsx)(nC,{id:o,config:n}),(0,f.jsx)(eq,{children:r})]})})});nE.displayName="Chart";let nC=({id:e,config:t})=>{let r=Object.entries(t).filter(([,e])=>e.theme||e.color);return r.length?(0,f.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(nS).map(([t,n])=>`
${n} [data-chart=${e}] {
${r.map(([e,r])=>{let n=r.theme?.[t]||r.color;return n?`  --color-${e}: ${n};`:null}).join("\n")}
}
`).join("\n")}}):null},nx=tK;function n_(e,t,r){if("object"!=typeof t||null===t)return;let n="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,i=r;return r in t&&"string"==typeof t[r]?i=t[r]:n&&r in n&&"string"==typeof n[r]&&(i=n[r]),i in e?e[i]:e[r]}p.forwardRef(({active:e,payload:t,className:r,indicator:n="dot",hideLabel:i=!1,hideIndicator:s=!1,label:a,labelFormatter:o,labelClassName:l,formatter:u,color:c,nameKey:d,labelKey:h},g)=>{let{config:y}=nT(),v=p.useMemo(()=>{if(i||!t?.length)return null;let[e]=t,r=`${h||e.dataKey||e.name||"value"}`,n=n_(y,e,r),s=h||"string"!=typeof a?n?.label:y[a]?.label||a;return o?(0,f.jsx)("div",{className:(0,m.cn)("font-medium",l),children:o(s,t)}):s?(0,f.jsx)("div",{className:(0,m.cn)("font-medium",l),children:s}):null},[a,o,t,i,l,y,h]);if(!e||!t?.length)return null;let b=1===t.length&&"dot"!==n;return(0,f.jsxs)("div",{ref:g,className:(0,m.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",r),children:[b?null:v,(0,f.jsx)("div",{className:"grid gap-1.5",children:t.map((e,t)=>{let r=`${d||e.name||e.dataKey||"value"}`,i=n_(y,e,r),a=c||e.payload.fill||e.color;return(0,f.jsx)("div",{className:(0,m.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===n&&"items-center"),children:u&&e?.value!==void 0&&e.name?u(e.value,e.name,e,t,e.payload):(0,f.jsxs)(f.Fragment,{children:[i?.icon?(0,f.jsx)(i.icon,{}):!s&&(0,f.jsx)("div",{className:(0,m.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===n,"w-1":"line"===n,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===n,"my-0.5":b&&"dashed"===n}),style:{"--color-bg":a,"--color-border":a}}),(0,f.jsxs)("div",{className:(0,m.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,f.jsxs)("div",{className:"grid gap-1.5",children:[b?v:null,(0,f.jsx)("span",{className:"text-muted-foreground",children:i?.label||e.name})]}),e.value&&(0,f.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}).displayName="ChartTooltip",p.forwardRef(({className:e,hideIcon:t=!1,payload:r,verticalAlign:n="bottom",nameKey:i},s)=>{let{config:a}=nT();return r?.length?(0,f.jsx)("div",{ref:s,className:(0,m.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",e),children:r.map(e=>{let r=`${i||e.dataKey||"value"}`,n=n_(a,e,r);return(0,f.jsxs)("div",{className:(0,m.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[n?.icon&&!t?(0,f.jsx)(n.icon,{}):(0,f.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),n?.label]},e.value)})}):null}).displayName="ChartLegend";var nO=r(34990),nI=r.n(nO),nA=!0,nk="Invariant failed";function nR(e,t){if(!e){if(nA)throw Error(nk);var r="function"==typeof t?t():t,n=r?"".concat(nk,": ").concat(r):nk;throw Error(n)}}var nD=["children","className"];function nN(){return(nN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function nP(e,t){if(null==e)return{};var r,n,i=nM(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function nM(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var nj=g().forwardRef(function(e,t){var r=e.children,n=e.className,i=nP(e,nD),s=(0,T.A)("recharts-layer",n);return g().createElement("g",nN({className:s},ex(i,!0),{ref:t}),r)});function nL(){return(nL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var nB=function(e){var t=e.cx,r=e.cy,n=e.r,i=e.className,s=(0,T.A)("recharts-dot",i);return t===+t&&r===+r&&n===+n?g().createElement("circle",nL({},ex(e,!1),es(e),{className:s,cx:t,cy:r,r:n})):null},nF=r(87955),nU=r.n(nF),nV=Object.getOwnPropertyNames,nz=Object.getOwnPropertySymbols,nq=Object.prototype.hasOwnProperty;function n$(e,t){return function(r,n,i){return e(r,n,i)&&t(r,n,i)}}function nG(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var i=n.cache,s=i.get(t),a=i.get(r);if(s&&a)return s===r&&a===t;i.set(t,r),i.set(r,t);var o=e(t,r,n);return i.delete(t),i.delete(r),o}}function nW(e){return nV(e).concat(nz(e))}var nK=Object.hasOwn||function(e,t){return nq.call(e,t)};function nH(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var nQ="__v",nY="__o",nX="_owner",nJ=Object.getOwnPropertyDescriptor,nZ=Object.keys;function n0(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function n1(e,t){return nH(e.getTime(),t.getTime())}function n2(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function n3(e,t){return e===t}function n6(e,t,r){var n,i,s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=Array(s),o=e.entries(),l=0;(n=o.next())&&!n.done;){for(var u=t.entries(),c=!1,d=0;(i=u.next())&&!i.done;){if(a[d]){d++;continue}var h=n.value,f=i.value;if(r.equals(h[0],f[0],l,d,e,t,r)&&r.equals(h[1],f[1],h[0],f[0],e,t,r)){c=a[d]=!0;break}d++}if(!c)return!1;l++}return!0}var n4=nH;function n5(e,t,r){var n=nZ(e),i=n.length;if(nZ(t).length!==i)return!1;for(;i-- >0;)if(!ii(e,t,r,n[i]))return!1;return!0}function n8(e,t,r){var n,i,s,a=nW(e),o=a.length;if(nW(t).length!==o)return!1;for(;o-- >0;)if(!ii(e,t,r,n=a[o])||(i=nJ(e,n),s=nJ(t,n),(i||s)&&(!i||!s||i.configurable!==s.configurable||i.enumerable!==s.enumerable||i.writable!==s.writable)))return!1;return!0}function n7(e,t){return nH(e.valueOf(),t.valueOf())}function n9(e,t){return e.source===t.source&&e.flags===t.flags}function ie(e,t,r){var n,i,s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=Array(s),o=e.values();(n=o.next())&&!n.done;){for(var l=t.values(),u=!1,c=0;(i=l.next())&&!i.done;){if(!a[c]&&r.equals(n.value,i.value,n.value,i.value,e,t,r)){u=a[c]=!0;break}c++}if(!u)return!1}return!0}function it(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function ir(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function ii(e,t,r,n){return(n===nX||n===nY||n===nQ)&&(!!e.$$typeof||!!t.$$typeof)||nK(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var is="[object Arguments]",ia="[object Boolean]",io="[object Date]",il="[object Error]",iu="[object Map]",ic="[object Number]",id="[object Object]",ih="[object RegExp]",ip="[object Set]",ig="[object String]",im="[object URL]",iy=Array.isArray,iv="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,ib=Object.assign,iS=Object.prototype.toString.call.bind(Object.prototype.toString);function iw(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,a=e.areNumbersEqual,o=e.areObjectsEqual,l=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,c=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(e,f,p){if(e===f)return!0;if(null==e||null==f)return!1;var g=typeof e;if(g!==typeof f)return!1;if("object"!==g)return"number"===g?a(e,f,p):"function"===g&&i(e,f,p);var m=e.constructor;if(m!==f.constructor)return!1;if(m===Object)return o(e,f,p);if(iy(e))return t(e,f,p);if(null!=iv&&iv(e))return d(e,f,p);if(m===Date)return r(e,f,p);if(m===RegExp)return u(e,f,p);if(m===Map)return s(e,f,p);if(m===Set)return c(e,f,p);var y=iS(e);return y===io?r(e,f,p):y===ih?u(e,f,p):y===iu?s(e,f,p):y===ip?c(e,f,p):y===id?"function"!=typeof e.then&&"function"!=typeof f.then&&o(e,f,p):y===im?h(e,f,p):y===il?n(e,f,p):y===is?o(e,f,p):(y===ia||y===ic||y===ig)&&l(e,f,p)}}function iT(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?n8:n0,areDatesEqual:n1,areErrorsEqual:n2,areFunctionsEqual:n3,areMapsEqual:n?n$(n6,n8):n6,areNumbersEqual:n4,areObjectsEqual:n?n8:n5,arePrimitiveWrappersEqual:n7,areRegExpsEqual:n9,areSetsEqual:n?n$(ie,n8):ie,areTypedArraysEqual:n?n8:it,areUrlsEqual:ir};if(r&&(i=ib({},i,r(i))),t){var s=nG(i.areArraysEqual),a=nG(i.areMapsEqual),o=nG(i.areObjectsEqual),l=nG(i.areSetsEqual);i=ib({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:l})}return i}function iE(e){return function(t,r,n,i,s,a,o){return e(t,r,o)}}function iC(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,s=e.strict;if(n)return function(e,a){var o=n(),l=o.cache;return r(e,a,{cache:void 0===l?t?new WeakMap:void 0:l,equals:i,meta:o.meta,strict:s})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(e,t){return r(e,t,a)}}var ix=i_();function i_(e){void 0===e&&(e={});var t=e.circular,r=void 0!==t&&t,n=e.createInternalComparator,i=e.createState,s=e.strict,a=void 0!==s&&s,o=iw(iT(e)),l=n?n(o):iE(o);return iC({circular:r,comparator:o,createState:i,equals:l,strict:a})}function iO(e){"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(e)}function iI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(i){r<0&&(r=i),i-r>t?(e(i),r=-1):iO(n)})}function iA(e){return(iA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ik(e){return iM(e)||iP(e)||iD(e)||iR()}function iR(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iD(e,t){if(e){if("string"==typeof e)return iN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iN(e,t)}}function iN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iP(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function iM(e){if(Array.isArray(e))return e}function ij(){var e={},t=function(){return null},r=!1,n=function n(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var s=ik(i),a=s[0],o=s.slice(1);return"number"==typeof a?void iI(n.bind(null,o),a):(n(a),void iI(n.bind(null,o)))}"object"===iA(i)&&t(e=i),"function"==typeof i&&i()}};return{stop:function(){r=!0},start:function(e){r=!1,n(e)},subscribe:function(e){return t=e,function(){t=function(){return null}}}}}function iL(e){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iB(Object(r),!0).forEach(function(t){iU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iU(e,t,r){return(t=iV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iV(e){var t=iz(e,"string");return"symbol"===iL(t)?t:String(t)}function iz(e,t){if("object"!==iL(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==iL(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}i_({strict:!0}),i_({circular:!0}),i_({circular:!0,strict:!0}),i_({createInternalComparator:function(){return nH}}),i_({strict:!0,createInternalComparator:function(){return nH}}),i_({circular:!0,createInternalComparator:function(){return nH}}),i_({circular:!0,createInternalComparator:function(){return nH},strict:!0});var iq=function(e,t){return[Object.keys(e),Object.keys(t)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})})},i$=function(e){return e},iG=function(e){return e.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())})},iW=function(e,t){return Object.keys(t).reduce(function(r,n){return iF(iF({},r),{},iU({},n,e(n,t[n])))},{})},iK=function(e,t,r){return e.map(function(e){return"".concat(iG(e)," ").concat(t,"ms ").concat(r)}).join(",")},iH=!1,iQ=function(e,t,r,n,i,s,a,o){if(iH&&"undefined"!=typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,n,i,s,a,o],u=0;console.warn(t.replace(/%s/g,function(){return l[u++]}))}};function iY(e,t){return iZ(e)||iJ(e,t)||i2(e,t)||iX()}function iX(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function iJ(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function iZ(e){if(Array.isArray(e))return e}function i0(e){return i6(e)||i3(e)||i2(e)||i1()}function i1(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i2(e,t){if(e){if("string"==typeof e)return i4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i4(e,t)}}function i3(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function i6(e){if(Array.isArray(e))return i4(e)}function i4(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var i5=1e-4,i8=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},i7=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},i9=function(e,t){return function(r){return i7(i8(e,t),r)}},se=function(e,t){return function(r){return i7([].concat(i0(i8(e,t).map(function(e,t){return e*t}).slice(1)),[0]),r)}},st=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[1],s=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":n=0,i=0,s=1,a=1;break;case"ease":n=.25,i=.1,s=.25,a=1;break;case"ease-in":n=.42,i=0,s=1,a=1;break;case"ease-out":n=.42,i=0,s=.58,a=1;break;case"ease-in-out":n=0,i=0,s=.58,a=1;break;default:var o=t[0].split("(");if("cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length){var l=iY(o[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}),4);n=l[0],i=l[1],s=l[2],a=l[3]}else iQ(!1,"[configBezier]: arguments should be one of oneOf 'linear', 'ease', 'ease-in', 'ease-out', 'ease-in-out','cubic-bezier(x1,y1,x2,y2)', instead received %s",t)}iQ([n,s,i,a].every(function(e){return"number"==typeof e&&e>=0&&e<=1}),"[configBezier]: arguments should be x1, y1, x2, y2 of [0, 1] instead received %s",t);var u=i9(n,s),c=i9(i,a),d=se(n,s),h=function(e){return e>1?1:e<0?0:e},f=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var i=u(r)-t,s=d(r);if(Math.abs(i-t)<i5||s<i5)break;r=h(r-i/s)}return c(r)};return f.isStepper=!1,f},sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,i=void 0===n?8:n,s=e.dt,a=void 0===s?17:s,o=function(e,t,n){var s=n*i,o=n+(-(e-t)*r-s)*a/1e3,l=n*a/1e3+e;return Math.abs(l-t)<i5&&Math.abs(o)<i5?[t,0]:[l,o]};return o.isStepper=!0,o.dt=a,o},sn=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"==typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return st(n);case"spring":return sr();default:if("cubic-bezier"===n.split("(")[0])return st(n);iQ(!1,"[configEasing]: first argument should be one of 'ease', 'ease-in', 'ease-out', 'ease-in-out','cubic-bezier(x1,y1,x2,y2)', 'linear' and 'spring', instead  received %s",t)}return"function"==typeof n?n:(iQ(!1,"[configEasing]: first argument type should be function or string, instead received %s",t),null)};function si(e){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ss(e){return sl(e)||so(e)||sm(e)||sa()}function sa(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function so(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function sl(e){if(Array.isArray(e))return sy(e)}function su(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?su(Object(r),!0).forEach(function(t){sd(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):su(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sd(e,t,r){return(t=sh(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sh(e){var t=sf(e,"string");return"symbol"===si(t)?t:String(t)}function sf(e,t){if("object"!==si(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==si(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function sp(e,t){return sb(e)||sv(e,t)||sm(e,t)||sg()}function sg(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sm(e,t){if(e){if("string"==typeof e)return sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sy(e,t)}}function sy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sv(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function sb(e){if(Array.isArray(e))return e}var sS=function(e,t,r){return e+(t-e)*r},sw=function(e){return e.from!==e.to},sT=function e(t,r,n){var i=iW(function(e,r){if(sw(r)){var n=sp(t(r.from,r.to,r.velocity),2),i=n[0],s=n[1];return sc(sc({},r),{},{from:i,velocity:s})}return r},r);return n<1?iW(function(e,t){return sw(t)?sc(sc({},t),{},{velocity:sS(t.velocity,i[e].velocity,n),from:sS(t.from,i[e].from,n)}):t},r):e(t,i,n-1)};let sE=function(e,t,r,n,i){var s,a,o=iq(e,t),l=o.reduce(function(r,n){return sc(sc({},r),{},sd({},n,[e[n],t[n]]))},{}),u=o.reduce(function(r,n){return sc(sc({},r),{},sd({},n,{from:e[n],velocity:0,to:t[n]}))},{}),c=-1,d=function(){return null},h=function(){return iW(function(e,t){return t.from},u)},f=function(){return!Object.values(u).filter(sw).length},p=function(n){s||(s=n);var a=(n-s)/r.dt;u=sT(r,u,a),i(sc(sc(sc({},e),t),h(u))),s=n,f()||(c=requestAnimationFrame(d))},g=function(s){a||(a=s);var o=(s-a)/n,u=iW(function(e,t){return sS.apply(void 0,ss(t).concat([r(o)]))},l);if(i(sc(sc(sc({},e),t),u)),o<1)c=requestAnimationFrame(d);else{var h=iW(function(e,t){return sS.apply(void 0,ss(t).concat([r(1)]))},l);i(sc(sc(sc({},e),t),h))}};return d=r.isStepper?p:g,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function sC(e){return(sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var sx=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function s_(e,t){if(null==e)return{};var r,n,i=sO(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function sO(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function sI(e){return sD(e)||sR(e)||sk(e)||sA()}function sA(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sk(e,t){if(e){if("string"==typeof e)return sN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sN(e,t)}}function sR(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function sD(e){if(Array.isArray(e))return sN(e)}function sN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(t){sj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sj(e,t,r){return(t=sU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sL(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function sB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sU(n.key),n)}}function sF(e,t,r){return t&&sB(e.prototype,t),r&&sB(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sU(e){var t=sV(e,"string");return"symbol"===sC(t)?t:String(t)}function sV(e,t){if("object"!==sC(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==sC(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function sz(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sq(e,t)}function sq(e,t){return(sq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s$(e){var t=sK();return function(){var r,n=sH(e);return r=t?Reflect.construct(n,arguments,sH(this).constructor):n.apply(this,arguments),sG(this,r)}}function sG(e,t){if(t&&("object"===sC(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return sW(e)}function sW(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sK(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function sH(e){return(sH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sQ=function(e){sz(r,e);var t=s$(r);function r(e,n){sL(this,r);var i=t.call(this,e,n),s=i.props,a=s.isActive,o=s.attributeName,l=s.from,u=s.to,c=s.steps,d=s.children,h=s.duration;if(i.handleStyleChange=i.handleStyleChange.bind(sW(i)),i.changeStyle=i.changeStyle.bind(sW(i)),!a||h<=0)return i.state={style:{}},"function"==typeof d&&(i.state={style:u}),sG(i);if(c&&c.length)i.state={style:c[0].style};else if(l){if("function"==typeof d)return i.state={style:l},sG(i);i.state={style:o?sj({},o,l):l}}else i.state={style:{}};return i}return sF(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,i=t.attributeName,s=t.shouldReAnimate,a=t.to,o=t.from,l=this.state.style;if(n){if(!r){var u={style:i?sj({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(u);return}if(!ix(e.to,a)||!e.canBegin||!e.isActive){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||s?o:e.to;if(this.state&&l){var h={style:i?sj({},i,d):d};(i&&l[i]!==d||!i&&l!==d)&&this.setState(h)}this.runAnimation(sM(sM({},this.props),{},{from:d,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,i=e.duration,s=e.easing,a=e.begin,o=e.onAnimationEnd,l=e.onAnimationStart,u=sE(r,n,sn(s),i,this.changeStyle),c=function(){t.stopJSAnimation=u()};this.manager.start([l,a,c,i,o])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,i=e.onAnimationStart,s=r[0],a=s.style,o=s.duration,l=void 0===o?0:o,u=function(e,n,i){if(0===i)return e;var s=n.duration,a=n.easing,o=void 0===a?"ease":a,l=n.style,u=n.properties,c=n.onAnimationEnd,d=i>0?r[i-1]:n,h=u||Object.keys(l);if("function"==typeof o||"spring"===o)return[].concat(sI(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:s,easing:o}),s]);var f=iK(h,s,o),p=sM(sM(sM({},d.style),l),{},{transition:f});return[].concat(sI(e),[p,s,c]).filter(i$)};return this.manager.start([i].concat(sI(r.reduce(u,[a,Math.max(l,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=ij());var t=e.begin,r=e.duration,n=e.attributeName,i=e.to,s=e.easing,a=e.onAnimationStart,o=e.onAnimationEnd,l=e.steps,u=e.children,c=this.manager;if(this.unSubscribe=c.subscribe(this.handleStyleChange),"function"==typeof s||"function"==typeof u||"spring"===s)return void this.runJSAnimation(e);if(l.length>1)return void this.runStepAnimation(e);var d=n?sj({},n,i):i,h=iK(Object.keys(d),r,s);c.start([a,t,sM(sM({},d),{},{transition:h}),r,o])}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.begin,e.duration),n=(e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,s_(e,sx)),s=p.Children.count(t),a=this.state.style;if("function"==typeof t)return t(a);if(!n||0===s||r<=0)return t;var o=function(e){var t=e.props,r=t.style,n=void 0===r?{}:r,s=t.className;return(0,p.cloneElement)(e,sM(sM({},i),{},{style:sM(sM({},n),a),className:s}))};return 1===s?o(p.Children.only(t)):g().createElement("div",null,p.Children.map(t,function(e){return o(e)}))}}]),r}(p.PureComponent);sQ.displayName="Animate",sQ.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},sQ.propTypes={from:nU().oneOfType([nU().object,nU().string]),to:nU().oneOfType([nU().object,nU().string]),attributeName:nU().string,duration:nU().number,begin:nU().number,easing:nU().oneOfType([nU().string,nU().func]),steps:nU().arrayOf(nU().shape({duration:nU().number.isRequired,style:nU().object.isRequired,easing:nU().oneOfType([nU().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nU().func]),properties:nU().arrayOf("string"),onAnimationEnd:nU().func})),children:nU().oneOfType([nU().node,nU().func]),isActive:nU().bool,canBegin:nU().bool,onAnimationEnd:nU().func,shouldReAnimate:nU().bool,onAnimationStart:nU().func,onAnimationReStart:nU().func};let sY=sQ;function sX(e){return(sX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sJ(){return(sJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function sZ(e,t){return s6(e)||s3(e,t)||s1(e,t)||s0()}function s0(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s1(e,t){if(e){if("string"==typeof e)return s2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s2(e,t)}}function s2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function s3(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function s6(e){if(Array.isArray(e))return e}function s4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s5(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s4(Object(r),!0).forEach(function(t){s8(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s8(e,t,r){return(t=s7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s7(e){var t=s9(e,"string");return"symbol"==sX(t)?t:t+""}function s9(e,t){if("object"!=sX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=sX(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ae=function(e,t,r,n,i){var s,a=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,u=+(n>=0&&r>=0||n<0&&r<0);if(a>0&&i instanceof Array){for(var c=[0,0,0,0],d=0,h=4;d<h;d++)c[d]=i[d]>a?a:i[d];s="M".concat(e,",").concat(t+o*c[0]),c[0]>0&&(s+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(u,",").concat(e+l*c[0],",").concat(t)),s+="L ".concat(e+r-l*c[1],",").concat(t),c[1]>0&&(s+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(u,",\n        ").concat(e+r,",").concat(t+o*c[1])),s+="L ".concat(e+r,",").concat(t+n-o*c[2]),c[2]>0&&(s+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(u,",\n        ").concat(e+r-l*c[2],",").concat(t+n)),s+="L ".concat(e+l*c[3],",").concat(t+n),c[3]>0&&(s+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(u,",\n        ").concat(e,",").concat(t+n-o*c[3])),s+="Z"}else if(a>0&&i===+i&&i>0){var f=Math.min(a,i);s="M ".concat(e,",").concat(t+o*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(e+l*f,",").concat(t,"\n            L ").concat(e+r-l*f,",").concat(t,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(e+r,",").concat(t+o*f,"\n            L ").concat(e+r,",").concat(t+n-o*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(e+r-l*f,",").concat(t+n,"\n            L ").concat(e+l*f,",").concat(t+n,"\n            A ").concat(f,",").concat(f,",0,0,").concat(u,",").concat(e,",").concat(t+n-o*f," Z")}else s="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return s},at=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,i=t.x,s=t.y,a=t.width,o=t.height;if(Math.abs(a)>0&&Math.abs(o)>0){var l=Math.min(i,i+a),u=Math.max(i,i+a),c=Math.min(s,s+o),d=Math.max(s,s+o);return r>=l&&r<=u&&n>=c&&n<=d}return!1},ar={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},an=function(e){var t=s5(s5({},ar),e),r=(0,p.useRef)(),n=sZ((0,p.useState)(-1),2),i=n[0],s=n[1];(0,p.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(e){}},[]);var a=t.x,o=t.y,l=t.width,u=t.height,c=t.radius,d=t.className,h=t.animationEasing,f=t.animationDuration,m=t.animationBegin,y=t.isAnimationActive,v=t.isUpdateAnimationActive;if(a!==+a||o!==+o||l!==+l||u!==+u||0===l||0===u)return null;var b=(0,T.A)("recharts-rectangle",d);return v?g().createElement(sY,{canBegin:i>0,from:{width:l,height:u,x:a,y:o},to:{width:l,height:u,x:a,y:o},duration:f,animationEasing:h,isActive:v},function(e){var n=e.width,s=e.height,a=e.x,o=e.y;return g().createElement(sY,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,isActive:y,easing:h},g().createElement("path",sJ({},ex(t,!0),{className:b,d:ae(a,o,n,s,c),ref:r})))}):g().createElement("path",sJ({},ex(t,!0),{className:b,d:ae(a,o,l,u,c)}))};function ai(e,t,r){e*=1,t*=1,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),s=Array(i);++n<i;)s[n]=e+n*r;return s}function as(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function aa(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}class ao extends Map{constructor(e,t=ad){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,r]of e)this.set(t,r)}get(e){return super.get(al(this,e))}has(e){return super.has(al(this,e))}set(e,t){return super.set(au(this,e),t)}delete(e){return super.delete(ac(this,e))}}function al({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function au({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function ac({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ad(e){return null!==e&&"object"==typeof e?e.valueOf():e}let ah=Symbol("implicit");function af(){var e=new ao,t=[],r=[],n=ah;function i(i){let s=e.get(i);if(void 0===s){if(n!==ah)return n;e.set(i,s=t.push(i)-1)}return r[s%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();for(let n of(t=[],e=new ao,r))e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return af(t,r).unknown(n)},as.apply(i,arguments),i}function ap(){var e,t,r=af().unknown(void 0),n=r.domain,i=r.range,s=0,a=1,o=!1,l=0,u=0,c=.5;function d(){var r=n().length,d=a<s,h=d?a:s,f=d?s:a;e=(f-h)/Math.max(1,r-l+2*u),o&&(e=Math.floor(e)),h+=(f-h-e*(r-l))*c,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var p=ai(r).map(function(t){return h+e*t});return i(d?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([s,a]=e,s*=1,a*=1,d()):[s,a]},r.rangeRound=function(e){return[s,a]=e,s*=1,a*=1,o=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(o=!!e,d()):o},r.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(u=+e,d()):u},r.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),d()):c},r.copy=function(){return ap(n(),[s,a]).round(o).paddingInner(l).paddingOuter(u).align(c)},as.apply(d(),arguments)}function ag(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ag(t())},e}function am(){return ag(ap.apply(null,arguments).paddingInner(1))}function ay(e){return(ay="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ab(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?av(Object(r),!0).forEach(function(t){aS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):av(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function aS(e,t,r){return(t=aw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aw(e){var t=aT(e,"string");return"symbol"==ay(t)?t:t+""}function aT(e,t){if("object"!=ay(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ay(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function aE(e){return aO(e)||a_(e)||ax(e)||aC()}function aC(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ax(e,t){if(e){if("string"==typeof e)return aI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aI(e,t)}}function a_(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function aO(e){if(Array.isArray(e))return aI(e)}function aI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var aA={widthCache:{},cacheCount:0},ak=2e3,aR={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},aD=null,aN="recharts_measurement_span";function aP(e){var t=ab({},e);return Object.keys(t).forEach(function(e){t[e]||delete t[e]}),t}var aM=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||tx.isSsr)return{width:0,height:0};var r=aP(t),n=JSON.stringify({text:e,copyStyle:r});if(aA.widthCache[n])return aA.widthCache[n];try{var i=document.getElementById(aN);i||((i=document.createElement("span")).setAttribute("id",aN),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var s=ab(ab({},aR),r);Object.assign(i.style,s),i.textContent="".concat(e);var a=i.getBoundingClientRect(),o={width:a.width,height:a.height};return aA.widthCache[n]=o,++aA.cacheCount>ak&&(aA.cacheCount=0,aA.widthCache={}),o}catch(e){return{width:0,height:0}}},aj=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function aL(e){return(aL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aB(e,t){return aq(e)||az(e,t)||aU(e,t)||aF()}function aF(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function aU(e,t){if(e){if("string"==typeof e)return aV(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aV(e,t)}}function aV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function az(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function aq(e){if(Array.isArray(e))return e}function a$(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function aG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aK(n.key),n)}}function aW(e,t,r){return t&&aG(e.prototype,t),r&&aG(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aK(e){var t=aH(e,"string");return"symbol"==aL(t)?t:t+""}function aH(e,t){if("object"!=aL(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=aL(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var aQ=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aY=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,aJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,aZ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},a0=Object.keys(aZ),a1="NaN";function a2(e,t){return e*aZ[t]}var a3=function(){function e(t,r){a$(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),""===r||aX.test(r)||(this.num=NaN,this.unit=""),a0.includes(r)&&(this.num=a2(t,r),this.unit="px")}return aW(e,[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(t){var r,n=aB(null!=(r=aJ.exec(t))?r:[],3),i=n[1],s=n[2];return new e(parseFloat(i),null!=s?s:"")}}])}();function a6(e){if(e.includes(a1))return a1;for(var t=e;t.includes("*")||t.includes("/");){var r,n=aB(null!=(r=aQ.exec(t))?r:[],4),i=n[1],s=n[2],a=n[3],o=a3.parse(null!=i?i:""),l=a3.parse(null!=a?a:""),u="*"===s?o.multiply(l):o.divide(l);if(u.isNaN())return a1;t=t.replace(aQ,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,d=aB(null!=(c=aY.exec(t))?c:[],4),h=d[1],f=d[2],p=d[3],g=a3.parse(null!=h?h:""),m=a3.parse(null!=p?p:""),y="+"===f?g.add(m):g.subtract(m);if(y.isNaN())return a1;t=t.replace(aY,y.toString())}return t}var a4=/\(([^()]*)\)/;function a5(e){for(var t=e;t.includes("(");){var r=aB(a4.exec(t),2)[1];t=t.replace(a4,a6(r))}return t}function a8(e){var t=e.replace(/\s+/g,"");return a6(t=a5(t))}function a7(e){try{return a8(e)}catch(e){return a1}}function a9(e){var t=a7(e.slice(5,-1));return t===a1?"":t}var oe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ot=["dx","dy","angle","className","breakAll"];function or(){return(or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function on(e,t){if(null==e)return{};var r,n,i=oi(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oi(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function os(e,t){return oc(e)||ou(e,t)||oo(e,t)||oa()}function oa(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oo(e,t){if(e){if("string"==typeof e)return ol(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ol(e,t)}}function ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ou(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function oc(e){if(Array.isArray(e))return e}var od=/[ \f\n\r\t\v\u2028\u2029]+/,oh=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var i=[];K()(t)||(i=r?t.toString().split(""):t.toString().split(od));var s=i.map(function(e){return{word:e,width:aM(e,n).width}}),a=r?0:aM("\xa0",n).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch(e){return null}},of=function(e,t,r,n,i){var s,a=e.maxLines,o=e.children,l=e.style,u=e.breakAll,c=M(a),d=o,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){var s=t.word,a=t.width,o=e[e.length-1];if(o&&(null==n||i||o.width+a+r<Number(n)))o.words.push(s),o.width+=a+r;else{var l={words:[s],width:a};e.push(l)}return e},[])},f=h(t),p=function(e){return e.reduce(function(e,t){return e.width>t.width?e:t})};if(!c)return f;for(var g="…",m=function(e){var t=h(oh({breakAll:u,style:l,children:d.slice(0,e)+g}).wordsWithComputedWidth);return[t.length>a||p(t).width>Number(n),t]},y=0,v=d.length-1,b=0;y<=v&&b<=d.length-1;){var S=Math.floor((y+v)/2),w=os(m(S-1),2),T=w[0],E=w[1],C=os(m(S),1)[0];if(T||C||(y=S+1),T&&C&&(v=S-1),!T&&C){s=E;break}b++}return s||f},op=function(e){return[{words:K()(e)?[]:e.toString().split(od)}]},og=function(e){var t=e.width,r=e.scaleToFit,n=e.children,i=e.style,s=e.breakAll,a=e.maxLines;if((t||r)&&!tx.isSsr){var o,l=oh({breakAll:s,children:n,style:i});if(!l)return op(n);var u=l.wordsWithComputedWidth,c=l.spaceWidth;return o=u,of({breakAll:s,children:n,maxLines:a,style:i},o,c,t,r)}return op(n)},om="#808080",oy=function(e){var t,r=e.x,n=void 0===r?0:r,i=e.y,s=void 0===i?0:i,a=e.lineHeight,o=void 0===a?"1em":a,l=e.capHeight,u=void 0===l?"0.71em":l,c=e.scaleToFit,d=void 0!==c&&c,h=e.textAnchor,f=void 0===h?"start":h,m=e.verticalAnchor,y=void 0===m?"end":m,v=e.fill,b=void 0===v?om:v,S=on(e,oe),w=(0,p.useMemo)(function(){return og({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:d,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,d,S.style,S.width]),E=S.dx,C=S.dy,x=S.angle,_=S.className,O=S.breakAll,I=on(S,ot);if(!j(n)||!j(s))return null;var A=n+(M(E)?E:0),k=s+(M(C)?C:0);switch(y){case"start":t=a9("calc(".concat(u,")"));break;case"middle":t=a9("calc(".concat((w.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:t=a9("calc(".concat(w.length-1," * -").concat(o,")"))}var R=[];if(d){var D=w[0].width,N=S.width;R.push("scale(".concat((M(N)?N/D:1)/D,")"))}return x&&R.push("rotate(".concat(x,", ").concat(A,", ").concat(k,")")),R.length&&(I.transform=R.join(" ")),g().createElement("text",or({},ex(I,!0),{x:A,y:k,className:(0,T.A)("recharts-text",_),textAnchor:f,fill:b.includes("url")?om:b}),w.map(function(e,r){var n=e.words.join(O?"":" ");return g().createElement("tspan",{x:A,dy:0===r?t:o,key:"".concat(n,"-").concat(r)},n)}))};let ov=Math.sqrt(50),ob=Math.sqrt(10),oS=Math.sqrt(2);function ow(e,t,r){let n,i,s,a=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(a)),l=a/Math.pow(10,o),u=l>=ov?10:l>=ob?5:l>=oS?2:1;return(o<0?(n=Math.round(e*(s=Math.pow(10,-o)/u)),i=Math.round(t*s),n/s<e&&++n,i/s>t&&--i,s=-s):(n=Math.round(e/(s=Math.pow(10,o)*u)),i=Math.round(t/s),n*s<e&&++n,i*s>t&&--i),i<n&&.5<=r&&r<2)?ow(e,t,2*r):[n,i,s]}function oT(e,t,r){if(t*=1,e*=1,!((r*=1)>0))return[];if(e===t)return[e];let n=t<e,[i,s,a]=n?ow(t,e,r):ow(e,t,r);if(!(s>=i))return[];let o=s-i+1,l=Array(o);if(n)if(a<0)for(let e=0;e<o;++e)l[e]=-((s-e)/a);else for(let e=0;e<o;++e)l[e]=(s-e)*a;else if(a<0)for(let e=0;e<o;++e)l[e]=-((i+e)/a);else for(let e=0;e<o;++e)l[e]=(i+e)*a;return l}function oE(e,t,r){return ow(e*=1,t*=1,r*=1)[2]}function oC(e,t,r){t*=1,e*=1,r*=1;let n=t<e,i=n?oE(t,e,r):oE(e,t,r);return(n?-1:1)*(i<0?-(1/i):i)}function ox(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function o_(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oO(e){let t,r,n;function i(e,n,s=0,a=e.length){if(s<a){if(0!==t(n,n))return a;do{let t=s+a>>>1;0>r(e[t],n)?s=t+1:a=t}while(s<a)}return s}function s(e,t,r=0,a=e.length){let o=i(e,t,r,a-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o}return 2!==e.length?(t=ox,r=(t,r)=>ox(e(t),r),n=(t,r)=>e(t)-r):(t=e===ox||e===o_?e:oI,r=e,n=e),{left:i,center:s,right:function(e,n,i=0,s=e.length){if(i<s){if(0!==t(n,n))return s;do{let t=i+s>>>1;0>=r(e[t],n)?i=t+1:s=t}while(i<s)}return i}}}function oI(){return 0}function oA(e){return null===e?NaN:+e}function*ok(e,t){if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(yield t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n*=1)>=n&&(yield n)}}let oR=oO(ox),oD=oR.right;oR.left,oO(oA).center;let oN=oD;function oP(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function oM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function oj(){}var oL=.7,oB=1.4285714285714286,oF="\\s*([+-]?\\d+)\\s*",oU="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oV="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oz=/^#([0-9a-f]{3,8})$/,oq=RegExp(`^rgb\\(${oF},${oF},${oF}\\)$`),o$=RegExp(`^rgb\\(${oV},${oV},${oV}\\)$`),oG=RegExp(`^rgba\\(${oF},${oF},${oF},${oU}\\)$`),oW=RegExp(`^rgba\\(${oV},${oV},${oV},${oU}\\)$`),oK=RegExp(`^hsl\\(${oU},${oV},${oV}\\)$`),oH=RegExp(`^hsla\\(${oU},${oV},${oV},${oU}\\)$`),oQ={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function oY(){return this.rgb().formatHex()}function oX(){return this.rgb().formatRgb()}function oJ(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=oz.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?oZ(t):3===r?new o3(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?o0(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?o0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=oq.exec(e))?new o3(t[1],t[2],t[3],1):(t=o$.exec(e))?new o3(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=oG.exec(e))?o0(t[1],t[2],t[3],t[4]):(t=oW.exec(e))?o0(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=oK.exec(e))?le(t[1],t[2]/100,t[3]/100,1):(t=oH.exec(e))?le(t[1],t[2]/100,t[3]/100,t[4]):oQ.hasOwnProperty(e)?oZ(oQ[e]):"transparent"===e?new o3(NaN,NaN,NaN,0):null}function oZ(e){return new o3(e>>16&255,e>>8&255,255&e,1)}function o0(e,t,r,n){return n<=0&&(e=t=r=NaN),new o3(e,t,r,n)}function o1(e){return(e instanceof oj||(e=oJ(e)),e)?new o3((e=e.rgb()).r,e.g,e.b,e.opacity):new o3}function o2(e,t,r,n){return 1==arguments.length?o1(e):new o3(e,t,r,null==n?1:n)}function o3(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function o6(){return`#${o9(this.r)}${o9(this.g)}${o9(this.b)}`}function o4(){return`#${o9(this.r)}${o9(this.g)}${o9(this.b)}${o9((isNaN(this.opacity)?1:this.opacity)*255)}`}function o5(){let e=o8(this.opacity);return`${1===e?"rgb(":"rgba("}${o7(this.r)}, ${o7(this.g)}, ${o7(this.b)}${1===e?")":`, ${e})`}`}function o8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function o7(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function o9(e){return((e=o7(e))<16?"0":"")+e.toString(16)}function le(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ln(e,t,r,n)}function lt(e){if(e instanceof ln)return new ln(e.h,e.s,e.l,e.opacity);if(e instanceof oj||(e=oJ(e)),!e)return new ln;if(e instanceof ln)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),a=NaN,o=s-i,l=(s+i)/2;return o?(a=t===s?(r-n)/o+(r<n)*6:r===s?(n-t)/o+2:(t-r)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new ln(a,o,l,e.opacity)}function lr(e,t,r,n){return 1==arguments.length?lt(e):new ln(e,t,r,null==n?1:n)}function ln(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function li(e){return(e=(e||0)%360)<0?e+360:e}function ls(e){return Math.max(0,Math.min(1,e||0))}function la(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function lo(e,t,r,n,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*r+(1+3*e+3*s-3*a)*n+a*i)/6}function ll(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],s=e[n+1],a=n>0?e[n-1]:2*i-s,o=n<t-1?e[n+2]:2*s-i;return lo((r-n/t)*t,a,i,s,o)}}function lu(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],s=e[n%t],a=e[(n+1)%t],o=e[(n+2)%t];return lo((r-n/t)*t,i,s,a,o)}}oP(oj,oJ,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oY,formatHex:oY,formatHex8:function e(){return this.rgb().formatHex8()},formatHsl:function e(){return lt(this).formatHsl()},formatRgb:oX,toString:oX}),oP(o3,o2,oM(oj,{brighter(e){return e=null==e?oB:Math.pow(oB,e),new o3(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?oL:Math.pow(oL,e),new o3(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new o3(o7(this.r),o7(this.g),o7(this.b),o8(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:o6,formatHex:o6,formatHex8:o4,formatRgb:o5,toString:o5})),oP(ln,lr,oM(oj,{brighter(e){return e=null==e?oB:Math.pow(oB,e),new ln(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?oL:Math.pow(oL,e),new ln(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new o3(la(e>=240?e-240:e+120,i,n),la(e,i,n),la(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ln(li(this.h),ls(this.s),ls(this.l),o8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=o8(this.opacity);return`${1===e?"hsl(":"hsla("}${li(this.h)}, ${100*ls(this.s)}%, ${100*ls(this.l)}%${1===e?")":`, ${e})`}`}}));let lc=e=>()=>e;function ld(e,t){return function(r){return e+r*t}}function lh(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function lf(e){return 1==(e*=1)?lp:function(t,r){return r-t?lh(t,r,e):lc(isNaN(t)?r:t)}}function lp(e,t){var r=t-e;return r?ld(e,r):lc(isNaN(e)?t:e)}let lg=function e(t){var r=lf(t);function n(e,t){var n=r((e=o2(e)).r,(t=o2(t)).r),i=r(e.g,t.g),s=r(e.b,t.b),a=lp(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=s(t),e.opacity=a(t),e+""}}return n.gamma=e,n}(1);function lm(e){return function(t){var r,n,i=t.length,s=Array(i),a=Array(i),o=Array(i);for(r=0;r<i;++r)n=o2(t[r]),s[r]=n.r||0,a[r]=n.g||0,o[r]=n.b||0;return s=e(s),a=e(a),o=e(o),n.opacity=1,function(e){return n.r=s(e),n.g=a(e),n.b=o(e),n+""}}}function ly(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,s=Array(i),a=Array(n);for(r=0;r<i;++r)s[r]=lI(e[r],t[r]);for(;r<n;++r)a[r]=t[r];return function(e){for(r=0;r<i;++r)a[r]=s[r](e);return a}}function lv(e,t){var r=new Date;return e*=1,t*=1,function(n){return r.setTime(e*(1-n)+t*n),r}}function lb(e,t){return e*=1,t*=1,function(r){return e*(1-r)+t*r}}function lS(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=lI(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}lm(ll),lm(lu);var lw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lT=RegExp(lw.source,"g");function lE(e){return function(){return e}}function lC(e){return function(t){return e(t)+""}}function lx(e,t){var r,n,i,s=lw.lastIndex=lT.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(r=lw.exec(e))&&(n=lT.exec(t));)(i=n.index)>s&&(i=t.slice(s,i),o[a]?o[a]+=i:o[++a]=i),(r=r[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:lb(r,n)})),s=lT.lastIndex;return s<t.length&&(i=t.slice(s),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?lC(l[0].x):lE(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)o[(r=l[n]).i]=r.x(e);return o.join("")})}function l_(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(s){for(r=0;r<n;++r)i[r]=e[r]*(1-s)+t[r]*s;return i}}function lO(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lI(e,t){var r,n=typeof t;return null==t||"boolean"===n?lc(t):("number"===n?lb:"string"===n?(r=oJ(t))?(t=r,lg):lx:t instanceof oJ?lg:t instanceof Date?lv:lO(t)?l_:Array.isArray(t)?ly:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?lS:lb)(e,t)}function lA(e,t){return e*=1,t*=1,function(r){return Math.round(e*(1-r)+t*r)}}function lk(e){return function(){return e}}function lR(e){return+e}var lD=[0,1];function lN(e){return e}function lP(e,t){return(t-=e*=1)?function(r){return(r-e)/t}:lk(isNaN(t)?NaN:.5)}function lM(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}function lj(e,t,r){var n=e[0],i=e[1],s=t[0],a=t[1];return i<n?(n=lP(i,n),s=r(a,s)):(n=lP(n,i),s=r(s,a)),function(e){return s(n(e))}}function lL(e,t,r){var n=Math.min(e.length,t.length)-1,i=Array(n),s=Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)i[a]=lP(e[a],e[a+1]),s[a]=r(t[a],t[a+1]);return function(t){var r=oN(e,t,1,n)-1;return s[r](i[r](t))}}function lB(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lF(){var e,t,r,n,i,s,a=lD,o=lD,l=lI,u=lN;function c(){var e=Math.min(a.length,o.length);return u!==lN&&(u=lM(a[0],a[e-1])),n=e>2?lL:lj,i=s=null,d}function d(t){return null==t||isNaN(t*=1)?r:(i||(i=n(a.map(e),o,l)))(e(u(t)))}return d.invert=function(r){return u(t((s||(s=n(o,a.map(e),lb)))(r)))},d.domain=function(e){return arguments.length?(a=Array.from(e,lR),c()):a.slice()},d.range=function(e){return arguments.length?(o=Array.from(e),c()):o.slice()},d.rangeRound=function(e){return o=Array.from(e),l=lA,c()},d.clamp=function(e){return arguments.length?(u=!!e||lN,c()):u!==lN},d.interpolate=function(e){return arguments.length?(l=e,c()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,c()}}function lU(){return lF()(lN,lN)}var lV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lz(e){var t;if(!(t=lV.exec(e)))throw Error("invalid format: "+e);return new lq({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function lq(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function l$(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function lG(e){return(e=l$(Math.abs(e)))?e[1]:NaN}function lW(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(lG(t)/3)))-lG(Math.abs(e)))}function lK(e,t){return function(r,n){for(var i=r.length,s=[],a=0,o=e[0],l=0;i>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),s.push(r.substring(i-=o,i+o)),!((l+=o+1)>n));)o=e[a=(a+1)%e.length];return s.reverse().join(t)}}function lH(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function lQ(e){e:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}function lY(e,t){var r=l$(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+Array(i-n.length+2).join("0")}lz.prototype=lq.prototype,lq.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let lX={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lY(100*e,t),r:lY,s:function(e,t){var r=l$(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(d0=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=n.length;return s===a?n:s>a?n+Array(s-a+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+Array(1-s).join("0")+l$(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lJ(e){return e}var lZ=Array.prototype.map,l0=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function l1(e){var t=void 0===e.grouping||void 0===e.thousands?lJ:lK(lZ.call(e.grouping,Number),e.thousands+""),r=void 0===e.currency?"":e.currency[0]+"",n=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?lJ:lH(lZ.call(e.numerals,String)),a=void 0===e.percent?"%":e.percent+"",o=void 0===e.minus?"−":e.minus+"",l=void 0===e.nan?"NaN":e.nan+"";function u(e){var u=(e=lz(e)).fill,c=e.align,d=e.sign,h=e.symbol,f=e.zero,p=e.width,g=e.comma,m=e.precision,y=e.trim,v=e.type;"n"===v?(g=!0,v="g"):lX[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===u&&"="===c)&&(f=!0,u="0",c="=");var b="$"===h?r:"#"===h&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",S="$"===h?n:/[%p]/.test(v)?a:"",w=lX[v],T=/[defgprs%]/.test(v);function E(e){var r,n,a,h=b,E=S;if("c"===v)E=w(e)+E,e="";else{var C=(e*=1)<0||1/e<0;if(e=isNaN(e)?l:w(Math.abs(e),m),y&&(e=lQ(e)),C&&0==+e&&"+"!==d&&(C=!1),h=(C?"("===d?d:o:"-"===d||"("===d?"":d)+h,E=("s"===v?l0[8+d0/3]:"")+E+(C&&"("===d?")":""),T){for(r=-1,n=e.length;++r<n;)if(48>(a=e.charCodeAt(r))||a>57){E=(46===a?i+e.slice(r+1):e.slice(r))+E,e=e.slice(0,r);break}}}g&&!f&&(e=t(e,1/0));var x=h.length+e.length+E.length,_=x<p?Array(p-x+1).join(u):"";switch(g&&f&&(e=t(_+e,_.length?p-E.length:1/0),_=""),c){case"<":e=h+e+E+_;break;case"=":e=h+_+e+E;break;case"^":e=_.slice(0,x=_.length>>1)+h+e+E+_.slice(x);break;default:e=_+h+e+E}return s(e)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return e+""},E}function c(e,t){var r=u(((e=lz(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(lG(t)/3))),i=Math.pow(10,-n),s=l0[8+n/3];return function(e){return r(i*e)+s}}return{format:u,formatPrefix:c}}function l2(e,t){return Math.max(0,lG(t=Math.abs(t)-(e=Math.abs(e)))-lG(e))+1}function l3(e){return Math.max(0,-lG(Math.abs(e)))}function l6(e,t,r,n){var i,s=oC(e,t,r);switch((n=lz(null==n?",f":n)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(i=lW(s,a))||(n.precision=i),d3(n,a);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=l2(s,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=l3(s))||(n.precision=i-("%"===n.type)*2)}return d2(n)}function l4(e){var t=e.domain;return e.ticks=function(e){var r=t();return oT(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return l6(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,s=t(),a=0,o=s.length-1,l=s[a],u=s[o],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=o,o=i);c-- >0;){if((i=oE(l,u,r))===n)return s[a]=l,s[o]=u,t(s);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else if(i<0)l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i;else break;n=i}return e},e}function l5(){var e=lU();return e.copy=function(){return lB(e,l5())},as.apply(e,arguments),l4(e)}function l8(e){var t;function r(e){return null==e||isNaN(e*=1)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,lR),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return l8(e).unknown(t)},e=arguments.length?Array.from(e,lR):[0,1],l4(r)}function l7(e,t){e=e.slice();var r,n=0,i=e.length-1,s=e[n],a=e[i];return a<s&&(r=n,n=i,i=r,r=s,s=a,a=r),e[n]=t.floor(s),e[i]=t.ceil(a),e}function l9(e){return Math.log(e)}function ue(e){return Math.exp(e)}function ut(e){return-Math.log(-e)}function ur(e){return-Math.exp(-e)}function un(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ui(e){return 10===e?un:e===Math.E?Math.exp:t=>Math.pow(e,t)}function us(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ua(e){return(t,r)=>-e(-t,r)}function uo(e){let t,r,n=e(l9,ue),i=n.domain,s=10;function a(){return t=us(s),r=ui(s),i()[0]<0?(t=ua(t),r=ua(r),e(ut,ur)):e(l9,ue),n}return n.base=function(e){return arguments.length?(s=+e,a()):s},n.domain=function(e){return arguments.length?(i(e),a()):i()},n.ticks=e=>{let n,a,o=i(),l=o[0],u=o[o.length-1],c=u<l;c&&([l,u]=[u,l]);let d=t(l),h=t(u),f=null==e?10:+e,p=[];if(!(s%1)&&h-d<f){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(n=1;n<s;++n)if(!((a=d<0?n/r(-d):n*r(d))<l)){if(a>u)break;p.push(a)}}else for(;d<=h;++d)for(n=s-1;n>=1;--n)if(!((a=d>0?n/r(-d):n*r(d))<l)){if(a>u)break;p.push(a)}2*p.length<f&&(p=oT(l,u,f))}else p=oT(d,h,Math.min(h-d,f)).map(r);return c?p.reverse():p},n.tickFormat=(e,i)=>{if(null==e&&(e=10),null==i&&(i=10===s?"s":","),"function"!=typeof i&&(s%1||null!=(i=lz(i)).precision||(i.trim=!0),i=d2(i)),e===1/0)return i;let a=Math.max(1,s*e/n.ticks().length);return e=>{let n=e/r(Math.round(t(e)));return n*s<s-.5&&(n*=s),n<=a?i(e):""}},n.nice=()=>i(l7(i(),{floor:e=>r(Math.floor(t(e))),ceil:e=>r(Math.ceil(t(e)))})),n}function ul(){let e=uo(lF()).domain([1,10]);return e.copy=()=>lB(e,ul()).base(e.base()),as.apply(e,arguments),e}function uu(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uc(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ud(e){var t=1,r=e(uu(1),uc(t));return r.constant=function(r){return arguments.length?e(uu(t=+r),uc(t)):t},l4(r)}function uh(){var e=ud(lF());return e.copy=function(){return lB(e,uh()).constant(e.constant())},as.apply(e,arguments)}function uf(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function up(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ug(e){return e<0?-e*e:e*e}function um(e){var t=e(lN,lN),r=1;function n(){return 1===r?e(lN,lN):.5===r?e(up,ug):e(uf(r),uf(1/r))}return t.exponent=function(e){return arguments.length?(r=+e,n()):r},l4(t)}function uy(){var e=um(lF());return e.copy=function(){return lB(e,uy()).exponent(e.exponent())},as.apply(e,arguments),e}function uv(){return uy.apply(null,arguments).exponent(.5)}function ub(e){return Math.sign(e)*e*e}function uS(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function uw(){var e,t=lU(),r=[0,1],n=!1;function i(r){var i=uS(t(r));return isNaN(i)?e:n?Math.round(i):i}return i.invert=function(e){return t.invert(ub(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((r=Array.from(e,lR)).map(ub)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(n=!!e,i):n},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return uw(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},as.apply(i,arguments),l4(i)}function uT(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function uE(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function uC(e=ox){if(e===ox)return ux;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,r)=>{let n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}function ux(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}function u_(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=void 0===i?ux:uC(i);n>r;){if(n-r>600){let s=n-r+1,a=t-r+1,o=Math.log(s),l=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1),c=Math.max(r,Math.floor(t-a*l/s+u)),d=Math.min(n,Math.floor(t+(s-a)*l/s+u));u_(e,t,c,d,i)}let s=e[t],a=r,o=n;for(uO(e,r,t),i(e[n],s)>0&&uO(e,r,n);a<o;){for(uO(e,a,o),++a,--o;0>i(e[a],s);)++a;for(;i(e[o],s)>0;)--o}0===i(e[r],s)?uO(e,r,o):uO(e,++o,n),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function uO(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function uI(e,t,r){if(!(!(n=(e=Float64Array.from(ok(e,r))).length)||isNaN(t*=1))){if(t<=0||n<2)return uE(e);if(t>=1)return uT(e);var n,i=(n-1)*t,s=Math.floor(i),a=uT(u_(e,s).subarray(0,s+1)),o=uE(e.subarray(s+1));return a+(o-a)*(i-s)}}function uA(e,t,r=oA){if(!(!(n=e.length)||isNaN(t*=1))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),a=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return a+(o-a)*(i-s)}}function uk(){var e,t=[],r=[],n=[];function i(){var e=0,i=Math.max(1,r.length);for(n=Array(i-1);++e<i;)n[e-1]=uA(t,e/i);return s}function s(t){return null==t||isNaN(t*=1)?e:r[oN(n,t)]}return s.invertExtent=function(e){var i=r.indexOf(e);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();for(let r of(t=[],e))null==r||isNaN(r*=1)||t.push(r);return t.sort(ox),i()},s.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return n.slice()},s.copy=function(){return uk().domain(t).range(r).unknown(e)},as.apply(s,arguments)}function uR(){var e,t=0,r=1,n=1,i=[.5],s=[0,1];function a(t){return null!=t&&t<=t?s[oN(i,t,0,n)]:e}function o(){var e=-1;for(i=Array(n);++e<n;)i[e]=((e+1)*r-(e-n)*t)/(n+1);return a}return a.domain=function(e){return arguments.length?([t,r]=e,t*=1,r*=1,o()):[t,r]},a.range=function(e){return arguments.length?(n=(s=Array.from(e)).length-1,o()):s.slice()},a.invertExtent=function(e){var a=s.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=n?[i[n-1],r]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length&&(e=t),a},a.thresholds=function(){return i.slice()},a.copy=function(){return uR().domain([t,r]).range(s).unknown(e)},as.apply(l4(a),arguments)}function uD(){var e,t=[.5],r=[0,1],n=1;function i(i){return null!=i&&i<=i?r[oN(t,i,0,n)]:e}return i.domain=function(e){return arguments.length?(n=Math.min((t=Array.from(e)).length,r.length-1),i):t.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return uD().domain(t).range(r).unknown(e)},as.apply(i,arguments)}(function e(e){return d2=(d1=l1(e)).format,d3=d1.formatPrefix})({thousands:",",grouping:[3],currency:["$",""]});let uN=1e3,uP=6e4,uM=36e5,uj=864e5,uL=6048e5,uB=2592e6,uF=31536e6,uU=new Date,uV=new Date;function uz(e,t,r,n){function i(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{let t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,s)=>{let a,o=[];if(r=i.ceil(r),s=null==s?1:Math.floor(s),!(r<n)||!(s>0))return o;do o.push(a=new Date(+r)),t(r,s),e(r);while(a<r&&r<n);return o},i.filter=r=>uz(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(i.count=(t,n)=>(uU.setTime(+t),uV.setTime(+n),e(uU),e(uV),Math.floor(r(uU,uV))),i.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?i.filter(n?t=>n(t)%e==0:t=>i.count(0,t)%e==0):i:null),i}let uq=uz(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);uq.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?uz(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):uq:null,uq.range;let u$=uz(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*uN)},(e,t)=>(t-e)/uN,e=>e.getUTCSeconds());u$.range;let uG=uz(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uN)},(e,t)=>{e.setTime(+e+t*uP)},(e,t)=>(t-e)/uP,e=>e.getMinutes());uG.range;let uW=uz(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*uP)},(e,t)=>(t-e)/uP,e=>e.getUTCMinutes());uW.range;let uK=uz(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uN-e.getMinutes()*uP)},(e,t)=>{e.setTime(+e+t*uM)},(e,t)=>(t-e)/uM,e=>e.getHours());uK.range;let uH=uz(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*uM)},(e,t)=>(t-e)/uM,e=>e.getUTCHours());uH.range;let uQ=uz(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uP)/uj,e=>e.getDate()-1);uQ.range;let uY=uz(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uj,e=>e.getUTCDate()-1);uY.range;let uX=uz(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uj,e=>Math.floor(e/uj));function uJ(e){return uz(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uP)/uL)}uX.range;let uZ=uJ(0),u0=uJ(1),u1=uJ(2),u2=uJ(3),u3=uJ(4),u6=uJ(5),u4=uJ(6);function u5(e){return uz(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/uL)}uZ.range,u0.range,u1.range,u2.range,u3.range,u6.range,u4.range;let u8=u5(0),u7=u5(1),u9=u5(2),ce=u5(3),ct=u5(4),cr=u5(5),cn=u5(6);u8.range,u7.range,u9.range,ce.range,ct.range,cr.range,cn.range;let ci=uz(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ci.range;let cs=uz(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());cs.range;let ca=uz(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ca.every=e=>isFinite(e=Math.floor(e))&&e>0?uz(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,ca.range;let co=uz(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function cl(e,t,r,n,i,s){let a=[[u$,1,uN],[u$,5,5*uN],[u$,15,15*uN],[u$,30,30*uN],[s,1,uP],[s,5,5*uP],[s,15,15*uP],[s,30,30*uP],[i,1,uM],[i,3,3*uM],[i,6,6*uM],[i,12,12*uM],[n,1,uj],[n,2,2*uj],[r,1,uL],[t,1,uB],[t,3,3*uB],[e,1,uF]];function o(t,r,n){let i=Math.abs(r-t)/n,s=oO(([,,e])=>e).right(a,i);if(s===a.length)return e.every(oC(t/uF,r/uF,n));if(0===s)return uq.every(Math.max(oC(t,r,n),1));let[o,l]=a[i/a[s-1][2]<a[s][2]/i?s-1:s];return o.every(l)}return[function(e,t,r){let n=t<e;n&&([e,t]=[t,e]);let i=r&&"function"==typeof r.range?r:o(e,t,r),s=i?i.range(e,+t+1):[];return n?s.reverse():s},o]}co.every=e=>isFinite(e=Math.floor(e))&&e>0?uz(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,co.range;let[cu,cc]=cl(co,cs,u8,uX,uH,uW),[cd,ch]=cl(ca,ci,uZ,uQ,uK,uG);function cf(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function cm(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,u=cE(i),c=cC(i),d=cE(s),h=cC(s),f=cE(a),p=cC(a),g=cE(o),m=cC(o),y=cE(l),v=cC(l),b={a:N,A:P,b:M,B:j,c:null,d:cG,e:cG,f:cY,g:c8,G:c9,H:cW,I:cK,j:cH,L:cQ,m:cX,M:cJ,p:L,q:B,Q:dE,s:dC,S:cZ,u:c0,U:c1,V:c3,w:c6,W:c4,x:null,X:null,y:c5,Y:c7,Z:de,"%":dT},S={a:F,A:U,b:V,B:z,c:null,d:dt,e:dt,f:da,g:dv,G:dS,H:dr,I:dn,j:di,L:ds,m:dl,M:du,p:q,q:$,Q:dE,s:dC,S:dc,u:dd,U:dh,V:dp,w:dg,W:dm,x:null,X:null,y:dy,Y:db,Z:dw,"%":dT},w={a:_,A:O,b:I,B:A,c:k,d:cM,e:cM,f:cV,g:cR,G:ck,H:cL,I:cL,j:cj,L:cU,m:cP,M:cB,p:x,q:cN,Q:cq,s:c$,S:cF,u:c_,U:cO,V:cI,w:cx,W:cA,x:R,X:D,y:cR,Y:ck,Z:cD,"%":cz};function T(e,t){return function(r){var n,i,s,a=[],o=-1,l=0,u=e.length;for(r instanceof Date||(r=new Date(+r));++o<u;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(i=cy[n=e.charAt(++o)])?n=e.charAt(++o):i="e"===n?" ":"0",(s=t[n])&&(n=s(r,i)),a.push(n),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function E(e,t){return function(r){var n,i,s=cg(1900,void 0,1);if(C(s,e,r+="",0)!=r.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(!t||"Z"in s||(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(n=(i=(n=cp(cg(s.y,0,1))).getUTCDay())>4||0===i?u7.ceil(n):u7(n),n=uY.offset(n,(s.V-1)*7),s.y=n.getUTCFullYear(),s.m=n.getUTCMonth(),s.d=n.getUTCDate()+(s.w+6)%7):(n=(i=(n=cf(cg(s.y,0,1))).getDay())>4||0===i?u0.ceil(n):u0(n),n=uQ.offset(n,(s.V-1)*7),s.y=n.getFullYear(),s.m=n.getMonth(),s.d=n.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:+("W"in s)),i="Z"in s?cp(cg(s.y,0,1)).getUTCDay():cf(cg(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,cp(s)):cf(s)}}function C(e,t,r,n){for(var i,s,a=0,o=t.length,l=r.length;a<o;){if(n>=l)return -1;if(37===(i=t.charCodeAt(a++))){if(!(s=w[(i=t.charAt(a++))in cy?t.charAt(a++):i])||(n=s(e,r,n))<0)return -1}else if(i!=r.charCodeAt(n++))return -1}return n}function x(e,t,r){var n=u.exec(t.slice(r));return n?(e.p=c.get(n[0].toLowerCase()),r+n[0].length):-1}function _(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1}function O(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=h.get(n[0].toLowerCase()),r+n[0].length):-1}function I(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1}function A(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1}function k(e,r,n){return C(e,t,r,n)}function R(e,t,n){return C(e,r,t,n)}function D(e,t,r){return C(e,n,t,r)}function N(e){return a[e.getDay()]}function P(e){return s[e.getDay()]}function M(e){return l[e.getMonth()]}function j(e){return o[e.getMonth()]}function L(e){return i[+(e.getHours()>=12)]}function B(e){return 1+~~(e.getMonth()/3)}function F(e){return a[e.getUTCDay()]}function U(e){return s[e.getUTCDay()]}function V(e){return l[e.getUTCMonth()]}function z(e){return o[e.getUTCMonth()]}function q(e){return i[+(e.getUTCHours()>=12)]}function $(e){return 1+~~(e.getUTCMonth()/3)}return b.x=T(r,b),b.X=T(n,b),b.c=T(t,b),S.x=T(r,S),S.X=T(n,S),S.c=T(t,S),{format:function(e){var t=T(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=T(e+="",S);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e+="",!0);return t.toString=function(){return e},t}}}var cy={"-":"",_:" ",0:"0"},cv=/^\s*\d+/,cb=/^%/,cS=/[\\^$*+?|[\]().{}]/g;function cw(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?Array(r-s+1).join(t)+i:i)}function cT(e){return e.replace(cS,"\\$&")}function cE(e){return RegExp("^(?:"+e.map(cT).join("|")+")","i")}function cC(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function cx(e,t,r){var n=cv.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function c_(e,t,r){var n=cv.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function cO(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function cI(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cA(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ck(e,t,r){var n=cv.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function cR(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cD(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function cN(e,t,r){var n=cv.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function cP(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function cM(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function cj(e,t,r){var n=cv.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function cL(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function cB(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function cF(e,t,r){var n=cv.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function cU(e,t,r){var n=cv.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function cV(e,t,r){var n=cv.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function cz(e,t,r){var n=cb.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function cq(e,t,r){var n=cv.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function c$(e,t,r){var n=cv.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function cG(e,t){return cw(e.getDate(),t,2)}function cW(e,t){return cw(e.getHours(),t,2)}function cK(e,t){return cw(e.getHours()%12||12,t,2)}function cH(e,t){return cw(1+uQ.count(ca(e),e),t,3)}function cQ(e,t){return cw(e.getMilliseconds(),t,3)}function cY(e,t){return cQ(e,t)+"000"}function cX(e,t){return cw(e.getMonth()+1,t,2)}function cJ(e,t){return cw(e.getMinutes(),t,2)}function cZ(e,t){return cw(e.getSeconds(),t,2)}function c0(e){var t=e.getDay();return 0===t?7:t}function c1(e,t){return cw(uZ.count(ca(e)-1,e),t,2)}function c2(e){var t=e.getDay();return t>=4||0===t?u3(e):u3.ceil(e)}function c3(e,t){return e=c2(e),cw(u3.count(ca(e),e)+(4===ca(e).getDay()),t,2)}function c6(e){return e.getDay()}function c4(e,t){return cw(u0.count(ca(e)-1,e),t,2)}function c5(e,t){return cw(e.getFullYear()%100,t,2)}function c8(e,t){return cw((e=c2(e)).getFullYear()%100,t,2)}function c7(e,t){return cw(e.getFullYear()%1e4,t,4)}function c9(e,t){var r=e.getDay();return cw((e=r>=4||0===r?u3(e):u3.ceil(e)).getFullYear()%1e4,t,4)}function de(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+cw(t/60|0,"0",2)+cw(t%60,"0",2)}function dt(e,t){return cw(e.getUTCDate(),t,2)}function dr(e,t){return cw(e.getUTCHours(),t,2)}function dn(e,t){return cw(e.getUTCHours()%12||12,t,2)}function di(e,t){return cw(1+uY.count(co(e),e),t,3)}function ds(e,t){return cw(e.getUTCMilliseconds(),t,3)}function da(e,t){return ds(e,t)+"000"}function dl(e,t){return cw(e.getUTCMonth()+1,t,2)}function du(e,t){return cw(e.getUTCMinutes(),t,2)}function dc(e,t){return cw(e.getUTCSeconds(),t,2)}function dd(e){var t=e.getUTCDay();return 0===t?7:t}function dh(e,t){return cw(u8.count(co(e)-1,e),t,2)}function df(e){var t=e.getUTCDay();return t>=4||0===t?ct(e):ct.ceil(e)}function dp(e,t){return e=df(e),cw(ct.count(co(e),e)+(4===co(e).getUTCDay()),t,2)}function dg(e){return e.getUTCDay()}function dm(e,t){return cw(u7.count(co(e)-1,e),t,2)}function dy(e,t){return cw(e.getUTCFullYear()%100,t,2)}function dv(e,t){return cw((e=df(e)).getUTCFullYear()%100,t,2)}function db(e,t){return cw(e.getUTCFullYear()%1e4,t,4)}function dS(e,t){var r=e.getUTCDay();return cw((e=r>=4||0===r?ct(e):ct.ceil(e)).getUTCFullYear()%1e4,t,4)}function dw(){return"+0000"}function dT(){return"%"}function dE(e){return+e}function dC(e){return Math.floor(e/1e3)}function dx(e){return new Date(e)}function d_(e){return e instanceof Date?+e:+new Date(+e)}function dO(e,t,r,n,i,s,a,o,l,u){var c=lU(),d=c.invert,h=c.domain,f=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),S=u("%Y");function w(e){return(l(e)<e?f:o(e)<e?p:a(e)<e?g:s(e)<e?m:n(e)<e?i(e)<e?y:v:r(e)<e?b:S)(e)}return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?h(Array.from(e,d_)):h().map(dx)},c.ticks=function(t){var r=h();return e(r[0],r[r.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:u(t)},c.nice=function(e){var r=h();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?h(l7(r,e)):c},c.copy=function(){return lB(c,dO(e,t,r,n,i,s,a,o,l,u))},c}function dI(){return as.apply(dO(cd,ch,ca,ci,uZ,uQ,uK,uG,u$,d4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dA(){return as.apply(dO(cu,cc,co,cs,u8,uY,uH,uW,u$,d8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dk(){var e,t,r,n,i,s=0,a=1,o=lN,l=!1;function u(t){return null==t||isNaN(t*=1)?i:o(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var r,n;return arguments.length?([r,n]=t,o=e(r,n),u):[o(0),o(1)]}}return u.domain=function(i){return arguments.length?([s,a]=i,e=n(s*=1),t=n(a*=1),r=e===t?0:1/(t-e),u):[s,a]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(o=e,u):o},u.range=c(lI),u.rangeRound=c(lA),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return n=i,e=i(s),t=i(a),r=e===t?0:1/(t-e),u}}function dR(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dD(){var e=l4(dk()(lN));return e.copy=function(){return dR(e,dD())},aa.apply(e,arguments)}function dN(){var e=uo(dk()).domain([1,10]);return e.copy=function(){return dR(e,dN()).base(e.base())},aa.apply(e,arguments)}function dP(){var e=ud(dk());return e.copy=function(){return dR(e,dP()).constant(e.constant())},aa.apply(e,arguments)}function dM(){var e=um(dk());return e.copy=function(){return dR(e,dM()).exponent(e.exponent())},aa.apply(e,arguments)}function dj(){return dM.apply(null,arguments).exponent(.5)}function dL(){var e=[],t=lN;function r(r){if(null!=r&&!isNaN(r*=1))return t((oN(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();for(let r of(e=[],t))null==r||isNaN(r*=1)||e.push(r);return e.sort(ox),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>uI(e,n/t))},r.copy=function(){return dL(t).domain(e)},aa.apply(r,arguments)}function dB(e,t){void 0===t&&(t=e,e=lI);for(var r=0,n=t.length-1,i=t[0],s=Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return s[t](e-t)}}function dF(){var e,t,r,n,i,s,a,o=0,l=.5,u=1,c=1,d=lN,h=!1;function f(e){return isNaN(e*=1)?a:(e=.5+((e=+s(e))-t)*(c*e<c*t?n:i),d(h?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,d=dB(e,[r,n,i]),f):[d(0),d(.5),d(1)]}}return f.domain=function(a){return arguments.length?([o,l,u]=a,e=s(o*=1),t=s(l*=1),r=s(u*=1),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),c=t<e?-1:1,f):[o,l,u]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(d=e,f):d},f.range=p(lI),f.rangeRound=p(lA),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return s=a,e=a(o),t=a(l),r=a(u),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),c=t<e?-1:1,f}}function dU(){var e=l4(dF()(lN));return e.copy=function(){return dR(e,dU())},aa.apply(e,arguments)}function dV(){var e=uo(dF()).domain([.1,1,10]);return e.copy=function(){return dR(e,dV()).base(e.base())},aa.apply(e,arguments)}function dz(){var e=ud(dF());return e.copy=function(){return dR(e,dz()).constant(e.constant())},aa.apply(e,arguments)}function dq(){var e=um(dF());return e.copy=function(){return dR(e,dq()).exponent(e.exponent())},aa.apply(e,arguments)}function d$(){return dq.apply(null,arguments).exponent(.5)}function dG(e,t){if((i=e.length)>1)for(var r,n,i,s=1,a=e[t[0]],o=a.length;s<i;++s)for(n=a,a=e[t[s]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function dW(e,t){if((n=e.length)>0){for(var r,n,i,s=0,a=e[0].length;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}dG(e,t)}}function dK(e,t){if((r=e.length)>0){for(var r,n=0,i=e[t[0]],s=i.length;n<s;++n){for(var a=0,o=0;a<r;++a)o+=e[a][n][1]||0;i[n][1]+=i[n][0]=-o/2}dG(e,t)}}function dH(e,t){if((i=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,i,s=0,a=1;a<n;++a){for(var o=0,l=0,u=0;o<i;++o){for(var c=e[t[o]],d=c[a][1]||0,h=(d-(c[a-1][1]||0))/2,f=0;f<o;++f){var p=e[t[f]];h+=(p[a][1]||0)-(p[a-1][1]||0)}l+=d,u+=h*d}r[a-1][1]+=r[a-1][0]=s,l&&(s-=u/l)}r[a-1][1]+=r[a-1][0]=s,dG(e,t)}}function dQ(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function dY(e){for(var t=e.length,r=Array(t);--t>=0;)r[t]=t;return r}function dX(e,t){return e[t]}function dJ(e){let t=[];return t.key=e,t}function dZ(){var e=rg([]),t=dY,r=dG,n=dX;function i(i){var s,a,o=Array.from(e.apply(this,arguments),dJ),l=o.length,u=-1;for(let e of i)for(s=0,++u;s<l;++s)(o[s][u]=[0,+n(e,o[s].key,u,i)]).data=e;for(s=0,a=dQ(t(o));s<l;++s)o[a[s]].index=s;return r(o,a),o}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:rg(Array.from(t)),i):e},i.value=function(e){return arguments.length?(n="function"==typeof e?e:rg(+e),i):n},i.order=function(e){return arguments.length?(t=null==e?dY:"function"==typeof e?e:rg(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(r=null==e?dG:e,i):r},i}(function e(e){return d4=(d6=cm(e)).format,d5=d6.parse,d8=d6.utcFormat,d7=d6.utcParse})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Array.prototype.slice;var d0,d1,d2,d3,d6,d4,d5,d8,d7,d9,he,ht=r(90453),hr=r.n(ht),hn=r(15883),hi=r.n(hn),hs=r(21592),ha=r.n(hs),ho=r(71967),hl=r.n(ho),hu=1e9,hc={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},hd=!0,hh="[DecimalError] ",hf=hh+"Invalid argument: ",hp=hh+"Exponent out of range: ",hg=Math.floor,hm=Math.pow,hy=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hv=1e7,hb=7,hS=0x1fffffffffffff,hw=hg(1286742750677284.5),hT={};function hE(e,t){var r,n,i,s,a,o,l,u,c=e.constructor,d=c.precision;if(!e.s||!t.s)return t.s||(t=new c(e)),hd?hN(t,d):t;if(l=e.d,u=t.d,a=e.e,i=t.e,l=l.slice(),s=a-i){for(s<0?(n=l,s=-s,o=u.length):(n=u,i=a,o=l.length),s>(o=(a=Math.ceil(d/hb))>o?a+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=l.length)-(s=u.length)<0&&(s=o,n=u,u=l,l=n),r=0;s;)r=(l[--s]=l[s]+u[s]+r)/hv|0,l[s]%=hv;for(r&&(l.unshift(r),++i),o=l.length;0==l[--o];)l.pop();return t.d=l,t.e=i,hd?hN(t,d):t}function hC(e,t,r){if(e!==~~e||e<t||e>r)throw Error(hf+e)}function hx(e){var t,r,n,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(r=hb-(n=e[t]+"").length)&&(s+=hk(r)),s+=n;(r=hb-(n=(a=e[t])+"").length)&&(s+=hk(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}hT.absoluteValue=hT.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},hT.comparedTo=hT.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,r=(n=s.d.length)<(i=e.d.length)?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1},hT.decimalPlaces=hT.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*hb;if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},hT.dividedBy=hT.div=function(e){return h_(this,new this.constructor(e))},hT.dividedToIntegerBy=hT.idiv=function(e){var t=this,r=t.constructor;return hN(h_(t,new r(e),0,1),r.precision)},hT.equals=hT.eq=function(e){return!this.cmp(e)},hT.exponent=function(){return hI(this)},hT.greaterThan=hT.gt=function(e){return this.cmp(e)>0},hT.greaterThanOrEqualTo=hT.gte=function(e){return this.cmp(e)>=0},hT.isInteger=hT.isint=function(){return this.e>this.d.length-2},hT.isNegative=hT.isneg=function(){return this.s<0},hT.isPositive=hT.ispos=function(){return this.s>0},hT.isZero=function(){return 0===this.s},hT.lessThan=hT.lt=function(e){return 0>this.cmp(e)},hT.lessThanOrEqualTo=hT.lte=function(e){return 1>this.cmp(e)},hT.logarithm=hT.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(he))throw Error(hh+"NaN");if(r.s<1)throw Error(hh+(r.s?"NaN":"-Infinity"));return r.eq(he)?new n(0):(hd=!1,t=h_(hR(r,s),hR(e,s),s),hd=!0,hN(t,i))},hT.minus=hT.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hP(t,e):hE(t,(e.s=-e.s,e))},hT.modulo=hT.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(!(e=new n(e)).s)throw Error(hh+"NaN");return r.s?(hd=!1,t=h_(r,e,0,1).times(e),hd=!0,r.minus(t)):hN(new n(r),i)},hT.naturalExponential=hT.exp=function(){return hO(this)},hT.naturalLogarithm=hT.ln=function(){return hR(this)},hT.negated=hT.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},hT.plus=hT.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?hE(t,e):hP(t,(e.s=-e.s,e))},hT.precision=hT.sd=function(e){var t,r,n,i=this;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(hf+e);if(t=hI(i)+1,r=(n=i.d.length-1)*hb+1,n=i.d[n]){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},hT.squareRoot=hT.sqrt=function(){var e,t,r,n,i,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(hh+"NaN")}for(e=hI(o),hd=!1,0==(i=Math.sqrt(+o))||i==1/0?(((t=hx(o.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=hg((e+1)/2)-(e<0||e%2),n=new l(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new l(i.toString()),i=a=(r=l.precision)+3;;)if(n=(s=n).plus(h_(o,s,a+2)).times(.5),hx(s.d).slice(0,a)===(t=hx(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(hN(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if("9999"!=t)break;a+=4}return hd=!0,hN(n,r)},hT.times=hT.mul=function(e){var t,r,n,i,s,a,o,l,u,c=this,d=c.constructor,h=c.d,f=(e=new d(e)).d;if(!c.s||!e.s)return new d(0);for(e.s*=c.s,r=c.e+e.e,(l=h.length)<(u=f.length)&&(s=h,h=f,f=s,a=l,l=u,u=a),s=[],n=a=l+u;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,i=l+n;i>n;)o=s[i]+f[n]*h[i-n-1]+t,s[i--]=o%hv|0,t=o/hv|0;s[i]=(s[i]+t)%hv|0}for(;!s[--a];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,hd?hN(e,d.precision):e},hT.toDecimalPlaces=hT.todp=function(e,t){var r=this,n=r.constructor;return(r=new n(r),void 0===e)?r:(hC(e,0,hu),void 0===t?t=n.rounding:hC(t,0,8),hN(r,e+hI(r)+1,t))},hT.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=hM(n,!0):(hC(e,0,hu),void 0===t?t=i.rounding:hC(t,0,8),r=hM(n=hN(new i(n),e+1,t),!0,e+1)),r},hT.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?hM(i):(hC(e,0,hu),void 0===t?t=s.rounding:hC(t,0,8),r=hM((n=hN(new s(i),e+hI(i)+1,t)).abs(),!1,e+hI(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)},hT.toInteger=hT.toint=function(){var e=this,t=e.constructor;return hN(new t(e),hI(e)+1,t.rounding)},hT.toNumber=function(){return+this},hT.toPower=hT.pow=function(e){var t,r,n,i,s,a,o=this,l=o.constructor,u=12,c=+(e=new l(e));if(!e.s)return new l(he);if(!(o=new l(o)).s){if(e.s<1)throw Error(hh+"Infinity");return o}if(o.eq(he))return o;if(n=l.precision,e.eq(he))return hN(o,n);if(a=(t=e.e)>=(r=e.d.length-1),s=o.s,a){if((r=c<0?-c:c)<=hS){for(i=new l(he),t=Math.ceil(n/hb+4),hd=!1;r%2&&hj((i=i.times(o)).d,t),0!==(r=hg(r/2));)hj((o=o.times(o)).d,t);return hd=!0,e.s<0?new l(he).div(i):hN(i,n)}}else if(s<0)throw Error(hh+"NaN");return s=s<0&&1&e.d[Math.max(t,r)]?-1:1,o.s=1,hd=!1,i=e.times(hR(o,n+u)),hd=!0,(i=hO(i)).s=s,i},hT.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return void 0===e?(r=hI(i),n=hM(i,r<=s.toExpNeg||r>=s.toExpPos)):(hC(e,1,hu),void 0===t?t=s.rounding:hC(t,0,8),r=hI(i=hN(new s(i),e,t)),n=hM(i,e<=r||r<=s.toExpNeg,e)),n},hT.toSignificantDigits=hT.tosd=function(e,t){var r=this,n=r.constructor;return void 0===e?(e=n.precision,t=n.rounding):(hC(e,1,hu),void 0===t?t=n.rounding:hC(t,0,8)),hN(new n(r),e,t)},hT.toString=hT.valueOf=hT.val=hT.toJSON=hT[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=hI(e),r=e.constructor;return hM(e,t<=r.toExpNeg||t>=r.toExpPos)};var h_=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%hv|0,n=r/hv|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=+(e[r]<t[r]),e[r]=n*hv+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,s,a){var o,l,u,c,d,h,f,p,g,m,y,v,b,S,w,T,E,C,x=n.constructor,_=n.s==i.s?1:-1,O=n.d,I=i.d;if(!n.s)return new x(n);if(!i.s)throw Error(hh+"Division by zero");for(u=0,l=n.e-i.e,E=I.length,w=O.length,p=(f=new x(_)).d=[];I[u]==(O[u]||0);)++u;if(I[u]>(O[u]||0)&&--l,(v=null==s?s=x.precision:a?s+(hI(n)-hI(i))+1:s)<0)return new x(0);if(v=v/hb+2|0,u=0,1==E)for(c=0,I=I[0],v++;(u<w||c)&&v--;u++)b=c*hv+(O[u]||0),p[u]=b/I|0,c=b%I|0;else{for((c=hv/(I[0]+1)|0)>1&&(I=e(I,c),O=e(O,c),E=I.length,w=O.length),S=E,m=(g=O.slice(0,E)).length;m<E;)g[m++]=0;(C=I.slice()).unshift(0),T=I[0],I[1]>=hv/2&&++T;do c=0,(o=t(I,g,E,m))<0?(y=g[0],E!=m&&(y=y*hv+(g[1]||0)),(c=y/T|0)>1?(c>=hv&&(c=hv-1),h=(d=e(I,c)).length,m=g.length,1==(o=t(d,g,h,m))&&(c--,r(d,E<h?C:I,h))):(0==c&&(o=c=1),d=I.slice()),(h=d.length)<m&&d.unshift(0),r(g,d,m),-1==o&&(m=g.length,(o=t(I,g,E,m))<1&&(c++,r(g,E<m?C:I,m))),m=g.length):0===o&&(c++,g=[0]),p[u++]=c,o&&g[0]?g[m++]=O[S]||0:(g=[O[S]],m=1);while((S++<w||void 0!==g[0])&&v--)}return p[0]||p.shift(),f.e=l,hN(f,a?s+hI(f)+1:s)}}();function hO(e,t){var r,n,i,s,a,o=0,l=0,u=e.constructor,c=u.precision;if(hI(e)>16)throw Error(hp+hI(e));if(!e.s)return new u(he);for(null==t?(hd=!1,a=c):a=t,s=new u(.03125);e.abs().gte(.1);)e=e.times(s),l+=5;for(a+=Math.log(hm(2,l))/Math.LN10*2+5|0,r=n=i=new u(he),u.precision=a;;){if(n=hN(n.times(e),a),r=r.times(++o),hx((s=i.plus(h_(n,r,a))).d).slice(0,a)===hx(i.d).slice(0,a)){for(;l--;)i=hN(i.times(i),a);return u.precision=c,null==t?(hd=!0,hN(i,c)):i}i=s}}function hI(e){for(var t=e.e*hb,r=e.d[0];r>=10;r/=10)t++;return t}function hA(e,t,r){if(t>e.LN10.sd())throw hd=!0,r&&(e.precision=r),Error(hh+"LN10 precision limit exceeded");return hN(new e(e.LN10),t)}function hk(e){for(var t="";e--;)t+="0";return t}function hR(e,t){var r,n,i,s,a,o,l,u,c,d=1,h=10,f=e,p=f.d,g=f.constructor,m=g.precision;if(f.s<1)throw Error(hh+(f.s?"NaN":"-Infinity"));if(f.eq(he))return new g(0);if(null==t?(hd=!1,u=m):u=t,f.eq(10))return null==t&&(hd=!0),hA(g,u);if(g.precision=u+=h,n=(r=hx(p)).charAt(0),!(15e14>Math.abs(s=hI(f))))return l=hA(g,u+2,m).times(s+""),f=hR(new g(n+"."+r.slice(1)),u-h).plus(l),g.precision=m,null==t?(hd=!0,hN(f,m)):f;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=hx((f=f.times(e)).d)).charAt(0),d++;for(s=hI(f),n>1?(f=new g("0."+r),s++):f=new g(n+"."+r.slice(1)),o=a=f=h_(f.minus(he),f.plus(he),u),c=hN(f.times(f),u),i=3;;){if(a=hN(a.times(c),u),hx((l=o.plus(h_(a,new g(i),u))).d).slice(0,u)===hx(o.d).slice(0,u))return o=o.times(2),0!==s&&(o=o.plus(hA(g,u+2,m).times(s+""))),o=h_(o,new g(d),u),g.precision=m,null==t?(hd=!0,hN(o,m)):o;o=l,i+=2}}function hD(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,e.e=hg((r=r-n-1)/hb),e.d=[],n=(r+1)%hb,r<0&&(n+=hb),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=hb;n<i;)e.d.push(+t.slice(n,n+=hb));n=hb-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),hd&&(e.e>hw||e.e<-hw))throw Error(hp+r)}else e.s=0,e.e=0,e.d=[0];return e}function hN(e,t,r){var n,i,s,a,o,l,u,c,d=e.d;for(a=1,s=d[0];s>=10;s/=10)a++;if((n=t-a)<0)n+=hb,i=t,u=d[c=0];else{if((c=Math.ceil((n+1)/hb))>=(s=d.length))return e;for(a=1,u=s=d[c];s>=10;s/=10)a++;n%=hb,i=n-hb+a}if(void 0!==r&&(o=u/(s=hm(10,a-i-1))%10|0,l=t<0||void 0!==d[c+1]||u%s,l=r<4?(o||l)&&(0==r||r==(e.s<0?3:2)):o>5||5==o&&(4==r||l||6==r&&(n>0?i>0?u/hm(10,a-i):0:d[c-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(s=hI(e),d.length=1,t=t-s-1,d[0]=hm(10,(hb-t%hb)%hb),e.e=hg(-t/hb)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==n?(d.length=c,s=1,c--):(d.length=c+1,s=hm(10,hb-n),d[c]=i>0?(u/hm(10,a-i)%hm(10,i)|0)*s:0),l)for(;;)if(0==c){(d[0]+=s)==hv&&(d[0]=1,++e.e);break}else{if(d[c]+=s,d[c]!=hv)break;d[c--]=0,s=1}for(n=d.length;0===d[--n];)d.pop();if(hd&&(e.e>hw||e.e<-hw))throw Error(hp+hI(e));return e}function hP(e,t){var r,n,i,s,a,o,l,u,c,d,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),hd?hN(t,f):t;if(l=e.d,d=t.d,n=t.e,u=e.e,l=l.slice(),a=u-n){for((c=a<0)?(r=l,a=-a,o=d.length):(r=d,n=u,o=l.length),a>(i=Math.max(Math.ceil(f/hb),o)+2)&&(a=i,r.length=1),r.reverse(),i=a;i--;)r.push(0);r.reverse()}else{for((c=(i=l.length)<(o=d.length))&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}a=0}for(c&&(r=l,l=d,d=r,t.s=-t.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(s=i;s&&0===l[--s];)l[s]=hv-1;--l[s],l[i]+=hv}l[i]-=d[i]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,hd?hN(t,f):t):new h(0)}function hM(e,t,r){var n,i=hI(e),s=hx(e.d),a=s.length;return t?(r&&(n=r-a)>0?s=s.charAt(0)+"."+s.slice(1)+hk(n):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+hk(-i-1)+s,r&&(n=r-a)>0&&(s+=hk(n))):i>=a?(s+=hk(i+1-a),r&&(n=r-i-1)>0&&(s=s+"."+hk(n))):((n=i+1)<a&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-a)>0&&(i+1===a&&(s+="."),s+=hk(n))),e.s<0?"-"+s:s}function hj(e,t){if(e.length>t)return e.length=t,!0}function hL(e){var t,r,n;function i(e){var t=this;if(!(t instanceof i))return new i(e);if(t.constructor=i,e instanceof i){t.s=e.s,t.e=e.e,t.d=(e=e.d)?e.slice():e;return}if("number"==typeof e){if(0*e!=0)throw Error(hf+e);if(e>0)t.s=1;else if(e<0)e=-e,t.s=-1;else{t.s=0,t.e=0,t.d=[0];return}if(e===~~e&&e<1e7){t.e=0,t.d=[e];return}return hD(t,e.toString())}if("string"!=typeof e)throw Error(hf+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,hy.test(e))hD(t,e);else throw Error(hf+e)}if(i.prototype=hT,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=hL,i.config=i.set=hB,void 0===e&&(e={}),e)for(t=0,n=["precision","rounding","toExpNeg","toExpPos","LN10"];t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function hB(e){if(!e||"object"!=typeof e)throw Error(hh+"Object expected");var t,r,n,i=["precision",1,hu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]]))if(hg(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(hf+r+": "+n);if(void 0!==(n=e[r="LN10"]))if(n==Math.LN10)this[r]=new this(n);else throw Error(hf+r+": "+n);return this}var d9=hL(hc);he=new d9(1);let hF=d9;function hU(e){return h$(e)||hq(e)||hz(e)||hV()}function hV(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hz(e,t){if(e){if("string"==typeof e)return hG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hG(e,t)}}function hq(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function h$(e){if(Array.isArray(e))return hG(e)}function hG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var hW=function(e){return e},hK={},hH=function(e){return e===hK},hQ=function(e){return function t(){return 0==arguments.length||1==arguments.length&&hH(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},hY=function e(t,r){return 1===t?r:hQ(function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];var a=i.filter(function(e){return e!==hK}).length;return a>=t?r.apply(void 0,i):e(t-a,hQ(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s=i.map(function(e){return hH(e)?t.shift():e});return r.apply(void 0,hU(s).concat(t))}))})},hX=function(e){return hY(e.length,e)},hJ=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},hZ=hX(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),h0=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return hW;var n=t.reverse(),i=n[0],s=n.slice(1);return function(){return s.reduce(function(e,t){return t(e)},i.apply(void 0,arguments))}},h1=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},h2=function(e){var t=null,r=null;return function(){for(var n=arguments.length,i=Array(n),s=0;s<n;s++)i[s]=arguments[s];return t&&i.every(function(e,r){return e===t[r]})?r:(t=i,r=e.apply(void 0,i))}};function h3(e){var t;return 0===e?1:Math.floor(new hF(e).abs().log(10).toNumber())+1}function h6(e,t,r){for(var n=new hF(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}hX(function(e,t,r){var n=+e;return n+r*(t-n)}),hX(function(e,t,r){var n=t-e;return(r-e)/(n=n||1/0)}),hX(function(e,t,r){var n=t-e;return Math.max(0,Math.min(1,(r-e)/(n=n||1/0)))});let h4={rangeStep:h6,getDigitCount:h3};function h5(e){return h9(e)||h7(e)||fr(e)||h8()}function h8(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h7(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function h9(e){if(Array.isArray(e))return fn(e)}function fe(e,t){return fs(e)||fi(e,t)||fr(e,t)||ft()}function ft(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fr(e,t){if(e){if("string"==typeof e)return fn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fn(e,t)}}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fi(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}return r}}function fs(e){if(Array.isArray(e))return e}function fa(e){var t=fe(e,2),r=t[0],n=t[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function fo(e,t,r){if(e.lte(0))return new hF(0);var n=h4.getDigitCount(e.toNumber()),i=new hF(10).pow(n),s=e.div(i),a=1!==n?.05:.1,o=new hF(Math.ceil(s.div(a).toNumber())).add(r).mul(a).mul(i);return t?o:new hF(Math.ceil(o))}function fl(e,t,r){var n=1,i=new hF(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new hF(10).pow(h4.getDigitCount(e)-1),i=new hF(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new hF(Math.floor(e)))}else 0===e?i=new hF(Math.floor((t-1)/2)):r||(i=new hF(Math.floor(e)));var a=Math.floor((t-1)/2);return h0(hZ(function(e){return i.add(new hF(e-a).mul(n)).toNumber()}),hJ)(0,t)}function fu(e,t,r,n){var i,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new hF(0),tickMin:new hF(0),tickMax:new hF(0)};var a=fo(new hF(t).sub(e).div(r-1),n,s),o=Math.ceil((i=e<=0&&t>=0?new hF(0):(i=new hF(e).add(t).div(2)).sub(new hF(i).mod(a))).sub(e).div(a).toNumber()),l=Math.ceil(new hF(t).sub(i).div(a).toNumber()),u=o+l+1;return u>r?fu(e,t,r,n,s+1):(u<r&&(l=t>0?l+(r-u):l,o=t>0?o:o+(r-u)),{step:a,tickMin:i.sub(new hF(o).mul(a)),tickMax:i.add(new hF(l).mul(a))})}function fc(e){var t=fe(e,2),r=t[0],n=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=Math.max(i,2),o=fe(fa([r,n]),2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,n];if(l===u)return fl(l,i,s);var c=fo(new hF(u).sub(l).div(a-1),s,0),d=h0(hZ(function(e){return new hF(l).add(new hF(e).mul(c)).toNumber()}),hJ)(0,a).filter(function(e){return e>=l&&e<=u});return r>n?h1(d):d}function fd(e,t){var r=fe(e,2),n=r[0],i=r[1],s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=fe(fa([n,i]),2),o=a[0],l=a[1];if(o===-1/0||l===1/0)return[n,i];if(o===l)return[o];var u=Math.max(t,2),c=fo(new hF(l).sub(o).div(u-1),s,0),d=[].concat(h5(h4.rangeStep(new hF(o),new hF(l).sub(new hF(.99).mul(c)),c)),[l]);return n>i?h1(d):d}var fh=h2(function(e){var t=fe(e,2),r=t[0],n=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=Math.max(i,2),o=fe(fa([r,n]),2),l=o[0],u=o[1];if(l===-1/0||u===1/0){var c=u===1/0?[l].concat(h5(hJ(0,i-1).map(function(){return 1/0}))):[].concat(h5(hJ(0,i-1).map(function(){return-1/0})),[u]);return r>n?h1(c):c}if(l===u)return fl(l,i,s);var d=fu(l,u,a,s),h=d.step,f=d.tickMin,p=d.tickMax,g=h4.rangeStep(f,p.add(new hF(.1).mul(h)),h);return r>n?h1(g):g});h2(fc);var ff=h2(fd),fp=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fg(e){return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fm(){return(fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fy(e,t){return fT(e)||fw(e,t)||fb(e,t)||fv()}function fv(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fb(e,t){if(e){if("string"==typeof e)return fS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fS(e,t)}}function fS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fw(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function fT(e){if(Array.isArray(e))return e}function fE(e,t){if(null==e)return{};var r,n,i=fC(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fC(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fx(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function f_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fj(n.key),n)}}function fO(e,t,r){return t&&f_(e.prototype,t),r&&f_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fI(e,t,r){return t=fD(t),fA(e,fR()?Reflect.construct(t,r||[],fD(e).constructor):t.apply(e,r))}function fA(e,t){if(t&&("object"===fg(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return fk(e)}function fk(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(fR=function(){return!!e})()}function fD(e){return(fD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fN(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fP(e,t)}function fP(e,t){return(fP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fM(e,t,r){return(t=fj(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fj(e){var t=fL(e,"string");return"symbol"==fg(t)?t:t+""}function fL(e,t){if("object"!=fg(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fg(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var fB=function(e){function t(){return fx(this,t),fI(this,t,arguments)}return fN(t,e),fO(t,[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,i=e.dataKey,s=e.data,a=e.dataPointFormatter,o=e.xAxis,l=e.yAxis,u=ex(fE(e,fp),!1);"x"===this.props.direction&&"number"!==o.type&&nR(!1);var c=s.map(function(e){var s,c,d=a(e,i),h=d.x,f=d.y,p=d.value,m=d.errorVal;if(!m)return null;var y=[];if(Array.isArray(m)){var v=fy(m,2);s=v[0],c=v[1]}else s=c=m;if("vertical"===r){var b=o.scale,S=f+t,w=S+n,T=S-n,E=b(p-s),C=b(p+c);y.push({x1:C,y1:w,x2:C,y2:T}),y.push({x1:E,y1:S,x2:C,y2:S}),y.push({x1:E,y1:w,x2:E,y2:T})}else if("horizontal"===r){var x=l.scale,_=h+t,O=_-n,I=_+n,A=x(p-s),k=x(p+c);y.push({x1:O,y1:k,x2:I,y2:k}),y.push({x1:_,y1:A,x2:_,y2:k}),y.push({x1:O,y1:A,x2:I,y2:A})}return g().createElement(nj,fm({className:"recharts-errorBar",key:"bar-".concat(y.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},u),y.map(function(e){return g().createElement("line",fm({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return g().createElement(nj,{className:"recharts-errorBars"},c)}}])}(g().Component);function fF(e){return(fF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fU(Object(r),!0).forEach(function(t){fz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fz(e,t,r){return(t=fq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fq(e){var t=f$(e,"string");return"symbol"==fF(t)?t:t+""}function f$(e,t){if("object"!=fF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fF(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}fM(fB,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),fM(fB,"displayName","ErrorBar");var fG=function(e){var t,r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=eb(r,nb);if(!a)return null;var o=nb.defaultProps,l=void 0!==o?fV(fV({},o),a.props):{};return t=a.props&&a.props.payload?a.props&&a.props.payload:"children"===s?(n||[]).reduce(function(e,t){var r=t.item,n=t.props,i=n.sectors||n.data||[];return e.concat(i.map(function(e){return{type:a.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?fV(fV({},r),t.props):{},i=n.dataKey,s=n.name,a=n.legendType;return{inactive:n.hide,dataKey:i,type:l.iconType||a||"square",color:f8(t),value:s||i,payload:n}}),fV(fV(fV({},l),nb.getWithHeight(a,i)),{},{payload:t,item:a})};function fW(e){return(fW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fK(e){return fX(e)||fY(e)||fQ(e)||fH()}function fH(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fQ(e,t){if(e){if("string"==typeof e)return fJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fJ(e,t)}}function fY(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function fX(e){if(Array.isArray(e))return fJ(e)}function fJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fZ(Object(r),!0).forEach(function(t){f1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f1(e,t,r){return(t=f2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f2(e){var t=f3(e,"string");return"symbol"==fW(t)?t:t+""}function f3(e,t){if("object"!=fW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=fW(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function f6(e,t,r){return K()(e)||K()(t)?r:j(t)?k()(e,t,r):Q()(t)?t(e):r}function f4(e,t,r,n){var i=ha()(e,function(e){return f6(e,t)});if("number"===r){var s=i.filter(function(e){return M(e)||parseFloat(e)});return s.length?[hi()(s),hr()(s)]:[1/0,-1/0]}return(n?i.filter(function(e){return!K()(e)}):i).map(function(e){return j(e)||e instanceof Date?e:""})}var f5=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=-1,a=null!=(t=null==r?void 0:r.length)?t:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&1e-6>=Math.abs(Math.abs(i.range[1]-i.range[0])-360))for(var o=i.range,l=0;l<a;l++){var u=l>0?n[l-1].coordinate:n[a-1].coordinate,c=n[l].coordinate,d=l>=a-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(N(c-u)!==N(d-c)){var f=[];if(N(d-c)===N(o[1]-o[0])){h=d;var p=c+o[1]-o[0];f[0]=Math.min(p,(p+u)/2),f[1]=Math.max(p,(p+u)/2)}else{h=u;var g=d+o[1]-o[0];f[0]=Math.min(c,(g+c)/2),f[1]=Math.max(c,(g+c)/2)}var m=[Math.min(c,(h+c)/2),Math.max(c,(h+c)/2)];if(e>m[0]&&e<=m[1]||e>=f[0]&&e<=f[1]){s=n[l].index;break}}else{var y=Math.min(u,d),v=Math.max(u,d);if(e>(y+c)/2&&e<=(v+c)/2){s=n[l].index;break}}}else for(var b=0;b<a;b++)if(0===b&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===a-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){s=r[b].index;break}return s},f8=function(e){var t,r,n=e.type.displayName,i=null!=(t=e.type)&&t.defaultProps?f0(f0({},e.type.defaultProps),e.props):e.props,s=i.stroke,a=i.fill;switch(n){case"Line":r=s;break;case"Area":case"Radar":r=s&&"none"!==s?s:a;break;default:r=a}return r},f7=function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,i=void 0===n?{}:n;if(!i)return{};for(var s={},a=Object.keys(i),o=0,l=a.length;o<l;o++)for(var u=i[a[o]].stackGroups,c=Object.keys(u),d=0,h=c.length;d<h;d++){var f=u[c[d]],p=f.items,g=f.cateAxisId,m=p.filter(function(e){return ep(e.type).indexOf("Bar")>=0});if(m&&m.length){var y=m[0].type.defaultProps,v=void 0!==y?f0(f0({},y),m[0].props):m[0].props,b=v.barSize,S=v[g];s[S]||(s[S]=[]);var w=K()(b)?t:b;s[S].push({item:m[0],stackList:m.slice(1),barSize:K()(w)?void 0:F(w,r,0)})}}return s},f9=function(e){var t,r=e.barGap,n=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=void 0===s?[]:s,o=e.maxBarSize,l=a.length;if(l<1)return null;var u=F(r,i,0,!0),c=[];if(a[0].barSize===+a[0].barSize){var d=!1,h=i/l,f=a.reduce(function(e,t){return e+t.barSize||0},0);(f+=(l-1)*u)>=i&&(f-=(l-1)*u,u=0),f>=i&&h>0&&(d=!0,h*=.9,f=l*h);var p={offset:((i-f)/2|0)-u,size:0};t=a.reduce(function(e,t){var r={item:t.item,position:{offset:p.offset+p.size+u,size:d?h:t.barSize}},n=[].concat(fK(e),[r]);return p=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:p})}),n},c)}else{var g=F(n,i,0,!0);i-2*g-(l-1)*u<=0&&(u=0);var m=(i-2*g-(l-1)*u)/l;m>1&&(m>>=0);var y=o===+o?Math.min(m,o):m;t=a.reduce(function(e,t,r){var n=[].concat(fK(e),[{item:t.item,position:{offset:g+(m+u)*r+(m-y)/2,size:y}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},c)}return t},pe=function(e,t,r,n){var i=r.children,s=r.width,a=r.margin,o=fG({children:i,legendWidth:s-(a.left||0)-(a.right||0)});if(o){var l=n||{},u=l.width,c=l.height,d=o.align,h=o.verticalAlign,f=o.layout;if(("vertical"===f||"horizontal"===f&&"middle"===h)&&"center"!==d&&M(e[d]))return f0(f0({},e),{},f1({},d,e[d]+(u||0)));if(("horizontal"===f||"vertical"===f&&"center"===d)&&"middle"!==h&&M(e[h]))return f0(f0({},e),{},f1({},h,e[h]+(c||0)))}return e},pt=function(e,t,r){return!!K()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===r?"xAxis"===t:"y"!==r||"yAxis"===t)},pr=function(e,t,r,n,i){var s=ev(t.props.children,fB).filter(function(e){return pt(n,i,e.props.direction)});if(s&&s.length){var a=s.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=f6(t,r);if(K()(n))return e;var i=Array.isArray(n)?[hi()(n),hr()(n)]:[n,n],s=a.reduce(function(e,r){var n=f6(t,r,0),s=i[0]-Math.abs(Array.isArray(n)?n[0]:n),a=i[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(s,e[0]),Math.max(a,e[1])]},[1/0,-1/0]);return[Math.min(s[0],e[0]),Math.max(s[1],e[1])]},[1/0,-1/0])}return null},pn=function(e,t,r,n,i){var s=t.map(function(t){return pr(e,t,r,i,n)}).filter(function(e){return!K()(e)});return s&&s.length?s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null},pi=function(e,t,r,n,i){var s=t.map(function(t){var s=t.props.dataKey;return"number"===r&&s&&pr(e,t,s,n)||f4(e,s,r,i)});if("number"===r)return s.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var a={};return s.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)a[t[r]]||(a[t[r]]=!0,e.push(t[r]));return e},[])},ps=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},pa=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var i,s,a=e.map(function(e){return e.coordinate===t&&(i=!0),e.coordinate===r&&(s=!0),e.coordinate});return i||a.push(t),s||a.push(r),a},po=function(e,t,r){if(!e)return null;var n=e.scale,i=e.duplicateDomain,s=e.type,a=e.range,o="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===s&&n.bandwidth?n.bandwidth()/o:0;return(l="angleAxis"===e.axisType&&(null==a?void 0:a.length)>=2?2*N(a[0]-a[1])*l:l,t&&(e.ticks||e.niceTicks))?(e.ticks||e.niceTicks).map(function(e){return{coordinate:n(i?i.indexOf(e):e)+l,value:e,offset:l}}).filter(function(e){return!I()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:i?i[e]:e,index:t,offset:l}})},pl=new WeakMap,pu=function(e,t){if("function"!=typeof t)return e;pl.has(e)||pl.set(e,new WeakMap);var r=pl.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},pc=function(e,t,r){var n=e.scale,i=e.type,s=e.layout,a=e.axisType;if("auto"===n)return"radial"===s&&"radiusAxis"===a?{scale:ap(),realScaleType:"band"}:"radial"===s&&"angleAxis"===a?{scale:l5(),realScaleType:"linear"}:"category"===i&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:am(),realScaleType:"point"}:"category"===i?{scale:ap(),realScaleType:"band"}:{scale:l5(),realScaleType:"linear"};if(_()(n)){var o="scale".concat(t0()(n));return{scale:(h[o]||am)(),realScaleType:h[o]?o:"point"}}return Q()(n)?{scale:n}:{scale:am(),realScaleType:"point"}},pd=1e-4,ph=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-pd,s=Math.max(n[0],n[1])+pd,a=e(t[0]),o=e(t[r-1]);(a<i||a>s||o<i||o>s)&&e.domain([t[0],t[r-1]])}},pf=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null},pp=function(e,t){if(!t||2!==t.length||!M(t[0])||!M(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!M(e[0])||e[0]<r)&&(i[0]=r),(!M(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},pg={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,s=0,a=0;a<t;++a){var o=I()(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=i,e[a][r][1]=i+o,i=e[a][r][1]):(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1])}},expand:dW,none:dG,silhouette:dK,wiggle:dH,positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var i=0,s=0;s<t;++s){var a=I()(e[s][r][1])?e[s][r][0]:e[s][r][1];a>=0?(e[s][r][0]=i,e[s][r][1]=i+a,i=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}}},pm=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),i=pg[r];return dZ().keys(n).value(function(e,t){return+f6(e,t,0)}).order(dY).offset(i)(e)},py=function(e,t,r,n,i,s){if(!e)return null;var a=s?t.reverse():t,o={},l=a.reduce(function(e,t){var i,s=null!=(i=t.type)&&i.defaultProps?f0(f0({},t.type.defaultProps),t.props):t.props,a=s.stackId;if(s.hide)return e;var o=s[r],l=e[o]||{hasStack:!1,stackGroups:{}};if(j(a)){var u=l.stackGroups[a]||{numericAxisId:r,cateAxisId:n,items:[]};u.items.push(t),l.hasStack=!0,l.stackGroups[a]=u}else l.stackGroups[B("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return f0(f0({},e),{},f1({},o,l))},o),u={};return Object.keys(l).reduce(function(t,s){var a=l[s];if(a.hasStack){var o={};a.stackGroups=Object.keys(a.stackGroups).reduce(function(t,s){var o=a.stackGroups[s];return f0(f0({},t),{},f1({},s,{numericAxisId:r,cateAxisId:n,items:o.items,stackedData:pm(e,o.items,i)}))},o)}return f0(f0({},t),{},f1({},s,a))},u)},pv=function(e,t){var r=t.realScaleType,n=t.type,i=t.tickCount,s=t.originalDomain,a=t.allowDecimals,o=r||t.scale;if("auto"!==o&&"linear"!==o)return null;if(i&&"number"===n&&s&&("auto"===s[0]||"auto"===s[1])){var l=e.domain();if(!l.length)return null;var u=fh(l,i,a);return e.domain([hi()(u),hr()(u)]),{niceTicks:u}}return i&&"number"===n?{niceTicks:ff(e.domain(),i,a)}:null};function pb(e){var t=e.axis,r=e.ticks,n=e.bandSize,i=e.entry,s=e.index,a=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!K()(i[t.dataKey])){var o=q(r,"value",i[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var l=f6(i,K()(a)?t.dataKey:a);return K()(l)?null:t.scale(l)}var pS=function(e){var t=e.axis,r=e.ticks,n=e.offset,i=e.bandSize,s=e.entry,a=e.index;if("category"===t.type)return r[a]?r[a].coordinate+n:null;var o=f6(s,t.dataKey,t.domain[a]);return K()(o)?null:t.scale(o)-i/2+n},pw=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},pT=function(e,t){var r,n=(null!=(r=e.type)&&r.defaultProps?f0(f0({},e.type.defaultProps),e.props):e.props).stackId;if(j(n)){var i=t[n];if(i){var s=i.items.indexOf(e);return s>=0?i.stackedData[s]:null}}return null},pE=function(e){return e.reduce(function(e,t){return[hi()(t.concat([e[0]]).filter(M)),hr()(t.concat([e[1]]).filter(M))]},[1/0,-1/0])},pC=function(e,t,r){return Object.keys(e).reduce(function(n,i){var s=e[i].stackedData.reduce(function(e,n){var i=pE(n.slice(t,r+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},px=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,p_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pO=function(e,t,r){if(Q()(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(M(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(px.test(e[0])){var i=+px.exec(e[0])[1];n[0]=t[0]-i}else Q()(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(M(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(p_.test(e[1])){var s=+p_.exec(e[1])[1];n[1]=t[1]+s}else Q()(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},pI=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=eG()(t,function(e){return e.coordinate}),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],u=i[a-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},pA=function(e,t,r){return!e||!e.length||hl()(e,k()(r,"type.defaultProps.domain"))?t:e},pk=function(e,t){var r=e.type.defaultProps?f0(f0({},e.type.defaultProps),e.props):e.props,n=r.dataKey,i=r.name,s=r.unit,a=r.formatter,o=r.tooltipType,l=r.chartType,u=r.hide;return f0(f0({},ex(e,!1)),{},{dataKey:n,unit:s,formatter:a,name:i||n,color:f8(e),value:f6(t,n),type:o,payload:t,chartType:l,hide:u})};function pR(e){return(pR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(t){pP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pP(e,t,r){return(t=pM(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pM(e){var t=pj(e,"string");return"symbol"==pR(t)?t:t+""}function pj(e,t){if("object"!=pR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pR(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var pL=["Webkit","Moz","O","ms"],pB=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=pL.reduce(function(e,n){return pN(pN({},e),{},pP({},n+r,t))},{});return n[e]=t,n};function pF(e){return(pF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pU(){return(pU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pV(Object(r),!0).forEach(function(t){pZ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pq(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function p$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p0(n.key),n)}}function pG(e,t,r){return t&&p$(e.prototype,t),r&&p$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pW(e,t,r){return t=pY(t),pK(e,pQ()?Reflect.construct(t,r||[],pY(e).constructor):t.apply(e,r))}function pK(e,t){if(t&&("object"===pF(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return pH(e)}function pH(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pQ=function(){return!!e})()}function pY(e){return(pY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pX(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pJ(e,t)}function pJ(e,t){return(pJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pZ(e,t,r){return(t=p0(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p0(e){var t=p1(e,"string");return"symbol"==pF(t)?t:t+""}function p1(e,t){if("object"!=pF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pF(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var p2=function(e){var t=e.data,r=e.startIndex,n=e.endIndex,i=e.x,s=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var o=t.length,l=am().domain(nI()(0,o)).range([i,i+s-a]),u=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:u}},p3=function(e){return e.changedTouches&&!!e.changedTouches.length},p6=function(e){function t(e){var r;return pq(this,t),pZ(r=pW(this,t,[e]),"handleDrag",function(e){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(e):r.state.isSlideMoving&&r.handleSlideDrag(e)}),pZ(r,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&r.handleDrag(e.changedTouches[0])}),pZ(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=r.props,t=e.endIndex,n=e.onDragEnd,i=e.startIndex;null==n||n({endIndex:t,startIndex:i})}),r.detachDragEndListener()}),pZ(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),pZ(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),pZ(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),pZ(r,"handleSlideDragStart",function(e){var t=p3(e)?e.changedTouches[0]:e;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return pX(t,e),pG(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var r=e.startX,n=e.endX,i=this.state.scaleValues,s=this.props,a=s.gap,o=s.data.length-1,l=Math.min(r,n),u=Math.max(r,n),c=t.getIndexInRange(i,l),d=t.getIndexInRange(i,u);return{startIndex:c-c%a,endIndex:d===o?o:d-d%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,i=t.dataKey,s=f6(r[e],i,e);return Q()(n)?n(s,e):s}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,i=t.endX,s=this.props,a=s.x,o=s.width,l=s.travellerWidth,u=s.startIndex,c=s.endIndex,d=s.onChange,h=e.pageX-r;h>0?h=Math.min(h,a+o-l-i,a+o-l-n):h<0&&(h=Math.max(h,a-n,a-i));var f=this.getIndex({startX:n+h,endX:i+h});(f.startIndex!==u||f.endIndex!==c)&&d&&d(f),this.setState({startX:n+h,endX:i+h,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=p3(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,i=t.endX,s=t.startX,a=this.state[n],o=this.props,l=o.x,u=o.width,c=o.travellerWidth,d=o.onChange,h=o.gap,f=o.data,p={startX:this.state.startX,endX:this.state.endX},g=e.pageX-r;g>0?g=Math.min(g,l+u-c-a):g<0&&(g=Math.max(g,l-a)),p[n]=a+g;var m=this.getIndex(p),y=m.startIndex,v=m.endIndex,b=function(){var e=f.length-1;return"startX"===n&&(i>s?y%h==0:v%h==0)||!!(i<s)&&v===e||"endX"===n&&(i>s?v%h==0:y%h==0)||!!(i>s)&&v===e};this.setState(pZ(pZ({},n,a+g),"brushMoveStartX",e.pageX),function(){d&&b()&&d(m)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,i=n.scaleValues,s=n.startX,a=n.endX,o=this.state[t],l=i.indexOf(o);if(-1!==l){var u=l+e;if(-1!==u&&!(u>=i.length)){var c=i[u];"startX"===t&&c>=a||"endX"===t&&c<=s||this.setState(pZ({},t,c),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,i=e.height,s=e.fill,a=e.stroke;return g().createElement("rect",{stroke:a,fill:s,x:t,y:r,width:n,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,i=e.height,s=e.data,a=e.children,o=e.padding,l=p.Children.only(a);return l?g().cloneElement(l,{x:t,y:r,width:n,height:i,margin:o,compact:!0,data:s}):null}},{key:"renderTravellerLayer",value:function(e,r){var n,i,s=this,a=this.props,o=a.y,l=a.travellerWidth,u=a.height,c=a.traveller,d=a.ariaLabel,h=a.data,f=a.startIndex,p=a.endIndex,m=Math.max(e,this.props.x),y=pz(pz({},ex(this.props,!1)),{},{x:m,y:o,width:l,height:u}),v=d||"Min value: ".concat(null==(n=h[f])?void 0:n.name,", Max value: ").concat(null==(i=h[p])?void 0:i.name);return g().createElement(nj,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[r],onTouchStart:this.travellerDragStartHandlers[r],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),s.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,r))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(c,y))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,i=r.height,s=r.stroke,a=r.travellerWidth,o=Math.min(e,t)+a,l=Math.max(Math.abs(t-e)-a,0);return g().createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:s,fillOpacity:.2,x:o,y:n,width:l,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,i=e.height,s=e.travellerWidth,a=e.stroke,o=this.state,l=o.startX,u=o.endX,c=5,d={pointerEvents:"none",fill:a};return g().createElement(nj,{className:"recharts-brush-texts"},g().createElement(oy,pU({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,u)-c,y:n+i/2},d),this.getTextOfTick(t)),g().createElement(oy,pU({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,u)+s+c,y:n+i/2},d),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,i=e.x,s=e.y,a=e.width,o=e.height,l=e.alwaysShowText,u=this.state,c=u.startX,d=u.endX,h=u.isTextActive,f=u.isSlideMoving,p=u.isTravellerMoving,m=u.isTravellerFocused;if(!t||!t.length||!M(i)||!M(s)||!M(a)||!M(o)||a<=0||o<=0)return null;var y=(0,T.A)("recharts-brush",r),v=1===g().Children.count(n),b=pB("userSelect","none");return g().createElement(nj,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),v&&this.renderPanorama(),this.renderSlide(c,d),this.renderTravellerLayer(c,"startX"),this.renderTravellerLayer(d,"endX"),(h||f||p||m||l)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,i=e.height,s=e.stroke,a=Math.floor(r+i/2)-1;return g().createElement(g().Fragment,null,g().createElement("rect",{x:t,y:r,width:n,height:i,fill:s,stroke:"none"}),g().createElement("line",{x1:t+1,y1:a,x2:t+n-1,y2:a,fill:"none",stroke:"#fff"}),g().createElement("line",{x1:t+1,y1:a+2,x2:t+n-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,r){var n;return g().isValidElement(e)?g().cloneElement(e,r):Q()(e)?e(r):t.renderDefaultTraveller(r)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,i=e.x,s=e.travellerWidth,a=e.updateId,o=e.startIndex,l=e.endIndex;if(r!==t.prevData||a!==t.prevUpdateId)return pz({prevData:r,prevTravellerWidth:s,prevUpdateId:a,prevX:i,prevWidth:n},r&&r.length?p2({data:r,width:n,x:i,travellerWidth:s,startIndex:o,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||i!==t.prevX||s!==t.prevTravellerWidth)){t.scale.range([i,i+n-s]);var u=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:s,prevUpdateId:a,prevX:i,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:u}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=e.length,n=0,i=r-1;i-n>1;){var s=Math.floor((n+i)/2);e[s]>t?i=s:n=s}return t>=e[i]?i:n}}])}(p.PureComponent);function p4(e){return(p4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p5(Object(r),!0).forEach(function(t){p7(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p7(e,t,r){return(t=p9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p9(e){var t=ge(e,"string");return"symbol"==p4(t)?t:t+""}function ge(e,t){if("object"!=p4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p4(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function gt(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gr(e,t){if(e){if("string"==typeof e)return gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gn(e,t)}}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gi(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function gs(e){if(Array.isArray(e))return e}pZ(p6,"displayName","Brush"),pZ(p6,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ga=Math.PI/180,go=function(e){return 180*e/Math.PI},gl=function(e,t,r,n){return{x:e+Math.cos(-ga*n)*r,y:t+Math.sin(-ga*n)*r}},gu=function(e,t){var r=e.x,n=e.y;return Math.sqrt(Math.pow(r-t.x,2)+Math.pow(n-t.y,2))},gc=function(e,t){var r=e.x,n=e.y,i=t.cx,s=t.cy,a=gu({x:r,y:n},{x:i,y:s});if(a<=0)return{radius:a};var o=Math.acos((r-i)/a);return n>s&&(o=2*Math.PI-o),{radius:a,angle:go(o),angleInRadian:o}},gd=function(e){var t=e.startAngle,r=e.endAngle,n=Math.min(Math.floor(t/360),Math.floor(r/360));return{startAngle:t-360*n,endAngle:r-360*n}},gh=function(e,t){return e+360*Math.min(Math.floor(t.startAngle/360),Math.floor(t.endAngle/360))},gf=function(e,t){var r,n=gc({x:e.x,y:e.y},t),i=n.radius,s=n.angle,a=t.innerRadius,o=t.outerRadius;if(i<a||i>o)return!1;if(0===i)return!0;var l=gd(t),u=l.startAngle,c=l.endAngle,d=s;if(u<=c){for(;d>c;)d-=360;for(;d<u;)d+=360;r=d>=u&&d<=c}else{for(;d>u;)d-=360;for(;d<c;)d+=360;r=d>=c&&d<=u}return r?p8(p8({},t),{},{radius:i,angle:gh(d,t)}):null};function gp(e){return(gp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gg=["offset"];function gm(e){return gS(e)||gb(e)||gv(e)||gy()}function gy(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gv(e,t){if(e){if("string"==typeof e)return gw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gw(e,t)}}function gb(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function gS(e){if(Array.isArray(e))return gw(e)}function gw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gT(e,t){if(null==e)return{};var r,n,i=gE(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gE(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(t){g_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g_(e,t,r){return(t=gO(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gO(e){var t=gI(e,"string");return"symbol"==gp(t)?t:t+""}function gI(e,t){if("object"!=gp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gp(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function gA(){return(gA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var gk=function(e){var t=e.value,r=e.formatter,n=K()(e.children)?t:e.children;return Q()(r)?r(n):n},gR=function(e,t){return N(t-e)*Math.min(Math.abs(t-e),360)},gD=function(e,t,r){var n,i,s=e.position,a=e.viewBox,o=e.offset,l=e.className,u=a,c=u.cx,d=u.cy,h=u.innerRadius,f=u.outerRadius,p=u.startAngle,m=u.endAngle,y=u.clockWise,v=(h+f)/2,b=gR(p,m),S=b>=0?1:-1;"insideStart"===s?(n=p+S*o,i=y):"insideEnd"===s?(n=m-S*o,i=!y):"end"===s&&(n=m+S*o,i=y),i=b<=0?i:!i;var w=gl(c,d,v,n),E=gl(c,d,v,n+(i?1:-1)*359),C="M".concat(w.x,",").concat(w.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(+!i,",\n    ").concat(E.x,",").concat(E.y),x=K()(e.id)?B("recharts-radial-line-"):e.id;return g().createElement("text",gA({},r,{dominantBaseline:"central",className:(0,T.A)("recharts-radial-bar-label",l)}),g().createElement("defs",null,g().createElement("path",{id:x,d:C})),g().createElement("textPath",{xlinkHref:"#".concat(x)},t))},gN=function(e){var t=e.viewBox,r=e.offset,n=e.position,i=t,s=i.cx,a=i.cy,o=i.innerRadius,l=i.outerRadius,u=(i.startAngle+i.endAngle)/2;if("outside"===n){var c=gl(s,a,l+r,u),d=c.x;return{x:d,y:c.y,textAnchor:d>=s?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=gl(s,a,(o+l)/2,u);return{x:h.x,y:h.y,textAnchor:"middle",verticalAnchor:"middle"}},gP=function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,i=e.position,s=t,a=s.x,o=s.y,l=s.width,u=s.height,c=u>=0?1:-1,d=c*n,h=c>0?"end":"start",f=c>0?"start":"end",p=l>=0?1:-1,g=p*n,m=p>0?"end":"start",y=p>0?"start":"end";if("top"===i)return gx(gx({},{x:a+l/2,y:o-c*n,textAnchor:"middle",verticalAnchor:h}),r?{height:Math.max(o-r.y,0),width:l}:{});if("bottom"===i)return gx(gx({},{x:a+l/2,y:o+u+d,textAnchor:"middle",verticalAnchor:f}),r?{height:Math.max(r.y+r.height-(o+u),0),width:l}:{});if("left"===i){var v={x:a-g,y:o+u/2,textAnchor:m,verticalAnchor:"middle"};return gx(gx({},v),r?{width:Math.max(v.x-r.x,0),height:u}:{})}if("right"===i){var b={x:a+l+g,y:o+u/2,textAnchor:y,verticalAnchor:"middle"};return gx(gx({},b),r?{width:Math.max(r.x+r.width-b.x,0),height:u}:{})}var S=r?{width:l,height:u}:{};return"insideLeft"===i?gx({x:a+g,y:o+u/2,textAnchor:y,verticalAnchor:"middle"},S):"insideRight"===i?gx({x:a+l-g,y:o+u/2,textAnchor:m,verticalAnchor:"middle"},S):"insideTop"===i?gx({x:a+l/2,y:o+d,textAnchor:"middle",verticalAnchor:f},S):"insideBottom"===i?gx({x:a+l/2,y:o+u-d,textAnchor:"middle",verticalAnchor:h},S):"insideTopLeft"===i?gx({x:a+g,y:o+d,textAnchor:y,verticalAnchor:f},S):"insideTopRight"===i?gx({x:a+l-g,y:o+d,textAnchor:m,verticalAnchor:f},S):"insideBottomLeft"===i?gx({x:a+g,y:o+u-d,textAnchor:y,verticalAnchor:h},S):"insideBottomRight"===i?gx({x:a+l-g,y:o+u-d,textAnchor:m,verticalAnchor:h},S):X()(i)&&(M(i.x)||P(i.x))&&(M(i.y)||P(i.y))?gx({x:a+F(i.x,l),y:o+F(i.y,u),textAnchor:"end",verticalAnchor:"end"},S):gx({x:a+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},S)},gM=function(e){return"cx"in e&&M(e.cx)};function gj(e){var t,r=e.offset,n=gx({offset:void 0===r?5:r},gT(e,gg)),i=n.viewBox,s=n.position,a=n.value,o=n.children,l=n.content,u=n.className,c=void 0===u?"":u,d=n.textBreakAll;if(!i||K()(a)&&K()(o)&&!(0,p.isValidElement)(l)&&!Q()(l))return null;if((0,p.isValidElement)(l))return(0,p.cloneElement)(l,n);if(Q()(l)){if(t=(0,p.createElement)(l,n),(0,p.isValidElement)(t))return t}else t=gk(n);var h=gM(i),f=ex(n,!0);if(h&&("insideStart"===s||"insideEnd"===s||"end"===s))return gD(n,t,f);var m=h?gN(n):gP(n);return g().createElement(oy,gA({className:(0,T.A)("recharts-label",c)},f,m,{breakAll:d}),t)}gj.displayName="Label";var gL=function(e){var t=e.cx,r=e.cy,n=e.angle,i=e.startAngle,s=e.endAngle,a=e.r,o=e.radius,l=e.innerRadius,u=e.outerRadius,c=e.x,d=e.y,h=e.top,f=e.left,p=e.width,g=e.height,m=e.clockWise,y=e.labelViewBox;if(y)return y;if(M(p)&&M(g)){if(M(c)&&M(d))return{x:c,y:d,width:p,height:g};if(M(h)&&M(f))return{x:h,y:f,width:p,height:g}}return M(c)&&M(d)?{x:c,y:d,width:0,height:0}:M(t)&&M(r)?{cx:t,cy:r,startAngle:i||n||0,endAngle:s||n||0,innerRadius:l||0,outerRadius:u||o||a||0,clockWise:m}:e.viewBox?e.viewBox:{}},gB=function(e,t){return e?!0===e?g().createElement(gj,{key:"label-implicit",viewBox:t}):j(e)?g().createElement(gj,{key:"label-implicit",viewBox:t,value:e}):(0,p.isValidElement)(e)?e.type===gj?(0,p.cloneElement)(e,{key:"label-implicit",viewBox:t}):g().createElement(gj,{key:"label-implicit",content:e,viewBox:t}):Q()(e)?g().createElement(gj,{key:"label-implicit",content:e,viewBox:t}):X()(e)?g().createElement(gj,gA({viewBox:t},e,{key:"label-implicit"})):null:null},gF=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=gL(e),s=ev(n,gj).map(function(e,r){return(0,p.cloneElement)(e,{viewBox:t||i,key:"label-".concat(r)})});return r?[gB(e.label,t||i)].concat(gm(s)):s};gj.parseViewBox=gL,gj.renderCallByParent=gF;var gU=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},gV=r(69691),gz=r.n(gV),gq=r(47212),g$=r.n(gq),gG=function(e){return null};gG.displayName="Cell";var gW=r(5359),gK=r.n(gW);function gH(e){return(gH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var gQ=["valueAccessor"],gY=["data","dataKey","clockWise","id","textBreakAll"];function gX(e){return g1(e)||g0(e)||gZ(e)||gJ()}function gJ(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gZ(e,t){if(e){if("string"==typeof e)return g2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g2(e,t)}}function g0(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function g1(e){if(Array.isArray(e))return g2(e)}function g2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function g3(){return(g3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g6(Object(r),!0).forEach(function(t){g5(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g6(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function g5(e,t,r){return(t=g8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g8(e){var t=g7(e,"string");return"symbol"==gH(t)?t:t+""}function g7(e,t){if("object"!=gH(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gH(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g9(e,t){if(null==e)return{};var r,n,i=me(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function me(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mt=function(e){return Array.isArray(e.value)?gK()(e.value):e.value};function mr(e){var t=e.valueAccessor,r=void 0===t?mt:t,n=g9(e,gQ),i=n.data,s=n.dataKey,a=n.clockWise,o=n.id,l=n.textBreakAll,u=g9(n,gY);return i&&i.length?g().createElement(nj,{className:"recharts-label-list"},i.map(function(e,t){var n=K()(s)?r(e,t):f6(e&&e.payload,s),i=K()(o)?{}:{id:"".concat(o,"-").concat(t)};return g().createElement(gj,g3({},ex(e,!0),u,i,{parentViewBox:e.parentViewBox,value:n,textBreakAll:l,viewBox:gj.parseViewBox(K()(a)?e:g4(g4({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))})):null}function mn(e,t){return e?!0===e?g().createElement(mr,{key:"labelList-implicit",data:t}):g().isValidElement(e)||Q()(e)?g().createElement(mr,{key:"labelList-implicit",data:t,content:e}):X()(e)?g().createElement(mr,g3({data:t},e,{key:"labelList-implicit"})):null:null}function mi(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e||!e.children&&r&&!e.label)return null;var n=ev(e.children,mr).map(function(e,r){return(0,p.cloneElement)(e,{data:t,key:"labelList-".concat(r)})});return r?[mn(e.label,t)].concat(gX(n)):n}mr.displayName="LabelList",mr.renderCallByParent=mi;var ms=r(38404),ma=r.n(ms),mo=r(98451),ml=r.n(mo);function mu(e){return(mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mc(){return(mc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function md(e,t){return mm(e)||mg(e,t)||mf(e,t)||mh()}function mh(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mf(e,t){if(e){if("string"==typeof e)return mp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mp(e,t)}}function mp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mg(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function mm(e){if(Array.isArray(e))return e}function my(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?my(Object(r),!0).forEach(function(t){mb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):my(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mb(e,t,r){return(t=mS(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mS(e){var t=mw(e,"string");return"symbol"==mu(t)?t:t+""}function mw(e,t){if("object"!=mu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mu(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var mT=function(e,t,r,n,i){var s,a=r-n;return"M ".concat(e,",").concat(t)+"L ".concat(e+r,",").concat(t)+"L ".concat(e+r-a/2,",").concat(t+i)+"L ".concat(e+r-a/2-n,",").concat(t+i)+"L ".concat(e,",").concat(t," Z")},mE={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mC=function(e){var t=mv(mv({},mE),e),r=(0,p.useRef)(),n=md((0,p.useState)(-1),2),i=n[0],s=n[1];(0,p.useEffect)(function(){if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(e){}},[]);var a=t.x,o=t.y,l=t.upperWidth,u=t.lowerWidth,c=t.height,d=t.className,h=t.animationEasing,f=t.animationDuration,m=t.animationBegin,y=t.isUpdateAnimationActive;if(a!==+a||o!==+o||l!==+l||u!==+u||c!==+c||0===l&&0===u||0===c)return null;var v=(0,T.A)("recharts-trapezoid",d);return y?g().createElement(sY,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:c,x:a,y:o},to:{upperWidth:l,lowerWidth:u,height:c,x:a,y:o},duration:f,animationEasing:h,isActive:y},function(e){var n=e.upperWidth,s=e.lowerWidth,a=e.height,o=e.x,l=e.y;return g().createElement(sY,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:f,easing:h},g().createElement("path",mc({},ex(t,!0),{className:v,d:mT(o,l,n,s,a),ref:r})))}):g().createElement("g",null,g().createElement("path",mc({},ex(t,!0),{className:v,d:mT(a,o,l,u,c)})))};function mx(e){return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m_(){return(m_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(t){mA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mA(e,t,r){return(t=mk(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mk(e){var t=mR(e,"string");return"symbol"==mx(t)?t:t+""}function mR(e,t){if("object"!=mx(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mx(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var mD=function(e,t){return N(t-e)*Math.min(Math.abs(t-e),359.999)},mN=function(e){var t=e.cx,r=e.cy,n=e.radius,i=e.angle,s=e.sign,a=e.isExternal,o=e.cornerRadius,l=e.cornerIsExternal,u=o*(a?1:-1)+n,c=Math.asin(o/u)/ga,d=l?i:i+s*c,h=gl(t,r,u,d),f=gl(t,r,n,d),p=l?i-s*c:i;return{center:h,circleTangency:f,lineTangency:gl(t,r,u*Math.cos(c*ga),p),theta:c}},mP=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,i=e.outerRadius,s=e.startAngle,a=mD(s,e.endAngle),o=s+a,l=gl(t,r,i,s),u=gl(t,r,i,o),c="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(s>o),",\n    ").concat(u.x,",").concat(u.y,"\n  ");if(n>0){var d=gl(t,r,n,s),h=gl(t,r,n,o);c+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(s<=o),",\n            ").concat(d.x,",").concat(d.y," Z")}else c+="L ".concat(t,",").concat(r," Z");return c},mM=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,i=e.outerRadius,s=e.cornerRadius,a=e.forceCornerRadius,o=e.cornerIsExternal,l=e.startAngle,u=e.endAngle,c=N(u-l),d=mN({cx:t,cy:r,radius:i,angle:l,sign:c,cornerRadius:s,cornerIsExternal:o}),h=d.circleTangency,f=d.lineTangency,p=d.theta,g=mN({cx:t,cy:r,radius:i,angle:u,sign:-c,cornerRadius:s,cornerIsExternal:o}),m=g.circleTangency,y=g.lineTangency,v=g.theta,b=o?Math.abs(l-u):Math.abs(l-u)-p-v;if(b<0)return a?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(-(2*s),",0\n      "):mP({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:u});var S="M ".concat(f.x,",").concat(f.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(h.x,",").concat(h.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(b>180),",").concat(+(c<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(y.x,",").concat(y.y,"\n  ");if(n>0){var w=mN({cx:t,cy:r,radius:n,angle:l,sign:c,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),T=w.circleTangency,E=w.lineTangency,C=w.theta,x=mN({cx:t,cy:r,radius:n,angle:u,sign:-c,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),_=x.circleTangency,O=x.lineTangency,I=x.theta,A=o?Math.abs(l-u):Math.abs(l-u)-C-I;if(A<0&&0===s)return"".concat(S,"L").concat(t,",").concat(r,"Z");S+="L".concat(O.x,",").concat(O.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(_.x,",").concat(_.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(c>0),",").concat(T.x,",").concat(T.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(c<0),",").concat(E.x,",").concat(E.y,"Z")}else S+="L".concat(t,",").concat(r,"Z");return S},mj={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mL=function(e){var t,r=mI(mI({},mj),e),n=r.cx,i=r.cy,s=r.innerRadius,a=r.outerRadius,o=r.cornerRadius,l=r.forceCornerRadius,u=r.cornerIsExternal,c=r.startAngle,d=r.endAngle,h=r.className;if(a<s||c===d)return null;var f=(0,T.A)("recharts-sector",h),p=a-s,m=F(o,p,0,!0);return t=m>0&&360>Math.abs(c-d)?mM({cx:n,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(m,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):mP({cx:n,cy:i,innerRadius:s,outerRadius:a,startAngle:c,endAngle:d}),g().createElement("path",m_({},ex(r,!0),{className:f,d:t,role:"img"}))},mB=["option","shapeType","propTransformer","activeClassName","isActive"];function mF(e){return(mF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mU(e,t){if(null==e)return{};var r,n,i=mV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mV(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mz(Object(r),!0).forEach(function(t){m$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function m$(e,t,r){return(t=mG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e){var t=mW(e,"string");return"symbol"==mF(t)?t:t+""}function mW(e,t){if("object"!=mF(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mF(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function mK(e,t){return mq(mq({},t),e)}function mH(e,t){return"symbols"===e}function mQ(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return g().createElement(an,r);case"trapezoid":return g().createElement(mC,r);case"sector":return g().createElement(mL,r);case"symbols":if(mH(t,r))return g().createElement(rV,r);break;default:return null}}function mY(e){return(0,p.isValidElement)(e)?e.props:e}function mX(e){var t,r=e.option,n=e.shapeType,i=e.propTransformer,s=void 0===i?mK:i,a=e.activeClassName,o=void 0===a?"recharts-active-shape":a,l=e.isActive,u=mU(e,mB);if((0,p.isValidElement)(r))t=(0,p.cloneElement)(r,mq(mq({},u),mY(r)));else if(Q()(r))t=r(u);else if(ma()(r)&&!ml()(r)){var c=s(r,u);t=g().createElement(mQ,{shapeType:n,elementProps:c})}else{var d=u;t=g().createElement(mQ,{shapeType:n,elementProps:d})}return l?g().createElement(nj,{className:o},t):t}function mJ(e,t){return null!=t&&"trapezoids"in e.props}function mZ(e,t){return null!=t&&"sectors"in e.props}function m0(e,t){return null!=t&&"points"in e.props}function m1(e,t){var r,n,i=e.x===(null==t||null==(r=t.labelViewBox)?void 0:r.x)||e.x===t.x,s=e.y===(null==t||null==(n=t.labelViewBox)?void 0:n.y)||e.y===t.y;return i&&s}function m2(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function m3(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function m6(e,t){var r;return mJ(e,t)?r=m1:mZ(e,t)?r=m2:m0(e,t)&&(r=m3),r}function m4(e,t){var r;return mJ(e,t)?r="trapezoids":mZ(e,t)?r="sectors":m0(e,t)&&(r="points"),r}function m5(e,t){var r,n;return mJ(e,t)?null==(r=t.tooltipPayload)||null==(r=r[0])||null==(r=r.payload)?void 0:r.payload:mZ(e,t)?null==(n=t.tooltipPayload)||null==(n=n[0])||null==(n=n.payload)?void 0:n.payload:m0(e,t)?t.payload:{}}function m8(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=m4(r,t),s=m5(r,t),a=n.filter(function(e,n){var a=hl()(s,e),o=r.props[i].filter(function(e){return m6(r,t)(e,t)}),l=n===r.props[i].indexOf(o[o.length-1]);return a&&l});return n.indexOf(a[a.length-1])}var m7=["x","y"];function m9(e){return(m9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(){return(ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach(function(t){yn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yn(e,t,r){return(t=yi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yi(e){var t=ys(e,"string");return"symbol"==m9(t)?t:t+""}function ys(e,t){if("object"!=m9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m9(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ya(e,t){if(null==e)return{};var r,n,i=yo(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function yo(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yl(e,t){var r=e.x,n=e.y,i=ya(e,m7),s=parseInt("".concat(r),10),a=parseInt("".concat(n),10),o=parseInt("".concat(t.height||i.height),10),l=parseInt("".concat(t.width||i.width),10);return yr(yr(yr(yr(yr({},t),i),s?{x:s}:{}),a?{y:a}:{}),{},{height:o,width:l,name:t.name,radius:t.radius})}function yu(e){return g().createElement(mX,ye({shapeType:"rectangle",propTransformer:yl,activeClassName:"recharts-active-bar"},e))}var yc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"==typeof e)return e;var i="number"==typeof r;return i?e(r,n):(i||nR(!1),t)}},yd=["value","background"];function yh(e){return(yh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yf(e,t){if(null==e)return{};var r,n,i=yp(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function yp(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yg(){return(yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ym(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ym(Object(r),!0).forEach(function(t){yI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ym(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yv(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function yb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yA(n.key),n)}}function yS(e,t,r){return t&&yb(e.prototype,t),r&&yb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yw(e,t,r){return t=yx(t),yT(e,yC()?Reflect.construct(t,r||[],yx(e).constructor):t.apply(e,r))}function yT(e,t){if(t&&("object"===yh(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return yE(e)}function yE(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yC(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(yC=function(){return!!e})()}function yx(e){return(yx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y_(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yO(e,t)}function yO(e,t){return(yO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function yI(e,t,r){return(t=yA(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yA(e){var t=yk(e,"string");return"symbol"==yh(t)?t:t+""}function yk(e,t){if("object"!=yh(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yh(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var yR=function(e){function t(){var e;yv(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return yI(e=yw(this,t,[].concat(n)),"state",{isAnimationFinished:!1}),yI(e,"id",B("recharts-bar-")),yI(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),yI(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return y_(t,e),yS(t,[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,i=r.dataKey,s=r.activeIndex,a=r.activeBar,o=ex(this.props,!1);return e&&e.map(function(e,r){var l=r===s,u=l?a:n,c=yy(yy(yy({},o),e),{},{isActive:l,option:u,index:r,dataKey:i,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return g().createElement(nj,yg({className:"recharts-bar-rectangle"},eo(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value)}),g().createElement(yu,c))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,i=t.isAnimationActive,s=t.animationBegin,a=t.animationDuration,o=t.animationEasing,l=t.animationId,u=this.state.prevData;return g().createElement(sY,{begin:s,duration:a,isActive:i,easing:o,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var i=t.t,s=r.map(function(e,t){var r=u&&u[t];if(r){var s=z(r.x,e.x),a=z(r.y,e.y),o=z(r.width,e.width),l=z(r.height,e.height);return yy(yy({},e),{},{x:s(i),y:a(i),width:o(i),height:l(i)})}if("horizontal"===n){var c=z(0,e.height)(i);return yy(yy({},e),{},{y:e.y+e.height-c,height:c})}var d=z(0,e.width)(i);return yy(yy({},e),{},{width:d})});return g().createElement(nj,null,e.renderRectanglesStatically(s))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return r&&t&&t.length&&(!n||!hl()(n,t))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(t)}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,i=t.activeIndex,s=ex(this.props.background,!1);return r.map(function(t,r){t.value;var a=t.background,o=yf(t,yd);if(!a)return null;var l=yy(yy(yy(yy(yy({},o),{},{fill:"#eee"},a),s),eo(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return g().createElement(yu,yg({key:"background-bar-".concat(r),option:e.props.background,isActive:r===i},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,i=r.xAxis,s=r.yAxis,a=r.layout,o=ev(r.children,fB);if(!o)return null;var l="vertical"===a?n[0].height/2:n[0].width/2,u=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:f6(e,t)}},c={clipPath:e?"url(#clipPath-".concat(t,")"):null};return g().createElement(nj,c,o.map(function(e){return g().cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:i,yAxis:s,layout:a,offset:l,dataPointFormatter:u})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,i=e.xAxis,s=e.yAxis,a=e.left,o=e.top,l=e.width,u=e.height,c=e.isAnimationActive,d=e.background,h=e.id;if(t||!r||!r.length)return null;var f=this.state.isAnimationFinished,p=(0,T.A)("recharts-bar",n),m=i&&i.allowDataOverflow,y=s&&s.allowDataOverflow,v=m||y,b=K()(h)?this.id:h;return g().createElement(nj,{className:p},m||y?g().createElement("defs",null,g().createElement("clipPath",{id:"clipPath-".concat(b)},g().createElement("rect",{x:m?a:a-l/2,y:y?o:o-u/2,width:m?l:2*l,height:y?u:2*u}))):null,g().createElement(nj,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(b,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(v,b),(!c||f)&&mr.renderCallByParent(this.props,r))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}])}(p.PureComponent);function yD(e){return(yD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yN(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function yP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yF(n.key),n)}}function yM(e,t,r){return t&&yP(e.prototype,t),r&&yP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yj(Object(r),!0).forEach(function(t){yB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yB(e,t,r){return(t=yF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yF(e){var t=yU(e,"string");return"symbol"==yD(t)?t:t+""}function yU(e,t){if("object"!=yD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}s=yR,yI(yR,"displayName","Bar"),yI(yR,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!tx.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),yI(yR,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,u=e.yAxisTicks,c=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,p=pf(n,r);if(!p)return null;var g=t.layout,m=r.type.defaultProps,y=void 0!==m?yy(yy({},m),r.props):r.props,v=y.dataKey,b=y.children,S=y.minPointSize,w="horizontal"===g?o:a,T=c?w.scale.domain():null,E=pw({numericAxis:w}),C=ev(b,gG),x=h.map(function(e,t){c?h=pp(c[d+t],T):Array.isArray(h=f6(e,v))||(h=[E,h]);var n=yc(S,s.defaultProps.minPointSize)(h[1],t);if("horizontal"===g){var h,f,m,y,b,w,x,_=[o.scale(h[0]),o.scale(h[1])],O=_[0],I=_[1];f=pS({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:e,index:t}),m=null!=(x=null!=I?I:O)?x:void 0,y=p.size;var A=O-I;if(b=Number.isNaN(A)?0:A,w={x:f,y:o.y,width:y,height:o.height},Math.abs(n)>0&&Math.abs(b)<Math.abs(n)){var k=N(b||n)*(Math.abs(n)-Math.abs(b));m-=k,b+=k}}else{var R=[a.scale(h[0]),a.scale(h[1])],D=R[0],P=R[1];if(f=D,m=pS({axis:o,ticks:u,bandSize:i,offset:p.offset,entry:e,index:t}),y=P-D,b=p.size,w={x:a.x,y:m,width:a.width,height:b},Math.abs(n)>0&&Math.abs(y)<Math.abs(n)){var M=N(y||n)*(Math.abs(n)-Math.abs(y));y+=M}}return yy(yy(yy({},e),{},{x:f,y:m,width:y,height:b,value:c?h:h[1],payload:e,background:w},C&&C[t]&&C[t].props),{},{tooltipPayload:[pk(r,e)],tooltipPosition:{x:f+y/2,y:m+b/2}})});return yy({data:x,layout:g},f)});var yV=function(e,t,r,n,i){var s=e.width,a=e.height,o=e.layout,l=e.children,u=Object.keys(t),c={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:a-r.bottom,bottomMirror:a-r.bottom},d=!!eb(l,yR);return u.reduce(function(s,a){var l,u,h,f,p,g=t[a],m=g.orientation,y=g.domain,v=g.padding,b=void 0===v?{}:v,S=g.mirror,w=g.reversed,T="".concat(m).concat(S?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var E=y[1]-y[0],C=1/0,x=g.categoricalDomain.sort();if(x.forEach(function(e,t){t>0&&(C=Math.min((e||0)-(x[t-1]||0),C))}),Number.isFinite(C)){var _=C/E,O="vertical"===g.layout?r.height:r.width;if("gap"===g.padding&&(l=_*O/2),"no-gap"===g.padding){var I=F(e.barCategoryGap,_*O),A=_*O/2;l=A-I-(A-I)/O*I}}}u="xAxis"===n?[r.left+(b.left||0)+(l||0),r.left+r.width-(b.right||0)-(l||0)]:"yAxis"===n?"horizontal"===o?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(l||0),r.top+r.height-(b.bottom||0)-(l||0)]:g.range,w&&(u=[u[1],u[0]]);var k=pc(g,i,d),R=k.scale,D=k.realScaleType;R.domain(y).range(u),ph(R);var N=pv(R,yL(yL({},g),{},{realScaleType:D}));"xAxis"===n?(p="top"===m&&!S||"bottom"===m&&S,h=r.left,f=c[T]-p*g.height):"yAxis"===n&&(p="left"===m&&!S||"right"===m&&S,h=c[T]-p*g.width,f=r.top);var P=yL(yL(yL({},g),N),{},{realScaleType:D,x:h,y:f,scale:R,width:"xAxis"===n?r.width:g.width,height:"yAxis"===n?r.height:g.height});return P.bandSize=pI(P,N),g.hide||"xAxis"!==n?g.hide||(c[T]+=(p?-1:1)*P.width):c[T]+=(p?-1:1)*P.height,yL(yL({},s),{},yB({},a,P))},{})},yz=function(e,t){var r=e.x,n=e.y,i=t.x,s=t.y;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},yq=function(e){return yz({x:e.x1,y:e.y1},{x:e.x2,y:e.y2})},y$=function(){function e(t){yN(this,e),this.scale=t}return yM(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(r){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],[{key:"create",value:function(t){return new e(t)}}])}();yB(y$,"EPS",1e-4);var yG=function(e){var t=Object.keys(e).reduce(function(t,r){return yL(yL({},t),{},yB({},r,y$.create(e[r])))},{});return yL(yL({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,i=r.position;return gz()(e,function(e,r){return t[r].apply(e,{bandAware:n,position:i})})},isInRange:function(e){return g$()(e,function(e,r){return t[r].isInRange(e)})}})};function yW(e){return(e%180+180)%180}var yK=function(e){var t=e.width,r=e.height,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=yW(n)*Math.PI/180,s=Math.atan(r/t);return Math.abs(i>s&&i<Math.PI-s?r/Math.sin(i):t/Math.cos(i))};function yH(){return(yH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yQ(e){return(yQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yY(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yY(Object(r),!0).forEach(function(t){y7(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yY(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yJ(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function yZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y9(n.key),n)}}function y0(e,t,r){return t&&yZ(e.prototype,t),r&&yZ(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y1(e,t,r){return t=y4(t),y2(e,y6()?Reflect.construct(t,r||[],y4(e).constructor):t.apply(e,r))}function y2(e,t){if(t&&("object"===yQ(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return y3(e)}function y3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y6=function(){return!!e})()}function y4(e){return(y4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y5(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y8(e,t)}function y8(e,t){return(y8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y7(e,t,r){return(t=y9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y9(e){var t=ve(e,"string");return"symbol"==yQ(t)?t:t+""}function ve(e,t){if("object"!=yQ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yQ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var vt=function(e){var t=e.x,r=e.y,n=e.xAxis,i=e.yAxis,s=yG({x:n.scale,y:i.scale}),a=s.apply({x:t,y:r},{bandAware:!0});return gU(e,"discard")&&!s.isInRange(a)?null:a},vr=function(e){function t(){return yJ(this,t),y1(this,t,arguments)}return y5(t,e),y0(t,[{key:"render",value:function(){var e=this.props,r=e.x,n=e.y,i=e.r,s=e.alwaysShow,a=e.clipPathId,o=j(r),l=j(n);if(G(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!o||!l)return null;var u=vt(this.props);if(!u)return null;var c=u.x,d=u.y,h=this.props,f=h.shape,p=h.className,m=yX(yX({clipPath:gU(this.props,"hidden")?"url(#".concat(a,")"):void 0},ex(this.props,!0)),{},{cx:c,cy:d});return g().createElement(nj,{className:(0,T.A)("recharts-reference-dot",p)},t.renderDot(f,m),gj.renderCallByParent(this.props,{x:c-i,y:d-i,width:2*i,height:2*i}))}}])}(g().Component);y7(vr,"displayName","ReferenceDot"),y7(vr,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),y7(vr,"renderDot",function(e,t){var r;return g().isValidElement(e)?g().cloneElement(e,t):Q()(e)?e(t):g().createElement(nB,yH({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var vn=r(67367),vi=r.n(vn),vs=r(22964),va=r.n(vs),vo=r(86451),vl=r.n(vo)()(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),vu=(0,p.createContext)(void 0),vc=(0,p.createContext)(void 0),vd=(0,p.createContext)(void 0),vh=(0,p.createContext)({}),vf=(0,p.createContext)(void 0),vp=(0,p.createContext)(0),vg=(0,p.createContext)(0),vm=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,i=t.offset,s=e.clipPathId,a=e.children,o=e.width,l=e.height,u=vl(i);return g().createElement(vu.Provider,{value:r},g().createElement(vc.Provider,{value:n},g().createElement(vh.Provider,{value:i},g().createElement(vd.Provider,{value:u},g().createElement(vf.Provider,{value:s},g().createElement(vp.Provider,{value:l},g().createElement(vg.Provider,{value:o},a)))))))},vy=function(){return(0,p.useContext)(vf)},vv=function(e){var t=(0,p.useContext)(vu);null==t&&nR(!1);var r=t[e];return null==r&&nR(!1),r},vb=function(){return U((0,p.useContext)(vu))},vS=function(){var e=(0,p.useContext)(vc);return va()(e,function(e){return g$()(e.domain,Number.isFinite)})||U(e)},vw=function(e){var t=(0,p.useContext)(vc);null==t&&nR(!1);var r=t[e];return null==r&&nR(!1),r},vT=function(){return(0,p.useContext)(vd)},vE=function(){return(0,p.useContext)(vh)},vC=function(){return(0,p.useContext)(vg)},vx=function(){return(0,p.useContext)(vp)};function v_(e){return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vO(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function vI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vU(n.key),n)}}function vA(e,t,r){return t&&vI(e.prototype,t),r&&vI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vk(e,t,r){return t=vP(t),vR(e,vN()?Reflect.construct(t,r||[],vP(e).constructor):t.apply(e,r))}function vR(e,t){if(t&&("object"===v_(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return vD(e)}function vD(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vN=function(){return!!e})()}function vP(e){return(vP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vM(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vj(e,t)}function vj(e,t){return(vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vL(Object(r),!0).forEach(function(t){vF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vF(e,t,r){return(t=vU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vU(e){var t=vV(e,"string");return"symbol"==v_(t)?t:t+""}function vV(e,t){if("object"!=v_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function vz(e,t){return vK(e)||vW(e,t)||v$(e,t)||vq()}function vq(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v$(e,t){if(e){if("string"==typeof e)return vG(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vG(e,t)}}function vG(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vW(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function vK(e){if(Array.isArray(e))return e}function vH(){return(vH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var vQ=function(e,t){var r;return g().isValidElement(e)?g().cloneElement(e,t):Q()(e)?e(t):g().createElement("line",vH({},t,{className:"recharts-reference-line-line"}))},vY=function(e,t,r,n,i,s,a,o,l){var u=i.x,c=i.y,d=i.width,h=i.height;if(r){var f=l.y,p=e.y.apply(f,{position:s});if(gU(l,"discard")&&!e.y.isInRange(p))return null;var g=[{x:u+d,y:p},{x:u,y:p}];return"left"===o?g.reverse():g}if(t){var m=l.x,y=e.x.apply(m,{position:s});if(gU(l,"discard")&&!e.x.isInRange(y))return null;var v=[{x:y,y:c+h},{x:y,y:c}];return"top"===a?v.reverse():v}if(n){var b=l.segment.map(function(t){return e.apply(t,{position:s})});return gU(l,"discard")&&vi()(b,function(t){return!e.isInRange(t)})?null:b}return null};function vX(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,a=e.shape,o=e.className,l=e.alwaysShow,u=vy(),c=vv(i),d=vw(s),h=vT();if(!u||!h)return null;G(void 0===l,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=vY(yG({x:c.scale,y:d.scale}),j(t),j(r),n&&2===n.length,h,e.position,c.orientation,d.orientation,e);if(!f)return null;var p=vz(f,2),m=p[0],y=m.x,v=m.y,b=p[1],S=b.x,w=b.y,E=vB(vB({clipPath:gU(e,"hidden")?"url(#".concat(u,")"):void 0},ex(e,!0)),{},{x1:y,y1:v,x2:S,y2:w});return g().createElement(nj,{className:(0,T.A)("recharts-reference-line",o)},vQ(a,E),gj.renderCallByParent(e,yq({x1:y,y1:v,x2:S,y2:w})))}var vJ=function(e){function t(){return vO(this,t),vk(this,t,arguments)}return vM(t,e),vA(t,[{key:"render",value:function(){return g().createElement(vX,this.props)}}])}(g().Component);function vZ(){return(vZ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v0(e){return(v0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v1(Object(r),!0).forEach(function(t){bn(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v3(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function v6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bi(n.key),n)}}function v4(e,t,r){return t&&v6(e.prototype,t),r&&v6(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v5(e,t,r){return t=be(t),v8(e,v9()?Reflect.construct(t,r||[],be(e).constructor):t.apply(e,r))}function v8(e,t){if(t&&("object"===v0(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return v7(e)}function v7(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v9=function(){return!!e})()}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&br(e,t)}function br(e,t){return(br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bn(e,t,r){return(t=bi(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bi(e){var t=bs(e,"string");return"symbol"==v0(t)?t:t+""}function bs(e,t){if("object"!=v0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=v0(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}vF(vJ,"displayName","ReferenceLine"),vF(vJ,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var ba=function(e,t,r,n,i){var s=i.x1,a=i.x2,o=i.y1,l=i.y2,u=i.xAxis,c=i.yAxis;if(!u||!c)return null;var d=yG({x:u.scale,y:c.scale}),h={x:e?d.x.apply(s,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(o,{position:"start"}):d.y.rangeMin},f={x:t?d.x.apply(a,{position:"end"}):d.x.rangeMax,y:n?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!gU(i,"discard")||d.isInRange(h)&&d.isInRange(f)?yz(h,f):null},bo=function(e){function t(){return v3(this,t),v5(this,t,arguments)}return bt(t,e),v4(t,[{key:"render",value:function(){var e=this.props,r=e.x1,n=e.x2,i=e.y1,s=e.y2,a=e.className,o=e.alwaysShow,l=e.clipPathId;G(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=j(r),c=j(n),d=j(i),h=j(s),f=this.props.shape;if(!u&&!c&&!d&&!h&&!f)return null;var p=ba(u,c,d,h,this.props);if(!p&&!f)return null;var m=gU(this.props,"hidden")?"url(#".concat(l,")"):void 0;return g().createElement(nj,{className:(0,T.A)("recharts-reference-area",a)},t.renderRect(f,v2(v2({clipPath:m},ex(this.props,!0)),p)),gj.renderCallByParent(this.props,p))}}])}(g().Component);function bl(e){return bh(e)||bd(e)||bc(e)||bu()}function bu(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bc(e,t){if(e){if("string"==typeof e)return bf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bf(e,t)}}function bd(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function bh(e){if(Array.isArray(e))return bf(e)}function bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}bn(bo,"displayName","ReferenceArea"),bn(bo,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),bn(bo,"renderRect",function(e,t){var r;return g().isValidElement(e)?g().cloneElement(e,t):Q()(e)?e(t):g().createElement(an,vZ({},t,{className:"recharts-reference-area-rect"}))});var bp=function(e,t,r,n,i){var s=ev(e,vJ),a=ev(e,vr),o=[].concat(bl(s),bl(a)),l=ev(e,bo),u="".concat(n,"Id"),c=n[0],d=t;if(o.length&&(d=o.reduce(function(e,t){if(t.props[u]===r&&gU(t.props,"extendDomain")&&M(t.props[c])){var n=t.props[c];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},d)),l.length){var h="".concat(c,"1"),f="".concat(c,"2");d=l.reduce(function(e,t){if(t.props[u]===r&&gU(t.props,"extendDomain")&&M(t.props[h])&&M(t.props[f])){var n=t.props[h],i=t.props[f];return[Math.min(e[0],n,i),Math.max(e[1],n,i)]}return e},d)}return i&&i.length&&(d=i.reduce(function(e,t){return M(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},bg=r(11117),bm=new(r.n(bg)()),by="recharts.syncMouseEvents";function bv(e){return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bb(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function bS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bE(n.key),n)}}function bw(e,t,r){return t&&bS(e.prototype,t),r&&bS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bT(e,t,r){return(t=bE(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bE(e){var t=bC(e,"string");return"symbol"==bv(t)?t:t+""}function bC(e,t){if("object"!=bv(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bv(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var bx=function(){function e(){bb(this,e),bT(this,"activeIndex",0),bT(this,"coordinateList",[]),bT(this,"layout","horizontal")}return bw(e,[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,i=e.container,s=void 0===i?null:i,a=e.layout,o=void 0===a?null:a,l=e.offset,u=void 0===l?null:l,c=e.mouseHandlerCallback,d=void 0===c?null:c;this.coordinateList=null!=(t=null!=n?n:this.coordinateList)?t:[],this.container=null!=s?s:this.container,this.layout=null!=o?o:this.layout,this.offset=null!=u?u:this.offset,this.mouseHandlerCallback=null!=d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){if("horizontal"===this.layout&&0!==this.coordinateList.length){var e,t,r=this.container.getBoundingClientRect(),n=r.x,i=r.y,s=r.height,a=this.coordinateList[this.activeIndex].coordinate,o=(null==(e=window)?void 0:e.scrollX)||0,l=(null==(t=window)?void 0:t.scrollY)||0,u=n+a+o,c=i+this.offset.top+s/2+l;this.mouseHandlerCallback({pageX:u,pageY:c})}}}])}();function b_(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],i=null==e?void 0:e[1];if(n&&i&&M(n)&&M(i))return!0}return!1}function bO(){}function bI(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function bA(e){this._context=e}function bk(e){return new bA(e)}function bR(e){this._context=e}function bD(e){return new bR(e)}function bN(e){this._context=e}function bP(e){return new bN(e)}bA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:bI(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:bI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},bR.prototype={areaStart:bO,areaEnd:bO,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:bI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},bN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:bI(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class bM{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function bj(e){return new bM(e,!0)}function bL(e){return new bM(e,!1)}function bB(e){this._context=e}function bF(e){return new bB(e)}function bU(e){this._context=e}function bV(e){return new bU(e)}function bz(e){return e<0?-1:1}function bq(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),a=(r-e._y1)/(i||n<0&&-0),o=(s*i+a*n)/(n+i);return(bz(s)+bz(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function b$(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function bG(e,t,r){var n=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,i+o*t,s-o,a-o*r,s,a)}function bW(e){this._context=e}function bK(e){this._context=new bH(e)}function bH(e){this._context=e}function bQ(e){return new bW(e)}function bY(e){return new bK(e)}function bX(e){this._context=e}function bJ(e){var t,r,n=e.length-1,i=Array(n),s=Array(n),a=Array(n);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(t=0,s[n-1]=(e[n]+i[n-1])/2;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function bZ(e){return new bX(e)}function b0(e,t){this._context=e,this._t=t}function b1(e){return e[0]}function b2(e){return e[1]}function b3(e,t){var r=rg(!0),n=null,i=bV,s=null,a=rE(o);function o(o){var l,u,c,d=(o=dQ(o)).length,h=!1;for(null==n&&(s=i(c=a())),l=0;l<=d;++l)!(l<d&&r(u=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(u,l,o),+t(u,l,o));if(c)return s=null,c+""||null}return e="function"==typeof e?e:void 0===e?b1:rg(e),t="function"==typeof t?t:void 0===t?b2:rg(t),o.x=function(t){return arguments.length?(e="function"==typeof t?t:rg(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:rg(+e),o):t},o.defined=function(e){return arguments.length?(r="function"==typeof e?e:rg(!!e),o):r},o.curve=function(e){return arguments.length?(i=e,null!=n&&(s=i(n)),o):i},o.context=function(e){return arguments.length?(null==e?n=s=null:s=i(n=e),o):n},o}function b6(e,t,r){var n=null,i=rg(!0),s=null,a=bV,o=null,l=rE(u);function u(u){var c,d,h,f,p,g=(u=dQ(u)).length,m=!1,y=Array(g),v=Array(g);for(null==s&&(o=a(p=l())),c=0;c<=g;++c){if(!(c<g&&i(f=u[c],c,u))===m)if(m=!m)d=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=c-1;h>=d;--h)o.point(y[h],v[h]);o.lineEnd(),o.areaEnd()}m&&(y[c]=+e(f,c,u),v[c]=+t(f,c,u),o.point(n?+n(f,c,u):y[c],r?+r(f,c,u):v[c]))}if(p)return o=null,p+""||null}function c(){return b3().defined(i).curve(a).context(s)}return e="function"==typeof e?e:void 0===e?b1:rg(+e),t="function"==typeof t?t:void 0===t?rg(0):rg(+t),r="function"==typeof r?r:void 0===r?b2:rg(+r),u.x=function(t){return arguments.length?(e="function"==typeof t?t:rg(+t),n=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:rg(+t),u):e},u.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:rg(+e),u):n},u.y=function(e){return arguments.length?(t="function"==typeof e?e:rg(+e),r=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:rg(+e),u):t},u.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:rg(+e),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:rg(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=s&&(o=a(s)),u):a},u.context=function(e){return arguments.length?(null==e?s=o=null:o=a(s=e),u):s},u}function b4(e){return(b4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b5(){return(b5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b8(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b7(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b8(Object(r),!0).forEach(function(t){b9(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b8(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b9(e,t,r){return(t=Se(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(e){var t=St(e,"string");return"symbol"==b4(t)?t:t+""}function St(e,t){if("object"!=b4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b4(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}bB.prototype={areaStart:bO,areaEnd:bO,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e*=1,t*=1,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},bU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},bW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bG(this,this._t0,b$(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bG(this,b$(this,r=bq(this,e,t)),r);break;default:bG(this,this._t0,r=bq(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(bK.prototype=Object.create(bW.prototype)).point=function(e,t){bW.prototype.point.call(this,t,e)},bH.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}},bX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=bJ(e),i=bJ(t),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[a],t[a]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},b0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var Sr={curveBasisClosed:bD,curveBasisOpen:bP,curveBasis:bk,curveBumpX:bj,curveBumpY:bL,curveLinearClosed:bF,curveLinear:bV,curveMonotoneX:bQ,curveMonotoneY:bY,curveNatural:bZ,curveStep:function(e){return new b0(e,.5)},curveStepAfter:function(e){return new b0(e,1)},curveStepBefore:function(e){return new b0(e,0)}},Sn=function(e){return e.x===+e.x&&e.y===+e.y},Si=function(e){return e.x},Ss=function(e){return e.y},Sa=function(e,t){if(Q()(e))return e;var r="curve".concat(t0()(e));return("curveMonotone"===r||"curveBump"===r)&&t?Sr["".concat(r).concat("vertical"===t?"Y":"X")]:Sr[r]||bV},So=function(e){var t,r=e.type,n=void 0===r?"linear":r,i=e.points,s=void 0===i?[]:i,a=e.baseLine,o=e.layout,l=e.connectNulls,u=void 0!==l&&l,c=Sa(n,o),d=u?s.filter(function(e){return Sn(e)}):s;if(Array.isArray(a)){var h=u?a.filter(function(e){return Sn(e)}):a,f=d.map(function(e,t){return b7(b7({},e),{},{base:h[t]})});return(t="vertical"===o?b6().y(Ss).x1(Si).x0(function(e){return e.base.x}):b6().x(Si).y1(Ss).y0(function(e){return e.base.y})).defined(Sn).curve(c),t(f)}return(t="vertical"===o&&M(a)?b6().y(Ss).x1(Si).x0(a):M(a)?b6().x(Si).y1(Ss).y0(a):b3().x(Si).y(Ss)).defined(Sn).curve(c),t(d)},Sl=function(e){var t=e.className,r=e.points,n=e.path,i=e.pathRef;if((!r||!r.length)&&!n)return null;var s=r&&r.length?So(e):n;return g().createElement("path",b5({},ex(e,!1),es(e),{className:(0,T.A)("recharts-curve",t),d:s,ref:i}))};function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Sc=["x","y","top","left","width","height","className"];function Sd(){return(Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sh(Object(r),!0).forEach(function(t){Sp(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Sp(e,t,r){return(t=Sg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sg(e){var t=Sm(e,"string");return"symbol"==Su(t)?t:t+""}function Sm(e,t){if("object"!=Su(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Su(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Sy(e,t){if(null==e)return{};var r,n,i=Sv(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Sv(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Sb=function(e,t,r,n,i,s){return"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r)},SS=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,i=void 0===n?0:n,s=e.top,a=void 0===s?0:s,o=e.left,l=void 0===o?0:o,u=e.width,c=void 0===u?0:u,d=e.height,h=void 0===d?0:d,f=e.className,p=Sf({x:r,y:i,top:a,left:l,width:c,height:h},Sy(e,Sc));return M(r)&&M(i)&&M(c)&&M(h)&&M(a)&&M(l)?g().createElement("path",Sd({},ex(p,!0),{className:(0,T.A)("recharts-cross",f),d:Sb(r,i,c,h,a,l)})):null};function Sw(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-i,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}function ST(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,s=e.endAngle;return{points:[gl(t,r,n,i),gl(t,r,n,s)],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function SE(e,t,r){var n,i,s,a;if("horizontal"===e)s=n=t.x,i=r.top,a=r.top+r.height;else if("vertical"===e)a=i=t.y,n=r.left,s=r.left+r.width;else if(null!=t.cx&&null!=t.cy)if("centric"!==e)return ST(t);else{var o=t.cx,l=t.cy,u=t.innerRadius,c=t.outerRadius,d=t.angle,h=gl(o,l,u,d),f=gl(o,l,c,d);n=h.x,i=h.y,s=f.x,a=f.y}return[{x:n,y:i},{x:s,y:a}]}function SC(e){return(SC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sx(Object(r),!0).forEach(function(t){SO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sx(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SO(e,t,r){return(t=SI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SI(e){var t=SA(e,"string");return"symbol"==SC(t)?t:t+""}function SA(e,t){if("object"!=SC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SC(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Sk(e){var t,r,n,i=e.element,s=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,u=e.offset,c=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,g=null!=(t=i.props.cursor)?t:null==(r=i.type.defaultProps)?void 0:r.cursor;if(!i||!g||!a||!o||"ScatterChart"!==f&&"axis"!==s)return null;var m=Sl;if("ScatterChart"===f)n=o,m=SS;else if("BarChart"===f)n=Sw(h,o,u,d),m=an;else if("radial"===h){var y=ST(o),v=y.cx,b=y.cy,S=y.radius;n={cx:v,cy:b,startAngle:y.startAngle,endAngle:y.endAngle,innerRadius:S,outerRadius:S},m=mL}else n={points:SE(h,o,u)},m=Sl;var w=S_(S_(S_(S_({stroke:"#ccc",pointerEvents:"none"},u),n),ex(g,!1)),{},{payload:l,payloadIndex:c,className:(0,T.A)("recharts-tooltip-cursor",g.className)});return(0,p.isValidElement)(g)?(0,p.cloneElement)(g,w):(0,p.createElement)(m,w)}var SR=["item"],SD=["children","className","width","height","style","compact","title","desc"];function SN(e){return(SN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SP(){return(SP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function SM(e,t){return SB(e)||SL(e,t)||SZ(e,t)||Sj()}function Sj(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SL(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function SB(e){if(Array.isArray(e))return e}function SF(e,t){if(null==e)return{};var r,n,i=SU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SU(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function SV(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Sz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S5(n.key),n)}}function Sq(e,t,r){return t&&Sz(e.prototype,t),r&&Sz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S$(e,t,r){return t=SH(t),SG(e,SK()?Reflect.construct(t,r||[],SH(e).constructor):t.apply(e,r))}function SG(e,t){if(t&&("object"===SN(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return SW(e)}function SW(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SK(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(SK=function(){return!!e})()}function SH(e){return(SH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SQ(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&SY(e,t)}function SY(e,t){return(SY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function SX(e){return S1(e)||S0(e)||SZ(e)||SJ()}function SJ(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function SZ(e,t){if(e){if("string"==typeof e)return S2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S2(e,t)}}function S0(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function S1(e){if(Array.isArray(e))return S2(e)}function S2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function S3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S3(Object(r),!0).forEach(function(t){S4(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S4(e,t,r){return(t=S5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S5(e){var t=S8(e,"string");return"symbol"==SN(t)?t:t+""}function S8(e,t){if("object"!=SN(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=SN(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var S7={xAxis:["bottom","top"],yAxis:["left","right"]},S9={width:"100%",height:"100%"},we={x:0,y:0};function wt(e){return e}var wr=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius},wn=function(e,t,r,n){var i=t.find(function(e){return e&&e.index===r});if(i){if("horizontal"===e)return{x:i.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:i.coordinate};if("centric"===e){var s=i.coordinate,a=n.radius;return S6(S6(S6({},n),gl(n.cx,n.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,l=n.angle;return S6(S6(S6({},n),gl(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return we},wi=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,i=t.dataEndIndex,s=(null!=r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(SX(e),SX(r)):e},[]);return s.length>0?s:e&&e.length&&M(n)&&M(i)?e.slice(n,i+1):[]};function ws(e){return"number"===e?[0,"auto"]:void 0}var wa=function(e,t,r,n){var i=e.graphicalItems,s=e.tooltipAxis,a=wi(t,e);return r<0||!i||!i.length||r>=a.length?null:i.reduce(function(i,o){var l,u,c=null!=(l=o.props.data)?l:t;return(c&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(c=c.slice(e.dataStartIndex,e.dataEndIndex+1)),u=s.dataKey&&!s.allowDuplicatedCategory?q(void 0===c?a:c,s.dataKey,n):c&&c[r]||a[r])?[].concat(SX(i),[pk(o,u)]):i},[])},wo=function(e,t,r,n){var i=n||{x:e.chartX,y:e.chartY},s=wr(i,r),a=e.orderedTooltipTicks,o=e.tooltipAxis,l=e.tooltipTicks,u=f5(s,a,l,o);if(u>=0&&l){var c=l[u]&&l[u].value,d=wa(e,t,u,c),h=wn(r,a,u,i);return{activeTooltipIndex:u,activeLabel:c,activePayload:d,activeCoordinate:h}}return null},wl=function(e,t){var r=t.axes,n=t.graphicalItems,i=t.axisType,s=t.axisIdKey,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,d=e.stackOffset,h=ps(u,i);return r.reduce(function(t,r){var f=void 0!==r.type.defaultProps?S6(S6({},r.type.defaultProps),r.props):r.props,p=f.type,g=f.dataKey,m=f.allowDataOverflow,y=f.allowDuplicatedCategory,v=f.scale,b=f.ticks,S=f.includeHidden,w=f[s];if(t[w])return t;var T=wi(e.data,{graphicalItems:n.filter(function(e){var t;return(s in e.props?e.props[s]:null==(t=e.type.defaultProps)?void 0:t[s])===w}),dataStartIndex:o,dataEndIndex:l}),E=T.length;b_(f.domain,m,p)&&(_=pO(f.domain,null,m),h&&("number"===p||"auto"!==v)&&(I=f4(T,g,"category")));var C=ws(p);if(!_||0===_.length){var x,_,O,I,A,k=null!=(A=f.domain)?A:C;if(g){if(_=f4(T,g,p),"category"===p&&h){var R=V(_);y&&R?(O=_,_=nI()(0,E)):y||(_=pA(k,_,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(SX(e),[t])},[]))}else if("category"===p)_=y?_.filter(function(e){return""!==e&&!K()(e)}):pA(k,_,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||K()(t)?e:[].concat(SX(e),[t])},[]);else if("number"===p){var D=pn(T,n.filter(function(e){var t,r,n=s in e.props?e.props[s]:null==(t=e.type.defaultProps)?void 0:t[s],i="hide"in e.props?e.props.hide:null==(r=e.type.defaultProps)?void 0:r.hide;return n===w&&(S||!i)}),g,i,u);D&&(_=D)}h&&("number"===p||"auto"!==v)&&(I=f4(T,g,"category"))}else _=h?nI()(0,E):a&&a[w]&&a[w].hasStack&&"number"===p?"expand"===d?[0,1]:pC(a[w].stackGroups,o,l):pi(T,n.filter(function(e){var t=s in e.props?e.props[s]:e.type.defaultProps[s],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===w&&(S||!r)}),p,u,!0);if("number"===p)_=bp(c,_,w,i,b),k&&(_=pO(k,_,m));else if("category"===p&&k){var N=k;_.every(function(e){return N.indexOf(e)>=0})&&(_=N)}}return S6(S6({},t),{},S4({},w,S6(S6({},f),{},{axisType:i,domain:_,categoricalDomain:I,duplicateDomain:O,originalDomain:null!=(x=f.domain)?x:C,isCategorical:h,layout:u})))},{})},wu=function(e,t){var r=t.graphicalItems,n=t.Axis,i=t.axisType,s=t.axisIdKey,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,u=e.layout,c=e.children,d=wi(e.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:l}),h=d.length,f=ps(u,i),p=-1;return r.reduce(function(e,t){var g,m=(void 0!==t.type.defaultProps?S6(S6({},t.type.defaultProps),t.props):t.props)[s],y=ws("number");return e[m]?e:(p++,g=f?nI()(0,h):a&&a[m]&&a[m].hasStack?bp(c,g=pC(a[m].stackGroups,o,l),m,i):bp(c,g=pO(y,pi(d,r.filter(function(e){var t,r,n=s in e.props?e.props[s]:null==(t=e.type.defaultProps)?void 0:t[s],i="hide"in e.props?e.props.hide:null==(r=e.type.defaultProps)?void 0:r.hide;return n===m&&!i}),"number",u),n.defaultProps.allowDataOverflow),m,i),S6(S6({},e),{},S4({},m,S6(S6({axisType:i},n.defaultProps),{},{hide:!0,orientation:k()(S7,"".concat(i,".").concat(p%2),null),domain:g,originalDomain:y,isCategorical:f,layout:u}))))},{})},wc=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,i=t.AxisComp,s=t.graphicalItems,a=t.stackGroups,o=t.dataStartIndex,l=t.dataEndIndex,u=e.children,c="".concat(n,"Id"),d=ev(u,i),h={};return d&&d.length?h=wl(e,{axes:d,graphicalItems:s,axisType:n,axisIdKey:c,stackGroups:a,dataStartIndex:o,dataEndIndex:l}):s&&s.length&&(h=wu(e,{Axis:i,graphicalItems:s,axisType:n,axisIdKey:c,stackGroups:a,dataStartIndex:o,dataEndIndex:l})),h},wd=function(e){var t=U(e),r=po(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:eG()(r,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:pI(t,r)}},wh=function(e){var t=e.children,r=e.defaultShowTooltip,n=eb(t,p6),i=0,s=0;return e.data&&0!==e.data.length&&(s=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(i=n.props.startIndex),n.props.endIndex>=0&&(s=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},wf=function(e){return!!e&&!!e.length&&e.some(function(e){var t=ep(e&&e.type);return t&&t.indexOf("Bar")>=0})},wp=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},wg=function(e,t){var r=e.props,n=e.graphicalItems,i=e.xAxisMap,s=void 0===i?{}:i,a=e.yAxisMap,o=void 0===a?{}:a,l=r.width,u=r.height,c=r.children,d=r.margin||{},h=eb(c,p6),f=eb(c,nb),p=Object.keys(o).reduce(function(e,t){var r=o[t],n=r.orientation;return r.mirror||r.hide?e:S6(S6({},e),{},S4({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),g=Object.keys(s).reduce(function(e,t){var r=s[t],n=r.orientation;return r.mirror||r.hide?e:S6(S6({},e),{},S4({},n,k()(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),m=S6(S6({},g),p),y=m.bottom;h&&(m.bottom+=h.props.height||p6.defaultProps.height),f&&t&&(m=pe(m,n,r,t));var v=l-m.left-m.right,b=u-m.top-m.bottom;return S6(S6({brushBottom:y},m),{},{width:Math.max(v,0),height:Math.max(b,0)})},wm=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0},wy=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,i=void 0===n?"axis":n,s=e.validateTooltipEventTypes,a=void 0===s?["axis"]:s,o=e.axisComponents,l=e.legendContent,u=e.formatAxisMap,c=e.defaultProps,d=function(e,t){var r=t.graphicalItems,n=t.stackGroups,i=t.offset,s=t.updateId,a=t.dataStartIndex,l=t.dataEndIndex,u=e.barSize,c=e.layout,d=e.barGap,h=e.barCategoryGap,f=e.maxBarSize,p=wp(c),g=p.numericAxisName,m=p.cateAxisName,y=wf(r),v=[];return r.forEach(function(r,p){var b=wi(e.data,{graphicalItems:[r],dataStartIndex:a,dataEndIndex:l}),S=void 0!==r.type.defaultProps?S6(S6({},r.type.defaultProps),r.props):r.props,w=S.dataKey,T=S.maxBarSize,E=S["".concat(g,"Id")],C=S["".concat(m,"Id")],x={},_=o.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],i=S["".concat(r.axisType,"Id")];n&&n[i]||"zAxis"===r.axisType||nR(!1);var s=n[i];return S6(S6({},e),{},S4(S4({},r.axisType,s),"".concat(r.axisType,"Ticks"),po(s)))},x),O=_[m],I=_["".concat(m,"Ticks")],A=n&&n[E]&&n[E].hasStack&&pT(r,n[E].stackGroups),k=ep(r.type).indexOf("Bar")>=0,R=pI(O,I),D=[],N=y&&f7({barSize:u,stackGroups:n,totalSize:wm(_,m)});if(k){var P,M,j=K()(T)?f:T,L=null!=(P=null!=(M=pI(O,I,!0))?M:j)?P:0;D=f9({barGap:d,barCategoryGap:h,bandSize:L!==R?L:R,sizeList:N[C],maxBarSize:j}),L!==R&&(D=D.map(function(e){return S6(S6({},e),{},{position:S6(S6({},e.position),{},{offset:e.position.offset-L/2})})}))}var B=r&&r.type&&r.type.getComposedData;B&&v.push({props:S6(S6({},B(S6(S6({},_),{},{displayedData:b,props:e,dataKey:w,item:r,bandSize:R,barPosition:D,offset:i,stackedData:A,layout:c,dataStartIndex:a,dataEndIndex:l}))),{},S4(S4(S4({key:r.key||"item-".concat(p)},g,_[g]),m,_[m]),"animationId",s)),childIndex:ek(r,e.children),item:r})}),v},h=function(e,n){var i=e.props,s=e.dataStartIndex,a=e.dataEndIndex,l=e.updateId;if(!eS({props:i}))return null;var c=i.children,h=i.layout,f=i.stackOffset,p=i.data,g=i.reverseStackOrder,m=wp(h),y=m.numericAxisName,v=m.cateAxisName,b=ev(c,r),S=py(p,b,"".concat(y,"Id"),"".concat(v,"Id"),f,g),w=o.reduce(function(e,t){var r="".concat(t.axisType,"Map");return S6(S6({},e),{},S4({},r,wc(i,S6(S6({},t),{},{graphicalItems:b,stackGroups:t.axisType===y&&S,dataStartIndex:s,dataEndIndex:a}))))},{}),T=wg(S6(S6({},w),{},{props:i,graphicalItems:b}),null==n?void 0:n.legendBBox);Object.keys(w).forEach(function(e){w[e]=u(i,w[e],T,e.replace("Map",""),t)});var E=wd(w["".concat(v,"Map")]),C=d(i,S6(S6({},w),{},{dataStartIndex:s,dataEndIndex:a,updateId:l,graphicalItems:b,stackGroups:S,offset:T}));return S6(S6({formattedGraphicalItems:C,graphicalItems:b,offset:T,stackGroups:S},E),w)},f=function(e){function r(e){var n,i,s;return SV(this,r),S4(s=S$(this,r,[e]),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),S4(s,"accessibilityManager",new bx),S4(s,"handleLegendBBoxUpdate",function(e){if(e){var t=s.state,r=t.dataStartIndex,n=t.dataEndIndex,i=t.updateId;s.setState(S6({legendBBox:e},h({props:s.props,dataStartIndex:r,dataEndIndex:n,updateId:i},S6(S6({},s.state),{},{legendBBox:e}))))}}),S4(s,"handleReceiveSyncEvent",function(e,t,r){s.props.syncId===e&&(r!==s.eventEmitterSymbol||"function"==typeof s.props.syncMethod)&&s.applySyncEvent(t)}),S4(s,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==s.state.dataStartIndex||r!==s.state.dataEndIndex){var n=s.state.updateId;s.setState(function(){return S6({dataStartIndex:t,dataEndIndex:r},h({props:s.props,dataStartIndex:t,dataEndIndex:r,updateId:n},s.state))}),s.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),S4(s,"handleMouseEnter",function(e){var t=s.getMouseInfo(e);if(t){var r=S6(S6({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseEnter;Q()(n)&&n(r,e)}}),S4(s,"triggeredAfterMouseMove",function(e){var t=s.getMouseInfo(e),r=t?S6(S6({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};s.setState(r),s.triggerSyncEvent(r);var n=s.props.onMouseMove;Q()(n)&&n(r,e)}),S4(s,"handleItemMouseEnter",function(e){s.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),S4(s,"handleItemMouseLeave",function(){s.setState(function(){return{isTooltipActive:!1}})}),S4(s,"handleMouseMove",function(e){e.persist(),s.throttleTriggeredAfterMouseMove(e)}),S4(s,"handleMouseLeave",function(e){s.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};s.setState(t),s.triggerSyncEvent(t);var r=s.props.onMouseLeave;Q()(r)&&r(t,e)}),S4(s,"handleOuterEvent",function(e){var t,r,n=eA(e),i=k()(s.props,"".concat(n));n&&Q()(i)&&i(null!=(t=r=/.*touch.*/i.test(n)?s.getMouseInfo(e.changedTouches[0]):s.getMouseInfo(e))?t:{},e)}),S4(s,"handleClick",function(e){var t=s.getMouseInfo(e);if(t){var r=S6(S6({},t),{},{isTooltipActive:!0});s.setState(r),s.triggerSyncEvent(r);var n=s.props.onClick;Q()(n)&&n(r,e)}}),S4(s,"handleMouseDown",function(e){var t=s.props.onMouseDown;Q()(t)&&t(s.getMouseInfo(e),e)}),S4(s,"handleMouseUp",function(e){var t=s.props.onMouseUp;Q()(t)&&t(s.getMouseInfo(e),e)}),S4(s,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),S4(s,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseDown(e.changedTouches[0])}),S4(s,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&s.handleMouseUp(e.changedTouches[0])}),S4(s,"handleDoubleClick",function(e){var t=s.props.onDoubleClick;Q()(t)&&t(s.getMouseInfo(e),e)}),S4(s,"handleContextMenu",function(e){var t=s.props.onContextMenu;Q()(t)&&t(s.getMouseInfo(e),e)}),S4(s,"triggerSyncEvent",function(e){void 0!==s.props.syncId&&bm.emit(by,s.props.syncId,e,s.eventEmitterSymbol)}),S4(s,"applySyncEvent",function(e){var t=s.props,r=t.layout,n=t.syncMethod,i=s.state.updateId,a=e.dataStartIndex,o=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)s.setState(S6({dataStartIndex:a,dataEndIndex:o},h({props:s.props,dataStartIndex:a,dataEndIndex:o,updateId:i},s.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,u=e.chartY,c=e.activeTooltipIndex,d=s.state,f=d.offset,p=d.tooltipTicks;if(!f)return;if("function"==typeof n)c=n(p,e);else if("value"===n){c=-1;for(var g=0;g<p.length;g++)if(p[g].value===e.activeLabel){c=g;break}}var m=S6(S6({},f),{},{x:f.left,y:f.top}),y=Math.min(l,m.x+m.width),v=Math.min(u,m.y+m.height),b=p[c]&&p[c].value,S=wa(s.state,s.props.data,c),w=p[c]?{x:"horizontal"===r?p[c].coordinate:y,y:"horizontal"===r?v:p[c].coordinate}:we;s.setState(S6(S6({},e),{},{activeLabel:b,activeCoordinate:w,activePayload:S,activeTooltipIndex:c}))}else s.setState(e)}),S4(s,"renderCursor",function(e){var r,n=s.state,i=n.isTooltipActive,a=n.activeCoordinate,o=n.activePayload,l=n.offset,u=n.activeTooltipIndex,c=n.tooltipAxisBandSize,d=s.getTooltipEventType(),h=null!=(r=e.props.active)?r:i,f=s.props.layout,p=e.key||"_recharts-cursor";return g().createElement(Sk,{key:p,activeCoordinate:a,activePayload:o,activeTooltipIndex:u,chartName:t,element:e,isActive:h,layout:f,offset:l,tooltipAxisBandSize:c,tooltipEventType:d})}),S4(s,"renderPolarAxis",function(e,t,r){var n=k()(e,"type.axisType"),i=k()(s.state,"".concat(n,"Map")),a=e.type.defaultProps,o=void 0!==a?S6(S6({},a),e.props):e.props,l=i&&i[o["".concat(n,"Id")]];return(0,p.cloneElement)(e,S6(S6({},l),{},{className:(0,T.A)(n,l.className),key:e.key||"".concat(t,"-").concat(r),ticks:po(l,!0)}))}),S4(s,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,i=t.polarRadius,a=s.state,o=a.radiusAxisMap,l=a.angleAxisMap,u=U(o),c=U(l),d=c.cx,h=c.cy,f=c.innerRadius,g=c.outerRadius;return(0,p.cloneElement)(e,{polarAngles:Array.isArray(n)?n:po(c,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(i)?i:po(u,!0).map(function(e){return e.coordinate}),cx:d,cy:h,innerRadius:f,outerRadius:g,key:e.key||"polar-grid",radialLines:r})}),S4(s,"renderLegend",function(){var e=s.state.formattedGraphicalItems,t=s.props,r=t.children,n=t.width,i=t.height,a=s.props.margin||{},o=fG({children:r,formattedGraphicalItems:e,legendWidth:n-(a.left||0)-(a.right||0),legendContent:l});if(!o)return null;var u=o.item,c=SF(o,SR);return(0,p.cloneElement)(u,S6(S6({},c),{},{chartWidth:n,chartHeight:i,margin:a,onBBoxUpdate:s.handleLegendBBoxUpdate}))}),S4(s,"renderTooltip",function(){var e,t=s.props,r=t.children,n=t.accessibilityLayer,i=eb(r,tK);if(!i)return null;var a=s.state,o=a.isTooltipActive,l=a.activeCoordinate,u=a.activePayload,c=a.activeLabel,d=a.offset,h=null!=(e=i.props.active)?e:o;return(0,p.cloneElement)(i,{viewBox:S6(S6({},d),{},{x:d.left,y:d.top}),active:h,label:c,payload:h?u:[],coordinate:l,accessibilityLayer:n})}),S4(s,"renderBrush",function(e){var t=s.props,r=t.margin,n=t.data,i=s.state,a=i.offset,o=i.dataStartIndex,l=i.dataEndIndex,u=i.updateId;return(0,p.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:pu(s.handleBrushChange,e.props.onChange),data:n,x:M(e.props.x)?e.props.x:a.left,y:M(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(r.bottom||0),width:M(e.props.width)?e.props.width:a.width,startIndex:o,endIndex:l,updateId:"brush-".concat(u)})}),S4(s,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=s.clipPathId,i=s.state,a=i.xAxisMap,o=i.yAxisMap,l=i.offset,u=e.type.defaultProps||{},c=e.props,d=c.xAxisId,h=void 0===d?u.xAxisId:d,f=c.yAxisId,g=void 0===f?u.yAxisId:f;return(0,p.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:a[h],yAxis:o[g],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:n})}),S4(s,"renderActivePoints",function(e){var t=e.item,n=e.activePoint,i=e.basePoint,s=e.childIndex,a=e.isRange,o=[],l=t.props.key,u=void 0!==t.item.type.defaultProps?S6(S6({},t.item.type.defaultProps),t.item.props):t.item.props,c=u.activeDot,d=S6(S6({index:s,dataKey:u.dataKey,cx:n.x,cy:n.y,r:4,fill:f8(t.item),strokeWidth:2,stroke:"#fff",payload:n.payload,value:n.value},ex(c,!1)),es(c));return o.push(r.renderActiveDot(c,d,"".concat(l,"-activePoint-").concat(s))),i?o.push(r.renderActiveDot(c,S6(S6({},d),{},{cx:i.x,cy:i.y}),"".concat(l,"-basePoint-").concat(s))):a&&o.push(null),o}),S4(s,"renderGraphicChild",function(e,t,r){var n=s.filterFormatItem(e,t,r);if(!n)return null;var i=s.getTooltipEventType(),a=s.state,o=a.isTooltipActive,l=a.tooltipAxis,u=a.activeTooltipIndex,c=a.activeLabel,d=eb(s.props.children,tK),h=n.props,f=h.points,g=h.isRange,m=h.baseLine,y=void 0!==n.item.type.defaultProps?S6(S6({},n.item.type.defaultProps),n.item.props):n.item.props,v=y.activeDot,b=y.hide,S=y.activeBar,w=y.activeShape,T=!!(!b&&o&&d&&(v||S||w)),E={};"axis"!==i&&d&&"click"===d.props.trigger?E={onClick:pu(s.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(E={onMouseLeave:pu(s.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:pu(s.handleItemMouseEnter,e.props.onMouseEnter)});var C=(0,p.cloneElement)(e,S6(S6({},n.props),E));function x(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}if(T)if(u>=0){if(l.dataKey&&!l.allowDuplicatedCategory){var _="function"==typeof l.dataKey?x:"payload.".concat(l.dataKey.toString());I=q(f,_,c),A=g&&m&&q(m,_,c)}else I=null==f?void 0:f[u],A=g&&m&&m[u];if(w||S){var O=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,p.cloneElement)(e,S6(S6(S6({},n.props),E),{},{activeIndex:O})),null,null]}if(!K()(I))return[C].concat(SX(s.renderActivePoints({item:n,activePoint:I,basePoint:A,childIndex:u,isRange:g})))}else{var I,A,k,R=(null!=(k=s.getItemByXY(s.state.activeCoordinate))?k:{graphicalItem:C}).graphicalItem,D=R.item,N=void 0===D?e:D,P=R.childIndex,M=S6(S6(S6({},n.props),E),{},{activeIndex:P});return[(0,p.cloneElement)(N,M),null,null]}return g?[C,null,null]:[C,null]}),S4(s,"renderCustomized",function(e,t,r){return(0,p.cloneElement)(e,S6(S6({key:"recharts-customized-".concat(r)},s.props),s.state))}),S4(s,"renderMap",{CartesianGrid:{handler:wt,once:!0},ReferenceArea:{handler:s.renderReferenceElement},ReferenceLine:{handler:wt},ReferenceDot:{handler:s.renderReferenceElement},XAxis:{handler:wt},YAxis:{handler:wt},Brush:{handler:s.renderBrush,once:!0},Bar:{handler:s.renderGraphicChild},Line:{handler:s.renderGraphicChild},Area:{handler:s.renderGraphicChild},Radar:{handler:s.renderGraphicChild},RadialBar:{handler:s.renderGraphicChild},Scatter:{handler:s.renderGraphicChild},Pie:{handler:s.renderGraphicChild},Funnel:{handler:s.renderGraphicChild},Tooltip:{handler:s.renderCursor,once:!0},PolarGrid:{handler:s.renderPolarGrid,once:!0},PolarAngleAxis:{handler:s.renderPolarAxis},PolarRadiusAxis:{handler:s.renderPolarAxis},Customized:{handler:s.renderCustomized}}),s.clipPathId="".concat(null!=(n=e.id)?n:B("recharts"),"-clip"),s.throttleTriggeredAfterMouseMove=C()(s.triggeredAfterMouseMove,null!=(i=e.throttleDelay)?i:1e3/60),s.state={},s}return SQ(r,e),Sq(r,[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!=(e=this.props.margin.left)?e:0,top:null!=(t=this.props.margin.top)?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,i=e.layout,s=eb(t,tK);if(s){var a=s.props.defaultIndex;if("number"==typeof a&&!(a<0)&&!(a>this.state.tooltipTicks.length-1)){var o=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=wa(this.state,r,a,o),u=this.state.tooltipTicks[a].coordinate,c=(this.state.offset.top+n)/2,d="horizontal"===i,h=d?{x:u,y:c}:{y:u,x:c},f=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});f&&(h=S6(S6({},h),f.props.points[a].tooltipPosition),l=f.props.points[a].tooltipPayload);var p={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:o,activePayload:l,activeCoordinate:h};this.setState(p),this.renderCursor(s),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin){var r,n;this.accessibilityManager.setDetails({offset:{left:null!=(r=this.props.margin.left)?r:0,top:null!=(n=this.props.margin.top)?n:0}})}return null}},{key:"componentDidUpdate",value:function(e){e_([eb(e.children,tK)],[eb(this.props.children,tK)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=eb(this.props.children,tK);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return a.indexOf(t)>=0?t:i}return i}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=this.container,r=t.getBoundingClientRect(),n=aj(r),i={chartX:Math.round(e.pageX-n.left),chartY:Math.round(e.pageY-n.top)},s=r.width/t.offsetWidth||1,a=this.inRange(i.chartX,i.chartY,s);if(!a)return null;var o=this.state,l=o.xAxisMap,u=o.yAxisMap;if("axis"!==this.getTooltipEventType()&&l&&u){var c=U(l).scale,d=U(u).scale,h=c&&c.invert?c.invert(i.chartX):null,f=d&&d.invert?d.invert(i.chartY):null;return S6(S6({},i),{},{xValue:h,yValue:f})}var p=wo(this.state,this.props.data,this.props.layout,a);return p?S6(S6({},i),p):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,i=e/r,s=t/r;if("horizontal"===n||"vertical"===n){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&s>=a.top&&s<=a.top+a.height?{x:i,y:s}:null}var o=this.state,l=o.angleAxisMap,u=o.radiusAxisMap;return l&&u?gf({x:i,y:s},U(l)):null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=eb(e,tK),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),S6(S6({},es(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){bm.on(by,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){bm.removeListener(by,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,i=0,s=n.length;i<s;i++){var a=n[i];if(a.item===e||a.props.key===e.key||t===ep(a.item.type)&&r===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,i=t.height,s=t.width;return g().createElement("defs",null,g().createElement("clipPath",{id:e},g().createElement("rect",{x:r,y:n,height:i,width:s})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=SM(t,2),n=r[0],i=r[1];return S6(S6({},e),{},S4({},n,i.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=SM(t,2),n=r[0],i=r[1];return S6(S6({},e),{},S4({},n,i.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null==(t=this.state.xAxisMap)||null==(t=t[e])?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null==(t=this.state.yAxisMap)||null==(t=t[e])?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var i=0,s=r.length;i<s;i++){var a=r[i],o=a.props,l=a.item,u=void 0!==l.type.defaultProps?S6(S6({},l.type.defaultProps),l.props):l.props,c=ep(l.type);if("Bar"===c){var d=(o.data||[]).find(function(t){return at(e,t)});if(d)return{graphicalItem:a,payload:d}}else if("RadialBar"===c){var h=(o.data||[]).find(function(t){return gf(e,t)});if(h)return{graphicalItem:a,payload:h}}else if(mJ(a,n)||mZ(a,n)||m0(a,n)){var f=m8({graphicalItem:a,activeTooltipItem:n,itemData:u.data}),p=void 0===u.activeIndex?f:u.activeIndex;return{graphicalItem:S6(S6({},a),{},{childIndex:p}),payload:m0(a,n)?u.data[f]:a.props.data[f]}}}return null}},{key:"render",value:function(){var e,t,r=this;if(!eS(this))return null;var n=this.props,i=n.children,s=n.className,a=n.width,o=n.height,l=n.style,u=n.compact,c=n.title,d=n.desc,h=ex(SF(n,SD),!1);if(u)return g().createElement(vm,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},g().createElement(tJ,SP({},h,{width:a,height:o,title:c,desc:d}),this.renderClipPath(),eI(i,this.renderMap)));this.props.accessibilityLayer&&(h.tabIndex=null!=(e=this.props.tabIndex)?e:0,h.role=null!=(t=this.props.role)?t:"application",h.onKeyDown=function(e){r.accessibilityManager.keyboardEvent(e)},h.onFocus=function(){r.accessibilityManager.focus()});var f=this.parseEventsOfWrapper();return g().createElement(vm,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},g().createElement("div",SP({className:(0,T.A)("recharts-wrapper",s),style:S6({position:"relative",cursor:"default",width:a,height:o},l)},f,{ref:function(e){r.container=e}}),g().createElement(tJ,SP({},h,{width:a,height:o,title:c,desc:d,style:S9}),this.renderClipPath(),eI(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);S4(f,"displayName",t),S4(f,"defaultProps",S6({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},c)),S4(f,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,i=e.children,s=e.width,a=e.height,o=e.layout,l=e.stackOffset,u=e.margin,c=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var f=wh(e);return S6(S6(S6({},f),{},{updateId:0},h(S6(S6({props:e},f),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:a,prevLayout:o,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(r!==t.prevDataKey||n!==t.prevData||s!==t.prevWidth||a!==t.prevHeight||o!==t.prevLayout||l!==t.prevStackOffset||!Z(u,t.prevMargin)){var p=wh(e),g={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},m=S6(S6({},wo(t,n,o)),{},{updateId:t.updateId+1}),y=S6(S6(S6({},p),g),m);return S6(S6(S6({},y),h(S6({props:e},y),t)),{},{prevDataKey:r,prevData:n,prevWidth:s,prevHeight:a,prevLayout:o,prevStackOffset:l,prevMargin:u,prevChildren:i})}if(!e_(i,t.prevChildren)){var v,b,S,w,T=eb(i,p6),E=T&&null!=(v=null==(b=T.props)?void 0:b.startIndex)?v:c,C=T&&null!=(S=null==(w=T.props)?void 0:w.endIndex)?S:d,x=E!==c||C!==d,_=K()(n)||x?t.updateId+1:t.updateId;return S6(S6({updateId:_},h(S6(S6({props:e},t),{},{updateId:_,dataStartIndex:E,dataEndIndex:C}),t)),{},{prevChildren:i,dataStartIndex:E,dataEndIndex:C})}return null}),S4(f,"renderActiveDot",function(e,t,r){var n;return n=(0,p.isValidElement)(e)?(0,p.cloneElement)(e,t):Q()(e)?e(t):g().createElement(nB,t),g().createElement(nj,{className:"recharts-active-dot",key:r},n)});var m=(0,p.forwardRef)(function(e,t){return g().createElement(f,SP({},e,{ref:t}))});return m.displayName=f.displayName,m},wv=["layout","type","stroke","connectNulls","isRange","ref"],wb=["key"];function wS(e){return(wS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ww(e,t){if(null==e)return{};var r,n,i=wT(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wT(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wE(){return(wE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wC(Object(r),!0).forEach(function(t){wj(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w_(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function wO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wL(n.key),n)}}function wI(e,t,r){return t&&wO(e.prototype,t),r&&wO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wA(e,t,r){return t=wN(t),wk(e,wD()?Reflect.construct(t,r||[],wN(e).constructor):t.apply(e,r))}function wk(e,t){if(t&&("object"===wS(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return wR(e)}function wR(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(wD=function(){return!!e})()}function wN(e){return(wN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wP(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wM(e,t)}function wM(e,t){return(wM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function wj(e,t,r){return(t=wL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wL(e){var t=wB(e,"string");return"symbol"==wS(t)?t:t+""}function wB(e,t){if("object"!=wS(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wS(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var wF=function(e){function t(){var e;w_(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return wj(e=wA(this,t,[].concat(n)),"state",{isAnimationFinished:!0}),wj(e,"id",B("recharts-area-")),wj(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),Q()(t)&&t()}),wj(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),Q()(t)&&t()}),e}return wP(t,e),wI(t,[{key:"renderDots",value:function(e,r,n){var i=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(i&&!s)return null;var a=this.props,o=a.dot,l=a.points,u=a.dataKey,c=ex(this.props,!1),d=ex(o,!0),h=l.map(function(e,r){var n=wx(wx(wx({key:"dot-".concat(r),r:3},c),d),{},{index:r,cx:e.x,cy:e.y,dataKey:u,value:e.value,payload:e.payload,points:l});return t.renderDotItem(o,n)}),f={clipPath:e?"url(#clipPath-".concat(r?"":"dots-").concat(n,")"):null};return g().createElement(nj,wE({className:"recharts-area-dots"},f),h)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,i=t.strokeWidth,s=n[0].x,a=n[n.length-1].x,o=e*Math.abs(s-a),l=hr()(n.map(function(e){return e.y||0}));return(M(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(hr()(r.map(function(e){return e.y||0})),l)),M(l))?g().createElement("rect",{x:s<a?s:s-o,y:0,width:o,height:Math.floor(l+(i?parseInt("".concat(i),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,i=t.strokeWidth,s=n[0].y,a=n[n.length-1].y,o=e*Math.abs(s-a),l=hr()(n.map(function(e){return e.x||0}));return(M(r)&&"number"==typeof r?l=Math.max(r,l):r&&Array.isArray(r)&&r.length&&(l=Math.max(hr()(r.map(function(e){return e.x||0})),l)),M(l))?g().createElement("rect",{x:0,y:s<a?s:s-o,width:l+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,n){var i=this.props,s=i.layout,a=i.type,o=i.stroke,l=i.connectNulls,u=i.isRange,c=(i.ref,ww(i,wv));return g().createElement(nj,{clipPath:r?"url(#clipPath-".concat(n,")"):null},g().createElement(Sl,wE({},ex(c,!0),{points:e,connectNulls:l,type:a,baseLine:t,layout:s,stroke:"none",className:"recharts-area-area"})),"none"!==o&&g().createElement(Sl,wE({},ex(this.props,!1),{className:"recharts-area-curve",layout:s,type:a,connectNulls:l,fill:"none",points:e})),"none"!==o&&u&&g().createElement(Sl,wE({},ex(this.props,!1),{className:"recharts-area-curve",layout:s,type:a,connectNulls:l,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,n=this.props,i=n.points,s=n.baseLine,a=n.isAnimationActive,o=n.animationBegin,l=n.animationDuration,u=n.animationEasing,c=n.animationId,d=this.state,h=d.prevPoints,f=d.prevBaseLine;return g().createElement(sY,{begin:o,duration:l,isActive:a,easing:u,from:{t:0},to:{t:1},key:"area-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var a=n.t;if(h){var o,l=h.length/i.length,u=i.map(function(e,t){var r=Math.floor(t*l);if(h[r]){var n=h[r],i=z(n.x,e.x),s=z(n.y,e.y);return wx(wx({},e),{},{x:i(a),y:s(a)})}return e});return o=M(s)&&"number"==typeof s?z(f,s)(a):K()(s)||I()(s)?z(f,0)(a):s.map(function(e,t){var r=Math.floor(t*l);if(f[r]){var n=f[r],i=z(n.x,e.x),s=z(n.y,e.y);return wx(wx({},e),{},{x:i(a),y:s(a)})}return e}),r.renderAreaStatically(u,o,e,t)}return g().createElement(nj,null,g().createElement("defs",null,g().createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(a))),g().createElement(nj,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(i,s,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,n=r.points,i=r.baseLine,s=r.isAnimationActive,a=this.state,o=a.prevPoints,l=a.prevBaseLine,u=a.totalLength;return s&&n&&n.length&&(!o&&u>0||!hl()(o,n)||!hl()(l,i))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(n,i,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,i=t.points,s=t.className,a=t.top,o=t.left,l=t.xAxis,u=t.yAxis,c=t.width,d=t.height,h=t.isAnimationActive,f=t.id;if(r||!i||!i.length)return null;var p=this.state.isAnimationFinished,m=1===i.length,y=(0,T.A)("recharts-area",s),v=l&&l.allowDataOverflow,b=u&&u.allowDataOverflow,S=v||b,w=K()(f)?this.id:f,E=null!=(e=ex(n,!1))?e:{r:3,strokeWidth:2},C=E.r,x=void 0===C?3:C,_=E.strokeWidth,O=void 0===_?2:_,I=(eE(n)?n:{}).clipDot,A=void 0===I||I,k=2*x+O;return g().createElement(nj,{className:y},v||b?g().createElement("defs",null,g().createElement("clipPath",{id:"clipPath-".concat(w)},g().createElement("rect",{x:v?o:o-c/2,y:b?a:a-d/2,width:v?c:2*c,height:b?d:2*d})),!A&&g().createElement("clipPath",{id:"clipPath-dots-".concat(w)},g().createElement("rect",{x:o-k/2,y:a-k/2,width:c+k,height:d+k}))):null,m?null:this.renderArea(S,w),(n||m)&&this.renderDots(S,A,w),(!h||p)&&mr.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}])}(p.PureComponent);function wU(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],i=0;i<e.length;i+=t)if(void 0!==r&&!0!==r(e[i]))return;else n.push(e[i]);return n}function wV(e,t,r){return yK({width:e.width+t.width,height:e.height+t.height},r)}function wz(e,t,r){var n="width"===r,i=e.x,s=e.y,a=e.width,o=e.height;return 1===t?{start:n?i:s,end:n?i+a:s+o}:{start:n?i+a:s+o,end:n?i:s}}function wq(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function w$(e,t){return wU(e,t+1)}function wG(e,t,r,n,i){for(var s,a=(n||[]).slice(),o=t.start,l=t.end,u=0,c=1,d=o,h=function(){var t,s=null==n?void 0:n[u];if(void 0===s)return{v:wU(n,c)};var a=u,h=function(){return void 0===t&&(t=r(s,a)),t},f=s.coordinate,p=0===u||wq(e,f,h,d,l);p||(u=0,d=o,c+=1),p&&(d=f+e*(h()/2+i),u+=c)};c<=a.length;)if(s=h())return s.v;return[]}function wW(e){return(wW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wK(Object(r),!0).forEach(function(t){wQ(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wQ(e,t,r){return(t=wY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wY(e){var t=wX(e,"string");return"symbol"==wW(t)?t:t+""}function wX(e,t){if("object"!=wW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wW(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function wJ(e,t,r,n,i){for(var s=(n||[]).slice(),a=s.length,o=t.start,l=t.end,u=function(t){var n,u=s[t],c=function(){return void 0===n&&(n=r(u,t)),n};if(t===a-1){var d=e*(u.coordinate+e*c()/2-l);s[t]=u=wH(wH({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate})}else s[t]=u=wH(wH({},u),{},{tickCoord:u.coordinate});wq(e,u.tickCoord,c,o,l)&&(l=u.tickCoord-e*(c()/2+i),s[t]=wH(wH({},u),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return s}function wZ(e,t,r,n,i,s){var a=(n||[]).slice(),o=a.length,l=t.start,u=t.end;if(s){var c=n[o-1],d=r(c,o-1),h=e*(c.coordinate+e*d/2-u);a[o-1]=c=wH(wH({},c),{},{tickCoord:h>0?c.coordinate-h*e:c.coordinate}),wq(e,c.tickCoord,function(){return d},l,u)&&(u=c.tickCoord-e*(d/2+i),a[o-1]=wH(wH({},c),{},{isShow:!0}))}for(var f=s?o-1:o,p=function(t){var n,s=a[t],o=function(){return void 0===n&&(n=r(s,t)),n};if(0===t){var c=e*(s.coordinate-e*o()/2-l);a[t]=s=wH(wH({},s),{},{tickCoord:c<0?s.coordinate-c*e:s.coordinate})}else a[t]=s=wH(wH({},s),{},{tickCoord:s.coordinate});wq(e,s.tickCoord,o,l,u)&&(l=s.tickCoord+e*(o()/2+i),a[t]=wH(wH({},s),{},{isShow:!0}))},g=0;g<f;g++)p(g);return a}function w0(e,t,r){var n=e.tick,i=e.ticks,s=e.viewBox,a=e.minTickGap,o=e.orientation,l=e.interval,u=e.tickFormatter,c=e.unit,d=e.angle;if(!i||!i.length||!n)return[];if(M(l)||tx.isSsr)return w$(i,"number"==typeof l&&M(l)?l:0);var h=[],f="top"===o||"bottom"===o?"width":"height",p=c&&"width"===f?aM(c,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(e,n){var i=Q()(u)?u(e.value,n):e.value;return"width"===f?wV(aM(i,{fontSize:t,letterSpacing:r}),p,d):aM(i,{fontSize:t,letterSpacing:r})[f]},m=i.length>=2?N(i[1].coordinate-i[0].coordinate):1,y=wz(s,m,f);return"equidistantPreserveStart"===l?wG(m,y,g,i,a):(h="preserveStart"===l||"preserveStartEnd"===l?wZ(m,y,g,i,a,"preserveStartEnd"===l):wJ(m,y,g,i,a)).filter(function(e){return e.isShow})}a=wF,wj(wF,"displayName","Area"),wj(wF,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!tx.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),wj(wF,"getBaseValue",function(e,t,r,n){var i=e.layout,s=e.baseValue,a=t.props.baseValue,o=null!=a?a:s;if(M(o)&&"number"==typeof o)return o;var l="horizontal"===i?n:r,u=l.scale.domain();if("number"===l.type){var c=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return"dataMin"===o?d:"dataMax"===o||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return"dataMin"===o?u[0]:"dataMax"===o?u[1]:u[0]}),wj(wF,"getComposedData",function(e){var t,r=e.props,n=e.item,i=e.xAxis,s=e.yAxis,o=e.xAxisTicks,l=e.yAxisTicks,u=e.bandSize,c=e.dataKey,d=e.stackedData,h=e.dataStartIndex,f=e.displayedData,p=e.offset,g=r.layout,m=d&&d.length,y=a.getBaseValue(r,n,i,s),v="horizontal"===g,b=!1,S=f.map(function(e,t){m?r=d[h+t]:Array.isArray(r=f6(e,c))?b=!0:r=[y,r];var r,n=null==r[1]||m&&null==f6(e,c);return v?{x:pb({axis:i,ticks:o,bandSize:u,entry:e,index:t}),y:n?null:s.scale(r[1]),value:r,payload:e}:{x:n?null:i.scale(r[1]),y:pb({axis:s,ticks:l,bandSize:u,entry:e,index:t}),value:r,payload:e}});return t=m||b?S.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return v?{x:e.x,y:null!=t&&null!=e.y?s.scale(t):null}:{x:null!=t?i.scale(t):null,y:e.y}}):v?s.scale(y):i.scale(y),wx({points:S,baseLine:t,layout:g,isRange:b},p)}),wj(wF,"renderDotItem",function(e,t){var r;if(g().isValidElement(e))r=g().cloneElement(e,t);else if(Q()(e))r=e(t);else{var n=(0,T.A)("recharts-area-dot","boolean"!=typeof e?e.className:""),i=t.key,s=ww(t,wb);r=g().createElement(nB,wE({},s,{key:i,className:n}))}return r});var w1=["viewBox"],w2=["viewBox"],w3=["ticks"];function w6(e){return(w6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w4(){return(w4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function w8(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w5(Object(r),!0).forEach(function(t){Tc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w7(e,t){if(null==e)return{};var r,n,i=w9(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function w9(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Te(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Td(n.key),n)}}function Tr(e,t,r){return t&&Tt(e.prototype,t),r&&Tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tn(e,t,r){return t=To(t),Ti(e,Ta()?Reflect.construct(t,r||[],To(e).constructor):t.apply(e,r))}function Ti(e,t){if(t&&("object"===w6(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return Ts(e)}function Ts(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ta(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ta=function(){return!!e})()}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tl(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tu(e,t)}function Tu(e,t){return(Tu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tc(e,t,r){return(t=Td(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Td(e){var t=Th(e,"string");return"symbol"==w6(t)?t:t+""}function Th(e,t){if("object"!=w6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w6(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var Tf=function(e){function t(e){var r;return Te(this,t),(r=Tn(this,t,[e])).state={fontSize:"",letterSpacing:""},r}return Tl(t,e),Tr(t,[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=w7(e,w1),i=this.props,s=i.viewBox,a=w7(i,w2);return!Z(r,s)||!Z(n,a)||!Z(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,i,s,a,o=this.props,l=o.x,u=o.y,c=o.width,d=o.height,h=o.orientation,f=o.tickSize,p=o.mirror,g=o.tickMargin,m=p?-1:1,y=e.tickSize||f,v=M(e.tickCoord)?e.tickCoord:e.coordinate;switch(h){case"top":t=r=e.coordinate,a=(n=(i=u+!p*d)-m*y)-m*g,s=v;break;case"left":n=i=e.coordinate,s=(t=(r=l+!p*c)-m*y)-m*g,a=v;break;case"right":n=i=e.coordinate,s=(t=(r=l+p*c)+m*y)+m*g,a=v;break;default:t=r=e.coordinate,a=(n=(i=u+p*d)+m*y)+m*g,s=v}return{line:{x1:t,y1:n,x2:r,y2:i},tick:{x:s,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,i=e.height,s=e.orientation,a=e.mirror,o=e.axisLine,l=w8(w8(w8({},ex(this.props,!1)),ex(o,!1)),{},{fill:"none"});if("top"===s||"bottom"===s){var u=+("top"===s&&!a||"bottom"===s&&a);l=w8(w8({},l),{},{x1:t,y1:r+u*i,x2:t+n,y2:r+u*i})}else{var c=+("left"===s&&!a||"right"===s&&a);l=w8(w8({},l),{},{x1:t+c*n,y1:r,x2:t+c*n,y2:r+i})}return g().createElement("line",w4({},l,{className:(0,T.A)("recharts-cartesian-axis-line",k()(o,"className"))}))}},{key:"renderTicks",value:function(e,r,n){var i=this,s=this.props,a=s.tickLine,o=s.stroke,l=s.tick,u=s.tickFormatter,c=s.unit,d=w0(w8(w8({},this.props),{},{ticks:e}),r,n),h=this.getTickTextAnchor(),f=this.getTickVerticalAnchor(),p=ex(this.props,!1),m=ex(l,!1),y=w8(w8({},p),{},{fill:"none"},ex(a,!1)),v=d.map(function(e,r){var n=i.getTickLineCoord(e),s=n.line,v=n.tick,b=w8(w8(w8(w8({textAnchor:h,verticalAnchor:f},p),{},{stroke:"none",fill:o},m),v),{},{index:r,payload:e,visibleTicksCount:d.length,tickFormatter:u});return g().createElement(nj,w4({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},eo(i.props,e,r)),a&&g().createElement("line",w4({},y,s,{className:(0,T.A)("recharts-cartesian-axis-tick-line",k()(a,"className"))})),l&&t.renderTickItem(l,b,"".concat(Q()(u)?u(e.value,r):e.value).concat(c||"")))});return g().createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,i=t.height,s=t.ticksGenerator,a=t.className;if(t.hide)return null;var o=this.props,l=o.ticks,u=w7(o,w3),c=l;return(Q()(s)&&(c=s(l&&l.length>0?this.props:u)),n<=0||i<=0||!c||!c.length)?null:g().createElement(nj,{className:(0,T.A)("recharts-cartesian-axis",a),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(c,this.state.fontSize,this.state.letterSpacing),gj.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(e,t,r){var n;return g().isValidElement(e)?g().cloneElement(e,t):Q()(e)?e(t):g().createElement(oy,w4({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}])}(p.Component);function Tp(e){return(Tp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tg(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Tm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T_(n.key),n)}}function Ty(e,t,r){return t&&Tm(e.prototype,t),r&&Tm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tv(e,t,r){return t=TT(t),Tb(e,Tw()?Reflect.construct(t,r||[],TT(e).constructor):t.apply(e,r))}function Tb(e,t){if(t&&("object"===Tp(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return TS(e)}function TS(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Tw=function(){return!!e})()}function TT(e){return(TT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TE(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TC(e,t)}function TC(e,t){return(TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tx(e,t,r){return(t=T_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T_(e){var t=TO(e,"string");return"symbol"==Tp(t)?t:t+""}function TO(e,t){if("object"!=Tp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Tp(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function TI(){return(TI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function TA(e){var t=e.xAxisId,r=vC(),n=vx(),i=vv(t);return null==i?null:g().createElement(Tf,TI({},i,{className:(0,T.A)("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return po(e,!0)}}))}Tc(Tf,"displayName","CartesianAxis"),Tc(Tf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Tk=function(e){function t(){return Tg(this,t),Tv(this,t,arguments)}return TE(t,e),Ty(t,[{key:"render",value:function(){return g().createElement(TA,this.props)}}])}(g().Component);function TR(e){return(TR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TD(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function TN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tq(n.key),n)}}function TP(e,t,r){return t&&TN(e.prototype,t),r&&TN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TM(e,t,r){return t=TF(t),Tj(e,TB()?Reflect.construct(t,r||[],TF(e).constructor):t.apply(e,r))}function Tj(e,t){if(t&&("object"===TR(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return TL(e)}function TL(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TB(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(TB=function(){return!!e})()}function TF(e){return(TF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TU(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TV(e,t)}function TV(e,t){return(TV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Tz(e,t,r){return(t=Tq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tq(e){var t=T$(e,"string");return"symbol"==TR(t)?t:t+""}function T$(e,t){if("object"!=TR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TR(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function TG(){return(TG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}Tx(Tk,"displayName","XAxis"),Tx(Tk,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var TW=function(e){var t=e.yAxisId,r=vC(),n=vx(),i=vw(t);return null==i?null:g().createElement(Tf,TG({},i,{className:(0,T.A)("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return po(e,!0)}}))},TK=function(e){function t(){return TD(this,t),TM(this,t,arguments)}return TU(t,e),TP(t,[{key:"render",value:function(){return g().createElement(TW,this.props)}}])}(g().Component);Tz(TK,"displayName","YAxis"),Tz(TK,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var TH=wy({chartName:"AreaChart",GraphicalChild:wF,axisComponents:[{axisType:"xAxis",AxisComp:Tk},{axisType:"yAxis",AxisComp:TK}],formatAxisMap:yV}),TQ=["x1","y1","x2","y2","key"],TY=["offset"];function TX(e){return(TX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TJ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function TZ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TJ(Object(r),!0).forEach(function(t){T0(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TJ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T0(e,t,r){return(t=T1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T1(e){var t=T2(e,"string");return"symbol"==TX(t)?t:t+""}function T2(e,t){if("object"!=TX(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=TX(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T3(){return(T3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T6(e,t){if(null==e)return{};var r,n,i=T4(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function T4(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var T5=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,i=e.y,s=e.width,a=e.height,o=e.ry;return g().createElement("rect",{x:n,y:i,ry:o,width:s,height:a,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function T8(e,t){var r;if(g().isValidElement(e))r=g().cloneElement(e,t);else if(Q()(e))r=e(t);else{var n=t.x1,i=t.y1,s=t.x2,a=t.y2,o=t.key,l=ex(T6(t,TQ),!1),u=(l.offset,T6(l,TY));r=g().createElement("line",T3({},u,{x1:n,y1:i,x2:s,y2:a,fill:"none",key:o}))}return r}function T7(e){var t=e.x,r=e.width,n=e.horizontal,i=void 0===n||n,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(n,s){return T8(i,TZ(TZ({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(s),index:s}))});return g().createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function T9(e){var t=e.y,r=e.height,n=e.vertical,i=void 0===n||n,s=e.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(n,s){return T8(i,TZ(TZ({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(s),index:s}))});return g().createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Ee(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,s=e.width,a=e.height,o=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var u=o.map(function(e){return Math.round(e+i-i)}).sort(function(e,t){return e-t});i!==u[0]&&u.unshift(0);var c=u.map(function(e,o){var l=u[o+1]?u[o+1]-e:i+a-e;if(l<=0)return null;var c=o%t.length;return g().createElement("rect",{key:"react-".concat(o),y:e,x:n,height:l,width:s,stroke:"none",fill:t[c],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return g().createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function Et(e){var t=e.vertical,r=void 0===t||t,n=e.verticalFill,i=e.fillOpacity,s=e.x,a=e.y,o=e.width,l=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var c=u.map(function(e){return Math.round(e+s-s)}).sort(function(e,t){return e-t});s!==c[0]&&c.unshift(0);var d=c.map(function(e,t){var r=c[t+1]?c[t+1]-e:s+o-e;if(r<=0)return null;var u=t%n.length;return g().createElement("rect",{key:"react-".concat(t),x:e,y:a,width:r,height:l,stroke:"none",fill:n[u],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return g().createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Er=function(e,t){var r=e.xAxis,n=e.width,i=e.height,s=e.offset;return pa(w0(TZ(TZ(TZ({},Tf.defaultProps),r),{},{ticks:po(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},En=function(e,t){var r=e.yAxis,n=e.width,i=e.height,s=e.offset;return pa(w0(TZ(TZ(TZ({},Tf.defaultProps),r),{},{ticks:po(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},Ei={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Es(e){var t,r,n,i,s,a,o=vC(),l=vx(),u=vE(),c=TZ(TZ({},e),{},{stroke:null!=(t=e.stroke)?t:Ei.stroke,fill:null!=(r=e.fill)?r:Ei.fill,horizontal:null!=(n=e.horizontal)?n:Ei.horizontal,horizontalFill:null!=(i=e.horizontalFill)?i:Ei.horizontalFill,vertical:null!=(s=e.vertical)?s:Ei.vertical,verticalFill:null!=(a=e.verticalFill)?a:Ei.verticalFill,x:M(e.x)?e.x:u.left,y:M(e.y)?e.y:u.top,width:M(e.width)?e.width:u.width,height:M(e.height)?e.height:u.height}),d=c.x,h=c.y,f=c.width,p=c.height,m=c.syncWithTicks,y=c.horizontalValues,v=c.verticalValues,b=vb(),S=vS();if(!M(f)||f<=0||!M(p)||p<=0||!M(d)||d!==+d||!M(h)||h!==+h)return null;var w=c.verticalCoordinatesGenerator||Er,T=c.horizontalCoordinatesGenerator||En,E=c.horizontalPoints,C=c.verticalPoints;if((!E||!E.length)&&Q()(T)){var x=y&&y.length,_=T({yAxis:S?TZ(TZ({},S),{},{ticks:x?y:S.ticks}):void 0,width:o,height:l,offset:u},!!x||m);G(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(TX(_),"]")),Array.isArray(_)&&(E=_)}if((!C||!C.length)&&Q()(w)){var O=v&&v.length,I=w({xAxis:b?TZ(TZ({},b),{},{ticks:O?v:b.ticks}):void 0,width:o,height:l,offset:u},!!O||m);G(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(TX(I),"]")),Array.isArray(I)&&(C=I)}return g().createElement("g",{className:"recharts-cartesian-grid"},g().createElement(T5,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),g().createElement(T7,T3({},c,{offset:u,horizontalPoints:E,xAxis:b,yAxis:S})),g().createElement(T9,T3({},c,{offset:u,verticalPoints:C,xAxis:b,yAxis:S})),g().createElement(Ee,T3({},c,{horizontalPoints:E})),g().createElement(Et,T3({},c,{verticalPoints:C})))}Es.displayName="CartesianGrid";let Ea={close:{label:"Price",color:"hsl(var(--primary))"},buy:{label:"Buy Signal",color:"hsl(var(--chart-2))"},sell:{label:"Sell Signal",color:"hsl(var(--chart-1))"}},Eo=({active:e,payload:t,label:r})=>{if(e&&t&&t.length){let e=t[0].payload;return(0,f.jsxs)("div",{className:"p-2 rounded-lg border bg-background/90 shadow-lg backdrop-blur-lg",children:[(0,f.jsx)("p",{className:"font-bold text-foreground",children:`Time: ${r}`}),(0,f.jsx)("p",{className:"text-sm text-primary",children:`Price: $${e.close.toFixed(5)}`}),(0,f.jsxs)("div",{className:"mt-1 text-xs text-muted-foreground",children:[(0,f.jsx)("p",{children:`Open: $${e.open.toFixed(5)}`}),(0,f.jsx)("p",{children:`High: $${e.high.toFixed(5)}`}),(0,f.jsx)("p",{children:`Low: $${e.low.toFixed(5)}`}),(0,f.jsx)("p",{children:`Volume: ${e.volume.toLocaleString()}`})]})]})}return null};function El({data:e,signals:t}){let r=(0,p.useMemo)(()=>e.map(e=>({...e,time:new Date(e.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})),[e]),n=(0,p.useMemo)(()=>{if(!e.length)return["auto","auto"];let t=e.map(e=>e.close),r=Math.min(...t),n=Math.max(...t),i=(n-r)*.1;return[r-i,n+i]},[e]);return(0,f.jsx)(nE,{config:Ea,className:"min-h-[400px] w-full",children:(0,f.jsxs)(TH,{data:r,margin:{top:10,right:30,left:0,bottom:0},children:[(0,f.jsx)("defs",{children:(0,f.jsxs)("linearGradient",{id:"colorClose",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,f.jsx)("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.4}),(0,f.jsx)("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:.05})]})}),(0,f.jsx)(Es,{strokeDasharray:"3 3",vertical:!1,stroke:"hsl(var(--border) / 0.5)"}),(0,f.jsx)(Tk,{dataKey:"time",tickMargin:10,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},interval:"preserveStartEnd"}),(0,f.jsx)(TK,{domain:n,tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:e=>e.toFixed(5),orientation:"right",tickMargin:10}),(0,f.jsx)(nx,{cursor:{stroke:"hsl(var(--foreground))",strokeWidth:1,strokeDasharray:"3 3"},content:(0,f.jsx)(Eo,{})}),(0,f.jsx)(wF,{type:"monotone",dataKey:"close",stroke:"hsl(var(--primary))",strokeWidth:2,fillOpacity:1,fill:"url(#colorClose)"}),t.map((t,r)=>{let n=e.find(e=>e.time===t.time);if(!n)return null;let i=new Date(n.time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),s="BUY"===t.type;return(0,f.jsx)(vr,{x:i,y:t.price,r:10,fill:s?Ea.buy.color:Ea.sell.color,fillOpacity:.3,stroke:s?Ea.buy.color:Ea.sell.color,strokeWidth:2,isFront:!0},r)})]})})}let Eu=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("div",{className:"relative w-full overflow-auto",children:(0,f.jsx)("table",{ref:r,className:(0,m.cn)("w-full caption-bottom text-sm",e),...t})}));Eu.displayName="Table";let Ec=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("thead",{ref:r,className:(0,m.cn)("[&_tr]:border-b",e),...t}));Ec.displayName="TableHeader";let Ed=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("tbody",{ref:r,className:(0,m.cn)("[&_tr:last-child]:border-0",e),...t}));Ed.displayName="TableBody",p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("tfoot",{ref:r,className:(0,m.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let Eh=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("tr",{ref:r,className:(0,m.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Eh.displayName="TableRow";let Ef=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("th",{ref:r,className:(0,m.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ef.displayName="TableHead";let Ep=p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("td",{ref:r,className:(0,m.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ep.displayName="TableCell",p.forwardRef(({className:e,...t},r)=>(0,f.jsx)("caption",{ref:r,className:(0,m.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";let Eg=(0,r(24224).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Em({className:e,variant:t,...r}){return(0,f.jsx)("div",{className:(0,m.cn)(Eg({variant:t}),e),...r})}var Ey=r(82614);let Ev=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Eb=(0,Ey.A)("History",Ev),ES=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Ew=(0,Ey.A)("TrendingUp",ES),ET=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],EE=(0,Ey.A)("TrendingDown",ET),EC={Low:"secondary",Medium:"default",High:"destructive"},Ex={Low:"Low Confidence",Medium:"Medium Confidence",High:"High Confidence"};function E_({signals:e}){return(0,f.jsxs)(y,{className:"shadow-lg",children:[(0,f.jsxs)(v,{children:[(0,f.jsxs)(b,{className:"flex items-center gap-2",children:[(0,f.jsx)(Eb,{className:"h-6 w-6"}),"Signal History"]}),(0,f.jsx)(S,{children:"A log of the most recent trade signals generated."})]}),(0,f.jsx)(w,{children:(0,f.jsxs)(Eu,{children:[(0,f.jsx)(Ec,{children:(0,f.jsxs)(Eh,{children:[(0,f.jsx)(Ef,{children:"Time"}),(0,f.jsx)(Ef,{children:"Type"}),(0,f.jsx)(Ef,{children:"Price (USDT)"}),(0,f.jsx)(Ef,{className:"text-right",children:"Confidence"})]})}),(0,f.jsx)(Ed,{children:0===e.length?(0,f.jsx)(Eh,{children:(0,f.jsx)(Ep,{colSpan:4,className:"text-center h-24",children:"Waiting for signals..."})}):e.map(e=>(0,f.jsxs)(Eh,{children:[(0,f.jsx)(Ep,{children:e.displayTime}),(0,f.jsx)(Ep,{children:(0,f.jsxs)("div",{className:`flex items-center gap-2 ${"BUY"===e.type?"text-green-500":"text-red-500"}`,children:["BUY"===e.type?(0,f.jsx)(Ew,{className:"text-green-500"}):(0,f.jsx)(EE,{className:"text-red-500"}),(0,f.jsx)("span",{className:"font-medium",children:e.type})]})}),(0,f.jsx)(Ep,{children:e.price.toFixed(5)}),(0,f.jsx)(Ep,{className:"text-right",children:(0,f.jsx)(Em,{variant:EC[e.level],children:Ex[e.level]})})]},e.time))})]})})]})}let EO=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],EI=(0,Ey.A)("ChartNoAxesColumn",EO);function EA({className:e,...t}){return(0,f.jsx)("div",{className:(0,m.cn)("animate-pulse rounded-md bg-muted",e),...t})}var Ek=r(6475);let ER=(0,Ek.createServerReference)("0082de5f59ecb8d9b4d31c7df31dae0e74950a5314",Ek.callServer,void 0,Ek.findSourceMapURL,"getChartData");var ED=r(29867);let EN={NODE_CLIENT:!1,SDK_VERSION:"${JSCORE_VERSION}"},EP=function(e){return Error("Firebase Database ("+EN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},EM=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},Ej=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[r++],a=((7&i)<<18|(63&s)<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{let s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},EL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,d=(15&a)<<2|l>>6,h=63&l;!o&&(h=64,s||(d=64)),n.push(r[u],r[c],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(EM(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ej(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,o=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new EB;let l=i<<2|s>>4;if(n.push(l),64!==a){let e=s<<4&240|a>>2;if(n.push(e),64!==o){let e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class EB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let EF=function(e){let t=EM(e);return EL.encodeByteArray(t,!0)},EU=function(e){return EF(e).replace(/\./g,"")},EV=function(e){try{return EL.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Ez(e){return"__proto__"!==e}function Eq(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}let E$=()=>Eq().__FIREBASE_DEFAULTS__,EG=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},EW=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&EV(e[1]);return t&&JSON.parse(t)},EK=()=>{try{return E$()||EG()||EW()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},EH=e=>{var t,r;return null==(r=null==(t=EK())?void 0:t.emulatorHosts)?void 0:r[e]},EQ=e=>{let t=EH(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},EY=()=>{var e;return null==(e=EK())?void 0:e.config};class EX{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function EJ(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[EU(JSON.stringify(r)),EU(JSON.stringify(a)),o].join(".")}function EZ(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function E0(){var e;let t=null==(e=EK())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function E1(){return!E0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E2(){try{return"object"==typeof indexedDB}catch(e){return!1}}function E3(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}})}let E6="FirebaseError";class E4 extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E6,Object.setPrototypeOf(this,E4.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E5.prototype.create)}}class E5{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?E8(i,r):"Error",a=`${this.serviceName}: ${s} (${n}).`;return new E4(n,a,r)}}function E8(e,t){return e.replace(E7,(e,r)=>{let n=t[r];return null!=n?String(n):`<${r}?>`})}let E7=/\{\$([^}]+)}/g;function E9(e){return JSON.parse(e)}function Ce(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(Ct(r)&&Ct(s)){if(!Ce(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function Ct(e){return null!==e&&"object"==typeof e}function Cr(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}function Cn(){}function Ci(e){return e&&e._delegate?e._delegate:e}EN.NODE_CLIENT=!0;class Cs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let Ca="[DEFAULT]";class Co{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new EX;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(Cu(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!=(r=this.onInitCallbacks.get(n))?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Cl(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Cl(e){return e===Ca?void 0:e}function Cu(e){return"EAGER"===e.instantiationMode}class Cc{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Co(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let Cd=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));let Ch={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},Cf=o.INFO,Cp={[o.DEBUG]:"log",[o.VERBOSE]:"log",[o.INFO]:"info",[o.WARN]:"warn",[o.ERROR]:"error"},Cg=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=Cp[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cm{constructor(e){this.name=e,this._logLevel=Cf,this._logHandler=Cg,this._userLogHandler=null,Cd.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in o))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Ch[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,o.DEBUG,...e),this._logHandler(this,o.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,o.VERBOSE,...e),this._logHandler(this,o.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,o.INFO,...e),this._logHandler(this,o.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,o.WARN,...e),this._logHandler(this,o.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,o.ERROR,...e),this._logHandler(this,o.ERROR,...e)}}let Cy=(e,t)=>t.some(t=>e instanceof t);function Cv(){return n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cb(){return i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let CS=new WeakMap,Cw=new WeakMap,CT=new WeakMap,CE=new WeakMap,CC=new WeakMap;function Cx(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(CR(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&CS.set(t,e)}).catch(()=>{}),CC.set(t,e),t}function C_(e){if(Cw.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});Cw.set(e,t)}let CO={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return Cw.get(e);if("objectStoreNames"===t)return e.objectStoreNames||CT.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return CR(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function CI(e){CO=e(CO)}function CA(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?Cb().includes(e)?function(...t){return e.apply(CD(this),t),CR(CS.get(this))}:function(...t){return CR(e.apply(CD(this),t))}:function(t,...r){let n=e.call(CD(this),t,...r);return CT.set(n,t.sort?t.sort():[t]),CR(n)}}function Ck(e){return"function"==typeof e?CA(e):(e instanceof IDBTransaction&&C_(e),Cy(e,Cv()))?new Proxy(e,CO):e}function CR(e){if(e instanceof IDBRequest)return Cx(e);if(CE.has(e))return CE.get(e);let t=Ck(e);return t!==e&&(CE.set(e,t),CC.set(t,e)),t}let CD=e=>CC.get(e);function CN(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),o=CR(a);return n&&a.addEventListener("upgradeneeded",e=>{n(CR(a.result),e.oldVersion,e.newVersion,CR(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}let CP=["get","getKey","getAll","getAllKeys","count"],CM=["put","add","delete","clear"],Cj=new Map;function CL(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(Cj.get(t))return Cj.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=CM.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||CP.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return Cj.set(t,s),s}CI(e=>({...e,get:(t,r,n)=>CL(t,r)||e.get(t,r,n),has:(t,r)=>!!CL(t,r)||e.has(t,r)}));class CB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!CF(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}function CF(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}let CU="@firebase/app",CV="0.10.13",Cz=new Cm("@firebase/app"),Cq="10.14.1",C$="[DEFAULT]",CG={[CU]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},CW=new Map,CK=new Map,CH=new Map;function CQ(e,t){try{e.container.addComponent(t)}catch(r){Cz.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function CY(e){let t=e.name;if(CH.has(t))return Cz.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(CH.set(t,e),CW.values()))CQ(r,e);for(let t of CK.values())CQ(t,e);return!0}function CX(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}let CJ=new E5("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class CZ{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw CJ.create("app-deleted",{appName:this._name})}}let C0=Cq;function C1(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:C$,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw CJ.create("bad-app-name",{appName:String(i)});if(r||(r=EY()),!r)throw CJ.create("no-options");let s=CW.get(i);if(s)if(Ce(r,s.options)&&Ce(n,s.config))return s;else throw CJ.create("duplicate-app",{appName:i});let a=new Cc(i);for(let e of CH.values())a.addComponent(e);let o=new CZ(r,n,a);return CW.set(i,o),o}function C2(e=C$){let t=CW.get(e);if(!t&&e===C$&&EY())return C1();if(!t)throw CJ.create("no-app",{appName:e});return t}function C3(){return Array.from(CW.values())}async function C6(e){let t=!1,r=e.name;CW.has(r)?(t=!0,CW.delete(r)):CK.has(r)&&0>=e.decRefCount()&&(CK.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function C4(e,t,r){var n;let i=null!=(n=CG[e])?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Cz.warn(e.join(" "));return}CY(new Cs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let C5="firebase-heartbeat-database",C8=1,C7="firebase-heartbeat-store",C9=null;function xe(){return C9||(C9=CN(C5,C8,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(C7)}catch(e){console.warn(e)}}}).catch(e=>{throw CJ.create("idb-open",{originalErrorMessage:e.message})})),C9}async function xt(e){try{let t=(await xe()).transaction(C7),r=await t.objectStore(C7).get(xn(e));return await t.done,r}catch(e){if(e instanceof E4)Cz.warn(e.message);else{let t=CJ.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Cz.warn(t.message)}}}async function xr(e,t){try{let r=(await xe()).transaction(C7,"readwrite"),n=r.objectStore(C7);await n.put(t,xn(e)),await r.done}catch(e){if(e instanceof E4)Cz.warn(e.message);else{let t=CJ.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});Cz.warn(t.message)}}}function xn(e){return`${e.name}!${e.options.appId}`}let xi=1024,xs=2592e6;class xa{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new xu(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=xo();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=xs}),this._storage.overwrite(this._heartbeatsCache)}catch(e){Cz.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=xo(),{heartbeatsToSend:r,unsentEntries:n}=xl(this._heartbeatsCache.heartbeats),i=EU(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Cz.warn(e),""}}}function xo(){return new Date().toISOString().substring(0,10)}function xl(e,t=xi){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),xc(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),xc(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class xu{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!E2()&&E3().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await xt(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return xr(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return xr(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function xc(e){return EU(JSON.stringify({version:2,heartbeats:e})).length}(function(e){CY(new Cs("platform-logger",e=>new CB(e),"PRIVATE")),CY(new Cs("heartbeat",e=>new xa(e),"PRIVATE")),C4(CU,CV,""),C4(CU,CV,"esm2017"),C4("fire-js","")})(""),C4("firebase","10.14.1","app");var xd=r(28354),xh=r(55511),xf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xp={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^r&(i^s))+n[0]+0xd76aa478|0;a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[1]+0xe8c7b756|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[2]+0x242070db|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[3]+0xc1bdceee|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[4]+0xf57c0faf|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[5]+0x4787c62a|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[6]+0xa8304613|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[7]+0xfd469501|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[8]+0x698098d8|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[9]+0x8b44f7af|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[10]+0xffff5bb1|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[11]+0x895cd7be|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[12]+0x6b901122|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[13]+0xfd987193|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[14]+0xa679438e|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[15]+0x49b40821|0,r=i+(a<<22|a>>>10),a=t+(i^s&(r^i))+n[1]+0xf61e2562|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[11]+0x265e5a51|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[0]+0xe9b6c7aa|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[5]+0xd62f105d|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[15]+0xd8a1e681|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[4]+0xe7d3fbc8|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[9]+0x21e1cde6|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[3]+0xf4d50d87|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[8]+0x455a14ed|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[13]+0xa9e3e905|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[7]+0x676f02d9|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[12]+0x8d2a4c8a|0,a=t+((r=i+(a<<20|a>>>12))^i^s)+n[5]+0xfffa3942|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[8]+0x8771f681|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[11]+0x6d9d6122|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[14]+0xfde5380c|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[1]+0xa4beea44|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[4]+0x4bdecfa9|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[7]+0xf6bb4b60|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[10]+0xbebfbc70|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[13]+0x289b7ec6|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[0]+0xeaa127fa|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[3]+0xd4ef3085|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[6]+0x4881d05|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[9]+0xd9d4d039|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[12]+0xe6db99e5|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[15]+0x1fa27cf8|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[2]+0xc4ac5665|0,r=i+(a<<23|a>>>9),a=t+(i^(r|~s))+n[0]+0xf4292244|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[14]+0xab9423a7|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[5]+0xfc93a039|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[12]+0x655b59c3|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[10]+0xffeff47d|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[1]+0x85845dd1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[8]+0x6fa87e4f|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[6]+0xa3014314|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[13]+0x4e0811a1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[4]+0xf7537e82|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[2]+0x2ad7d2bb|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+s|0}function r(e,t){var r=s;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}function n(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}})(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,r){void 0===r&&(r=e.length);for(var n=r-this.blockSize,i=this.B,s=this.h,a=0;a<r;){if(0==s)for(;a<=n;)t(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<r;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){t(this,i),s=0;break}}else for(;a<r;)if(i[s++]=e[a++],s==this.blockSize){t(this,i),s=0;break}}this.h=s,this.o+=r},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var i,s={};function a(e){return -128<=e&&128>e?r(e,function(e){return new n([0|e],0>e?-1:0)}):new n([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return d;if(0>e)return m(o(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=0x100000000;return new n(t,0)}function c(e,t){if(0==e.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return m(c(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(t,8)),n=d,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);8>s?(s=o(Math.pow(t,s)),n=n.j(s).add(o(a))):n=(n=n.j(r)).add(o(a))}return n}var d=a(0),h=a(1),f=a(0x1000000);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function g(e){return -1==e.h}function m(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(h)}function y(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function b(e,t){this.g=e,this.h=t}function S(e,t){if(p(t))throw Error("division by zero");if(p(e))return new b(d,d);if(g(e))return t=S(m(e),t),new b(m(t.g),m(t.h));if(g(t))return t=S(e,m(t)),new b(m(t.g),t.h);if(30<e.g.length){if(g(e)||g(t))throw Error("slowDivide_ only works with positive integers.");for(var r=h,n=t;0>=n.l(e);)r=w(r),n=w(n);var i=T(r,1),s=T(n,1);for(n=T(n,2),r=T(r,2);!p(n);){var a=s.add(n);0>=a.l(e)&&(i=i.add(r),s=a),n=T(n,1),r=T(r,1)}return t=y(e,i.j(t)),new b(i,t)}for(i=d;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),a=(s=o(r)).j(t);g(a)||0<a.l(e);)r-=n,a=(s=o(r)).j(t);p(s)&&(s=h),i=i.add(s),e=y(e,a)}return new b(i,e)}function w(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function T(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+r)>>>t|e.i(a+r+1)<<32-t:e.i(a+r);return new n(s,e.h)}(i=n.prototype).m=function(){if(g(this))return-m(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},i.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(g(this))return"-"+m(this).toString(e);for(var t=o(Math.pow(e,6)),r=this,n="";;){var i=S(r,t).g,s=((0<(r=y(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(p(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},i.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},i.l=function(e){return g(e=y(this,e))?-1:+!p(e)},i.abs=function(){return g(this)?m(this):this},i.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,r[s]=o<<16|a}return new n(r,-0x80000000&r[r.length-1]?-1:0)},i.j=function(e){if(p(this)||p(e))return d;if(g(this))return g(e)?m(this).j(m(e)):m(m(this).j(e));if(g(e))return m(this.j(m(e)));if(0>this.l(f)&&0>e.l(f))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var a=this.i(i)>>>16,l=65535&this.i(i),u=e.i(s)>>>16,c=65535&e.i(s);r[2*i+2*s]+=l*c,v(r,2*i+2*s),r[2*i+2*s+1]+=a*c,v(r,2*i+2*s+1),r[2*i+2*s+1]+=l*u,v(r,2*i+2*s+1),r[2*i+2*s+2]+=a*u,v(r,2*i+2*s+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new n(r,0)},i.A=function(e){return S(this,e).h},i.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},i.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},i.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,u=xp.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=o,n.fromString=c,l=xp.Integer=n}).apply(void 0!==xf?xf:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var xg=r(36142),xm=r(97587);let xy="@firebase/firestore",xv="4.7.3";class xb{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xb.UNAUTHENTICATED=new xb(null),xb.GOOGLE_CREDENTIALS=new xb("google-credentials-uid"),xb.FIRST_PARTY=new xb("first-party-uid"),xb.MOCK_USER=new xb("mock-user");let xS="10.14.0";function xw(e){xS=e}function xT(e){return(0,xd.inspect)(e,{depth:100})}let xE=new Cm("@firebase/firestore");function xC(){return xE.logLevel}function xx(e,...t){if(xE.logLevel<=o.DEBUG){let r=t.map(xI);xE.debug(`Firestore (${xS}): ${e}`,...r)}}function x_(e,...t){if(xE.logLevel<=o.ERROR){let r=t.map(xI);xE.error(`Firestore (${xS}): ${e}`,...r)}}function xO(e,...t){if(xE.logLevel<=o.WARN){let r=t.map(xI);xE.warn(`Firestore (${xS}): ${e}`,...r)}}function xI(e){if("string"==typeof e)return e;try{return xT(e)}catch(t){return e}}function xA(e="Unexpected state"){let t=`FIRESTORE (${xS}) INTERNAL ASSERTION FAILED: `+e;throw x_(t),Error(t)}function xk(e,t){e||xA()}function xR(e,t){return e}let xD={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xN extends E4{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xP{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xM{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xb.UNAUTHENTICATED))}shutdown(){}}class xL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xB{constructor(e){this.authProvider=e,this.currentUser=xb.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){xk(void 0===this.tokenListener);let r=this.tokenCounter,n=e=>this.tokenCounter!==r?(r=this.tokenCounter,t(e)):Promise.resolve(),i=new xP;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),i.resolve(),i=new xP,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{xx("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),s())};this.authProvider.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.authProvider.getImmediate({optional:!0});e?a(e):(xx("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xP)}},0),s()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(t).then(t=>this.tokenCounter!==e?(xx("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(xk("string"==typeof t.accessToken),new xM(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return xk(null===e||"string"==typeof e),new xb(e)}}class xF{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=xb.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class xU{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new xF(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(xb.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xV{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xz{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,t){xk(void 0===this.tokenListener);let r=e=>{null!=e.error&&xx("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.latestAppCheckToken;return this.latestAppCheckToken=e.token,xx("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.tokenListener=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{xx("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.appCheckProvider.getImmediate({optional:!0});e?n(e):xx("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(e).then(e=>e?(xk("string"==typeof e.token),this.latestAppCheckToken=e.token,new xV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}}function xq(e){if(!e)return new xj;switch(e.type){case"firstParty":return new xU(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new xN(xD.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function x$(e){return(0,xh.randomBytes)(e)}class xG{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",n=20;for(;r.length<n;){let i=x$(40);for(let s=0;s<i.length;++s)r.length<n&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function xW(e,t){return e<t?-1:+(e>t)}function xK(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}function xH(e){return e+"\0"}let xQ=-0xe7791f700,xY=1e6;class xX{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new xN(xD.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xQ||e>=0x3afff44180)throw new xN(xD.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xX.fromMillis(Date.now())}static fromDate(e){return xX.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*xY);return new xX(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xY}_compareTo(e){return this.seconds===e.seconds?xW(this.nanoseconds,e.nanoseconds):xW(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-xQ).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xJ{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xJ(e)}static min(){return new xJ(new xX(0,0))}static max(){return new xJ(new xX(0x3afff4417f,1e9-1))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}let xZ="__name__";class x0{constructor(e,t,r){void 0===t?t=0:t>e.length&&xA(),void 0===r?r=e.length-t:r>e.length-t&&xA(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===x0.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof x0?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),i=t.get(n);if(r<i)return -1;if(r>i)return 1}return e.length<t.length?-1:+(e.length>t.length)}}class x1 extends x0{construct(e,t,r){return new x1(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new xN(xD.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new x1(t)}static emptyPath(){return new x1([])}}let x2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class x3 extends x0{construct(e,t,r){return new x3(e,t,r)}static isValidIdentifier(e){return x2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),x3.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===xZ}static keyField(){return new x3([xZ])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new xN(xD.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new xN(xD.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new xN(xD.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new xN(xD.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new x3(t)}static emptyPath(){return new x3([])}}class x6{constructor(e){this.path=e}static fromPath(e){return new x6(x1.fromString(e))}static fromName(e){return new x6(x1.fromString(e).popFirst(5))}static empty(){return new x6(x1.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===x1.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return x1.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x6(new x1(e.slice()))}}let x4=-1,x5=0;class x8{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function x7(e){return e.fields.find(e=>2===e.kind)}function x9(e){return e.fields.filter(e=>2!==e.kind)}function _e(e){let t=x9(e);return 0===t.length?0:t[t.length-1].kind}function _t(e,t){let r=xW(e.collectionGroup,t.collectionGroup);if(0!==r)return r;for(let n=0;n<Math.min(e.fields.length,t.fields.length);++n)if(0!==(r=_i(e.fields[n],t.fields[n])))return r;return xW(e.fields.length,t.fields.length)}function _r(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}x8.UNKNOWN_ID=-1;class _n{constructor(e,t){this.fieldPath=e,this.kind=t}}function _i(e,t){let r=x3.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:xW(e.kind,t.kind)}class _s{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _s(x5,_l.min())}}function _a(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new _l(xJ.fromTimestamp(1e9===n?new xX(r+1,0):new xX(r,n)),x6.empty(),t)}function _o(e){return new _l(e.readTime,e.key,x4)}class _l{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _l(xJ.min(),x6.empty(),x4)}static max(){return new _l(xJ.max(),x6.empty(),x4)}}function _u(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=x6.comparator(e.documentKey,t.documentKey))?r:xW(e.largestBatchId,t.largestBatchId)}let _c="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _d{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function _h(e){if(e.code===xD.FAILED_PRECONDITION&&e.message===_c)xx("LocalStore","Unexpectedly lost primary lease");else throw e}class _f{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return(this.callbackAttached&&xA(),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _f((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();if(t instanceof _f)return t;return _f.resolve(t)}catch(e){return _f.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_f.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_f.reject(t)}static resolve(e){return new _f((t,r)=>{t(e)})}static reject(e){return new _f((t,r)=>{r(e)})}static waitFor(e){return new _f((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=_f.resolve(!1);for(let r of e)t=t.next(e=>e?_f.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new _f((r,n)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new _f((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}let _p="SimpleDb",_g=3;class _m{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.completionDeferred=new xP,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{t.error?this.completionDeferred.reject(new _S(e,t.error)):this.completionDeferred.resolve()},this.transaction.onerror=t=>{let r=_x(t.target.error);this.completionDeferred.reject(new _S(e,r))}}static open(e,t,r,n){try{return new _m(t,e.transaction(n,r))}catch(e){throw new _S(t,e)}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(xx(_p,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new _T(this.transaction.objectStore(e))}}class _y{constructor(e,t,r){this.name=e,this.version=t,this.schemaConverter=r,12.2===_y.getIOSVersion(EZ())&&x_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xx(_p,"Removing database:",e),_E(window.indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!E2())return!1;if(_y.isMockPersistence())return!0;let e=EZ(),t=_y.getIOSVersion(e),r=0<t&&t<10,n=_v(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)&&!r&&!i}static isMockPersistence(){var e;return"undefined"!=typeof process&&(null==(e=process.env)?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,t){return e.store(t)}static getIOSVersion(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}async ensureDb(e){return this.db||(xx(_p,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new _S(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new xN(xD.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new xN(xD.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new _S(e,n))},n.onupgradeneeded=e=>{xx(_p,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;this.schemaConverter.createOrUpgrade(t,n.transaction,e.oldVersion,this.version).next(()=>{xx(_p,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=e=>this.versionchangelistener(e)),this.db}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.ensureDb(e);let t=_m.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next(e=>(t.maybeCommit(),e)).catch(e=>(t.abort(e),_f.reject(e))).toPromise();return s.catch(()=>{}),await t.completionPromise,s}catch(r){let e=r,t="FirebaseError"!==e.name&&s<_g;if(xx(_p,"Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _v(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class _b{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return _E(this.dbCursor.delete())}}class _S extends xN{constructor(e,t){super(xD.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function _w(e){return"IndexedDbTransactionError"===e.name}class _T{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xx(_p,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(xx(_p,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_E(r)}add(e){return xx(_p,"ADD",this.store.name,e,e),_E(this.store.add(e))}get(e){return _E(this.store.get(e)).next(t=>(void 0===t&&(t=null),xx(_p,"GET",this.store.name,e,t),t))}delete(e){return xx(_p,"DELETE",this.store.name,e),_E(this.store.delete(e))}count(){return xx(_p,"COUNT",this.store.name),_E(this.store.count())}loadAll(e,t){let r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){let e=n.getAll(r.range);return new _f((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.iterateCursor(e,(e,r)=>{t.push(r)}).next(()=>t)}}loadFirst(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new _f((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}deleteAll(e,t){xx(_p,"DELETE ALL",this.store.name);let r=this.options(e,t);r.keysOnly=!1;let n=this.cursor(r);return this.iterateCursor(n,(e,t,r)=>r.delete())}iterate(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.iterateCursor(n,t)}iterateSerial(e){let t=this.cursor({});return new _f((r,n)=>{t.onerror=e=>{n(_x(e.target.error))},t.onsuccess=t=>{let n=t.target.result;if(!n)return void r();e(n.primaryKey,n.value).next(e=>{e?n.continue():r()})}})}iterateCursor(e,t){let r=[];return new _f((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void n();let s=new _b(i),a=t(i.primaryKey,i.value,s);if(a instanceof _f){let e=a.catch(e=>(s.done(),_f.reject(e)));r.push(e)}s.isDone?n():null===s.skipToKey?i.continue():i.continue(s.skipToKey)}}).next(()=>_f.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),!e.index)return this.store.openCursor(e.range,t);{let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}}}function _E(e){return new _f((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(_x(e.target.error))}})}let _C=!1;function _x(e){let t=_y.getIOSVersion(EZ());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new xN("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _C||(_C=!0,setTimeout(()=>{throw e},0)),e}}return e}let __="IndexBackfiller",_O=15e3,_I=6e4,_A=50;class _k{constructor(e,t){this.asyncQueue=e,this.backfiller=t,this.task=null}start(){this.schedule(_O)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(e){xx(__,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let e=await this.backfiller.backfill();xx(__,`Documents written: ${e}`)}catch(e){_w(e)?xx(__,"Ignoring IndexedDB error during index backfill: ",e):await _h(e)}await this.schedule(_I)})}}class _R{constructor(e,t){this.localStore=e,this.persistence=t}async backfill(e=_A){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.writeIndexEntries(t,e))}writeIndexEntries(e,t){let r=new Set,n=t,i=!0;return _f.doWhile(()=>!0===i&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(!(null===t||r.has(t)))return xx(__,`Processing collection: ${t}`),this.writeEntriesForCollectionGroup(e,t,n).next(e=>{n-=e,r.add(t)});i=!1})).next(()=>t-n)}writeEntriesForCollectionGroup(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(r=>{let i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.getNewOffset(n,r)).next(r=>(xx(__,`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>i.size)}))}getNewOffset(e,t){let r=e;return t.changes.forEach((e,t)=>{let n=_o(t);_u(n,r)>0&&(r=n)}),new _l(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class _D{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.setPreviousValue(e),this.writeNewSequenceNumber=e=>t.writeSequenceNumber(e))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}_D.INVALID=-1;let _N="\x01",_P="\x01",_M="\x10",_j="\x11";function _L(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=_F(t)),t=_B(e.get(r),t);return _F(t)}function _B(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+=_N+_M;break;case _N:r+=_N+_j;break;default:r+=n}}return r}function _F(e){return e+_N+_P}function _U(e){let t=e.length;if(xk(t>=2),2===t)return xk(e.charAt(0)===_N&&e.charAt(1)===_P),x1.emptyPath();let r=t-2,n=[],i="";for(let s=0;s<t;){let t=e.indexOf(_N,s);switch((t<0||t>r)&&xA(),e.charAt(t+1)){case _P:let a,o=e.substring(s,t);0===i.length?a=o:(i+=o,a=i,i=""),n.push(a);break;case _M:i+=e.substring(s,t),i+="\0";break;case _j:i+=e.substring(s,t+1);break;default:xA()}s=t+2}return new x1(n)}let _V="remoteDocuments",_z="owner",_q="owner",_$="mutationQueues",_G="userId",_W="mutations",_K="batchId",_H="userMutationsIndex",_Q=["userId","batchId"];function _Y(e){return[e]}function _X(e,t){return[e,_L(t)]}function _J(e,t,r){return[e,_L(t),r]}let _Z={},_0="documentMutations",_1="remoteDocumentsV14",_2=["prefixPath","collectionGroup","readTime","documentId"],_3="documentKeyIndex",_6=["prefixPath","collectionGroup","documentId"],_4="collectionGroupIndex",_5=["collectionGroup","readTime","prefixPath","documentId"],_8="remoteDocumentGlobal",_7="remoteDocumentGlobalKey",_9="targets",Oe="targetId",Ot="queryTargetsIndex",Or=["canonicalId","targetId"],On="targetDocuments",Oi=["targetId","path"],Os="documentTargetsIndex",Oa=["path","targetId"],Oo="targetGlobalKey",Ol="targetGlobal",Ou="collectionParents",Oc=["collectionId","parent"],Od="clientMetadata",Oh="clientId",Of="bundles",Op="bundleId",Og="namedQueries",Om="name",Oy="indexConfiguration",Ov="indexId",Ob="collectionGroupIndex",OS="collectionGroup",Ow="indexState",OT=["indexId","uid"],OE="sequenceNumberIndex",OC=["uid","sequenceNumber"],Ox="indexEntries",O_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],OO="documentKeyIndex",OI=["indexId","uid","orderedDocumentKey"],OA="documentOverlays",Ok=["userId","collectionPath","documentId"],OR="collectionPathOverlayIndex",OD=["userId","collectionPath","largestBatchId"],ON="collectionGroupOverlayIndex",OP=["userId","collectionGroup","largestBatchId"],OM="globals",Oj="name",OL=[_$,_W,_0,_V,_9,_z,Ol,On,Od,_8,Ou,Of,Og],OB=[...OL,OA],OF=[_$,_W,_0,_1,_9,_z,Ol,On,Od,_8,Ou,Of,Og,OA],OU=OF,OV=[...OU,Oy,Ow,Ox],Oz=OV,Oq=[...OV,OM];function O$(e){return 17===e?Oq:16===e?Oz:15===e?OV:14===e?OU:13===e?OF:12===e?OB:11===e?OL:void xA()}class OG extends _d{constructor(e,t){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=t}}function OW(e,t){let r=xR(e);return _y.getStore(r.simpleDbTransaction,t)}function OK(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function OH(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function OQ(e,t){let r=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(t(e[n],n,e));return r}function OY(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class OX{constructor(e,t){this.comparator=e,this.root=t||OZ.EMPTY}insert(e,t){return new OX(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,OZ.BLACK,null,null))}remove(e){return new OX(this.comparator,this.root.remove(e,this.comparator).copy(null,null,OZ.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new OJ(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new OJ(this.root,e,this.comparator,!1)}getReverseIterator(){return new OJ(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new OJ(this.root,e,this.comparator,!0)}}class OJ{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else if(0===i){this.nodeStack.push(e);break}else this.nodeStack.push(e),e=this.isReverse?e.right:e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class OZ{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:OZ.RED,this.left=null!=n?n:OZ.EMPTY,this.right=null!=i?i:OZ.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new OZ(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return OZ.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key))if(n.right.isEmpty())return OZ.EMPTY;else r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin());n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,OZ.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,OZ.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xA();let e=this.left.check();if(e===this.right.check())return e+ +!this.isRed();throw xA()}}OZ.EMPTY=null,OZ.RED=!0,OZ.BLACK=!1;class O0{constructor(){this.size=0}get key(){throw xA()}get value(){throw xA()}get color(){throw xA()}get left(){throw xA()}get right(){throw xA()}copy(e,t,r,n,i){return this}insert(e,t,r){return new OZ(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}OZ.EMPTY=new O0;class O1{constructor(e){this.comparator=e,this.data=new OX(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new O2(this.data.getIterator())}getIteratorFrom(e){return new O2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof O1)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new O1(this.comparator);return t.data=e,t}}class O2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function O3(e,t,r,n,i){let s=e.getIterator(),a=t.getIterator(),o=O6(s),l=O6(a);for(;o||l;){let e=!1,t=!1;if(o&&l){let n=r(o,l);n<0?t=!0:n>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(n(l),l=O6(a)):t?(i(o),o=O6(s)):(o=O6(s),l=O6(a))}}function O6(e){return e.hasNext()?e.getNext():void 0}class O4{constructor(e){this.fields=e,e.sort(x3.comparator)}static empty(){return new O4([])}unionWith(e){let t=new O1(x3.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new O4(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xK(this.fields,e.fields,(e,t)=>e.isEqual(t))}}function O5(e){return Buffer.from(e,"base64").toString("binary")}function O8(e){return Buffer.from(e,"binary").toString("base64")}class O7{constructor(e){this.binaryString=e}static fromBase64String(e){return new O7(O5(e))}static fromUint8Array(e){return new O7(O9(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return O8(this.binaryString)}toUint8Array(){return Ie(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xW(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function O9(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function Ie(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}O7.EMPTY_BYTE_STRING=new O7("");let It=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(e){if(xk(!!e),"string"==typeof e){let t=0,r=It.exec(e);if(xk(!!r),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:In(e.seconds),nanos:In(e.nanos)}}function In(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ii(e){return"string"==typeof e?O7.fromBase64String(e):O7.fromUint8Array(e)}let Is="server_timestamp",Ia="__type__",Io="__previous_value__",Il="__local_write_time__";function Iu(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[Ia])?void 0:r.stringValue)===Is}function Ic(e,t){let r={fields:{[Ia]:{stringValue:Is},[Il]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Iu(t)&&(t=Id(t)),t&&(r.fields[Io]=t),{mapValue:r}}function Id(e){let t=e.mapValue.fields[Io];return Iu(t)?Id(t):t}function Ih(e){let t=Ir(e.mapValue.fields[Il].timestampValue);return new xX(t.seconds,t.nanos)}class If{constructor(e,t,r,n,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}let Ip="(default)";class Ig{constructor(e,t){this.projectId=e,this.database=t||Ip}static empty(){return new Ig("","")}get isDefaultDatabase(){return this.database===Ip}isEqual(e){return e instanceof Ig&&e.projectId===this.projectId&&e.database===this.database}}function Im(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new xN(xD.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ig(e.options.projectId,t)}let Iy=-1;function Iv(e){return null==e}function Ib(e){return 0===e&&1/e==-1/0}function IS(e){return"number"==typeof e&&Number.isInteger(e)&&!Ib(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}let Iw="__type__",IT="__max__",IE={mapValue:{fields:{__type__:{stringValue:IT}}}},IC="__vector__",Ix="value",I_={nullValue:"NULL_VALUE"};function IO(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Iu(e)?4:At(e)?0x1fffffffffffff:I9(e)?10:11:xA()}function II(e,t){if(e===t)return!0;let r=IO(e);if(r!==IO(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ih(e).isEqual(Ih(t));case 3:return IA(e,t);case 5:return e.stringValue===t.stringValue;case 6:return IR(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return Ik(e,t);case 2:return ID(e,t);case 9:return xK(e.arrayValue.values||[],t.arrayValue.values||[],II);case 10:case 11:return IN(e,t);default:return xA()}}function IA(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=Ir(e.timestampValue),n=Ir(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}function Ik(e,t){return In(e.geoPointValue.latitude)===In(t.geoPointValue.latitude)&&In(e.geoPointValue.longitude)===In(t.geoPointValue.longitude)}function IR(e,t){return Ii(e.bytesValue).isEqual(Ii(t.bytesValue))}function ID(e,t){if("integerValue"in e&&"integerValue"in t)return In(e.integerValue)===In(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=In(e.doubleValue),n=In(t.doubleValue);return r===n?Ib(r)===Ib(n):isNaN(r)&&isNaN(n)}return!1}function IN(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(OK(r)!==OK(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!II(r[e],n[e])))return!1;return!0}function IP(e,t){return void 0!==(e.values||[]).find(e=>II(e,t))}function IM(e,t){if(e===t)return 0;let r=IO(e),n=IO(t);if(r!==n)return xW(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return xW(e.booleanValue,t.booleanValue);case 2:return Ij(e,t);case 3:return IL(e.timestampValue,t.timestampValue);case 4:return IL(Ih(e),Ih(t));case 5:return xW(e.stringValue,t.stringValue);case 6:return IU(e.bytesValue,t.bytesValue);case 7:return IB(e.referenceValue,t.referenceValue);case 8:return IF(e.geoPointValue,t.geoPointValue);case 9:return IV(e.arrayValue,t.arrayValue);case 10:return Iz(e.mapValue,t.mapValue);case 11:return Iq(e.mapValue,t.mapValue);default:throw xA()}}function Ij(e,t){let r=In(e.integerValue||e.doubleValue),n=In(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}function IL(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return xW(e,t);let r=Ir(e),n=Ir(t),i=xW(r.seconds,n.seconds);return 0!==i?i:xW(r.nanos,n.nanos)}function IB(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=xW(r[e],n[e]);if(0!==t)return t}return xW(r.length,n.length)}function IF(e,t){let r=xW(In(e.latitude),In(t.latitude));return 0!==r?r:xW(In(e.longitude),In(t.longitude))}function IU(e,t){let r=Ii(e),n=Ii(t);return r.compareTo(n)}function IV(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=IM(r[e],n[e]);if(t)return t}return xW(r.length,n.length)}function Iz(e,t){var r,n,i,s;let a=e.fields||{},o=t.fields||{},l=null==(r=a[Ix])?void 0:r.arrayValue,u=null==(n=o[Ix])?void 0:n.arrayValue,c=xW((null==(i=null==l?void 0:l.values)?void 0:i.length)||0,(null==(s=null==u?void 0:u.values)?void 0:s.length)||0);return 0!==c?c:IV(l,u)}function Iq(e,t){if(e===IE.mapValue&&t===IE.mapValue)return 0;if(e===IE.mapValue)return 1;if(t===IE.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=xW(n[e],s[e]);if(0!==t)return t;let a=IM(r[n[e]],i[s[e]]);if(0!==a)return a}return xW(n.length,s.length)}function I$(e){return IG(e)}function IG(e){if("nullValue"in e)return"null";if("booleanValue"in e)return""+e.booleanValue;if("integerValue"in e)return""+e.integerValue;if("doubleValue"in e)return""+e.doubleValue;if("timestampValue"in e)return IK(e.timestampValue);else if("stringValue"in e)return e.stringValue;else if("bytesValue"in e)return IW(e.bytesValue);else if("referenceValue"in e)return IQ(e.referenceValue);else if("geoPointValue"in e)return IH(e.geoPointValue);else if("arrayValue"in e)return IX(e.arrayValue);else if("mapValue"in e)return IY(e.mapValue);else return xA()}function IW(e){return Ii(e).toBase64()}function IK(e){let t=Ir(e);return`time(${t.seconds},${t.nanos})`}function IH(e){return`geo(${e.latitude},${e.longitude})`}function IQ(e){return x6.fromName(e).toString()}function IY(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${IG(e.fields[i])}`;return r+"}"}function IX(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=IG(n);return t+"]"}function IJ(e){switch(IO(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=Id(e);return t?16+IJ(t):16;case 5:return 2*e.stringValue.length;case 6:return Ii(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return I0(e.arrayValue);case 10:case 11:return IZ(e.mapValue);default:throw xA()}}function IZ(e){let t=0;return OH(e.fields,(e,r)=>{t+=e.length+IJ(r)}),t}function I0(e){return(e.values||[]).reduce((e,t)=>e+IJ(t),0)}function I1(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function I2(e){return!!e&&"integerValue"in e}function I3(e){return!!e&&"doubleValue"in e}function I6(e){return I2(e)||I3(e)}function I4(e){return!!e&&"arrayValue"in e}function I5(e){return!!e&&"nullValue"in e}function I8(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function I7(e){return!!e&&"mapValue"in e}function I9(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[Iw])?void 0:r.stringValue)===IC}function Ae(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return OH(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=Ae(r)),t}{if(!e.arrayValue)return Object.assign({},e);let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Ae(e.arrayValue.values[r]);return t}}function At(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===IT}let Ar={mapValue:{fields:{[Iw]:{stringValue:IC},[Ix]:{arrayValue:{}}}}};function An(e){if("nullValue"in e)return I_;if("booleanValue"in e)return{booleanValue:!1};if("integerValue"in e||"doubleValue"in e)return{doubleValue:NaN};if("timestampValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in e)return{stringValue:""};else if("bytesValue"in e)return{bytesValue:""};else if("referenceValue"in e)return I1(Ig.empty(),x6.empty());else if("geoPointValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in e)return{arrayValue:{}};else if(!("mapValue"in e))return xA();else return I9(e)?Ar:{mapValue:{}}}function Ai(e){if("nullValue"in e)return{booleanValue:!1};if("booleanValue"in e)return{doubleValue:NaN};if("integerValue"in e||"doubleValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in e)return{stringValue:""};if("stringValue"in e)return{bytesValue:""};else if("bytesValue"in e)return I1(Ig.empty(),x6.empty());else if("referenceValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in e)return{arrayValue:{}};else if("arrayValue"in e)return Ar;else if(!("mapValue"in e))return xA();else return I9(e)?{mapValue:{}}:IE}function As(e,t){let r=IM(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Aa(e,t){let r=IM(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Ao{constructor(e){this.value=e}static empty(){return new Ao({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!I7(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ae(t)}setAll(e){let t=x3.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=Ae(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());I7(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return II(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];I7(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(OH(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new Ao(Ae(this.value))}}function Al(e){let t=[];return OH(e.fields,(e,r)=>{let n=new x3([e]);if(I7(r)){let e=Al(r.mapValue).fields;if(0===e.length)t.push(n);else for(let r of e)t.push(n.child(r))}else t.push(n)}),new O4(t)}class Au{constructor(e,t,r,n,i,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Au(e,0,xJ.min(),xJ.min(),xJ.min(),Ao.empty(),0)}static newFoundDocument(e,t,r,n){return new Au(e,1,t,xJ.min(),r,n,0)}static newNoDocument(e,t){return new Au(e,2,t,xJ.min(),xJ.min(),Ao.empty(),0)}static newUnknownDocument(e,t){return new Au(e,3,t,xJ.min(),xJ.min(),Ao.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(xJ.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ao.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ao.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xJ.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Au&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Au(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function Ac(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?IM(n,i):xA()}class Ad{constructor(e,t){this.position=e,this.inclusive=t}}function Ah(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(n=s.field.isKeyField()?x6.comparator(x6.fromName(a.referenceValue),r.key):IM(a,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function Af(e,t,r){let n=Ah(e,t,r);return e.inclusive?n>=0:n>0}function Ap(e,t,r){let n=Ah(e,t,r);return e.inclusive?n<=0:n<0}function Ag(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!II(e.position[r],t.position[r]))return!1;return!0}class Am{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ay(e){return e.field.canonicalString()+e.dir}function Av(e){return`${e.field.canonicalString()} (${e.dir})`}function Ab(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class AS{}class Aw extends AS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){if(e.isKeyField())if("in"===t||"not-in"===t)return this.createKeyFieldInFilter(e,t,r);else return new AM(e,t,r);if("array-contains"===t)return new AF(e,r);if("in"===t)return new AU(e,r);if("not-in"===t)return new AV(e,r);if("array-contains-any"===t)return new Az(e,r);else return new Aw(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Aj(e,r):new AL(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(IM(t,this.value)):null!==t&&IO(this.value)===IO(t)&&this.matchesComparison(IM(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xA()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class AT extends AS{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new AT(e,t)}matches(e){return AE(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}}function AE(e){return"and"===e.op}function AC(e){return"or"===e.op}function Ax(e){return A_(e)&&AE(e)}function A_(e){for(let t of e.filters)if(t instanceof AT)return!1;return!0}function AO(e){if(e instanceof Aw)return e.field.canonicalString()+e.op.toString()+I$(e.value);{if(Ax(e))return e.filters.map(e=>AO(e)).join(",");let t=e.filters.map(e=>AO(e)).join(",");return`${e.op}(${t})`}}function AI(e,t){return e instanceof Aw?AA(e,t):e instanceof AT?Ak(e,t):void xA()}function AA(e,t){return t instanceof Aw&&e.op===t.op&&e.field.isEqual(t.field)&&II(e.value,t.value)}function Ak(e,t){return t instanceof AT&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,n)=>e&&AI(r,t.filters[n]),!0)}function AR(e,t){let r=e.filters.concat(t);return AT.create(r,e.op)}function AD(e){return e instanceof Aw?AP(e):e instanceof AT?AN(e):"Filter"}function AN(e){return e.op.toString()+" {"+e.getFilters().map(AD).join(" ,")+"}"}function AP(e){return`${e.field.canonicalString()} ${e.op} ${I$(e.value)}`}class AM extends Aw{constructor(e,t,r){super(e,t,r),this.key=x6.fromName(r.referenceValue)}matches(e){let t=x6.comparator(e.key,this.key);return this.matchesComparison(t)}}class Aj extends Aw{constructor(e,t){super(e,"in",t),this.keys=AB("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AL extends Aw{constructor(e,t){super(e,"not-in",t),this.keys=AB("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AB(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>x6.fromName(e.referenceValue))}class AF extends Aw{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return I4(t)&&IP(t.arrayValue,this.value)}}class AU extends Aw{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&IP(this.value.arrayValue,t)}}class AV extends Aw{constructor(e,t){super(e,"not-in",t)}matches(e){if(IP(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!IP(this.value.arrayValue,t)}}class Az extends Aw{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!!I4(t)&&!!t.arrayValue.values&&t.arrayValue.values.some(e=>IP(this.value.arrayValue,e))}}class Aq{constructor(e,t=null,r=[],n=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=a,this.memoizedCanonicalId=null}}function A$(e,t=null,r=[],n=[],i=null,s=null,a=null){return new Aq(e,t,r,n,i,s,a)}function AG(e){let t=xR(e);if(null===t.memoizedCanonicalId){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>AO(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>Ay(e)).join(","),Iv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>I$(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>I$(e)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function AW(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>AD(e)).join(", ")}]`),Iv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>Av(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>I$(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>I$(e)).join(",")),`Target(${t})`}function AK(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!Ab(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!AI(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ag(e.startAt,t.startAt)&&Ag(e.endAt,t.endAt)}function AH(e){return x6.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function AQ(e,t){return e.filters.filter(e=>e instanceof Aw&&e.field.isEqual(t))}function AY(e,t){let r=x7(t);if(void 0===r)return null;for(let t of AQ(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}function AX(e,t){let r=new Map;for(let n of x9(t))for(let t of AQ(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}function AJ(e,t){let r=[],n=!0;for(let i of x9(t)){let t=0===i.kind?A0(e,i.fieldPath,e.startAt):A1(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new Ad(r,n)}function AZ(e,t){let r=[],n=!0;for(let i of x9(t)){let t=0===i.kind?A1(e,i.fieldPath,e.endAt):A0(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new Ad(r,n)}function A0(e,t,r){let n=I_,i=!0;for(let r of AQ(e,t)){let e=I_,t=!0;switch(r.op){case"<":case"<=":e=An(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=I_}0>As({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>As({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function A1(e,t,r){let n=IE,i=!0;for(let r of AQ(e,t)){let e=IE,t=!0;switch(r.op){case">=":case">":e=Ai(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=IE}Aa({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];Aa({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function A2(e){let t=new O1(x3.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+ +!!r}function A3(e){return null!==e.limit}class A6{constructor(e,t=null,r=[],n=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}}function A4(e,t,r,n,i,s,a,o){return new A6(e,t,r,n,i,s,a,o)}function A5(e){return new A6(e)}function A8(e,t){return new A6(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function A7(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function A9(e){let t=new O1(x3.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}function ke(e){return x6.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function kt(e){return null!==e.collectionGroup}function kr(e){let t=xR(e);if(null===t.memoizedNormalizedOrderBy){t.memoizedNormalizedOrderBy=[];let e=new Set;for(let r of t.explicitOrderBy)t.memoizedNormalizedOrderBy.push(r),e.add(r.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";A9(t).forEach(n=>{e.has(n.canonicalString())||n.isKeyField()||t.memoizedNormalizedOrderBy.push(new Am(n,r))}),e.has(x3.keyField().canonicalString())||t.memoizedNormalizedOrderBy.push(new Am(x3.keyField(),r))}return t.memoizedNormalizedOrderBy}function kn(e){let t=xR(e);return t.memoizedTarget||(t.memoizedTarget=ks(t,kr(e))),t.memoizedTarget}function ki(e){let t=xR(e);return t.memoizedAggregateTarget||(t.memoizedAggregateTarget=ks(t,e.explicitOrderBy)),t.memoizedAggregateTarget}function ks(e,t){if("F"===e.limitType)return A$(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new Am(e.field,t)});let r=e.endAt?new Ad(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Ad(e.startAt.position,e.startAt.inclusive):null;return A$(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function ka(e,t){let r=e.filters.concat([t]);return new A6(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function ko(e,t){let r=e.explicitOrderBy.concat([t]);return new A6(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function kl(e,t,r){return new A6(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function ku(e,t){return new A6(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}function kc(e,t){return new A6(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}function kd(e,t){return AK(kn(e),kn(t))&&e.limitType===t.limitType}function kh(e){return`${AG(kn(e))}|lt:${e.limitType}`}function kf(e){return`Query(target=${AW(kn(e))}; limitType=${e.limitType})`}function kp(e,t){return t.isFoundDocument()&&kg(e,t)&&km(e,t)&&ky(e,t)&&kv(e,t)}function kg(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):x6.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function km(e,t){for(let r of kr(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}function ky(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function kv(e,t){return(!e.startAt||!!Ap(e.startAt,kr(e),t))&&(!e.endAt||!!Af(e.endAt,kr(e),t))}function kb(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kS(e){return(t,r)=>{let n=!1;for(let i of kr(e)){let e=kw(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function kw(e,t,r){let n=e.field.isKeyField()?x6.comparator(t.key,r.key):Ac(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return xA()}}class kT{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n){this.inner[r]=[[e,t]],this.innerSize++;return}for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e)){n[r]=[e,t];return}n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){OH(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return OY(this.inner)}size(){return this.innerSize}}let kE=new OX(x6.comparator);function kC(){return kE}let kx=new OX(x6.comparator);function k_(...e){let t=kx;for(let r of e)t=t.insert(r.key,r);return t}function kO(){return kR()}function kI(e){let t=kx;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function kA(){return kR()}function kk(){return kR()}function kR(){return new kT(e=>e.toString(),(e,t)=>e.isEqual(t))}let kD=new OX(x6.comparator);function kN(){return kD}let kP=new O1(x6.comparator);function kM(...e){let t=kP;for(let r of e)t=t.add(r);return t}let kj=new O1(xW);function kL(){return kj}function kB(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};else if(t===1/0)return{doubleValue:"Infinity"};else if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ib(t)?"-0":t}}function kF(e){return{integerValue:""+e}}function kU(e,t){return IS(t)?kF(t):kB(e,t)}class kV{constructor(){this._=void 0}}function kz(e,t,r){return e instanceof kW?Ic(r,t):e instanceof kK?kH(e,t):e instanceof kQ?kY(e,t):kJ(e,t)}function kq(e,t,r){return e instanceof kK?kH(e,t):e instanceof kQ?kY(e,t):r}function k$(e,t){return e instanceof kX?I6(t)?t:{integerValue:0}:null}function kG(e,t){return e instanceof kK&&t instanceof kK||e instanceof kQ&&t instanceof kQ?xK(e.elements,t.elements,II):e instanceof kX&&t instanceof kX?II(e.operand,t.operand):e instanceof kW&&t instanceof kW}class kW extends kV{}class kK extends kV{constructor(e){super(),this.elements=e}}function kH(e,t){let r=k0(t);for(let t of e.elements)r.some(e=>II(e,t))||r.push(t);return{arrayValue:{values:r}}}class kQ extends kV{constructor(e){super(),this.elements=e}}function kY(e,t){let r=k0(t);for(let t of e.elements)r=r.filter(e=>!II(e,t));return{arrayValue:{values:r}}}class kX extends kV{constructor(e,t){super(),this.serializer=e,this.operand=t}}function kJ(e,t){let r=k$(e,t),n=kZ(r)+kZ(e.operand);return I2(r)&&I2(e.operand)?kF(n):kB(e.serializer,n)}function kZ(e){return In(e.integerValue||e.doubleValue)}function k0(e){return I4(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class k1{constructor(e,t){this.field=e,this.transform=t}}function k2(e,t){return e.field.isEqual(t.field)&&kG(e.transform,t.transform)}function k3(e,t){return void 0===e&&void 0===t||!!e&&!!t&&xK(e,t,(e,t)=>k2(e,t))}class k6{constructor(e,t){this.version=e,this.transformResults=t}}class k4{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new k4}static exists(e){return new k4(void 0,e)}static updateTime(e){return new k4(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function k5(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class k8{}function k7(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)if(e.isNoDocument())return new Rh(e.key,k4.none());else return new Rn(e.key,e.data,k4.none());{let r=e.data,n=Ao.empty(),i=new O1(x3.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new Ra(e.key,n,new O4(i.toArray()),k4.none())}}function k9(e,t,r){e instanceof Rn?Ri(e,t,r):e instanceof Ra?Ro(e,t,r):Rf(e,t,r)}function Re(e,t,r,n){return e instanceof Rn?Rs(e,t,r,n):e instanceof Ra?Rl(e,t,r,n):Rp(e,t,r)}function Rt(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=k$(n.transform,e||null);null!=i&&(null===r&&(r=Ao.empty()),r.set(n.field,i))}return r||null}function Rr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!k3(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rn extends k8{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}function Ri(e,t,r){let n=e.value.clone(),i=Rc(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function Rs(e,t,r,n){if(!k5(e.precondition,t))return r;let i=e.value.clone(),s=Rd(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}class Ra extends k8{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ro(e,t,r){if(!k5(e.precondition,t))return void t.convertToUnknownDocument(r.version);let n=Rc(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(Ru(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}function Rl(e,t,r,n){if(!k5(e.precondition,t))return r;let i=Rd(e.fieldTransforms,n,t),s=t.data;return(s.setAll(Ru(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}function Ru(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function Rc(e,t,r){let n=new Map;xk(e.length===r.length);for(let i=0;i<r.length;i++){let s=e[i],a=s.transform,o=t.data.field(s.field);n.set(s.field,kq(a,o,r[i]))}return n}function Rd(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,kz(e,s,t))}return n}class Rh extends k8{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function Rf(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}function Rp(e,t,r){return k5(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}class Rg extends k8{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Rm{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&k9(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Re(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Re(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=kk();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=k7(s,a=t.has(n.key)?null:a);null!==o&&r.set(n.key,o),s.isValidDocument()||s.convertToNoDocument(xJ.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kM())}isEqual(e){return this.batchId===e.batchId&&xK(this.mutations,e.mutations,(e,t)=>Rr(e,t))&&xK(this.baseMutations,e.baseMutations,(e,t)=>Rr(e,t))}}class Ry{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){xk(e.mutations.length===r.length);let n=kN(),i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new Ry(e,t,r,n)}}class Rv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Rb{constructor(e,t){this.count=e,this.unchangedNames=t}}function RS(e){switch(e){case xD.OK:return xA();case xD.CANCELLED:case xD.UNKNOWN:case xD.DEADLINE_EXCEEDED:case xD.RESOURCE_EXHAUSTED:case xD.INTERNAL:case xD.UNAVAILABLE:case xD.UNAUTHENTICATED:return!1;case xD.INVALID_ARGUMENT:case xD.NOT_FOUND:case xD.ALREADY_EXISTS:case xD.PERMISSION_DENIED:case xD.FAILED_PRECONDITION:case xD.ABORTED:case xD.OUT_OF_RANGE:case xD.UNIMPLEMENTED:case xD.DATA_LOSS:return!0;default:return xA()}}function Rw(e){return RS(e)&&e!==xD.ABORTED}function RT(e){if(void 0===e)return x_("GRPC error has no .code"),xD.UNKNOWN;switch(e){case c.OK:return xD.OK;case c.CANCELLED:return xD.CANCELLED;case c.UNKNOWN:return xD.UNKNOWN;case c.DEADLINE_EXCEEDED:return xD.DEADLINE_EXCEEDED;case c.RESOURCE_EXHAUSTED:return xD.RESOURCE_EXHAUSTED;case c.INTERNAL:return xD.INTERNAL;case c.UNAVAILABLE:return xD.UNAVAILABLE;case c.UNAUTHENTICATED:return xD.UNAUTHENTICATED;case c.INVALID_ARGUMENT:return xD.INVALID_ARGUMENT;case c.NOT_FOUND:return xD.NOT_FOUND;case c.ALREADY_EXISTS:return xD.ALREADY_EXISTS;case c.PERMISSION_DENIED:return xD.PERMISSION_DENIED;case c.FAILED_PRECONDITION:return xD.FAILED_PRECONDITION;case c.ABORTED:return xD.ABORTED;case c.OUT_OF_RANGE:return xD.OUT_OF_RANGE;case c.UNIMPLEMENTED:return xD.UNIMPLEMENTED;case c.DATA_LOSS:return xD.DATA_LOSS;default:return xA()}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(c||(c={}));class RE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}let RC=null;function Rx(e){if(RC)throw Error("a TestingHooksSpi instance is already set");RC=e}function R_(){return new xd.TextEncoder}function RO(){return new TextDecoder("utf-8")}let RI=new l([0xffffffff,0xffffffff],0);function RA(e){let t=R_().encode(e),r=new u;return r.update(t),new Uint8Array(r.digest())}function Rk(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new l([r,n],0),new l([i,s],0)]}class RR{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new RD(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new RD(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new RD(`Invalid padding when bitmap length is 0: ${t}`);this.bitCount=8*e.length-t,this.bitCountInInteger=l.fromNumber(this.bitCount)}getBitIndex(e,t,r){let n=e.add(t.multiply(l.fromNumber(r)));return 1===n.compare(RI)&&(n=new l([n.getBits(0),n.getBits(1)],0)),n.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(0===this.bitCount)return!1;let[t,r]=Rk(RA(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);if(!this.isBitSet(n))return!1}return!0}static create(e,t,r){let n=e%8==0?0:8-e%8,i=new RR(new Uint8Array(Math.ceil(e/8)),n,t);return r.forEach(e=>i.insert(e)),i}insert(e){if(0===this.bitCount)return;let[t,r]=Rk(RA(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);this.setBit(n)}}setBit(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class RD extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class RN{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,RP.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new RN(xJ.min(),n,new OX(xW),kC(),kM())}}class RP{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new RP(r,t,kM(),kM(),kM())}}class RM{constructor(e,t,r,n){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=n}}class Rj{constructor(e,t){this.targetId=e,this.existenceFilter=t}}class RL{constructor(e,t,r=O7.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class RB{constructor(){this.pendingResponses=0,this.documentChanges=Rz(),this._resumeToken=O7.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=kM(),t=kM(),r=kM();return this.documentChanges.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:xA()}}),new RP(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=Rz()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,xk(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let RF="WatchChangeAggregator";class RU{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=kC(),this.pendingDocumentTargetMapping=RV(),this.pendingTargetResets=new OX(xW)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:xA()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((e,r)=>{this.isActiveTarget(r)&&t(r)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,n=this.targetDataForActiveTarget(t);if(n){let i=n.target;if(AH(i))if(0===r){let e=new x6(i.path);this.removeDocumentFromTarget(t,e,Au.newNoDocument(e,xJ.min()))}else xk(1===r);else{let n=this.getCurrentDocumentCountForTarget(t);if(n!==r){let r=this.parseBloomFilter(e),i=r?this.applyBloomFilter(r,e,n):1;if(0!==i){this.resetTarget(t);let e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(t,e)}null==RC||RC.notifyOnExistenceFilterMismatch(Rq(n,e.existenceFilter,this.metadataProvider.getDatabaseId(),r,i))}}}}parseBloomFilter(e){let t,r,n=e.existenceFilter.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;try{t=Ii(i).toUint8Array()}catch(e){if(e instanceof RE)return xO("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new RR(t,s,a)}catch(e){return e instanceof RD?xO("BloomFilter error: ",e):xO("Applying bloom filter failed: ",e),null}return 0===r.bitCount?null:r}applyBloomFilter(e,t,r){return 2*(t.existenceFilter.count!==r-this.filterRemovedDocuments(e,t.targetId))}filterRemovedDocuments(e,t){let r=this.metadataProvider.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.metadataProvider.getDatabaseId(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;!e.mightContain(s)&&(this.removeDocumentFromTarget(t,r,null),n++)}),n}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((r,n)=>{let i=this.targetDataForActiveTarget(n);if(i){if(r.current&&AH(i.target)){let t=new x6(i.target.path);null!==this.pendingDocumentUpdates.get(t)||this.targetContainsDocument(n,t)||this.removeDocumentFromTarget(n,t,Au.newNoDocument(t,e))}r.hasPendingChanges&&(t.set(n,r.toTargetChange()),r.clearPendingChanges())}});let r=kM();this.pendingDocumentTargetMapping.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.targetDataForActiveTarget(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.pendingDocumentUpdates.forEach((t,r)=>r.setReadTime(e));let n=new RN(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=kC(),this.pendingDocumentTargetMapping=RV(),this.pendingTargetResets=new OX(xW),n}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=2*!!this.targetContainsDocument(e,t.key);this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let n=this.ensureTargetState(e);this.targetContainsDocument(e,t)?n.addDocumentChange(t,1):n.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new RB,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new O1(xW),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}isActiveTarget(e){let t=null!==this.targetDataForActiveTarget(e);return t||xx(RF,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new RB),this.metadataProvider.getRemoteKeysForTarget(e).forEach(t=>{this.removeDocumentFromTarget(e,t,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}}function RV(){return new OX(x6.comparator)}function Rz(){return new OX(x6.comparator)}function Rq(e,t,r,n,i){var s,a,o,l,u,c;let d={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!=(s=null==h?void 0:h.hashCount)?s:0,bitmapLength:null!=(l=null==(o=null==(a=null==h?void 0:h.bits)?void 0:a.bitmap)?void 0:o.length)?l:0,padding:null!=(c=null==(u=null==h?void 0:h.bits)?void 0:u.padding)?c:0,mightContain:e=>{var t;return null!=(t=null==n?void 0:n.mightContain(e))&&t}}),d}let R$=(()=>{let e={};return e.asc="ASCENDING",e.desc="DESCENDING",e})(),RG=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e.in="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),RW=(()=>{let e={};return e.and="AND",e.or="OR",e})();class RK{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function RH(e){return new xN(void 0===e.code?xD.UNKNOWN:RT(e.code),e.message||"")}function RQ(e,t){return e.useProto3Json||Iv(t)?t:{value:t}}function RY(e){let t;return Iv(t="object"==typeof e?e.value:e)?null:t}function RX(e,t){if(!e.useProto3Json)return{seconds:""+t.seconds,nanos:t.nanoseconds};{let e=new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${e}.${r}Z`}}function RJ(e){let t=Ir(e);return new xX(t.seconds,t.nanos)}function RZ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function R0(e,t){return e.useProto3Json?(xk(void 0===t||"string"==typeof t),O7.fromBase64String(t||"")):(xk(void 0===t||t instanceof Buffer||t instanceof Uint8Array),O7.fromUint8Array(t||new Uint8Array))}function R1(e,t){return RX(e,t.toTimestamp())}function R2(e){return xk(!!e),xJ.fromTimestamp(RJ(e))}function R3(e,t){return R6(e,t).canonicalString()}function R6(e,t){let r=Dt(e).child("documents");return void 0===t?r:r.child(t)}function R4(e){let t=x1.fromString(e);return xk(D2(t)),t}function R5(e,t){return R3(e.databaseId,t.path)}function R8(e,t){let r=R4(t);if(r.get(1)!==e.databaseId.projectId)throw new xN(xD.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new xN(xD.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new x6(Dr(r))}function R7(e,t){return R3(e.databaseId,t)}function R9(e){let t=R4(e);return 4===t.length?x1.emptyPath():Dr(t)}function De(e){return new x1(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dt(e){return new x1(["projects",e.projectId,"databases",e.database])}function Dr(e){return xk(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Dn(e,t,r){return{name:R5(e,t),fields:r.value.mapValue.fields}}function Di(e,t){return{name:R5(e,t.key),fields:t.data.value.mapValue.fields,updateTime:RX(e,t.version.toTimestamp()),createTime:RX(e,t.createTime.toTimestamp())}}function Ds(e,t,r){let n=R8(e,t.name),i=R2(t.updateTime),s=t.createTime?R2(t.createTime):xJ.min(),a=new Ao({mapValue:{fields:t.fields}}),o=Au.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function Da(e,t){xk(!!t.found),t.found.name,t.found.updateTime;let r=R8(e,t.found.name),n=R2(t.found.updateTime),i=t.found.createTime?R2(t.found.createTime):xJ.min(),s=new Ao({mapValue:{fields:t.found.fields}});return Au.newFoundDocument(r,n,i,s)}function Do(e,t){xk(!!t.missing),xk(!!t.readTime);let r=R8(e,t.missing),n=R2(t.readTime);return Au.newNoDocument(r,n)}function Dl(e,t){return"found"in t?Da(e,t):"missing"in t?Do(e,t):xA()}function Du(e,t){let r;if("targetChange"in t){t.targetChange;let n=Dc(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=R0(e,t.targetChange.resumeToken),a=t.targetChange.cause;r=new RL(n,i,s,a&&RH(a)||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=R8(e,n.document.name),s=R2(n.document.updateTime),a=n.document.createTime?R2(n.document.createTime):xJ.min(),o=new Ao({mapValue:{fields:n.document.fields}}),l=Au.newFoundDocument(i,s,a,o);r=new RM(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=R8(e,n.document),s=n.readTime?R2(n.readTime):xJ.min(),a=Au.newNoDocument(i,s);r=new RM([],n.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=R8(e,n.document);r=new RM([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return xA();t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new Rb(n,i);r=new Rj(e.targetId,s)}return r}function Dc(e){if("NO_CHANGE"===e)return 0;if("ADD"===e)return 1;if("REMOVE"===e)return 2;if("CURRENT"===e)return 3;if("RESET"===e)return 4;else return xA()}function Dd(e){if(!("targetChange"in e))return xJ.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?xJ.min():R2(t.readTime)}function Dh(e,t){let r;if(t instanceof Rn)r={update:Dn(e,t.key,t.value)};else if(t instanceof Rh)r={delete:R5(e,t.key)};else if(t instanceof Ra)r={update:Dn(e,t.key,t.data),updateMask:D0(t.fieldMask)};else{if(!(t instanceof Rg))return xA();r={verify:R5(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(t=>Dv(e,t))),t.precondition.isNone||(r.currentDocument=Dp(e,t.precondition)),r}function Df(e,t){let r=t.currentDocument?Dg(t.currentDocument):k4.none(),n=t.updateTransforms?t.updateTransforms.map(t=>Db(e,t)):[];if(t.update){t.update.name;let i=R8(e,t.update.name),s=new Ao({mapValue:{fields:t.update.fields}});return t.updateMask?new Ra(i,s,D1(t.updateMask),r,n):new Rn(i,s,r,n)}return t.delete?new Rh(R8(e,t.delete),r):t.verify?new Rg(R8(e,t.verify),r):xA()}function Dp(e,t){return void 0!==t.updateTime?{updateTime:R1(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xA()}function Dg(e){return void 0!==e.updateTime?k4.updateTime(R2(e.updateTime)):void 0!==e.exists?k4.exists(e.exists):k4.none()}function Dm(e,t){let r=e.updateTime?R2(e.updateTime):R2(t);return r.isEqual(xJ.min())&&(r=R2(t)),new k6(r,e.transformResults||[])}function Dy(e,t){return e&&e.length>0?(xk(void 0!==t),e.map(e=>Dm(e,t))):[]}function Dv(e,t){let r=t.transform;if(r instanceof kW)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof kK)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof kQ)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof kX)return{fieldPath:t.field.canonicalString(),increment:r.operand};throw xA()}function Db(e,t){let r=null;return"setToServerValue"in t?(xk("REQUEST_TIME"===t.setToServerValue),r=new kW):"appendMissingElements"in t?r=new kK(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new kQ(t.removeAllFromArray.values||[]):"increment"in t?r=new kX(e,t.increment):xA(),new k1(x3.fromServerFormat(t.fieldPath),r)}function DS(e,t){return{documents:[R7(e,t.path)]}}function Dw(e){return xk(1===e.documents.length),kn(A5(R9(e.documents[0])))}function DT(e,t){let r,n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=R7(e,r);let s=DA(t.filters);s&&(n.structuredQuery.where=s);let a=DD(t.orderBy);a&&(n.structuredQuery.orderBy=a);let o=RQ(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=DP(t.startAt)),t.endAt&&(n.structuredQuery.endAt=DM(t.endAt)),{queryTarget:n,parent:r}}function DE(e,t,r,n){let{queryTarget:i,parent:s}=DT(e,t),a={},o=[],l=0;return r.forEach(e=>{let t=n?e.alias:`aggregate_${l++}`;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:D$(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:D$(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},aliasMap:a,parent:s}}function DC(e){let t=R9(e.parent),r=e.structuredQuery,n=r.from?r.from.length:0,i=null;if(n>0){xk(1===n);let e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=Dk(r.where));let a=[];r.orderBy&&(a=DN(r.orderBy));let o=null;r.limit&&(o=RY(r.limit));let l=null;r.startAt&&(l=Dj(r.startAt));let u=null;return r.endAt&&(u=DL(r.endAt)),A4(t,i,a,s,o,"F",l,u)}function Dx(e){return kn(DC(e))}function D_(e,t){let r=DO(t.purpose);return null==r?null:{"goog-listen-tags":r}}function DO(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xA()}}function DI(e,t){let r,n=t.target;if((r=AH(n)?{documents:DS(e,n)}:{query:DT(e,n).queryTarget}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=RZ(e,t.resumeToken);let n=RQ(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(xJ.min())>0){r.readTime=RX(e,t.snapshotVersion.toTimestamp());let n=RQ(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}function DA(e){if(0!==e.length)return DH(AT.create(e,"and"))}function Dk(e){let t=DR(e);return t instanceof AT&&Ax(t)?t.getFilters():[t]}function DR(e){return void 0!==e.unaryFilter?DX(e):void 0!==e.fieldFilter?DJ(e):void 0!==e.compositeFilter?DZ(e):xA()}function DD(e){if(0!==e.length)return e.map(e=>DW(e))}function DN(e){return e.map(e=>DK(e))}function DP(e){return{before:e.inclusive,values:e.position}}function DM(e){return{before:!e.inclusive,values:e.position}}function Dj(e){let t=!!e.before;return new Ad(e.values||[],t)}function DL(e){let t=!e.before;return new Ad(e.values||[],t)}function DB(e){return R$[e]}function DF(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function DU(e){return RG[e]}function DV(e){return RW[e]}function Dz(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xA()}}function Dq(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xA()}}function D$(e){return{fieldPath:e.canonicalString()}}function DG(e){return x3.fromServerFormat(e.fieldPath)}function DW(e){return{field:D$(e.field),direction:DB(e.dir)}}function DK(e){return new Am(DG(e.field),DF(e.direction))}function DH(e){return e instanceof Aw?DY(e):e instanceof AT?DQ(e):xA()}function DQ(e){let t=e.getFilters().map(e=>DH(e));return 1===t.length?t[0]:{compositeFilter:{op:DV(e.op),filters:t}}}function DY(e){if("=="===e.op){if(I8(e.value))return{unaryFilter:{field:D$(e.field),op:"IS_NAN"}};else if(I5(e.value))return{unaryFilter:{field:D$(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(I8(e.value))return{unaryFilter:{field:D$(e.field),op:"IS_NOT_NAN"}};else if(I5(e.value))return{unaryFilter:{field:D$(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:D$(e.field),op:DU(e.op),value:e.value}}}function DX(e){switch(e.unaryFilter.op){case"IS_NAN":let t=DG(e.unaryFilter.field);return Aw.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=DG(e.unaryFilter.field);return Aw.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=DG(e.unaryFilter.field);return Aw.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=DG(e.unaryFilter.field);return Aw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return xA()}}function DJ(e){return Aw.create(DG(e.fieldFilter.field),Dz(e.fieldFilter.op),e.fieldFilter.value)}function DZ(e){return AT.create(e.compositeFilter.filters.map(e=>DR(e)),Dq(e.compositeFilter.op))}function D0(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function D1(e){return new O4((e.fieldPaths||[]).map(e=>x3.fromServerFormat(e)))}function D2(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class D3{constructor(e,t,r,n,i=xJ.min(),s=xJ.min(),a=O7.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new D3(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new D3(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new D3(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new D3(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class D6{constructor(e){this.remoteSerializer=e}}function D4(e,t){let r;if(t.document)r=Ds(e.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=x6.fromSegments(t.noDocument.path),n=Ne(t.noDocument.readTime);r=Au.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return xA();let e=x6.fromSegments(t.unknownDocument.path),n=Ne(t.unknownDocument.version);r=Au.newUnknownDocument(e,n)}return t.readTime&&r.setReadTime(D7(t.readTime)),r}function D5(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:D8(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=Di(e.remoteSerializer,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:D9(t.version)};else{if(!t.isUnknownDocument())return xA();n.unknownDocument={path:r.path.toArray(),version:D9(t.version)}}return n}function D8(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function D7(e){let t=new xX(e[0],e[1]);return xJ.fromTimestamp(t)}function D9(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ne(e){let t=new xX(e.seconds,e.nanoseconds);return xJ.fromTimestamp(t)}function Nt(e,t,r){let n=r.baseMutations.map(t=>Dh(e.remoteSerializer,t)),i=r.mutations.map(t=>Dh(e.remoteSerializer,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}function Nr(e,t){let r=(t.baseMutations||[]).map(t=>Df(e.remoteSerializer,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform&&(r.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let n=t.mutations.map(t=>Df(e.remoteSerializer,t)),i=xX.fromMillis(t.localWriteTimeMs);return new Rm(t.batchId,i,r,n)}function Nn(e){let t,r=Ne(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ne(e.lastLimboFreeSnapshotVersion):xJ.min();return new D3(t=Ns(e.query)?Dw(e.query):Dx(e.query),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,n,O7.fromBase64String(e.resumeToken))}function Ni(e,t){let r,n=D9(t.snapshotVersion),i=D9(t.lastLimboFreeSnapshotVersion);r=AH(t.target)?DS(e.remoteSerializer,t.target):DT(e.remoteSerializer,t.target).queryTarget;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:AG(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Ns(e){return void 0!==e.documents}function Na(e){return{id:e.bundleId,createTime:Ne(e.createTime),version:e.version}}function No(e){return{bundleId:e.id,createTime:D9(R2(e.createTime)),version:e.version}}function Nl(e){return{name:e.name,query:Nc(e.bundledQuery),readTime:Ne(e.readTime)}}function Nu(e){return{name:e.name,readTime:D9(R2(e.readTime)),bundledQuery:e.bundledQuery}}function Nc(e){let t=DC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kl(t,t.limit,"L"):t}function Nd(e){return{name:e.name,query:Nc(e.bundledQuery),readTime:R2(e.readTime)}}function Nh(e){return{id:e.id,version:e.version,createTime:R2(e.createTime)}}function Nf(e,t){return new Rv(t.largestBatchId,Df(e.remoteSerializer,t.overlayMutation))}function Np(e,t,r){let[n,i,s]=Ng(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:Dh(e.remoteSerializer,r.mutation)}}function Ng(e,t){let r=t.path.lastSegment();return[e,_L(t.path.popLast()),r]}function Nm(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function Ny(e,t){let r=t?new _s(t.sequenceNumber,new _l(Ne(t.readTime),new x6(_U(t.documentKey)),t.largestBatchId)):_s.empty(),n=e.fields.map(([e,t])=>new _n(x3.fromServerFormat(e),t));return new x8(e.indexId,e.collectionGroup,n,r)}function Nv(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:D9(n.readTime),documentKey:_L(n.documentKey.path),largestBatchId:n.largestBatchId}}class Nb{getBundleMetadata(e,t){return NS(e).get(t).next(e=>{if(e)return Na(e)})}saveBundleMetadata(e,t){return NS(e).put(No(t))}getNamedQuery(e,t){return Nw(e).get(t).next(e=>{if(e)return Nl(e)})}saveNamedQuery(e,t){return Nw(e).put(Nu(t))}}function NS(e){return OW(e,Of)}function Nw(e){return OW(e,Og)}class NT{constructor(e,t){this.serializer=e,this.userId=t}static forUser(e,t){return new NT(e,t.uid||"")}getOverlay(e,t){return NE(e).get(Ng(this.userId,t)).next(e=>e?Nf(this.serializer,e):null)}getOverlays(e,t){let r=kA();return _f.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let s=new Rv(t,i);n.push(this.saveOverlay(e,s))}),_f.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(_L(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(NE(e).deleteAll(OR,n))}),_f.waitFor(i)}getOverlaysForCollection(e,t,r){let n=kA(),i=_L(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return NE(e).loadAll(OR,s).next(e=>{for(let t of e){let e=Nf(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i,s=kA(),a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return NE(e).iterate({index:ON,range:a},(e,t,r)=>{let a=Nf(this.serializer,t);s.size()<n||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):r.done()}).next(()=>s)}saveOverlay(e,t){return NE(e).put(Np(this.serializer,this.userId,t))}}function NE(e){return OW(e,OA)}class NC{globalsStore(e){return OW(e,OM)}getSessionToken(e){return this.globalsStore(e).get("sessionToken").next(e=>{let t=null==e?void 0:e.value;return t?O7.fromUint8Array(t):O7.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.globalsStore(e).put({name:"sessionToken",value:t.toUint8Array()})}}let Nx=5,N_=10,NO=13,NI=15,NA=20,Nk=25,NR=30,ND=37,NN=45,NP=50,NM=53,Nj=55,NL=60,NB=2;class NF{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,Nx);else if("booleanValue"in e)this.writeValueTypeLabel(t,N_),t.writeNumber(+!!e.booleanValue);else if("integerValue"in e)this.writeValueTypeLabel(t,NI),t.writeNumber(In(e.integerValue));else if("doubleValue"in e){let r=In(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,NO):(this.writeValueTypeLabel(t,NI),Ib(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,NA),"string"==typeof r&&(r=Ir(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,NR),t.writeBytes(Ii(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,NN),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?At(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):I9(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):xA()}writeIndexString(e,t){this.writeValueTypeLabel(t,Nk),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};for(let e of(this.writeValueTypeLabel(t,Nj),Object.keys(r)))this.writeIndexString(e,t),this.writeIndexValueAux(r[e],t)}writeIndexVector(e,t){var r,n;let i=e.fields||{};this.writeValueTypeLabel(t,NM);let s=Ix,a=(null==(n=null==(r=i[s].arrayValue)?void 0:r.values)?void 0:n.length)||0;this.writeValueTypeLabel(t,NI),t.writeNumber(In(a)),this.writeIndexString(s,t),this.writeIndexValueAux(i[s],t)}writeIndexArray(e,t){let r=e.values||[];for(let e of(this.writeValueTypeLabel(t,NP),r))this.writeIndexValueAux(e,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,ND),x6.fromName(e).path.forEach(e=>{this.writeValueTypeLabel(t,NL),this.writeUnlabeledIndexString(e,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(NB)}}NF.INSTANCE=new NF;let NU="\uD800",NV="\uDBFF",Nz=0,Nq=255,N$=1,NG=255,NW=255,NK=0,NH=64,NQ=8,NY=1024;function NX(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}function NJ(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function NZ(e){let t=0;for(let r=0;r<8;++r){let n=NJ(255&e[r]);if(t+=n,8!==n)break}return t}function N0(e){return Math.ceil((NH-NZ(e))/NQ)}class N1{constructor(){this.buffer=new Uint8Array(NY),this.position=0}writeBytesAscending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteAscending(r.value),r=t.next();this.writeSeparatorAscending()}writeBytesDescending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteDescending(r.value),r=t.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteAscending(e);else if(e<2048)this.writeByteAscending(960|e>>>6),this.writeByteAscending(128|63&e);else if(t<NU||NV<t)this.writeByteAscending(480|e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e);else{let e=t.codePointAt(0);this.writeByteAscending(240|e>>>18),this.writeByteAscending(128|63&e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteDescending(e);else if(e<2048)this.writeByteDescending(960|e>>>6),this.writeByteDescending(128|63&e);else if(t<NU||NV<t)this.writeByteDescending(480|e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e);else{let e=t.codePointAt(0);this.writeByteDescending(240|e>>>18),this.writeByteDescending(128|63&e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e)}}this.writeSeparatorDescending()}writeNumberAscending(e){let t=this.toOrderedBits(e),r=N0(t);this.ensureAvailable(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}writeNumberDescending(e){let t=this.toOrderedBits(e),r=N0(t);this.ensureAvailable(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}writeInfinityAscending(){this.writeEscapedByteAscending(NG),this.writeEscapedByteAscending(NW)}writeInfinityDescending(){this.writeEscapedByteDescending(NG),this.writeEscapedByteDescending(NW)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let t=NX(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=255*!!r;return t}writeByteAscending(e){let t=255&e;t===Nz?(this.writeEscapedByteAscending(Nz),this.writeEscapedByteAscending(Nq)):t===NG?(this.writeEscapedByteAscending(NG),this.writeEscapedByteAscending(NK)):this.writeEscapedByteAscending(t)}writeByteDescending(e){let t=255&e;t===Nz?(this.writeEscapedByteDescending(Nz),this.writeEscapedByteDescending(Nq)):t===NG?(this.writeEscapedByteDescending(NG),this.writeEscapedByteDescending(NK)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(Nz),this.writeEscapedByteAscending(N$)}writeSeparatorDescending(){this.writeEscapedByteDescending(Nz),this.writeEscapedByteDescending(N$)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class N2{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class N3{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class N6{constructor(){this.orderedCode=new N1,this.ascending=new N2(this.orderedCode),this.descending=new N3(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return 0===e?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}class N4{constructor(e,t,r,n){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=n}successor(){let e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new N4(this.indexId,this.documentKey,this.arrayValue,r)}}function N5(e,t){let r=e.indexId-t.indexId;return 0!==r||0!==(r=N8(e.arrayValue,t.arrayValue))||0!==(r=N8(e.directionalValue,t.directionalValue))?r:x6.comparator(e.documentKey,t.documentKey)}function N8(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}class N7{constructor(e){for(let t of(this.inequalityFilters=new O1((e,t)=>x3.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[],e.filters)){let e=t;e.isInequality()?this.inequalityFilters=this.inequalityFilters.add(e):this.equalityFilters.push(e)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(e){if(xk(e.collectionGroup===this.collectionId),this.hasMultipleInequality)return!1;let t=x7(e);if(void 0!==t&&!this.hasMatchingEqualityFilter(t))return!1;let r=x9(e),n=new Set,i=0,s=0;for(;i<r.length;++i)if(this.hasMatchingEqualityFilter(r[i]))n=n.add(r[i].fieldPath.canonicalString());else break;if(i===r.length)return!0;if(this.inequalityFilters.size>0){let e=this.inequalityFilters.getIterator().getNext();if(!n.has(e.field.canonicalString())){let t=r[i];if(!this.matchesFilter(e,t)||!this.matchesOrderBy(this.orderBys[s++],t))return!1}++i}for(;i<r.length;++i){let e=r[i];if(s>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[s++],e))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let e=new O1(x3.comparator),t=[];for(let r of this.equalityFilters)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new _n(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new _n(r.field,0))}for(let r of this.orderBys)!r.field.isKeyField()&&(e.has(r.field)||(e=e.add(r.field),t.push(new _n(r.field,+("asc"!==r.dir)))));return new x8(x8.UNKNOWN_ID,this.collectionId,t,_s.empty())}hasMatchingEqualityFilter(e){for(let t of this.equalityFilters)if(this.matchesFilter(t,e))return!0;return!1}matchesFilter(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}matchesOrderBy(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function N9(e){var t,r;if(xk(e instanceof Aw||e instanceof AT),e instanceof Aw)if(!(e instanceof AU))return e;else{let n=(null==(r=null==(t=e.value.arrayValue)?void 0:t.values)?void 0:r.map(t=>Aw.create(e.field,"==",t)))||[];return AT.create(n,"or")}let n=e.filters.map(e=>N9(e));return AT.create(n,e.op)}function Pe(e){if(0===e.getFilters().length)return[];let t=Ps(N9(e));return(xk(Pn(t)),Pt(t)||Pr(t))?[t]:t.getFilters()}function Pt(e){return e instanceof Aw}function Pr(e){return e instanceof AT&&Ax(e)}function Pn(e){return Pt(e)||Pr(e)||Pi(e)}function Pi(e){if(e instanceof AT&&AC(e)){for(let t of e.getFilters())if(!Pt(t)&&!Pr(t))return!1;return!0}return!1}function Ps(e){if(xk(e instanceof Aw||e instanceof AT),e instanceof Aw)return e;if(1===e.filters.length)return Ps(e.filters[0]);let t=e.filters.map(e=>Ps(e)),r=AT.create(t,e.op);return Pn(r=Pc(r))?r:(xk(r instanceof AT),xk(AE(r)),xk(r.filters.length>1),r.filters.reduce((e,t)=>Pa(e,t)))}function Pa(e,t){let r;return xk(e instanceof Aw||e instanceof AT),xk(t instanceof Aw||t instanceof AT),Pc(r=e instanceof Aw?t instanceof Aw?Po(e,t):Pu(e,t):t instanceof Aw?Pu(t,e):Pl(e,t))}function Po(e,t){return AT.create([e,t],"and")}function Pl(e,t){if(xk(e.filters.length>0&&t.filters.length>0),AE(e)&&AE(t))return AR(e,t.getFilters());let r=AC(e)?e:t,n=AC(e)?t:e,i=r.filters.map(e=>Pa(e,n));return AT.create(i,"or")}function Pu(e,t){if(AE(t))return AR(t,e.getFilters());{let r=t.filters.map(t=>Pa(e,t));return AT.create(r,"or")}}function Pc(e){if(xk(e instanceof Aw||e instanceof AT),e instanceof Aw)return e;let t=e.getFilters();if(1===t.length)return Pc(t[0]);if(A_(e))return e;let r=t.map(e=>Pc(e)),n=[];return(r.forEach(t=>{t instanceof Aw?n.push(t):t instanceof AT&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length)?n[0]:AT.create(n,e.op)}class Pd{constructor(){this.collectionParentIndex=new Ph}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),_f.resolve()}getCollectionParents(e,t){return _f.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return _f.resolve()}deleteFieldIndex(e,t){return _f.resolve()}deleteAllFieldIndexes(e){return _f.resolve()}createTargetIndexes(e,t){return _f.resolve()}getDocumentsMatchingTarget(e,t){return _f.resolve(null)}getIndexType(e,t){return _f.resolve(0)}getFieldIndexes(e,t){return _f.resolve([])}getNextCollectionGroupToUpdate(e){return _f.resolve(null)}getMinOffset(e,t){return _f.resolve(_l.min())}getMinOffsetFromCollectionGroup(e,t){return _f.resolve(_l.min())}updateCollectionGroup(e,t,r){return _f.resolve()}updateIndexEntries(e,t){return _f.resolve()}}class Ph{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new O1(x1.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new O1(x1.comparator)).toArray()}}let Pf="IndexedDbIndexManager",Pp=new Uint8Array(0);class Pg{constructor(e,t){this.databaseId=t,this.collectionParentsCache=new Ph,this.targetToDnfSubTargets=new kT(e=>AG(e),(e,t)=>AK(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.collectionParentsCache.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(t)});let i={collectionId:r,parent:_L(n)};return Pm(e).put(i)}return _f.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[xH(t),""],!1,!0);return Pm(e).loadAll(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(_U(n.parent))}return r})}addFieldIndex(e,t){let r=Pv(e),n=Nm(t);delete n.indexId;let i=r.add(n);if(!t.indexState)return i.next();{let r=Pb(e);return i.next(e=>{r.put(Nv(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}}deleteFieldIndex(e,t){let r=Pv(e),n=Pb(e),i=Py(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Pv(e),r=Py(e),n=Pb(e);return t.deleteAll().next(()=>r.deleteAll()).next(()=>n.deleteAll())}createTargetIndexes(e,t){return _f.forEach(this.getSubTargets(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new N7(t).buildTargetIndex();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=Py(e),n=!0,i=new Map;return _f.forEach(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(!n)return _f.resolve(null);{let e=kM(),n=[];return _f.forEach(i,(i,s)=>{xx(Pf,`Using index ${_r(i)} to execute ${AG(t)}`);let a=AY(s,i),o=AX(s,i),l=AJ(s,i),u=AZ(s,i),c=this.encodeBound(i,s,l),d=this.encodeBound(i,s,u),h=this.encodeValues(i,s,o),f=this.generateIndexRanges(i.indexId,a,c,l.inclusive,d,u.inclusive,h);return _f.forEach(f,i=>r.loadFirst(i,t.limit).next(t=>{t.forEach(t=>{let r=x6.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}})}getSubTargets(e){let t=this.targetToDnfSubTargets.get(e);return t||(t=0===e.filters.length?[e]:Pe(AT.create(e.filters,"and")).map(t=>A$(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,t)),t}generateIndexRanges(e,t,r,n,i,s,a){let o=(null!=t?t.length:1)*Math.max(r.length,i.length),l=o/(null!=t?t.length:1),u=[];for(let c=0;c<o;++c){let o=t?this.encodeSingleElement(t[c/l]):Pp,d=this.generateLowerBound(e,o,r[c%l],n),h=this.generateUpperBound(e,o,i[c%l],s),f=a.map(t=>this.generateLowerBound(e,o,t,!0));u.push(...this.createRange(d,h,f))}return u}generateLowerBound(e,t,r,n){let i=new N4(e,x6.empty(),t,r);return n?i:i.successor()}generateUpperBound(e,t,r,n){let i=new N4(e,x6.empty(),t,r);return n?i.successor():i}getFieldIndex(e,t){let r=new N7(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.servedByIndex(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.getSubTargets(t);return _f.forEach(n,t=>this.getFieldIndex(e,t).next(e=>{e?0!==r&&e.fields.length<A2(t)&&(r=1):r=0})).next(()=>A3(t)&&n.length>1&&2===r?1:r)}encodeDirectionalElements(e,t){let r=new N6;for(let n of x9(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.forKind(n.kind);NF.INSTANCE.writeIndexValue(e,i)}return r.encodedBytes()}encodeSingleElement(e){let t=new N6;return NF.INSTANCE.writeIndexValue(e,t.forKind(0)),t.encodedBytes()}encodeDirectionalKey(e,t){let r=new N6;return NF.INSTANCE.writeIndexValue(I1(this.databaseId,t),r.forKind(_e(e))),r.encodedBytes()}encodeValues(e,t,r){if(null===r)return[];let n=[];n.push(new N6);let i=0;for(let s of x9(e)){let e=r[i++];for(let r of n)if(this.isInFilter(t,s.fieldPath)&&I4(e))n=this.expandIndexValues(n,s,e);else{let t=r.forKind(s.kind);NF.INSTANCE.writeIndexValue(e,t)}}return this.getEncodedBytes(n)}encodeBound(e,t,r){return this.encodeValues(e,t,r.position)}getEncodedBytes(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].encodedBytes();return t}expandIndexValues(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new N6;n.seed(r.encodedBytes()),NF.INSTANCE.writeIndexValue(e,n.forKind(t.kind)),i.push(n)}return i}isInFilter(e,t){return!!e.filters.find(e=>e instanceof Aw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=Pv(e),n=Pb(e);return(t?r.loadAll(Ob,IDBKeyRange.bound(t,t)):r.loadAll()).next(e=>{let t=[];return _f.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{t.push(Ny(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:xW(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=Pv(e),i=Pb(e);return this.getNextSequenceNumber(e).next(e=>n.loadAll(Ob,IDBKeyRange.bound(t,t)).next(t=>_f.forEach(t,t=>i.put(Nv(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return _f.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?_f.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),_f.forEach(i,r=>this.getExistingIndexEntries(e,t,r).next(t=>{let i=this.computeIndexEntries(n,r);return t.isEqual(i)?_f.resolve():this.updateEntries(e,n,r,t,i)}))))})}addIndexEntry(e,t,r,n){return Py(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(r,t.key),documentKey:t.key.path.toArray()})}deleteIndexEntry(e,t,r,n){return Py(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.encodeDirectionalKey(r,t.key),t.key.path.toArray()])}getExistingIndexEntries(e,t,r){let n=Py(e),i=new O1(N5);return n.iterate({index:OO,range:IDBKeyRange.only([r.indexId,this.uid,this.encodeDirectionalKey(r,t)])},(e,n)=>{i=i.add(new N4(r.indexId,t,n.arrayValue,n.directionalValue))}).next(()=>i)}computeIndexEntries(e,t){let r=new O1(N5),n=this.encodeDirectionalElements(t,e);if(null==n)return r;let i=x7(t);if(null!=i){let s=e.data.field(i.fieldPath);if(I4(s))for(let i of s.arrayValue.values||[])r=r.add(new N4(t.indexId,e.key,this.encodeSingleElement(i),n))}else r=r.add(new N4(t.indexId,e.key,Pp,n));return r}updateEntries(e,t,r,n,i){xx(Pf,"Updating index entries for document '%s'",t.key);let s=[];return O3(n,i,N5,n=>{s.push(this.addIndexEntry(e,t,r,n))},n=>{s.push(this.deleteIndexEntry(e,t,r,n))}),_f.waitFor(s)}getNextSequenceNumber(e){let t=1;return Pb(e).iterate({index:OE,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>N5(e,t)).filter((e,t,r)=>!t||0!==N5(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=N5(i,e),s=N5(i,t);if(0===r)n[0]=e.successor();else if(r>0&&s<0)n.push(i),n.push(i.successor());else if(s>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.isRangeMatchable(n[e],n[e+1]))return[];let t=[n[e].indexId,this.uid,n[e].arrayValue,n[e].directionalValue,Pp,[]],r=[n[e+1].indexId,this.uid,n[e+1].arrayValue,n[e+1].directionalValue,Pp,[]];i.push(IDBKeyRange.bound(t,r))}return i}isRangeMatchable(e,t){return N5(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(PS)}getMinOffset(e,t){return _f.mapArray(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>e||xA())).next(PS)}}function Pm(e){return OW(e,Ou)}function Py(e){return OW(e,Ox)}function Pv(e){return OW(e,Oy)}function Pb(e){return OW(e,Ow)}function PS(e){xk(0!==e.length);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>_u(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new _l(t.readTime,t.documentKey,r)}function Pw(e,t,r){let n=e.store(_W),i=e.store(_0),s=[],a=IDBKeyRange.only(r.batchId),o=0,l=n.iterate({range:a},(e,t,r)=>(o++,r.delete()));s.push(l.next(()=>{xk(1===o)}));let u=[];for(let e of r.mutations){let n=_J(t,e.key.path,r.batchId);s.push(i.delete(n)),u.push(e.key)}return _f.waitFor(s).next(()=>u)}function PT(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else if(e.noDocument)t=e.noDocument;else throw xA();return JSON.stringify(t).length}class PE{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.documentKeysByBatchId={}}static forUser(e,t,r,n){return xk(""!==e.uid),new PE(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return P_(e).iterate({index:_H,range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=PO(e),s=P_(e);return s.add({}).next(a=>{xk("number"==typeof a);let o=new Rm(a,t,r,n),l=Nt(this.serializer,this.userId,o),u=[],c=new O1((e,t)=>xW(e.canonicalString(),t.canonicalString()));for(let e of n){let t=_J(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,_Z))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=o.keys()}),_f.waitFor(u).next(()=>o)})}lookupMutationBatch(e,t){return P_(e).get(t).next(e=>e?(xk(e.userId===this.userId),Nr(this.serializer,e)):null)}lookupMutationKeys(e,t){return this.documentKeysByBatchId[t]?_f.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(e=>{if(!e)return null;{let r=e.keys();return this.documentKeysByBatchId[t]=r,r}})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return P_(e).iterate({index:_H,range:n},(e,t,n)=>{t.userId===this.userId&&(xk(t.batchId>=r),i=Nr(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=Iy;return P_(e).iterate({index:_H,range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,Iy],[this.userId,Number.POSITIVE_INFINITY]);return P_(e).loadAll(_H,t).next(e=>e.map(e=>Nr(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=_X(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return PO(e).iterate({range:n},(r,n,s)=>{let[a,o,l]=r,u=_U(o);return a===this.userId&&t.path.isEqual(u)?P_(e).get(l).next(e=>{if(!e)throw xA();xk(e.userId===this.userId),i.push(Nr(this.serializer,e))}):void s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new O1(xW),n=[];return t.forEach(t=>{let i=_X(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=PO(e).iterate({range:s},(e,n,i)=>{let[s,a,o]=e,l=_U(a);if(s!==this.userId||!t.path.isEqual(l))return void i.done();r=r.add(o)});n.push(a)}),_f.waitFor(n).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=_X(this.userId,r),s=IDBKeyRange.lowerBound(i),a=new O1(xW);return PO(e).iterate({range:s},(e,t,i)=>{let[s,o,l]=e,u=_U(o);if(s!==this.userId||!r.isPrefixOf(u))return void i.done();u.length===n&&(a=a.add(l))}).next(()=>this.lookupMutationBatches(e,a))}lookupMutationBatches(e,t){let r=[],n=[];return t.forEach(t=>{n.push(P_(e).get(t).next(e=>{if(null===e)throw xA();xk(e.userId===this.userId),r.push(Nr(this.serializer,e))}))}),_f.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return Pw(e.simpleDbTransaction,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(t.batchId)}),_f.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _f.resolve();let r=IDBKeyRange.lowerBound(_Y(this.userId)),n=[];return PO(e).iterate({range:r},(e,t,r)=>{if(e[0]!==this.userId)return void r.done();{let t=_U(e[1]);n.push(t)}}).next(()=>{xk(0===n.length)})})}containsKey(e,t){return PC(e,this.userId,t)}getMutationQueueMetadata(e){return PI(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Iy,lastStreamToken:""})}}function PC(e,t,r){let n=_X(t,r.path),i=n[1],s=IDBKeyRange.lowerBound(n),a=!1;return PO(e).iterate({range:s,keysOnly:!0},(e,r,n)=>{let[s,o,l]=e;s===t&&o===i&&(a=!0),n.done()}).next(()=>a)}function Px(e,t){let r=!1;return PI(e).iterateSerial(n=>PC(e,n,t).next(e=>(e&&(r=!0),_f.resolve(!e)))).next(()=>r)}function P_(e){return OW(e,_W)}function PO(e){return OW(e,_0)}function PI(e){return OW(e,_$)}let PA=2;class Pk{constructor(e){this.lastId=e}next(){return this.lastId+=PA,this.lastId}static forTargetCache(){return new Pk(2-PA)}static forSyncEngine(){return new Pk(1-PA)}}class PR{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.retrieveMetadata(e).next(t=>{let r=new Pk(t.highestTargetId);return t.highestTargetId=r.next(),this.saveMetadata(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(e=>xJ.fromTimestamp(new xX(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.retrieveMetadata(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.saveMetadata(e,n)))}addTargetData(e,t){return this.saveTargetData(e,t).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(t,r),this.saveMetadata(e,r))))}updateTargetData(e,t){return this.saveTargetData(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>PD(e).delete(t.targetId)).next(()=>this.retrieveMetadata(e)).next(t=>(xk(t.targetCount>0),t.targetCount-=1,this.saveMetadata(e,t)))}removeTargets(e,t,r){let n=0,i=[];return PD(e).iterate((s,a)=>{let o=Nn(a);o.sequenceNumber<=t&&null===r.get(o.targetId)&&(n++,i.push(this.removeTargetData(e,o)))}).next(()=>_f.waitFor(i)).next(()=>n)}forEachTarget(e,t){return PD(e).iterate((e,r)=>{t(Nn(r))})}retrieveMetadata(e){return PN(e).get(Oo).next(e=>(xk(null!==e),e))}saveMetadata(e,t){return PN(e).put(Oo,t)}saveTargetData(e,t){return PD(e).put(Ni(this.serializer,t))}updateMetadataFromTargetData(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(e=>e.targetCount)}getTargetData(e,t){let r=AG(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return PD(e).iterate({range:n,index:Ot},(e,r,n)=>{let s=Nn(r);AK(t,s.target)&&(i=s,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=PP(e);return t.forEach(t=>{let s=_L(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))}),_f.waitFor(n)}removeMatchingKeys(e,t,r){let n=PP(e);return _f.forEach(t,t=>{let i=_L(t.path);return _f.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=PP(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=PP(e),i=kM();return n.iterate({range:r,keysOnly:!0},(e,t,r)=>{let n=new x6(_U(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=_L(t.path),n=IDBKeyRange.bound([r],[xH(r)],!1,!0),i=0;return PP(e).iterate({index:Os,keysOnly:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}getTargetDataForTarget(e,t){return PD(e).get(t).next(e=>e?Nn(e):null)}}function PD(e){return OW(e,_9)}function PN(e){return OW(e,Ol)}function PP(e){return OW(e,On)}let PM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pj=-1,PL=0x2800000;class PB{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new PB(e,PB.DEFAULT_COLLECTION_PERCENTILE,PB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}PB.DEFAULT_COLLECTION_PERCENTILE=10,PB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,PB.DEFAULT=new PB(PL,PB.DEFAULT_COLLECTION_PERCENTILE,PB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),PB.DISABLED=new PB(Pj,0,0);let PF="LruGarbageCollector",PU=1048576,PV=6e4,Pz=3e5;function Pq([e,t],[r,n]){let i=xW(e,r);return 0===i?xW(t,n):i}class P${constructor(e){this.maxElements=e,this.buffer=new O1(Pq),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>Pq(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class PG{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==Pj&&this.scheduleGC(PV)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(e){xx(PF,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){_w(e)?xx(PF,"Ignoring IndexedDB error during garbage collection: ",e):await _h(e)}await this.scheduleGC(Pz)})}}class PW{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return _f.resolve(_D.INVALID);let r=new P$(t);return this.delegate.forEachTarget(e,e=>r.addElement(e.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,e=>r.addElement(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===Pj?(xx("LruGarbageCollector","Garbage collection skipped; disabled"),_f.resolve(PM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xx("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PM):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,n,i,s,a,l,u,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(xx("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,a=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(u=Date.now(),xC()<=o.DEBUG&&xx("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${n} in ${a-s}ms
	Removed ${i} targets in ${l-a}ms
	Removed ${e} documents in ${u-l}ms
Total Duration: ${u-c}ms`),_f.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}function PK(e,t){return new PW(e,t)}class PH{constructor(e,t){this.db=e,this.garbageCollector=PK(this,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}forEachOrphanedDocumentSequenceNumber(e,t){return this.forEachOrphanedDocument(e,(e,r)=>t(r))}addReference(e,t,r){return PX(e,r)}removeReference(e,t,r){return PX(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return PX(e,t)}isPinned(e,t){return Px(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.forEachOrphanedDocument(e,(s,a)=>{if(a<=t){let t=this.isPinned(e,s).next(t=>{if(!t)return i++,r.getEntry(e,s).next(()=>(r.removeEntry(s,xJ.min()),PP(e).delete(PQ(s))))});n.push(t)}}).next(()=>_f.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return PX(e,t)}forEachOrphanedDocument(e,t){let r,n=PP(e),i=_D.INVALID;return n.iterate({index:Os},([e,n],{path:s,sequenceNumber:a})=>{0===e?(i!==_D.INVALID&&t(new x6(_U(r)),i),i=a,r=s):i=_D.INVALID}).next(()=>{i!==_D.INVALID&&t(new x6(_U(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PQ(e){return[0,_L(e.path)]}function PY(e,t){return{targetId:0,path:_L(e.path),sequenceNumber:t}}function PX(e,t){return PP(e).put(PY(t,e.currentSequenceNumber))}class PJ{constructor(){this.changes=new kT(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Au.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?_f.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PZ{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return P3(e).put(r)}removeEntry(e,t,r){return P3(e).delete(P4(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.setMetadata(e,r)))}getEntry(e,t){let r=Au.newInvalidDocument(t);return P3(e).iterate({index:_3,range:IDBKeyRange.only(P6(t))},(e,n)=>{r=this.maybeDecodeDocument(t,n)}).next(()=>r)}getSizedEntry(e,t){let r={size:0,document:Au.newInvalidDocument(t)};return P3(e).iterate({index:_3,range:IDBKeyRange.only(P6(t))},(e,n)=>{r={document:this.maybeDecodeDocument(t,n),size:PT(n)}}).next(()=>r)}getEntries(e,t){let r=kC();return this.forEachDbEntry(e,t,(e,t)=>{let n=this.maybeDecodeDocument(e,t);r=r.insert(e,n)}).next(()=>r)}getSizedEntries(e,t){let r=kC(),n=new OX(x6.comparator);return this.forEachDbEntry(e,t,(e,t)=>{let i=this.maybeDecodeDocument(e,t);r=r.insert(e,i),n=n.insert(e,PT(t))}).next(()=>({documents:r,sizeMap:n}))}forEachDbEntry(e,t,r){if(t.isEmpty())return _f.resolve();let n=new O1(P8);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(P6(n.first()),P6(n.last())),s=n.getIterator(),a=s.getNext();return P3(e).iterate({index:_3,range:i},(e,t,n)=>{let i=x6.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&0>P8(a,i);)r(a,null),a=s.getNext();a&&a.isEqual(i)&&(r(a,t),a=s.hasNext()?s.getNext():null),a?n.skip(P6(a)):n.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,n,i){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),D8(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return P3(e).loadAll(IDBKeyRange.bound(a,o,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let r=kC();for(let i of e){let e=this.maybeDecodeDocument(x6.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(kp(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=kC(),s=P5(t,r),a=P5(t,_l.max());return P3(e).iterate({index:_4,range:IDBKeyRange.bound(s,a,!0)},(e,t,r)=>{let s=this.maybeDecodeDocument(x6.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new P1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return P2(e).get(_7).next(e=>(xk(!!e),e))}setMetadata(e,t){return P2(e).put(_7,t)}maybeDecodeDocument(e,t){if(t){let e=D4(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(xJ.min())))return e}return Au.newInvalidDocument(e)}}function P0(e){return new PZ(e)}class P1 extends PJ{constructor(e,t){super(),this.documentCache=e,this.trackRemovals=t,this.documentStates=new kT(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new O1((e,t)=>xW(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let a=this.documentStates.get(i);if(t.push(this.documentCache.removeEntry(e,i,a.readTime)),s.isValidDocument()){let o=D5(this.documentCache.serializer,s);n=n.add(i.path.popLast());let l=PT(o);r+=l-a.size,t.push(this.documentCache.addEntry(e,i,o))}else if(r-=a.size,this.trackRemovals){let r=D5(this.documentCache.serializer,s.convertToNoDocument(xJ.min()));t.push(this.documentCache.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.documentCache.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.documentCache.updateMetadata(e,r)),_f.waitFor(t)}getFromCache(e,t){return this.documentCache.getSizedEntry(e,t).next(e=>(this.documentStates.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.documentCache.getSizedEntries(e,t).next(({documents:e,sizeMap:t})=>(t.forEach((t,r)=>{this.documentStates.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function P2(e){return OW(e,_8)}function P3(e){return OW(e,_1)}function P6(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function P4(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],D8(t),r[r.length-1]]}function P5(e,t){let r=t.documentKey.path.toArray();return[e,D8(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function P8(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=xW(r[e],n[e]))return i;return(i=xW(r.length,n.length))||(i=xW(r[r.length-2],n[n.length-2]))?i:xW(r[r.length-1],n[n.length-1])}let P7=17;class P9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Me{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&Re(r.mutation,e,O4.empty(),xX.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,kM()).next(()=>t))}getLocalViewOfDocuments(e,t,r=kM()){let n=kA();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=k_();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=kA();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kM()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=kC(),s=kR(),a=kO();return t.forEach((e,t)=>{let a=r.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof Ra)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Re(a.mutation,t,a.mutation.getFieldMask(),xX.now())):s.set(t.key,O4.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return a.set(e,new P9(t,null!=(r=s.get(e))?r:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kR(),n=new OX((e,t)=>e-t),i=kM();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=r.get(e)||O4.empty();a=i.applyToLocalView(s,a),r.set(e,a);let o=(n.get(i.batchId)||kM()).add(e);n=n.insert(i.batchId,o)})}).next(()=>{let s=[],a=n.getReverseIterator();for(;a.hasNext();){let n=a.getNext(),o=n.key,l=n.value,u=kk();l.forEach(e=>{if(!i.has(e)){let n=k7(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return _f.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return ke(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kt(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):_f.resolve(kA()),a=x4,o=i;return s.next(t=>_f.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),i.get(t))?_f.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)})).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,kM())).next(e=>({batchId:a,changes:kI(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x6(t)).next(e=>{let t=k_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,s=k_();return this.indexManager.getCollectionParents(e,i).next(a=>_f.forEach(a,a=>{let o=A8(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,r,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,Au.newInvalidDocument(n)))});let r=k_();return e.forEach((e,n)=>{let s=i.get(e);void 0!==s&&Re(s.mutation,n,O4.empty(),xX.now()),kp(t,n)&&(r=r.insert(e,n))}),r})}}class Mt{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return _f.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,Nh(t)),_f.resolve()}getNamedQuery(e,t){return _f.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,Nd(t)),_f.resolve()}}class Mr{constructor(){this.overlays=new OX(x6.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return _f.resolve(this.overlays.get(t))}getOverlays(e,t){let r=kA();return _f.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.saveOverlay(e,t,n)}),_f.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.overlayByBatchId.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.overlayByBatchId.delete(r)),_f.resolve()}getOverlaysForCollection(e,t,r){let n=kA(),i=t.length+1,s=new x6(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return _f.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new OX((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=kA(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=kA(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return _f.resolve(a)}saveOverlay(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.overlayByBatchId.get(n.largestBatchId).delete(r.key);this.overlayByBatchId.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new Rv(t,r));let i=this.overlayByBatchId.get(t);void 0===i&&(i=kM(),this.overlayByBatchId.set(t,i)),this.overlayByBatchId.set(t,i.add(r.key))}}class Mn{constructor(){this.sessionToken=O7.EMPTY_BYTE_STRING}getSessionToken(e){return _f.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,_f.resolve()}}class Mi{constructor(){this.refsByKey=new O1(Ms.compareByKey),this.refsByTarget=new O1(Ms.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new Ms(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.removeRef(new Ms(e,t))}removeReferences(e,t){e.forEach(e=>this.removeReference(e,t))}removeReferencesForId(e){let t=new x6(new x1([])),r=new Ms(t,e),n=new Ms(t,e+1),i=[];return this.refsByTarget.forEachInRange([r,n],e=>{this.removeRef(e),i.push(e.key)}),i}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new x6(new x1([])),r=new Ms(t,e),n=new Ms(t,e+1),i=kM();return this.refsByTarget.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new Ms(e,0),r=this.refsByKey.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ms{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return x6.comparator(e.key,t.key)||xW(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return xW(e.targetOrBatchId,t.targetOrBatchId)||x6.comparator(e.key,t.key)}}class Ma{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new O1(Ms.compareByKey)}checkEmpty(e){return _f.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Rm(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Ms(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return _f.resolve(s)}lookupMutationBatch(e,t){return _f.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=this.indexOfBatchId(r),i=n<0?0:n;return _f.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return _f.resolve(0===this.mutationQueue.length?Iy:this.nextBatchId-1)}getAllMutationBatches(e){return _f.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ms(t,0),n=new Ms(t,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([r,n],e=>{let t=this.findMutationBatch(e.targetOrBatchId);i.push(t)}),_f.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new O1(xW);return t.forEach(e=>{let t=new Ms(e,0),n=new Ms(e,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([t,n],e=>{r=r.add(e.targetOrBatchId)})}),_f.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;x6.isDocumentKey(i)||(i=i.child(""));let s=new Ms(new x6(i),0),a=new O1(xW);return this.batchesByDocumentKey.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.targetOrBatchId)),!0)},s),_f.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(e=>{let r=this.findMutationBatch(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){xk(0===this.indexOfExistingBatchId(t.batchId,"removed")),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return _f.forEach(t.mutations,n=>{let i=new Ms(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new Ms(t,0),n=this.batchesByDocumentKey.firstAfterOrEqual(r);return _f.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,_f.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}function Mo(){return new OX(x6.comparator)}class Ml{constructor(e){this.sizer=e,this.docs=Mo(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return _f.resolve(r?r.document.mutableCopy():Au.newInvalidDocument(t))}getEntries(e,t){let r=kC();return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Au.newInvalidDocument(e))}),_f.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=kC(),s=t.path,a=new x6(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;!(e.path.length>s.length+1||0>=_u(_o(a),r))&&(n.has(a.key)||kp(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return _f.resolve(i)}getAllFromCollectionGroup(e,t,r,n){xA()}forEachDocumentKey(e,t){return _f.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Mc(this)}getSize(e){return _f.resolve(this.size)}}function Mu(e){return new Ml(e)}class Mc extends PJ{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.documentCache.addEntry(e,n)):this.documentCache.removeEntry(r)}),_f.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}}class Md{constructor(e){this.persistence=e,this.targets=new kT(e=>AG(e),AK),this.lastRemoteSnapshotVersion=xJ.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Mi,this.targetCount=0,this.targetIdGenerator=Pk.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((e,r)=>t(r)),_f.resolve()}getLastRemoteSnapshotVersion(e){return _f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _f.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),_f.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),_f.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new Pk(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,_f.resolve()}updateTargetData(e,t){return this.saveTargetData(t),_f.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,_f.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.targets.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.targets.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),_f.waitFor(i).next(()=>n)}getTargetCount(e){return _f.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return _f.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),_f.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),_f.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),_f.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return _f.resolve(r)}containsKey(e,t){return _f.resolve(this.references.containsKey(t))}}let Mh="MemoryPersistence";class Mf{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new _D(0),this._started=!1,this._started=!0,this.globalsCache=new Mn,this.referenceDelegate=e(this),this.targetCache=new Md(this);let r=e=>this.referenceDelegate.documentSize(e);this.indexManager=new Pd,this.remoteDocumentCache=Mu(r),this.serializer=new D6(t),this.bundleCache=new Mt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mr,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new Ma(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){xx(Mh,"Starting transaction:",e);let n=new Mp(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(n).next(e=>this.referenceDelegate.onTransactionCommitted(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}mutationQueuesContainKey(e,t){return _f.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}}class Mp extends _d{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.localViewReferences=new Mi,this._orphanedDocuments=null}static factory(e){return new Mg(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw xA()}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),_f.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),_f.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),_f.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(e=>this.orphanedDocuments.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.orphanedDocuments.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _f.forEach(this.orphanedDocuments,r=>{let n=x6.fromPath(r);return this.isReferenced(e,n).next(e=>{e||t.removeEntry(n,xJ.min())})}).next(()=>(this._orphanedDocuments=null,t.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(e=>{e?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return _f.or([()=>_f.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}}class Mm{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new kT(e=>_L(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=PK(this,t)}static factory(e,t){return new Mm(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return _f.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return _f.forEach(this.orphanedSequenceNumbers,(r,n)=>this.isPinned(e,r,n).next(e=>e?_f.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.forEachDocumentKey(e,n=>this.isPinned(e,n,t).next(e=>{e||(r++,i.removeEntry(n,xJ.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),_f.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),_f.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),_f.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),_f.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=IJ(e.data.value)),t}isPinned(e,t,r){return _f.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.orphanedSequenceNumbers.get(t);return _f.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class My{constructor(e){this.serializer=e}createOrUpgrade(e,t,r,n){let i=new _m("createOrUpgrade",t);r<1&&n>=1&&(Mb(e),MS(e),Mx(e),MT(e));let s=_f.resolve();return r<3&&n>=3&&(0!==r&&(M_(e),Mx(e)),s=s.next(()=>MI(i))),r<4&&n>=4&&(0!==r&&(s=s.next(()=>Mw(e,i))),s=s.next(()=>{MA(e)})),r<5&&n>=5&&(s=s.next(()=>this.removeAcknowledgedMutations(i))),r<6&&n>=6&&(s=s.next(()=>(MC(e),this.addDocumentGlobal(i)))),r<7&&n>=7&&(s=s.next(()=>this.ensureSequenceNumbers(i))),r<8&&n>=8&&(s=s.next(()=>this.createCollectionParentIndex(e,i))),r<9&&n>=9&&(s=s.next(()=>{MO(e)})),r<10&&n>=10&&(s=s.next(()=>this.rewriteCanonicalIds(i))),r<11&&n>=11&&(s=s.next(()=>{Mk(e),MR(e)})),r<12&&n>=12&&(s=s.next(()=>{MN(e)})),r<13&&n>=13&&(s=s.next(()=>ME(e)).next(()=>this.rewriteRemoteDocumentCache(e,i)).next(()=>e.deleteObjectStore(_V))),r<14&&n>=14&&(s=s.next(()=>this.runOverlayMigration(e,i))),r<15&&n>=15&&(s=s.next(()=>MD(e))),r<16&&n>=16&&(s=s.next(()=>{t.objectStore(Ow).clear()}).next(()=>{t.objectStore(Ox).clear()})),r<17&&n>=17&&(s=s.next(()=>{MP(e)})),s}addDocumentGlobal(e){let t=0;return e.store(_V).iterate((e,r)=>{t+=PT(r)}).next(()=>{let r={byteSize:t};return e.store(_8).put(_7,r)})}removeAcknowledgedMutations(e){let t=e.store(_$),r=e.store(_W);return t.loadAll().next(t=>_f.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,Iy],[t.userId,t.lastAcknowledgedBatchId]);return r.loadAll(_H,n).next(r=>_f.forEach(r,r=>{xk(r.userId===t.userId);let n=Nr(this.serializer,r);return Pw(e,t.userId,n).next(()=>{})}))}))}ensureSequenceNumbers(e){let t=e.store(On),r=e.store(_V);return e.store(Ol).get(Oo).next(e=>{let n=r=>t.put({targetId:0,path:_L(r),sequenceNumber:e.highestListenSequenceNumber}),i=[];return r.iterate((e,r)=>{let s=new x1(e),a=Mv(s);i.push(t.get(a).next(e=>e?_f.resolve():n(s)))}).next(()=>_f.waitFor(i))})}createCollectionParentIndex(e,t){e.createObjectStore(Ou,{keyPath:Oc});let r=t.store(Ou),n=new Ph,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:_L(n)})}};return t.store(_V).iterate({keysOnly:!0},(e,t)=>i(new x1(e).popLast())).next(()=>t.store(_0).iterate({keysOnly:!0},([e,t,r],n)=>i(_U(t).popLast())))}rewriteCanonicalIds(e){let t=e.store(_9);return t.iterate((e,r)=>{let n=Nn(r),i=Ni(this.serializer,n);return t.put(i)})}rewriteRemoteDocumentCache(e,t){let r=t.store(_V),n=[];return r.iterate((e,r)=>{let i=t.store(_1),s=MM(r).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(a))}).next(()=>_f.waitFor(n))}runOverlayMigration(e,t){let r=t.store(_W),n=P0(this.serializer),i=new Mf(Mg.factory,this.serializer.remoteSerializer);return r.loadAll().next(e=>{let r=new Map;return e.forEach(e=>{var t;let n=null!=(t=r.get(e.userId))?t:kM();Nr(this.serializer,e).keys().forEach(e=>n=n.add(e)),r.set(e.userId,n)}),_f.forEach(r,(e,r)=>{let s=new xb(r),a=NT.forUser(this.serializer,s),o=i.getIndexManager(s);return new Me(n,PE.forUser(s,this.serializer,o,i.referenceDelegate),a,o).recalculateAndSaveOverlaysForDocumentKeys(new OG(t,_D.INVALID),e).next()})})}}function Mv(e){return[0,_L(e)]}function Mb(e){e.createObjectStore(_z)}function MS(e){e.createObjectStore(_$,{keyPath:_G}),e.createObjectStore(_W,{keyPath:_K,autoIncrement:!0}).createIndex(_H,_Q,{unique:!0}),e.createObjectStore(_0)}function Mw(e,t){return t.store(_W).loadAll().next(r=>{e.deleteObjectStore(_W),e.createObjectStore(_W,{keyPath:_K,autoIncrement:!0}).createIndex(_H,_Q,{unique:!0});let n=t.store(_W),i=r.map(e=>n.put(e));return _f.waitFor(i)})}function MT(e){e.createObjectStore(_V)}function ME(e){let t=e.createObjectStore(_1,{keyPath:_2});t.createIndex(_3,_6),t.createIndex(_4,_5)}function MC(e){e.createObjectStore(_8)}function Mx(e){e.createObjectStore(On,{keyPath:Oi}).createIndex(Os,Oa,{unique:!0}),e.createObjectStore(_9,{keyPath:Oe}).createIndex(Ot,Or,{unique:!0}),e.createObjectStore(Ol)}function M_(e){e.deleteObjectStore(On),e.deleteObjectStore(_9),e.deleteObjectStore(Ol)}function MO(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function MI(e){let t=e.store(Ol),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xJ.min().toTimestamp(),targetCount:0};return t.put(Oo,r)}function MA(e){e.createObjectStore(Od,{keyPath:Oh})}function Mk(e){e.createObjectStore(Of,{keyPath:Op})}function MR(e){e.createObjectStore(Og,{keyPath:Om})}function MD(e){e.createObjectStore(Oy,{keyPath:Ov,autoIncrement:!0}).createIndex(Ob,OS,{unique:!1}),e.createObjectStore(Ow,{keyPath:OT}).createIndex(OE,OC,{unique:!1}),e.createObjectStore(Ox,{keyPath:O_}).createIndex(OO,OI,{unique:!1})}function MN(e){let t=e.createObjectStore(OA,{keyPath:Ok});t.createIndex(OR,OD,{unique:!1}),t.createIndex(ON,OP,{unique:!1})}function MP(e){e.createObjectStore(OM,{keyPath:Oj})}function MM(e){return e.document?new x6(x1.fromString(e.document.name).popFirst(5)):e.noDocument?x6.fromSegments(e.noDocument.path):e.unknownDocument?x6.fromSegments(e.unknownDocument.path):xA()}let Mj="IndexedDbPersistence",ML=18e5,MB=5e3,MF=4e3,MU="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",MV="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Mz="firestore_zombie",Mq="main";class M${constructor(e,t,r,n,i,s,a,o,l,u,c=P7){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.queue=i,this.window=s,this.document=a,this.sequenceNumberSyncer=l,this.forceOwningTab=u,this.schemaVersion=c,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=e=>Promise.resolve(),!M$.isAvailable())throw new xN(xD.UNIMPLEMENTED,MV);this.referenceDelegate=new PH(this,n),this.dbName=t+Mq,this.serializer=new D6(o),this.simpleDb=new _y(this.dbName,this.schemaVersion,new My(this.serializer)),this.globalsCache=new NC,this.targetCache=new PR(this.referenceDelegate,this.serializer),this.remoteDocumentCache=P0(this.serializer),this.bundleCache=new Nb,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===u&&x_(Mj,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xN(xD.FAILED_PRECONDITION,MU);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new _D(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setVersionChangeListener(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>MW(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(e=>{e||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(t=>this.isPrimary&&!t?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):!!t&&this.acquireOrExtendPrimaryLease(e).next(()=>!0))).catch(e=>{if(_w(e))return xx(Mj,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xx(Mj,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return MG(e).get(_q).next(e=>_f.resolve(this.isLocalClient(e)))}removeClientMetadata(e){return MW(e).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,ML)){this.lastGarbageCollectionTime=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=OW(e,Od);return t.loadAll().next(e=>{let r=this.filterActiveClients(e,ML),n=e.filter(e=>-1===r.indexOf(e));return _f.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.webStorage)for(let t of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(t.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",MF,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return!!e&&e.ownerId===this.clientId}canActAsPrimary(e){return this.forceOwningTab?_f.resolve(!0):MG(e).get(_q).next(t=>{if(null!==t&&this.isWithinAge(t.leaseTimestampMs,MB)&&!this.isClientZombied(t.ownerId)){if(this.isLocalClient(t)&&this.networkEnabled)return!0;if(!this.isLocalClient(t)){if(!t.allowTabSynchronization)throw new xN(xD.FAILED_PRECONDITION,MU);return!1}}return!!this.networkEnabled&&!!this.inForeground||MW(e).loadAll().next(e=>void 0===this.filterActiveClients(e,MB).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&xx(Mj,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[_z,Od],e=>{let t=new OG(e,_D.INVALID);return this.releasePrimaryLeaseIfHeld(t).next(()=>this.removeClientMetadata(t))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(e,t){return e.filter(e=>this.isWithinAge(e.updateTimeMs,t)&&!this.isClientZombied(e.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>MW(e).loadAll().next(e=>this.filterActiveClients(e,ML).map(e=>e.clientId)))}get started(){return this._started}getGlobalsCache(){return this.globalsCache}getMutationQueue(e,t){return PE.forUser(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Pg(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return NT.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){let n;xx(Mj,"Starting transaction:",e);let i="readonly"===t?"readonly":"readwrite",s=O$(this.schemaVersion);return this.simpleDb.runTransaction(e,i,s,i=>(n=new OG(i,this.listenSequence?this.listenSequence.next():_D.INVALID),"readwrite-primary"===t)?this.verifyPrimaryLease(n).next(e=>!!e||this.canActAsPrimary(n)).next(t=>{if(!t)throw x_(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new xN(xD.FAILED_PRECONDITION,_c);return r(n)}).next(e=>this.acquireOrExtendPrimaryLease(n).next(()=>e)):this.verifyAllowTabSynchronization(n).next(()=>r(n))).then(e=>(n.raiseOnCommittedEvent(),e))}verifyAllowTabSynchronization(e){return MG(e).get(_q).next(e=>{if(null!==e&&this.isWithinAge(e.leaseTimestampMs,MB)&&!this.isClientZombied(e.ownerId)&&!this.isLocalClient(e)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!e.allowTabSynchronization))throw new xN(xD.FAILED_PRECONDITION,MU)})}acquireOrExtendPrimaryLease(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return MG(e).put(_q,t)}static isAvailable(){return _y.isAvailable()}releasePrimaryLeaseIfHeld(e){let t=MG(e);return t.get(_q).next(e=>this.isLocalClient(e)?(xx(Mj,"Releasing primary lease."),t.delete(_q)):_f.resolve())}isWithinAge(e,t){let r=Date.now(),n=r-t,i=r;return!(e<n)&&(!(e>i)||(x_(`Detected an update time that is in the future: ${e} > ${i}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;"function"==typeof(null==(e=this.window)?void 0:e.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let e=/(?:Version|Mobile)\/1[456]/;E1()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var t;try{let r=(null==(t=this.webStorage)?void 0:t.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return xx(Mj,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return x_(Mj,"Failed to get zombied client id.",e),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){x_("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}}zombiedClientLocalStorageKey(e){return`${Mz}_${this.persistenceKey}_${e}`}}function MG(e){return OW(e,_z)}function MW(e){return OW(e,Od)}function MK(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}function MH(e,t,r,n,i){t=[...t],(e=[...e]).sort(r),t.sort(r);let s=e.length,a=t.length,o=0,l=0;for(;o<a&&l<s;){let s=r(e[l],t[o]);s<0?i(e[l++]):s>0?n(t[o++]):(o++,l++)}for(;o<a;)n(t[o++]);for(;l<s;)i(e[l++])}function MQ(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}let MY="LocalStore",MX=3e8;class MJ{constructor(e,t,r,n){this.persistence=e,this.queryEngine=t,this.serializer=n,this.targetDataByTarget=new OX(xW),this.targetIdByTarget=new kT(e=>AG(e),AK),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Me(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}}function MZ(e,t,r,n){return new MJ(e,t,r,n)}async function M0(e,t){let r=xR(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next(i=>(n=i,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{let i=[],s=[],a=kM();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return r.localDocuments.getDocuments(e,a).next(e=>({affectedDocuments:e,removedBatchIds:i,addedBatchIds:s}))})})}function M1(e,t){let r,n,i=xR(e),s=xX.now(),a=t.reduce((e,t)=>e.add(t.key),kM());return i.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=kC(),l=kM();return i.remoteDocuments.getEntries(e,a).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(e,o)).next(n=>{r=n;let a=[];for(let e of t){let t=Rt(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new Ra(e.key,t,Al(t.value.mapValue),k4.exists(!0)))}return i.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{n=t;let s=t.applyToLocalDocumentSet(r,l);return i.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:n.batchId,changes:kI(r)}))}function M2(e,t){let r=xR(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});return jo(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,M3(t))).next(()=>r.localDocuments.getDocuments(e,n))})}function M3(e){let t=kM();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}function M6(e,t){let r=xR(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(xk(null!==t),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))})}function M4(e){let t=xR(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function M5(e){let t=xR(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function M8(e,t){let r=xR(e),n=t.snapshotVersion,i=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=r.targetDataByTarget;let a=[];t.targetChanges.forEach((s,o)=>{let l=i.get(o);if(!l)return;a.push(r.targetCache.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.targetCache.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(O7.EMPTY_BYTE_STRING,xJ.min()).withLastLimboFreeSnapshotVersion(xJ.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(o,u),M9(l,u,s)&&a.push(r.targetCache.updateTargetData(e,u))});let o=kC(),l=kM();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(M7(e,s,t.documentUpdates).next(e=>{o=e.changedDocuments,l=e.existenceChangedKeys})),!n.isEqual(xJ.min())){let t=r.targetCache.getLastRemoteSnapshotVersion(e).next(t=>r.targetCache.setTargetsMetadata(e,e.currentSequenceNumber,n));a.push(t)}return _f.waitFor(a).next(()=>s.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(r.targetDataByTarget=i,e))}function M7(e,t,r){let n=kM(),i=kM();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=kC();return r.forEach((r,s)=>{let a=e.get(r);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(xJ.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):xx(MY,"Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",s.version)}),{changedDocuments:n,existenceChangedKeys:i}})}function M9(e,t,r){return!!(0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=MX)||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function je(e,t){let r=xR(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>_f.forEach(t,t=>_f.forEach(t.addedKeys,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>_f.forEach(t.removedKeys,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(_w(e))xx(MY,"Failed to update sequence numbers: "+e);else throw e}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.targetDataByTarget.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.targetDataByTarget=r.targetDataByTarget.insert(t,i)}}}function jt(e,t){let r=xR(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Iy),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function jr(e,t){let r=xR(e);return r.persistence.runTransaction("read document","readonly",e=>r.localDocuments.getDocument(e,t))}function jn(e,t){let r=xR(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.targetCache.getTargetData(e,t).next(i=>i?(n=i,_f.resolve(n)):r.targetCache.allocateTargetId(e).next(i=>(n=new D3(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.targetCache.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.targetDataByTarget.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(e.targetId,e),r.targetIdByTarget.set(t,e.targetId)),e})}function ji(e,t,r){let n=xR(e),i=n.targetIdByTarget.get(r);return void 0!==i?_f.resolve(n.targetDataByTarget.get(i)):n.targetCache.getTargetData(t,r)}async function js(e,t,r){let n=xR(e),i=n.targetDataByTarget.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(_w(e))xx(MY,`Failed to update sequence numbers for target ${t}: ${e}`);else throw e}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(i.target)}function ja(e,t,r){let n=xR(e),i=xJ.min(),s=kM();return n.persistence.runTransaction("Execute query","readwrite",e=>ji(n,e,kn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(e,t,r?i:xJ.min(),r?s:kM())).next(e=>(jf(n,kb(t),e),{documents:e,remoteKeys:s})))}function jo(e,t,r,n){let i=r.batch,s=i.keys(),a=_f.resolve();return s.forEach(e=>{a=a.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);xk(null!==s),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}function jl(e,t){let r=xR(e),n=xR(r.mutationQueue);return r.persistence.runTransaction("Lookup mutation documents","readonly",e=>n.lookupMutationKeys(e,t).next(t=>t?r.localDocuments.getDocuments(e,t):_f.resolve(null)))}function ju(e,t){xR(xR(e,MJ).mutationQueue).removeCachedMutationKeys(t)}function jc(e){return xR(xR(e,MJ).persistence).getActiveClients()}function jd(e,t){let r=xR(e),n=xR(r.targetCache),i=r.targetDataByTarget.get(t);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",e=>n.getTargetDataForTarget(e,t).next(e=>e?e.target:null))}function jh(e,t){let r=xR(e),n=r.collectionGroupReadTime.get(t)||xJ.min();return r.persistence.runTransaction("Get new document changes","readonly",e=>r.remoteDocuments.getAllFromCollectionGroup(e,t,_a(n,x4),Number.MAX_SAFE_INTEGER)).then(e=>(jf(r,t,e),e))}function jf(e,t,r){let n=e.collectionGroupReadTime.get(t)||xJ.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.collectionGroupReadTime.set(t,n)}function jp(e){return kn(A5(x1.fromString(`__bundle__/docs/${e}`)))}async function jg(e,t,r,n){let i=xR(e),s=kM(),a=kC();for(let e of r){let r=t.toDocumentKey(e.metadata.name);e.document&&(s=s.add(r));let n=t.toMutableDocument(e);n.setReadTime(t.toSnapshotVersion(e.metadata.readTime)),a=a.insert(r,n)}let o=i.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=await jn(i,jp(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>M7(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.targetCache.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.targetCache.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.changedDocuments,t.existenceChangedKeys)).next(()=>t.changedDocuments)))}function jm(e,t){let r=xR(e),n=R2(t.createTime);return r.persistence.runTransaction("hasNewerBundle","readonly",e=>r.bundleCache.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(n)>=0)}function jy(e,t){let r=xR(e);return r.persistence.runTransaction("Save bundle","readwrite",e=>r.bundleCache.saveBundleMetadata(e,t))}function jv(e,t){let r=xR(e);return r.persistence.runTransaction("Get named query","readonly",e=>r.bundleCache.getNamedQuery(e,t))}async function jb(e,t,r=kM()){let n=await jn(e,kn(Nc(t.bundledQuery))),i=xR(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{let s=R2(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.bundleCache.saveNamedQuery(e,t);let a=n.withResumeToken(O7.EMPTY_BYTE_STRING,s);return i.targetDataByTarget=i.targetDataByTarget.insert(a.targetId,a),i.targetCache.updateTargetData(e,a).next(()=>i.targetCache.removeMatchingKeysForTargetId(e,n.targetId)).next(()=>i.targetCache.addMatchingKeys(e,r,n.targetId)).next(()=>i.bundleCache.saveNamedQuery(e,t))})}async function jS(e,t){let r=xR(e),n=r.indexManager,i=[];return r.persistence.runTransaction("Configure indexes","readwrite",e=>n.getFieldIndexes(e).next(r=>MH(r,t,_t,t=>{i.push(n.addFieldIndex(e,t))},t=>{i.push(n.deleteFieldIndex(e,t))})).next(()=>_f.waitFor(i)))}function jw(e,t){xR(e).queryEngine.indexAutoCreationEnabled=t}function jT(e){let t=xR(e),r=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>r.deleteAllFieldIndexes(e))}class jE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}let jC=100;function jx(){return E1()?8:_v(EZ())>0?6:4}class j_{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=jC,this.relativeIndexReadCostPerDocument=jx()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.performQueryUsingIndex(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.performQueryUsingRemoteKeys(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new jE;return this.executeFullCollectionScan(e,t,r).next(n=>{if(i.result=n,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,r,n.size)})}).next(()=>i.result)}createCacheIndexes(e,t,r,n){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(xC()<=o.DEBUG&&xx("QueryEngine","SDK will not create cache indexes for query:",kf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),_f.resolve()):(xC()<=o.DEBUG&&xx("QueryEngine","Query:",kf(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*n)?(xC()<=o.DEBUG&&xx("QueryEngine","The SDK decides to create cache indexes for query:",kf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(t))):_f.resolve()}performQueryUsingIndex(e,t){if(A7(t))return _f.resolve(null);let r=kn(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=kn(t=kl(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=kM(...n);return this.localDocumentsView.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.applyQuery(t,n);return this.needsRefill(t,s,i,r.readTime)?this.performQueryUsingIndex(e,kl(t,null,"F")):this.appendRemainingResults(e,s,t,r)}))})))}performQueryUsingRemoteKeys(e,t,r,n){return A7(t)||n.isEqual(xJ.min())?_f.resolve(null):this.localDocumentsView.getDocuments(e,r).next(i=>{let s=this.applyQuery(t,i);return this.needsRefill(t,s,r,n)?_f.resolve(null):(xC()<=o.DEBUG&&xx("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),kf(t)),this.appendRemainingResults(e,s,t,_a(n,x4)).next(e=>e))})}applyQuery(e,t){let r=new O1(kS(e));return t.forEach((t,n)=>{kp(e,n)&&(r=r.add(n))}),r}needsRefill(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}executeFullCollectionScan(e,t,r){return xC()<=o.DEBUG&&xx("QueryEngine","Using full collection scan to execute query:",kf(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,_l.min(),r)}appendRemainingResults(e,t,r,n){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}let jO="firestore_clients";function jI(e,t){return`${jO}_${e}_${t}`}let jA="firestore_mutations";function jk(e,t,r){let n=`${jA}_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}let jR="firestore_targets";function jD(e,t){return`${jR}_${e}_${t}`}let jN="firestore_online_state";function jP(e){return`${jN}_${e}`}let jM="firestore_bundle_loaded_v2";function jj(e){return`${jM}_${e}`}let jL="firestore_sequence_number";function jB(e){return`${jL}_${e}`}let jF="SharedClientState";class jU{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static fromWebStorageEntry(e,t,r){let n,i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return(s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(n=new xN(i.error.code,i.error.message)),s)?new jU(e,t,i.state,n):(x_(jF,`Failed to parse mutation state for ID '${t}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jV{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fromWebStorageEntry(e,t){let r,n=JSON.parse(t),i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return(i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(r=new xN(n.error.code,n.error.message)),i)?new jV(e,n.state,r):(x_(jF,`Failed to parse target state for ID '${e}': ${t}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jz{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fromWebStorageEntry(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=kL();for(let e=0;n&&e<r.activeTargetIds.length;++e)n=IS(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new jz(e,i):(x_(jF,`Failed to parse client data for instance '${e}': ${t}`),null)}}class jq{constructor(e,t){this.clientId=e,this.onlineState=t}static fromWebStorageEntry(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jq(t.clientId,t.onlineState):(x_(jF,`Failed to parse online state: ${e}`),null)}}class j${constructor(){this.activeTargetIds=kL()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class jG{constructor(e,t,r,n,i){this.window=e,this.queue=t,this.persistenceKey=r,this.localClientId=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new OX(xW),this.started=!1,this.earlyEvents=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.localClientStorageKey=jI(this.persistenceKey,this.localClientId),this.sequenceNumberKey=jB(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new j$),this.clientStateKeyRe=RegExp(`^${jO}_${s}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${jA}_${s}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${jR}_${s}_(\\d+)$`),this.onlineStateKey=jP(this.persistenceKey),this.bundleLoadedKey=jj(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(e){return!!(e&&e.localStorage)}async start(){for(let e of(await this.syncEngine.getActiveClients())){if(e===this.localClientId)continue;let t=this.getItem(jI(this.persistenceKey,e));if(t){let r=jz.fromWebStorageEntry(e,t);r&&(this.activeClients=this.activeClients.insert(r.clientId,r))}}this.persistClientState();let e=this.storage.getItem(this.onlineStateKey);if(e){let t=this.fromWebStorageOnlineState(e);t&&this.handleOnlineStateEvent(t)}for(let e of this.earlyEvents)this.handleWebStorageEvent(e);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(e){let t=!1;return this.activeClients.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.persistMutationState(e,"pending")}updateMutationState(e,t,r){this.persistMutationState(e,t,r),this.removeMutationState(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(jD(this.persistenceKey,e));if(t){let n=jV.fromWebStorageEntry(e,t);n&&(r=n.state)}}return t&&this.localClientState.addQueryTarget(e),this.persistClientState(),r}removeLocalQueryTarget(e){this.localClientState.removeQueryTarget(e),this.persistClientState()}isLocalQueryTarget(e){return this.localClientState.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jD(this.persistenceKey,e))}updateQueryState(e,t,r){this.persistQueryTargetState(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.removeMutationState(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.persistOnlineState(e)}notifyBundleLoaded(e){this.persistBundleLoadedState(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return xx(jF,"READ",e,t),t}setItem(e,t){xx(jF,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){xx(jF,"REMOVE",e),this.storage.removeItem(e)}handleWebStorageEvent(e){let t=e;if(t.storageArea===this.storage){if(xx(jF,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void x_("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueRetryable(async()=>{if(!this.started)return void this.earlyEvents.push(t);if(null!==t.key){if(this.clientStateKeyRe.test(t.key))if(null!=t.newValue){let e=this.fromWebStorageClientState(t.key,t.newValue);if(e)return this.handleClientStateEvent(e.clientId,e)}else{let e=this.fromWebStorageClientStateKey(t.key);return this.handleClientStateEvent(e,null)}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageMutationMetadata(t.key,t.newValue);if(e)return this.handleMutationBatchEvent(e)}}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue);if(e)return this.handleQueryTargetEvent(e)}}else if(t.key===this.onlineStateKey){if(null!==t.newValue){let e=this.fromWebStorageOnlineState(t.newValue);if(e)return this.handleOnlineStateEvent(e)}}else if(t.key===this.sequenceNumberKey){let e=jW(t.newValue);e!==_D.INVALID&&this.sequenceNumberHandler(e)}else if(t.key===this.bundleLoadedKey){let e=this.fromWebStoreBundleLoadedState(t.newValue);await Promise.all(e.map(e=>this.syncEngine.synchronizeWithChangedDocuments(e)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(e,t,r){let n=new jU(this.currentUser,e,t,r),i=jk(this.persistenceKey,this.currentUser,e);this.setItem(i,n.toWebStorageJSON())}removeMutationState(e){let t=jk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}persistOnlineState(e){let t={clientId:this.localClientId,onlineState:e};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))}persistQueryTargetState(e,t,r){let n=jD(this.persistenceKey,e),i=new jV(e,t,r);this.setItem(n,i.toWebStorageJSON())}persistBundleLoadedState(e){let t=JSON.stringify(Array.from(e));this.setItem(this.bundleLoadedKey,t)}fromWebStorageClientStateKey(e){let t=this.clientStateKeyRe.exec(e);return t?t[1]:null}fromWebStorageClientState(e,t){let r=this.fromWebStorageClientStateKey(e);return jz.fromWebStorageEntry(r,t)}fromWebStorageMutationMetadata(e,t){let r=this.mutationBatchKeyRe.exec(e),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return jU.fromWebStorageEntry(new xb(i),n,t)}fromWebStorageQueryTargetMetadata(e,t){let r=Number(this.queryTargetKeyRe.exec(e)[1]);return jV.fromWebStorageEntry(r,t)}fromWebStorageOnlineState(e){return jq.fromWebStorageEntry(e)}fromWebStoreBundleLoadedState(e){return JSON.parse(e)}async handleMutationBatchEvent(e){return e.user.uid!==this.currentUser.uid?void xx(jF,`Ignoring mutation for non-active user ${e.user.uid}`):this.syncEngine.applyBatchState(e.batchId,e.state,e.error)}handleQueryTargetEvent(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)}handleClientStateEvent(e,t){let r=t?this.activeClients.insert(e,t):this.activeClients.remove(e),n=this.extractActiveQueryTargets(this.activeClients),i=this.extractActiveQueryTargets(r),s=[],a=[];return i.forEach(e=>{n.has(e)||s.push(e)}),n.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.applyActiveTargetsChange(s,a).then(()=>{this.activeClients=r})}handleOnlineStateEvent(e){this.activeClients.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}extractActiveQueryTargets(e){let t=kL();return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}function jW(e){let t=_D.INVALID;if(null!=e)try{let r=JSON.parse(e);xk("number"==typeof r),t=r}catch(e){x_(jF,"Failed to read sequence number from WebStorage",e)}return t}class jK{constructor(){this.localState=new j$,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new j$,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jH{addCallback(e){}shutdown(){}}class jQ{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}}let jY=null;function jX(){return 0x10000000+Math.round(0x80000000*Math.random())}function jJ(){return null===jY?jY=jX():jY++,"0x"+jY.toString(16)}function jZ(e){return new Promise((t,r)=>{e((e,n)=>{e?r(e):t(n)})})}let j0="1.9.1",j1="GrpcConnection",j2=`gl-node/${process.versions.node} fire/${xS} grpc/${j0}`;function j3(e,t,r,n){xk(null===t||"OAuth"===t.type);let i=new xg.OS;return t&&t.headers.forEach((e,t)=>i.set(t,e)),r&&r.headers.forEach((e,t)=>i.set(t,e)),n&&i.set("X-Firebase-GMPID",n),i.set("X-Goog-Api-Client",j2),i.set("Google-Cloud-Resource-Prefix",e),i.set("x-goog-request-params",e),i}class j6{constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){xx(j1,"Creating Firestore stub.");let e=this.databaseInfo.ssl?xg.z3.createSsl():xg.z3.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,n,i){let s=jJ(),a=this.ensureActiveStub(),o=j3(this.databasePath,n,i,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return jZ(t=>(xx(j1,`RPC '${e}' ${s} invoked with request:`,r),a[e](l,o,(r,n)=>{r?(xx(j1,`RPC '${e}' ${s} failed with error:`,r),t(new xN(RT(r.code),r.message))):(xx(j1,`RPC '${e}' ${s} completed with response:`,n),t(void 0,n))})))}invokeStreamingRPC(e,t,r,n,i,s){let a=jJ(),o=[],l=new xP;xx(j1,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let u=this.ensureActiveStub(),c=j3(this.databasePath,n,i,this.databaseInfo.appId),d=Object.assign(Object.assign({},r),{database:this.databasePath}),h=u[e](d,c),f=!1;return h.on("data",t=>{xx(j1,`RPC ${e} ${a} received result:`,t),o.push(t),void 0!==s&&o.length===s&&(f=!0,l.resolve(o))}),h.on("end",()=>{xx(j1,`RPC '${e}' ${a} completed.`),f||(f=!0,l.resolve(o))}),h.on("error",t=>{xx(j1,`RPC '${e}' ${a} failed with error:`,t);let r=RT(t.code);l.reject(new xN(r,t.message))}),l.promise}openStream(e,t,r){let n=jJ(),i=this.ensureActiveStub(),s=j3(this.databasePath,t,r,this.databaseInfo.appId),a=i[e](s),o=!1,l=e=>{o||(o=!0,u.callOnClose(e),a.end())},u=new jQ({sendFn:t=>{if(o)xx(j1,`RPC '${e}' stream ${n} not sending because gRPC stream is closed:`,t);else{xx(j1,`RPC '${e}' stream ${n} sending:`,t);try{a.write(t)}catch(e){throw x_("Failure sending:",t),x_("Error:",e),e}}},closeFn:()=>{xx(j1,`RPC '${e}' stream ${n} closed locally via close().`),l()}}),c=!1;return a.on("data",t=>{o||(xx(j1,`RPC '${e}' stream ${n} received:`,t),c||(u.callOnConnected(),c=!0),u.callOnMessage(t))}),a.on("end",()=>{xx(j1,`RPC '${e}' stream ${n} ended.`),l()}),a.on("error",t=>{o||(xO(j1,`RPC '${e}' stream ${n} error. Code:`,t.code,"Message:",t.message),l(new xN(RT(t.code),t.message)))}),xx(j1,`Opening RPC '${e}' stream ${n} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}}let j4={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:0x44f2530,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var j5={nested:j4},j8=Object.freeze({__proto__:null,nested:j4,default:j5});let j7={longs:String,enums:String,defaults:!0,oneofs:!1};function j9(){let e=xm.rS(j8,j7);return xg.ex(e)}function Le(e){return new j6(j9(),e)}function Lt(){return new jH}function Lr(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function Ln(){return null}function Li(e){return new RK(e,!1)}let Ls="ExponentialBackoff",La=1e3,Lo=1.5,Ll=6e4;class Lu{constructor(e,t,r=La,n=Lo,i=Ll){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=n,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),n=Math.max(0,t-r);n>0&&xx(Ls,`Backing off for ${n} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,n,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}let Lc="PersistentStream",Ld=6e4,Lh=1e4;class Lf{constructor(e,t,r,n,i,s,a,o){this.queue=e,this.idleTimerId=r,this.healthTimerId=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new Lu(e,t)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(this.responseCount=0,4===this.state)return void this.performBackoff();this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,Ld,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==e?this.backoff.reset():t&&t.code===xD.RESOURCE_EXHAUSTED?(x_(t.toString()),x_("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===xD.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.closeCount===t&&this.startStream(e,r)},t=>{e(()=>{let e=new xN(xD.UNKNOWN,"Fetching auth token failed: "+t.message);return this.handleStreamClose(e)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,Lh,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(e=>{r(()=>this.handleStreamClose(e))}),this.stream.onMessage(e=>{r(()=>1==++this.responseCount?this.onFirst(e):this.onNext(e))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return xx(Lc,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(xx(Lc,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lp extends Lf{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onFirst(e){return this.onNext(e)}onNext(e){this.backoff.reset();let t=Du(this.serializer,e),r=Dd(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=De(this.serializer),t.addTarget=DI(this.serializer,e);let r=D_(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=De(this.serializer),t.removeTarget=e,this.sendRequest(t)}}class Lg extends Lf{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return xk(!!e.streamToken),this.lastStreamToken=e.streamToken,xk(!e.writeResults||0===e.writeResults.length),this.listener.onHandshakeComplete()}onNext(e){xk(!!e.streamToken),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=Dy(e.writeResults,e.commitTime),r=R2(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=De(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>Dh(this.serializer,e))};this.sendRequest(t)}}class Lm{}class Ly extends Lm{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new xN(xD.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,n){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.invokeRPC(e,R6(t,r),n,i,s)).catch(e=>{if("FirebaseError"===e.name)throw e.code===xD.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new xN(xD.UNKNOWN,e.toString())})}invokeStreamingRPC(e,t,r,n,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.invokeStreamingRPC(e,R6(t,r),n,s,a,i)).catch(e=>{if("FirebaseError"===e.name)throw e.code===xD.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new xN(xD.UNKNOWN,e.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}}function Lv(e,t,r,n){return new Ly(e,t,r,n)}async function Lb(e,t){let r=xR(e),n={writes:t.map(e=>Dh(r.serializer,e))};await r.invokeRPC("Commit",r.serializer.databaseId,x1.emptyPath(),n)}async function LS(e,t){let r=xR(e),n={documents:t.map(e=>R5(r.serializer,e))},i=await r.invokeStreamingRPC("BatchGetDocuments",r.serializer.databaseId,x1.emptyPath(),n,t.length),s=new Map;i.forEach(e=>{let t=Dl(r.serializer,e);s.set(t.key.toString(),t)});let a=[];return t.forEach(e=>{let t=s.get(e.toString());xk(!!t),a.push(t)}),a}async function Lw(e,t,r){var n;let i=xR(e),{request:s,aliasMap:a,parent:o}=DE(i.serializer,ki(t),r);i.connection.shouldResourcePathBeIncludedInRequest||delete s.parent;let l=(await i.invokeStreamingRPC("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter(e=>!!e.result);xk(1===l.length);let u=null==(n=l[0].result)?void 0:n.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[a[t]]=u[t],e),{})}function LT(e,t,r){let n=xR(e);return n.verifyInitialized(),new Lg(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}function LE(e,t,r){let n=xR(e);return n.verifyInitialized(),new Lp(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}let LC="OnlineStateTracker",Lx=1,L_=1e4;class LO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",L_,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${L_/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=Lx&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${Lx} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===e&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(x_(t),this.shouldWarnClientIsOffline=!1):xx(LC,t)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}let LI="RemoteStore",LA=10;class Lk{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=i,this.connectivityMonitor.addCallback(e=>{r.enqueueAndForget(async()=>{Lq(this)&&(xx(LI,"Restarting streams for network reachability change."),await L9(this))})}),this.onlineStateTracker=new LO(r,n)}}function LR(e,t,r,n,i){return new Lk(e,t,r,n,i)}function LD(e){let t=xR(e);return t.offlineCauses.delete(0),LN(t)}async function LN(e){if(Lq(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function LP(e){let t=xR(e);t.offlineCauses.add(0),await LM(t),t.onlineStateTracker.set("Offline")}async function LM(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function Lj(e){let t=xR(e);xx(LI,"RemoteStore shutting down."),t.offlineCauses.add(5),await LM(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function LL(e,t){let r=xR(e);!r.listenTargets.has(t.targetId)&&(r.listenTargets.set(t.targetId,t),Lz(r)?LV(r):Br(r).isOpen()&&LF(r,t))}function LB(e,t){let r=xR(e),n=Br(r);r.listenTargets.delete(t),n.isOpen()&&LU(r,t),0===r.listenTargets.size&&(n.isOpen()?n.markIdle():Lq(r)&&r.onlineStateTracker.set("Unknown"))}function LF(e,t){if(e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xJ.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Br(e).watch(t)}function LU(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),Br(e).unwatch(t)}function LV(e){e.watchChangeAggregator=new RU({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null,getDatabaseId:()=>e.datastore.serializer.databaseId}),Br(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function Lz(e){return Lq(e)&&!Br(e).isStarted()&&e.listenTargets.size>0}function Lq(e){return 0===xR(e).offlineCauses.size}function L$(e){e.watchChangeAggregator=void 0}async function LG(e){e.onlineStateTracker.set("Online")}async function LW(e){e.listenTargets.forEach((t,r)=>{LF(e,t)})}async function LK(e,t){L$(e),Lz(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),LV(e)):e.onlineStateTracker.set("Unknown")}async function LH(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof RL&&2===t.state&&t.cause){try{await LJ(e,t)}catch(r){xx(LI,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await LQ(e,r)}return}if(t instanceof RM?e.watchChangeAggregator.handleDocumentChange(t):t instanceof Rj?e.watchChangeAggregator.handleExistenceFilter(t):e.watchChangeAggregator.handleTargetChange(t),!r.isEqual(xJ.min()))try{let t=await M5(e.localStore);r.compareTo(t)>=0&&await LX(e,r)}catch(t){xx(LI,"Failed to raise snapshot:",t),await LQ(e,t)}}async function LQ(e,t,r){if(_w(t))e.offlineCauses.add(1),await LM(e),e.onlineStateTracker.set("Offline"),r||(r=()=>M5(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xx(LI,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await LN(e)});else throw t}function LY(e,t){return t().catch(r=>LQ(e,r,t))}function LX(e,t){let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.listenTargets.get(n);i&&e.listenTargets.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.listenTargets.get(t);n&&(e.listenTargets.set(t,n.withResumeToken(O7.EMPTY_BYTE_STRING,n.snapshotVersion)),LU(e,t),LF(e,new D3(n.target,t,r,n.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(r)}async function LJ(e,t){let r=t.cause;for(let n of t.targetIds)e.listenTargets.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.listenTargets.delete(n),e.watchChangeAggregator.removeTarget(n))}async function LZ(e){let t=xR(e),r=Bn(t),n=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:Iy;for(;L0(t);)try{let e=await jt(t.localStore,n);if(null===e){0===t.writePipeline.length&&r.markIdle();break}n=e.batchId,L1(t,e)}catch(e){await LQ(t,e)}L2(t)&&L3(t)}function L0(e){return Lq(e)&&e.writePipeline.length<LA}function L1(e,t){e.writePipeline.push(t);let r=Bn(e);r.isOpen()&&r.handshakeComplete&&r.writeMutations(t.mutations)}function L2(e){return Lq(e)&&!Bn(e).isStarted()&&e.writePipeline.length>0}function L3(e){Bn(e).start()}async function L6(e){Bn(e).writeHandshake()}async function L4(e){let t=Bn(e);for(let r of e.writePipeline)t.writeMutations(r.mutations)}async function L5(e,t,r){let n=e.writePipeline.shift(),i=Ry.from(n,t,r);await LY(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await LZ(e)}async function L8(e,t){t&&Bn(e).handshakeComplete&&await L7(e,t),L2(e)&&L3(e)}async function L7(e,t){if(Rw(t.code)){let r=e.writePipeline.shift();Bn(e).inhibitBackoff(),await LY(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await LZ(e)}}async function L9(e){let t=xR(e);t.offlineCauses.add(4),await LM(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await LN(t)}async function Be(e,t){let r=xR(e);r.asyncQueue.verifyOperationInProgress(),xx(LI,"RemoteStore received new credentials");let n=Lq(r);r.offlineCauses.add(3),await LM(r),n&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await LN(r)}async function Bt(e,t){let r=xR(e);t?(r.offlineCauses.delete(2),await LN(r)):t||(r.offlineCauses.add(2),await LM(r),r.onlineStateTracker.set("Unknown"))}function Br(e){return e.watchStream||(e.watchStream=LE(e.datastore,e.asyncQueue,{onConnected:LG.bind(null,e),onOpen:LW.bind(null,e),onClose:LK.bind(null,e),onWatchChange:LH.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),Lz(e)?LV(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),L$(e))})),e.watchStream}function Bn(e){return e.writeStream||(e.writeStream=LT(e.datastore,e.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:L6.bind(null,e),onClose:L8.bind(null,e),onHandshakeComplete:L4.bind(null,e),onMutationResult:L5.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.writeStream.inhibitBackoff(),await LZ(e)):(await e.writeStream.stop(),e.writePipeline.length>0&&(xx(LI,`Stopping write stream with ${e.writePipeline.length} pending writes`),e.writePipeline=[]))})),e.writeStream}let Bi="AsyncQueue";class Bs{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new xP,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let s=new Bs(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xN(xD.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ba(e,t){if(x_(Bi,`${t}: ${e}`),_w(e))return new xN(xD.UNAVAILABLE,`${t}: ${e}`);throw e}class Bo{constructor(e){e?this.comparator=(t,r)=>e(t,r)||x6.comparator(t.key,r.key):this.comparator=(e,t)=>x6.comparator(e.key,t.key),this.keyedMap=k_(),this.sortedSet=new OX(this.comparator)}static emptySet(e){return new Bo(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bo)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return(this.forEach(t=>{e.push(t.toString())}),0===e.length)?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new Bo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Bl{constructor(){this.changeMap=new OX(x6.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}0!==e.type&&3===r.type?this.changeMap=this.changeMap.insert(t,e):3===e.type&&1!==r.type?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.changeMap=this.changeMap.remove(t):1===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):xA()}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bu{constructor(e,t,r,n,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Bu(e,t,Bo.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!kd(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class Bc{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}}function Bd(){return new Bh}class Bh{constructor(){this.queries=Bf(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){Bw(this,new xN(xD.ABORTED,"Firestore shutting down"))}}function Bf(){return new kT(e=>kh(e),kd)}async function Bp(e,t){let r=xR(e),n=3,i=t.query,s=r.queries.get(i);s?!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(n=2):(s=new Bc,n=+!t.listensToRemoteStore());try{switch(n){case 0:s.viewSnap=await r.onListen(i,!0);break;case 1:s.viewSnap=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(r){let e=Ba(r,`Initialization of query '${kf(t.query)}' failed`);t.onError(e);return}r.queries.set(i,s),s.listeners.push(t),t.applyOnlineStateChange(r.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&BT(r)}async function Bg(e,t){let r=xR(e),n=t.query,i=3,s=r.queries.get(n);if(s){let e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),0===s.listeners.length?i=+!t.listensToRemoteStore():!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Bm(e,t){let r=xR(e),n=!1;for(let e of t){let t=e.query,i=r.queries.get(t);if(i){for(let t of i.listeners)t.onViewSnapshot(e)&&(n=!0);i.viewSnap=e}}n&&BT(r)}function By(e,t,r){let n=xR(e),i=n.queries.get(t);if(i)for(let e of i.listeners)e.onError(r);n.queries.delete(t)}function Bv(e,t){let r=xR(e);r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.applyOnlineStateChange(t)&&(n=!0)}),n&&BT(r)}function Bb(e,t){xR(e).snapshotsInSyncListeners.add(t),t.next()}function BS(e,t){xR(e).snapshotsInSyncListeners.delete(t)}function Bw(e,t){let r=xR(e),n=r.queries;r.queries=Bf(),n.forEach((e,r)=>{for(let e of r.listeners)e.onError(t)})}function BT(e){e.snapshotsInSyncListeners.forEach(e=>{e.next()})}!function(e){e.Default="default",e.Cache="cache"}(d||(d={}));class BE{constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new Bu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache||!this.listensToRemoteStore())return!0;let r="Offline"!==t;return(!this.options.waitForSyncWhenOnline||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return(!!e.syncStateChanged||!!t)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(e){e=Bu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==d.Cache}}class BC{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=n}static fromSnapshot(e,t){let r=kM(),n=kM();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new BC(e,t.fromCache,r,n)}}class Bx{constructor(e){this.serializer=e}toDocumentKey(e){return R8(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?Ds(this.serializer,e.document,!1):Au.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return R2(e)}}class B_{constructor(e,t,r){this.bundleMetadata=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BO(e)}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),!e.payload.documentMetadata.exists&&++t;let r=x1.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let t=new Map,r=new Bx(this.serializer);for(let n of e)if(n.metadata.queries){let e=r.toDocumentKey(n.metadata.name);for(let r of n.metadata.queries){let n=(t.get(r)||kM()).add(e);t.set(r,n)}}return t}async complete(){let e=await jg(this.localStore,new Bx(this.serializer),this.documents,this.bundleMetadata.id),t=this.getQueryDocumentMapping(this.documents);for(let e of this.queries)await jb(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:e}}}function BO(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function BI(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class BA{constructor(e){this.key=e}}class Bk{constructor(e){this.key=e}}class BR{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=kM(),this.mutatedKeys=kM(),this.docComparator=kS(e),this.documentSet=new Bo(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new Bl,n=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,s=n,a=!1,o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=kp(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(r.track({type:3,doc:c}),f=!0):!this.shouldWaitForSyncedDocument(u,c)&&(r.track({type:2,doc:c}),f=!0,(o&&this.docComparator(c,o)>0||l&&0>this.docComparator(c,l))&&(a=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(o||l)&&(a=!0)),f&&(c?(s=s.add(c),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:i}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let s=e.changeSet.getChanges();s.sort((e,t)=>BD(e.type,t.type)||this.docComparator(e.doc,t.doc)),this.applyTargetChange(r),n=null!=n&&n;let a=t&&!n?this.updateLimboDocuments():[],o=+!!(0===this.limboDocuments.size&&this.current&&!n),l=o!==this.syncState;return(this.syncState=o,0!==s.length||l)?{snapshot:new Bu(this.query,e.documentSet,i,s,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),limboChanges:a}:{limboChanges:a}}applyOnlineStateChange(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Bl,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations}applyTargetChange(e){e&&(e.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=kM(),this.documentSet.forEach(e=>{this.shouldBeInLimbo(e.key)&&(this.limboDocuments=this.limboDocuments.add(e.key))});let t=[];return e.forEach(e=>{this.limboDocuments.has(e)||t.push(new Bk(e))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new BA(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=kM();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return Bu.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function BD(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xA()}};return r(e)-r(t)}let BN="SyncEngine";class BP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class BM{constructor(e){this.key=e,this.receivedDocument=!1}}class Bj{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.syncEngineListener={},this.queryViewsByQuery=new kT(e=>kh(e),kd),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new OX(x6.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new Mi,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=Pk.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function BL(e,t,r,n,i,s,a){let o=new Bj(e,t,r,n,i,s);return a&&(o._isPrimaryClient=!0),o}async function BB(e,t,r=!0){let n,i=Fc(e),s=i.queryViewsByQuery.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.computeInitialSnapshot()):n=await BU(i,t,r,!0),n}async function BF(e,t){let r=Fc(e);await BU(r,t,!0,!1)}async function BU(e,t,r,n){let i,s=await jn(e.localStore,kn(t)),a=s.targetId,o=e.sharedClientState.addLocalQueryTarget(a,r);return n&&(i=await BV(e,t,a,"current"===o,s.resumeToken)),e.isPrimaryClient&&r&&LL(e.remoteStore,s),i}async function BV(e,t,r,n,i){e.applyDocChanges=(t,r,n)=>B8(e,t,r,n);let s=await ja(e.localStore,t,!0),a=new BR(t,s.remoteKeys),o=a.computeDocChanges(s.documents),l=RP.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);B3(e,r,u.limboChanges);let c=new BP(t,r,a);return e.queryViewsByQuery.set(t,c),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),u.snapshot}async function Bz(e,t,r){let n=xR(e),i=n.queryViewsByQuery.get(t),s=n.queriesByTarget.get(i.targetId);if(s.length>1){n.queriesByTarget.set(i.targetId,s.filter(e=>!kd(e,t))),n.queryViewsByQuery.delete(t);return}n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await js(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&LB(n.remoteStore,i.targetId),B1(n,i.targetId)}).catch(_h)):(B1(n,i.targetId),await js(n.localStore,i.targetId,!0))}async function Bq(e,t){let r=xR(e),n=r.queryViewsByQuery.get(t),i=r.queriesByTarget.get(n.targetId);r.isPrimaryClient&&1===i.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),LB(r.remoteStore,n.targetId))}async function B$(e,t,r){let n=Fd(e);try{let e=await M1(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),BZ(n,e.batchId,r),await B5(n,e.changes),await LZ(n.remoteStore)}catch(t){let e=Ba(t,"Failed to persist write");r.reject(e)}}async function BG(e,t){let r=xR(e);try{let e=await M8(r.localStore,t);t.targetChanges.forEach((e,t)=>{let n=r.activeLimboResolutionsByTarget.get(t);n&&(xk(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.receivedDocument=!0:e.modifiedDocuments.size>0?xk(n.receivedDocument):e.removedDocuments.size>0&&(xk(n.receivedDocument),n.receivedDocument=!1))}),await B5(r,e,t)}catch(e){await _h(e)}}function BW(e,t,r){let n=xR(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.queryViewsByQuery.forEach((r,n)=>{let i=n.view.applyOnlineStateChange(t);i.snapshot&&e.push(i.snapshot)}),Bv(n.eventManager,t),e.length&&n.syncEngineListener.onWatchChange(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function BK(e,t,r){let n=xR(e);n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.activeLimboResolutionsByTarget.get(t),s=i&&i.key;if(s){let e=new OX(x6.comparator);e=e.insert(s,Au.newNoDocument(s,xJ.min()));let r=kM().add(s),i=new RN(xJ.min(),new Map,new OX(xW),e,r);await BG(n,i),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(s),n.activeLimboResolutionsByTarget.delete(t),B4(n)}else await js(n.localStore,t,!1).then(()=>B1(n,t,r)).catch(_h)}async function BH(e,t){let r=xR(e),n=t.batch.batchId;try{let e=await M2(r.localStore,t);B0(r,n,null),BX(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await B5(r,e)}catch(e){await _h(e)}}async function BQ(e,t,r){let n=xR(e);try{let e=await M6(n.localStore,t);B0(n,t,r),BX(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await B5(n,e)}catch(e){await _h(e)}}async function BY(e,t){let r=xR(e);Lq(r.remoteStore)||xx(BN,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let e=await M4(r.localStore);if(e===Iy)return void t.resolve();let n=r.pendingWritesCallbacks.get(e)||[];n.push(t),r.pendingWritesCallbacks.set(e,n)}catch(r){let e=Ba(r,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}}function BX(e,t){(e.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),e.pendingWritesCallbacks.delete(t)}function BJ(e,t){e.pendingWritesCallbacks.forEach(e=>{e.forEach(e=>{e.reject(new xN(xD.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function BZ(e,t,r){let n=e.mutationUserCallbacks[e.currentUser.toKey()];n||(n=new OX(xW)),n=n.insert(t,r),e.mutationUserCallbacks[e.currentUser.toKey()]=n}function B0(e,t,r){let n=xR(e),i=n.mutationUserCallbacks[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.mutationUserCallbacks[n.currentUser.toKey()]=i}}function B1(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.queriesByTarget.get(t)))e.queryViewsByQuery.delete(n),r&&e.syncEngineListener.onWatchError(n,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(t=>{e.limboDocumentRefs.containsKey(t)||B2(e,t)})}function B2(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);null!==r&&(LB(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),B4(e))}function B3(e,t,r){for(let n of r)n instanceof BA?(e.limboDocumentRefs.addReference(n.key,t),B6(e,n)):n instanceof Bk?(xx(BN,"Document no longer in limbo: "+n.key),e.limboDocumentRefs.removeReference(n.key,t),e.limboDocumentRefs.containsKey(n.key)||B2(e,n.key)):xA()}function B6(e,t){let r=t.key,n=r.path.canonicalString();e.activeLimboTargetsByKey.get(r)||e.enqueuedLimboResolutions.has(n)||(xx(BN,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(n),B4(e))}function B4(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new x6(x1.fromString(t)),n=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(n,new BM(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,n),LL(e.remoteStore,new D3(kn(A5(r.path)),n,"TargetPurposeLimboResolution",_D.INVALID))}}async function B5(e,t,r){let n=xR(e),i=[],s=[],a=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((e,o)=>{a.push(n.applyDocChanges(o,t,r).then(e=>{var t;if((e||r)&&n.isPrimaryClient){let i=e?!e.fromCache:null==(t=null==r?void 0:r.targetChanges.get(o.targetId))?void 0:t.current;n.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);let t=BC.fromSnapshot(o.targetId,e);s.push(t)}}))}),await Promise.all(a),n.syncEngineListener.onWatchChange(i),await je(n.localStore,s))}async function B8(e,t,r,n){let i=t.view.computeDocChanges(r);i.needsRefill&&(i=await ja(e.localStore,t.query,!1).then(({documents:e})=>t.view.computeDocChanges(e,i)));let s=n&&n.targetChanges.get(t.targetId),a=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return B3(e,t.targetId,o.limboChanges),o.snapshot}async function B7(e,t){let r=xR(e);if(!r.currentUser.isEqual(t)){xx(BN,"User change. New user:",t.toKey());let e=await M0(r.localStore,t);r.currentUser=t,BJ(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await B5(r,e.affectedDocuments)}}function B9(e,t){let r=xR(e),n=r.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return kM().add(n.key);{let e=kM(),n=r.queriesByTarget.get(t);if(!n)return e;for(let t of n){let n=r.queryViewsByQuery.get(t);e=e.unionWith(n.view.syncedDocuments)}return e}}async function Fe(e,t){let r=xR(e),n=await ja(r.localStore,t.query,!0),i=t.view.synchronizeWithPersistedState(n);return r.isPrimaryClient&&B3(r,t.targetId,i.limboChanges),i}async function Ft(e,t){let r=xR(e);return jh(r.localStore,t).then(e=>B5(r,e))}async function Fr(e,t,r,n){let i=xR(e),s=await jl(i.localStore,t);if(null===s)return void xx(BN,"Cannot apply mutation batch with id: "+t);"pending"===r?await LZ(i.remoteStore):"acknowledged"===r||"rejected"===r?(B0(i,t,n||null),BX(i,t),ju(i.localStore,t)):xA(),await B5(i,s)}async function Fn(e,t){let r=xR(e);if(Fc(r),Fd(r),!0===t&&!0!==r._isPrimaryClient){let e=r.sharedClientState.getAllActiveQueryTargets(),t=await Fs(r,e.toArray());for(let e of(r._isPrimaryClient=!0,await Bt(r.remoteStore,!0),t))LL(r.remoteStore,e)}else if(!1===t&&!1!==r._isPrimaryClient){let e=[],t=Promise.resolve();r.queriesByTarget.forEach((n,i)=>{r.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(B1(r,i),js(r.localStore,i,!0))),LB(r.remoteStore,i)}),await t,await Fs(r,e),Fi(r),r._isPrimaryClient=!1,await Bt(r.remoteStore,!1)}}function Fi(e){let t=xR(e);t.activeLimboResolutionsByTarget.forEach((e,r)=>{LB(t.remoteStore,r)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new OX(x6.comparator)}async function Fs(e,t,r){let n=xR(e),i=[],s=[];for(let e of t){let t,r=n.queriesByTarget.get(e);if(r&&0!==r.length)for(let e of(t=await jn(n.localStore,kn(r[0])),r)){let t=n.queryViewsByQuery.get(e),r=await Fe(n,t);r.snapshot&&s.push(r.snapshot)}else{let r=await jd(n.localStore,e);t=await jn(n.localStore,r),await BV(n,Fa(r),e,!1,t.resumeToken)}i.push(t)}return n.syncEngineListener.onWatchChange(s),i}function Fa(e){return A4(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Fo(e){return jc(xR(e).localStore)}async function Fl(e,t,r,n){let i=xR(e);if(i._isPrimaryClient)return void xx(BN,"Ignoring unexpected query state notification.");let s=i.queriesByTarget.get(t);if(s&&s.length>0)switch(r){case"current":case"not-current":{let e=await jh(i.localStore,kb(s[0])),n=RN.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,O7.EMPTY_BYTE_STRING);await B5(i,e,n);break}case"rejected":await js(i.localStore,t,!0),B1(i,t,n);break;default:xA()}}async function Fu(e,t,r){let n=Fc(e);if(n._isPrimaryClient){for(let e of t){if(n.queriesByTarget.has(e)&&n.sharedClientState.isActiveQueryTarget(e)){xx(BN,"Adding an already active target "+e);continue}let t=await jd(n.localStore,e),r=await jn(n.localStore,t);await BV(n,Fa(t),r.targetId,!1,r.resumeToken),LL(n.remoteStore,r)}for(let e of r)n.queriesByTarget.has(e)&&await js(n.localStore,e,!1).then(()=>{LB(n.remoteStore,e),B1(n,e)}).catch(_h)}}function Fc(e){let t=xR(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BG.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=B9.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=BK.bind(null,t),t.syncEngineListener.onWatchChange=Bm.bind(null,t.eventManager),t.syncEngineListener.onWatchError=By.bind(null,t.eventManager),t}function Fd(e){let t=xR(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BH.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=BQ.bind(null,t),t}function Fh(e,t,r){let n=xR(e);Ff(n,t,r).then(e=>{n.sharedClientState.notifyBundleLoaded(e)})}async function Ff(e,t,r){try{let n=await t.getMetadata();if(await jm(e.localStore,n))return await t.close(),r._completeWith(BI(n)),Promise.resolve(new Set);r._updateProgress(BO(n));let i=new B_(n,e.localStore,t.serializer),s=await t.nextElement();for(;s;){let e=await i.addSizedElement(s);e&&r._updateProgress(e),s=await t.nextElement()}let a=await i.complete();return await B5(e,a.changedDocs,void 0),await jy(e.localStore,n),r._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(e){return xO(BN,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}}class Fp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Li(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return MZ(this.persistence,new j_,e.initialUser,this.serializer)}createPersistence(e){return new Mf(Mg.factory,this.serializer)}createSharedClientState(e){return new jK}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fp.provider={build:()=>new Fp};class Fg extends Fp{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){return xk(this.persistence.referenceDelegate instanceof Mm),new PG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createPersistence(e){let t=void 0!==this.cacheSizeBytes?PB.withCacheSize(this.cacheSizeBytes):PB.DEFAULT;return new Mf(e=>Mm.factory(e,t),this.serializer)}}class Fm extends Fp{constructor(e,t,r){super(),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.onlineComponentProvider.initialize(this,e),await Fd(this.onlineComponentProvider.syncEngine),await LZ(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return MZ(this.persistence,new j_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new PG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new _R(t,this.persistence);return new _k(e.asyncQueue,r)}createPersistence(e){let t=MK(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?PB.withCacheSize(this.cacheSizeBytes):PB.DEFAULT;return new M$(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Lr(),Ln(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jK}}class Fy extends Fm{constructor(e,t){super(e,t,!1),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.onlineComponentProvider.syncEngine;this.sharedClientState instanceof jG&&(this.sharedClientState.syncEngine={applyBatchState:Fr.bind(null,t),applyTargetState:Fl.bind(null,t),applyActiveTargetsChange:Fu.bind(null,t),getActiveClients:Fo.bind(null,t),synchronizeWithChangedDocuments:Ft.bind(null,t)},await this.sharedClientState.start()),await this.persistence.setPrimaryStateListener(async e=>{await Fn(this.onlineComponentProvider.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){let t=Lr();if(!jG.isAvailable(t))throw new xN(xD.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=MK(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jG(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Fv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>BW(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=B7.bind(null,this.syncEngine),await Bt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return Bd()}createDatastore(e){let t=Li(e.databaseInfo.databaseId),r=Le(e.databaseInfo);return Lv(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return LR(this.localStore,this.datastore,e.asyncQueue,e=>BW(this.syncEngine,e,0),Lt())}createSyncEngine(e,t){return BL(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await Lj(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}Fv.provider={build:()=>new Fv};let Fb=10240;function FS(e,t=Fb){let r=0;return{async read(){if(r<e.byteLength){let n={value:e.slice(r,r+t),done:!1};return r+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}function Fw(e,t,r){if(!r)throw new xN(xD.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function FT(e,t,r,n){if(!0===t&&!0===n)throw new xN(xD.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function FE(e){if(!x6.isDocumentKey(e))throw new xN(xD.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function FC(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Fx(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e)if(e instanceof Array)return"an array";else{let t=F_(e);return t?`a custom ${t} object`:"an object"}else if("function"==typeof e)return"a function";else return xA()}function F_(e){return e.constructor?e.constructor.name:null}function FO(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t))if(t.name===e.constructor.name)throw new xN(xD.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");else{let r=Fx(e);throw new xN(xD.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}return e}function FI(e,t){if(!(e instanceof Uint8Array))throw new xN(xD.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${Fx(e)}`);return FS(e,t)}class FA{constructor(e){this.observer=e,this.muted=!1}next(e){!this.muted&&this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,e):x_("Uncaught Error in snapshot listener:",e.toString()))}mute(){this.muted=!0}scheduleEvent(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Fk{constructor(e,t){this.payload=e,this.byteLength=t}isBundleMetadata(){return"metadata"in this.payload}}class FR{constructor(e,t){this.reader=e,this.serializer=t,this.metadata=new xP,this.buffer=new Uint8Array,this.textDecoder=RO(),this.nextElementImpl().then(e=>{e&&e.isBundleMetadata()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let e=await this.readLength();if(null===e)return null;let t=this.textDecoder.decode(e),r=Number(t);return isNaN(r)&&this.raiseError(`length string (${t}) is not valid number`),new Fk(JSON.parse(await this.readJsonString(r)),e.length+r)}indexOfOpenBracket(){return this.buffer.findIndex(e=>123===e)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async readJsonString(e){for(;this.buffer.length<e;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let t=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}raiseError(e){throw this.reader.cancel(),Error(`Invalid bundle format: ${e}`)}async pullMoreDataToBuffer(){let e=await this.reader.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}function FD(e,t){return new FR(e,t)}class FN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new xN(xD.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await LS(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=x6.fromPath(t);this.mutations.push(new Rg(r,this.precondition(r)))}),await Lb(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else if(e.isNoDocument())t=xJ.min();else throw xA();let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xN(xD.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return this.writtenDocs.has(e.toString())||!t?k4.none():t.isEqual(xJ.min())?k4.exists(!1):k4.updateTime(t)}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return k4.exists(!0);if(t.isEqual(xJ.min()))throw new xN(xD.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return k4.updateTime(t)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FP{constructor(e,t,r,n,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=n,this.deferred=i,this.attemptsRemaining=r.maxAttempts,this.backoff=new Lu(this.asyncQueue,"transaction_retry")}run(){this.attemptsRemaining-=1,this.runWithBackOff()}runWithBackOff(){this.backoff.backoffAndRun(async()=>{let e=new FN(this.datastore),t=this.tryRunUpdateFunction(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.handleTransactionError(e)}))}).catch(e=>{this.handleTransactionError(e)})})}tryRunUpdateFunction(e){try{let t=this.updateFunction(e);if(Iv(t)||!t.catch||!t.then)return this.deferred.reject(Error("Transaction callback must return a Promise")),null;return t}catch(e){return this.deferred.reject(e),null}}handleTransactionError(e){this.attemptsRemaining>0&&this.isRetryableTransactionError(e)?(this.attemptsRemaining-=1,this.asyncQueue.enqueueAndForget(()=>(this.runWithBackOff(),Promise.resolve()))):this.deferred.reject(e)}isRetryableTransactionError(e){if("FirebaseError"===e.name){let t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!RS(t)}return!1}}let FM="FirestoreClient",Fj=100,FL=11,FB=20,FF=22;class FU{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=xb.UNAUTHENTICATED,this.clientId=xG.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{xx(FM,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(xx(FM,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:Fj}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new xP;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=Ba(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function FV(e,t){e.asyncQueue.verifyOperationInProgress(),xx(FM,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await M0(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Fz(e,t){e.asyncQueue.verifyOperationInProgress();let r=await F$(e);xx(FM,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>Be(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>Be(t.remoteStore,r)),e._onlineComponents=t}function Fq(e){return"FirebaseError"===e.name?e.code===xD.FAILED_PRECONDITION||e.code===xD.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||e.code===FF||e.code===FB||e.code===FL}async function F$(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xx(FM,"Using user provided OfflineComponentProvider");try{await FV(e,e._uninitializedComponentsProvider._offline)}catch(r){let t=r;if(!Fq(t))throw t;xO("Error using user provided cache. Falling back to memory cache: "+t),await FV(e,new Fp)}}else xx(FM,"Using default OfflineComponentProvider"),await FV(e,new Fp);return e._offlineComponents}async function FG(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xx(FM,"Using user provided OnlineComponentProvider"),await Fz(e,e._uninitializedComponentsProvider._online)):(xx(FM,"Using default OnlineComponentProvider"),await Fz(e,new Fv))),e._onlineComponents}function FW(e){return F$(e).then(e=>e.persistence)}function FK(e){return F$(e).then(e=>e.localStore)}function FH(e){return FG(e).then(e=>e.remoteStore)}function FQ(e){return FG(e).then(e=>e.syncEngine)}function FY(e){return FG(e).then(e=>e.datastore)}async function FX(e){let t=await FG(e),r=t.eventManager;return r.onListen=BB.bind(null,t.syncEngine),r.onUnlisten=Bz.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=BF.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Bq.bind(null,t.syncEngine),r}function FJ(e,t,r){let n=new xP;return e.asyncQueue.enqueueAndForget(async()=>{try{let i=await FY(e);n.resolve(Lw(i,t,r))}catch(e){n.reject(e)}}),n.promise}function FZ(e,t){let r=new xP;return e.asyncQueue.enqueueAndForget(async()=>B$(await FQ(e),t,r)),r.promise}async function F0(e,t,r){try{let n=await jr(e,t);n.isFoundDocument()?r.resolve(n):n.isNoDocument()?r.resolve(null):r.reject(new xN(xD.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(n){let e=Ba(n,`Failed to get document '${t} from cache`);r.reject(e)}}function F1(e,t,r,n,i){let s=new FA({next:o=>{s.mute(),t.enqueueAndForget(()=>Bg(e,a));let l=o.docs.has(r);!l&&o.fromCache?i.reject(new xN(xD.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&n&&"server"===n.source?i.reject(new xN(xD.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new BE(A5(r.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return Bp(e,a)}async function F2(e,t,r){try{let n=await ja(e,t,!0),i=new BR(t,n.remoteKeys),s=i.computeDocChanges(n.documents),a=i.applyChanges(s,!1);r.resolve(a.snapshot)}catch(n){let e=Ba(n,`Failed to execute query '${t} against cache`);r.reject(e)}}function F3(e,t,r,n,i){let s=new FA({next:r=>{s.mute(),t.enqueueAndForget(()=>Bg(e,a)),r.fromCache&&"server"===n.source?i.reject(new xN(xD.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),a=new BE(r,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return Bp(e,a)}function F6(e,t){let r;return FD(FI(r="string"==typeof e?R_().encode(e):e),t)}function F4(e,t){return e.asyncQueue.enqueue(async()=>jw(await FK(e),t))}function F5(e,t){return e.timeoutSeconds===t.timeoutSeconds}function F8(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let F7="ComponentProvider",F9=new Map;function Ue(e){let t=F9.get(e);t&&(xx(F7,"Removing Datastore"),F9.delete(e),t.terminate())}function Ut(e,t,r,n){return new If(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,F8(n.experimentalLongPollingOptions),n.useFetchStreams)}let Ur="firestore.googleapis.com",Un=!0,Ui=5,Us=30,Ua=!0;class Uo{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xN(xD.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ur,this.ssl=Un}else this.host=e.host,this.ssl=null!=(t=e.ssl)?t:Un;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=PL;else if(e.cacheSizeBytes!==Pj&&e.cacheSizeBytes<PU)throw new xN(xD.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${PU}`);else this.cacheSizeBytes=e.cacheSizeBytes;FT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=Ua:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=F8(null!=(r=e.experimentalLongPollingOptions)?r:{}),Ul(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&F5(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}function Ul(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new xN(xD.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<Ui)throw new xN(xD.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is ${Ui})`);if(e.timeoutSeconds>Us)throw new xN(xD.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is ${Us})`)}}class Uu{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Uo({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xN(xD.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xN(xD.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Uo(e),void 0!==e.credentials&&(this._authCredentials=xq(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return Ue(this),Promise.resolve()}}function Uc(e,t,r,n={}){var i;let s=(e=FO(e,Uu))._getSettings(),a=`${t}:${r}`;if(s.host!==Ur&&s.host!==a&&xO("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=xb.MOCK_USER;else{t=EJ(n.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new xN(xD.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new xb(s)}e._authCredentials=new xL(new xM(t,r))}}class Ud{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ud(this.firestore,e,this._query)}}class Uh{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Uh(this.firestore,e,this._key)}}class Uf extends Ud{constructor(e,t,r){super(e,t,A5(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Uh(this.firestore,null,new x6(e))}withConverter(e){return new Uf(this.firestore,e,this._path)}}let Up="AsyncQueue";class Ug{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new Lu(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new xP;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(_w(e))xx(Up,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(e=>{throw this.failure=e,this.operationInProgress=!1,x_("INTERNAL UNHANDLED ERROR: ",Um(e)),e}).then(e=>(this.operationInProgress=!1,e))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let n=Bs.createAndSchedule(this,e,t,r,e=>this.removeDelayedOperation(e));return this.delayedOperations.push(n),n}verifyNotFailed(){this.failure&&xA()}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{for(let t of(this.delayedOperations.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.delayedOperations))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}}function Um(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class Uy extends Uu{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new Ug,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ug(e),this._firestoreClient=void 0,await e}}}function Uv(e,t){let r="object"==typeof e?e:C2(),n="string"==typeof e?e:t||Ip,i=CX(r,"firestore").getImmediate({identifier:n});if(!i._initialized){let e=EQ("firestore");e&&Uc(i,...e)}return i}function Ub(e){if(e._terminated)throw new xN(xD.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||US(e),e._firestoreClient}function US(e){var t,r,n;let i=e._freezeSettings(),s=Ut(e._databaseId,(null==(t=e._app)?void 0:t.options.appId)||"",e._persistenceKey,i);!e._componentsProvider&&(null==(r=i.localCache)?void 0:r._offlineComponentProvider)&&(null==(n=i.localCache)?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new FU(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&Uw(e._componentsProvider))}function Uw(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}function UT(e,t=!0){xw(C0),CY(new Cs("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new Uy(new xB(e.getProvider("auth-internal")),new xz(e.getProvider("app-check-internal")),Im(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),C4(xy,xv,e),C4(xy,xv,"esm2017")}class UE{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class UC{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Ux{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class U_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new U_(O7.fromBase64String(e))}catch(e){throw new xN(xD.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new U_(O7.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class UO{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xN(xD.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new x3(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class UI{constructor(e){this._methodName=e}}class UA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xN(xD.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xN(xD.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xW(this._lat,e._lat)||xW(this._long,e._long)}}class Uk{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return MQ(this._values,e._values)}}let UR=/^__.*__$/;class UD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rn(e,this.data,t,this.fieldTransforms)}}class UN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ra(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xA()}}class UM{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new UM(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return U4(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(UP(this.dataSource)&&UR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Uj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Li(e)}createContext(e,t,r,n=!1){return new UM({dataSource:e,methodName:t,targetDoc:r,path:x3.emptyPath(),arrayElement:!1,hasConverter:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UL(e){let t=e._freezeSettings(),r=Li(e._databaseId);return new Uj(e._databaseId,!!t.ignoreUndefinedProperties,r)}function UB(e,t,r,n,i,s={}){let a,o,l=e.createContext(s.merge||s.mergeFields?2:0,t,r,i);U1("Data must be an object, but it was:",l,n);let u=UQ(n,l);if(s.merge)a=new O4(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=U2(t,n,r);if(!l.contains(i))throw new xN(xD.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);U5(e,i)||e.push(i)}a=new O4(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new UD(new Ao(u),a,o)}class UF extends UI{_toFieldTransform(e){if(2===e.dataSource)e.fieldMask.push(e.path);else if(1===e.dataSource)throw e.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof UF}}function UU(e,t,r){return new UM({dataSource:3,targetDoc:t.settings.targetDoc,methodName:e._methodName,arrayElement:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class UV extends null{_toFieldTransform(e){return new k1(e.path,new kW)}isEqual(e){return e instanceof UV}}class Uz extends UI{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=UU(this,e,!0),r=new kK(this._elements.map(e=>UH(e,t)));return new k1(e.path,r)}isEqual(e){return e instanceof Uz&&Ce(this._elements,e._elements)}}class Uq extends UI{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=UU(this,e,!0),r=new kQ(this._elements.map(e=>UH(e,t)));return new k1(e.path,r)}isEqual(e){return e instanceof Uq&&Ce(this._elements,e._elements)}}class U$ extends UI{constructor(e,t){super(e),this._operand=t}_toFieldTransform(e){let t=new kX(e.serializer,kU(e.serializer,this._operand));return new k1(e.path,t)}isEqual(e){return e instanceof U$&&this._operand===e._operand}}function UG(e,t,r,n){let i=e.createContext(1,t,r);U1("Data must be an object, but it was:",i,n);let s=[],a=Ao.empty();return OH(n,(e,n)=>{let o=U6(t,e,r);n=Ci(n);let l=i.childContextForFieldPath(o);if(n instanceof UF)s.push(o);else{let e=UH(n,l);null!=e&&(s.push(o),a.set(o,e))}}),new UN(a,new O4(s),i.fieldTransforms)}function UW(e,t,r,n,i,s){let a=e.createContext(1,t,r),o=[U2(t,n,r)],l=[i];if(s.length%2!=0)throw new xN(xD.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(U2(t,s[e])),l.push(s[e+1]);let u=[],c=Ao.empty();for(let e=o.length-1;e>=0;--e)if(!U5(u,o[e])){let t=o[e],r=l[e];r=Ci(r);let n=a.childContextForFieldPath(t);if(r instanceof UF)u.push(t);else{let e=UH(r,n);null!=e&&(u.push(t),c.set(t,e))}}return new UN(c,new O4(u),a.fieldTransforms)}function UK(e,t,r,n=!1){return UH(r,e.createContext(n?4:3,t))}function UH(e,t){if(U0(e=Ci(e)))return U1("Unsupported field value:",t,e),UQ(e,t);if(e instanceof UI)return UX(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),!(e instanceof Array))return UJ(e,t);if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return UY(e,t)}function UQ(e,t){let r={};return OY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):OH(e,(e,n)=>{let i=UH(n,t.childContextForField(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function UY(e,t){let r=[],n=0;for(let i of e){let e=UH(i,t.childContextForArray(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}function UX(e,t){if(!UP(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}function UJ(e,t){if(null===(e=Ci(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kU(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=xX.fromDate(e);return{timestampValue:RX(t.serializer,r)}}else if(e instanceof xX){let r=new xX(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:RX(t.serializer,r)}}else if(e instanceof UA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};else if(e instanceof U_)return{bytesValue:RZ(t.serializer,e._byteString)};else if(e instanceof Uh){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:R3(e.firestore._databaseId||t.databaseId,e._key.path)}}else if(e instanceof Uk)return UZ(e,t);else throw t.createError(`Unsupported field value: ${Fx(e)}`)}function UZ(e,t){return{mapValue:{fields:{[Iw]:{stringValue:IC},[Ix]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return kB(t.serializer,e)})}}}}}}function U0(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof xX)&&!(e instanceof UA)&&!(e instanceof U_)&&!(e instanceof Uh)&&!(e instanceof UI)&&!(e instanceof Uk)}function U1(e,t,r){if(!U0(r)||!FC(r)){let n=Fx(r);if("an object"===n)throw t.createError(e+" a custom object");throw t.createError(e+" "+n)}}function U2(e,t,r){if((t=Ci(t))instanceof UO)return t._internalPath;if("string"==typeof t)return U6(e,t);throw U4("Field path arguments must be of type string or ",e,!1,void 0,r)}let U3=RegExp("[~\\*/\\[\\]]");function U6(e,t,r){if(t.search(U3)>=0)throw U4(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new UO(...t.split("."))._internalPath}catch(n){throw U4(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function U4(e,t,r,n,i){let s=n&&!n.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new xN(xD.INVALID_ARGUMENT,o+e+l)}function U5(e,t){return e.some(e=>e.isEqual(t))}class U8{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Uh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let e=new U7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}}}get(e){if(this._document){let t=this._document.data.field(U9("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class U7 extends U8{data(){return super.data()}}function U9(e,t){return"string"==typeof t?U6(e,t):t instanceof UO?t._internalPath:t._delegate._internalPath}class Ve{}class Vt extends Ve{}class Vr extends Vt{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Vr(e,t,r)}_apply(e){let t=this._parse(e);return Vm(e._query,t),new Ud(e.firestore,e.converter,ka(e._query,t))}_parse(e){let t=UL(e.firestore);return Vu(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Vn extends Ve{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vn(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:AT.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(Vy(e._query,t),new Ud(e.firestore,e.converter,ka(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Vi extends Vt{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vi(e,t)}_apply(e){let t=Vc(e._query,this._field,this._direction);return new Ud(e.firestore,e.converter,ko(e._query,t))}}class Vs extends Vt{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Vs(e,t,r)}_apply(e){return new Ud(e.firestore,e.converter,kl(e._query,this._limit,this._limitType))}}class Va extends Vt{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Va(e,t,r)}_apply(e){let t=Vl(e,this.type,this._docOrFields,this._inclusive);return new Ud(e.firestore,e.converter,ku(e._query,t))}}class Vo extends Vt{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Vo(e,t,r)}_apply(e){let t=Vl(e,this.type,this._docOrFields,this._inclusive);return new Ud(e.firestore,e.converter,kc(e._query,t))}}function Vl(e,t,r,n){if(r[0]=Ci(r[0]),r[0]instanceof U8)return Vd(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=UL(e.firestore);return Vh(e._query,e.firestore._databaseId,i,t,r,n)}}function Vu(e,t,r,n,i,s,a){let o;if(i.isKeyField())if("array-contains"===s||"array-contains-any"===s)throw new xN(xD.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);else if("in"===s||"not-in"===s){Vp(a,s);let t=[];for(let r of a)t.push(Vf(n,e,r));o={arrayValue:{values:t}}}else o=Vf(n,e,a);else("in"===s||"not-in"===s||"array-contains-any"===s)&&Vp(a,s),o=UK(r,t,a,"in"===s||"not-in"===s);return Aw.create(i,s,o)}function Vc(e,t,r){if(null!==e.startAt)throw new xN(xD.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new xN(xD.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Am(t,r)}function Vd(e,t,r,n,i){if(!n)throw new xN(xD.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of kr(e))if(r.field.isKeyField())s.push(I1(t,n.key));else{let e=n.data.field(r.field);if(Iu(e))throw new xN(xD.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==e)s.push(e);else{let e=r.field.canonicalString();throw new xN(xD.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}}return new Ad(s,i)}function Vh(e,t,r,n,i,s){let a=e.explicitOrderBy;if(i.length>a.length)throw new xN(xD.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let o=[];for(let s=0;s<i.length;s++){let l=i[s];if(a[s].field.isKeyField()){if("string"!=typeof l)throw new xN(xD.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!kt(e)&&-1!==l.indexOf("/"))throw new xN(xD.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(x1.fromString(l));if(!x6.isDocumentKey(r))throw new xN(xD.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new x6(r);o.push(I1(t,i))}else{let e=UK(r,n,l);o.push(e)}}return new Ad(o,s)}function Vf(e,t,r){if("string"==typeof(r=Ci(r))){if(""===r)throw new xN(xD.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kt(t)&&-1!==r.indexOf("/"))throw new xN(xD.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(x1.fromString(r));if(!x6.isDocumentKey(n))throw new xN(xD.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return I1(e,new x6(n))}if(r instanceof Uh)return I1(e,r._key);throw new xN(xD.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fx(r)}.`)}function Vp(e,t){if(!Array.isArray(e)||0===e.length)throw new xN(xD.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Vg(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function Vm(e,t){let r=Vv(e.filters,Vg(t.op));if(null!==r)if(r===t.op)throw new xN(xD.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`);else throw new xN(xD.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}function Vy(e,t){let r=e;for(let e of t.getFlattenedFilters())Vm(r,e),r=ka(r,e)}function Vv(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}class Vb{convertValue(e,t="none"){switch(IO(e)){case 0:return null;case 1:return e.booleanValue;case 2:return In(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xA()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return OH(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new Uk(null==(n=null==(r=null==(t=e.fields)?void 0:t[Ix].arrayValue)?void 0:r.values)?void 0:n.map(e=>In(e.doubleValue)))}convertGeoPoint(e){return new UA(In(e.latitude),In(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Id(e);if(null==r)return null;return this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ih(e));default:return null}}convertTimestamp(e){let t=Ir(e);return new xX(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=x1.fromString(e);xk(D2(r));let n=new Ig(r.get(1),r.get(3)),i=new x6(r.popFirst(5));return n.isEqual(t)||x_(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function VS(e,t,r){let n;return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class Vw extends Vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new U_(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Uh(this.firestore,null,t)}}function VT(e,t){if("object"!=typeof e||null===e)return!1;let r=e;for(let e of t)if(e in r&&"function"==typeof r[e])return!0;return!1}class VE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class VC extends U8{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);{let t=new Vx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}}}get(e,t={}){if(this._document){let r=this._document.data.field(U9("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Vx extends VC{data(e={}){return super.data(e)}}function V_(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new Vx(e._firestore,e._userDataWriter,r.doc.key,r.doc,new VE(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new Vx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:VO(t.type),doc:n,oldIndex:i,newIndex:s}})}}function VO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xA()}}class VI extends Vb{constructor(e){super(),this.firestore=e}convertBytes(e){return new U_(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Uh(this.firestore,null,t)}}function VA(e,t,r){return new Ux(t,new VI(e),r)}class Vk{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Fv.provider,this._offlineComponentProvider={build:t=>new Fm(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function VR(e){return new Vk(null==e?void 0:e.forceOwnership)}function VD(e,t){if((e=Ci(e)).firestore===t)return e;throw new xN(xD.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.")}class VN{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=UL(e)}get(e){let t=VD(e,this._firestore),r=new Vw(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return xA();let n=e[0];if(n.isFoundDocument())return new U8(this._firestore,r,n.key,n,t.converter);if(n.isNoDocument())return new U8(this._firestore,r,t._key,null,t.converter);throw xA()})}set(e,t,r){let n=VD(e,this._firestore),i=VS(n.converter,t,r),s=UB(this._dataReader,"Transaction.set",n._key,i,null!==n.converter,r);return this._transaction.set(n._key,s),this}update(e,t,r,...n){let i,s=VD(e,this._firestore);return i="string"==typeof(t=Ci(t))||t instanceof UO?UW(this._dataReader,"Transaction.update",s._key,t,r,n):UG(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){let t=VD(e,this._firestore);return this._transaction.delete(t._key),this}}function VP(e){try{return JSON.parse(e)}catch(e){throw new xN(xD.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}function VM(e,t){if("string"!=typeof e[t])throw new xN(xD.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}new WeakMap;class Vj{constructor(){this.existenceFilterMismatchCallbacksById=new Map}static get instance(){return VL||Rx(VL=new Vj),VL}notifyOnExistenceFilterMismatch(e){this.existenceFilterMismatchCallbacksById.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.existenceFilterMismatchCallbacksById;return r.set(t,e),()=>r.delete(t)}}let VL=null;UT("node");let VB={projectId:"bybit-balance-view",appId:"1:701023944234:web:fc234862537d441eae0d53",storageBucket:"bybit-balance-view.firebasestorage.app",apiKey:"AIzaSyBTKk45FMy6sGdeErxwTfx8gP_Upz1oqKY",authDomain:"bybit-balance-view.firebaseapp.com",measurementId:"",messagingSenderId:"701023944234"};function VF(){let[e,t]=(0,p.useState)([]),[r,n]=(0,p.useState)([]),[i,s]=(0,p.useState)(!0),{toast:a}=(0,ED.dj)(),o=(0,p.useRef)(null);return(0,p.useCallback)(async()=>{try{let e=await ER();if(!e?.length){i&&s(!1);return}t(e)}catch(e){console.error("Data fetching error:",e),a({variant:"destructive",title:"Data Error",description:"Could not fetch chart data."})}finally{i&&(s(!1),o.current&&(a({id:o.current,variant:"default",title:"✅ Chart Loaded",description:"Now listening for real-time signals."}),o.current=null))}},[a,i]),(0,f.jsxs)("div",{className:"grid gap-8",children:[(0,f.jsxs)(y,{className:"shadow-lg",children:[(0,f.jsx)(v,{children:(0,f.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,f.jsxs)("div",{children:[(0,f.jsxs)(b,{className:"flex items-center gap-2",children:[(0,f.jsx)(EI,{className:"h-6 w-6"}),"DOGE/USDT Real-Time Signals"]}),(0,f.jsx)(S,{children:"Algorithmic signals using enhanced WaveTrend strategy with volume confirmation"})]})})}),(0,f.jsx)(w,{children:i?(0,f.jsx)(EA,{className:"h-[400px] w-full"}):(0,f.jsx)(El,{data:e,signals:r})})]}),(0,f.jsx)(E_,{signals:r})]})}function VU(){return(0,f.jsxs)("main",{className:"flex min-h-screen w-full flex-col items-start bg-background p-4 md:p-8",children:[(0,f.jsx)("div",{className:"w-full flex items-center justify-between mb-6",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-primary",children:[(0,f.jsx)("path",{d:"M12 2L2 7V17L12 22L22 17V7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M2 7L12 12L22 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,f.jsx)("path",{d:"M12 12V22",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,f.jsx)("h1",{className:"text-xl font-bold text-foreground",children:"Bybit Signal Engine"})]})}),(0,f.jsx)("div",{className:"w-full max-w-7xl mx-auto",children:(0,f.jsx)(VF,{})})]})}Uv(C3().length?C2():C1(VB))},66713:(e,t,r)=>{var n=r(3105),i=r(34117),s=r(48385);e.exports=function(e){return i(e)?s(e):n(e)}},66771:(e,t,r)=>{"use strict";var n=e.exports=r(89374);n.build="full",n.tokenize=r(60158),n.parse=r(27408),n.common=r(34346),n.Root._configure(n.Type,n.parse,n.common)},66827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;let n=r(91645),i=r(18155),s=r(71271),a=r(43356),o=r(17061),l=r(61480);function u(e){return{channel_id:e.id,name:e.name}}function c(e){return{subchannel_id:e.id,name:e.name}}function d(e){return{server_id:e.id}}function h(e){return{socket_id:e.id,name:e.name}}let f=32;class p{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(null==r?void 0:r.kind)==="channel"?r:void 0,childSubchannel:(null==r?void 0:r.kind)==="subchannel"?r:void 0}),this.events.length>=2*f&&(this.events=this.events.slice(f)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:O(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:O(e.timestamp),channel_ref:e.childChannel?u(e.childChannel):null,subchannel_ref:e.childSubchannel?c(e.childSubchannel):null}))}}}t.ChannelzTrace=p;class g{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!=(t=this.channelChildren.get(e.id))?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!=(r=this.subchannelChildren.get(e.id))?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!=(n=this.socketChildren.get(e.id))?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t)}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t))}}}getChildLists(){let e=[];for(let{ref:t}of this.channelChildren.values())e.push(t);let t=[];for(let{ref:e}of this.subchannelChildren.values())t.push(e);let r=[];for(let{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=g;class m{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=m;let y=1;function v(){return y++}let b=[],S=[],w=[],T=[];function E(e){let t=Number.parseInt(e,16);return[t/256|0,t%256]}function C(e){return""===e?[]:[].concat(...e.split(":").map(e=>E(e)))}function x(e){if((0,n.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))));if(!(0,n.isIPv6)(e))return null;{let t,r,n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));let i=Buffer.from(C(t)),s=Buffer.from(C(r)),a=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,a,s])}}function _(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function O(e){if(!e)return null;let t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function I(e){let t=e.getInfo();return{ref:u(e.ref),data:{target:t.target,state:_(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:O(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>u(e)),subchannel_ref:t.children.subchannels.map(e=>c(e))}}function A(e,t){let r=Number.parseInt(e.request.channel_id),n=b[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});t(null,{channel:I(n)})}function k(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_channel_id);for(;i<b.length;i++){let e=b[i];if(void 0!==e&&(n.push(I(e)),n.length>=r))break}t(null,{channel:n,end:i>=w.length})}function R(e){let t=e.getInfo();return{ref:d(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:O(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>h(e))}}function D(e,t){let r=Number.parseInt(e.request.server_id),n=w[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});t(null,{server:R(n)})}function N(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_server_id);for(;i<w.length;i++){let e=w[i];if(void 0!==e&&(n.push(R(e)),n.length>=r))break}t(null,{server:n,end:i>=w.length})}function P(e,t){let r=Number.parseInt(e.request.subchannel_id),n=S[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});let i=n.getInfo();t(null,{subchannel:{ref:c(n.ref),data:{target:i.target,state:_(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:O(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(e=>h(e))}})}function M(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!=(t=x(e.host))?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function j(e,t){var r,n,i,a,o;let l=Number.parseInt(e.request.socket_id),u=T[l];if(void 0===u)return void t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});let c=u.getInfo(),d=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!=(r=c.security.cipherSuiteStandardName)?r:void 0,other_name:null!=(n=c.security.cipherSuiteOtherName)?n:void 0,local_certificate:null!=(i=c.security.localCertificate)?i:void 0,remote_certificate:null!=(a=c.security.remoteCertificate)?a:void 0}}:null;t(null,{socket:{ref:h(u.ref),local:c.localAddress?M(c.localAddress):null,remote:c.remoteAddress?M(c.remoteAddress):null,remote_name:null!=(o=c.remoteName)?o:void 0,security:d,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:O(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:O(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:O(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:O(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}}})}function L(e,t){let r=Number.parseInt(e.request.server_id),n=w[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});let i=Number.parseInt(e.request.start_socket_id),a=Number.parseInt(e.request.max_results),o=n.getInfo().sessionChildren.sockets.sort((e,t)=>e.id-t.id),l=[],u=0;for(;u<o.length&&(!(o[u].id>=i)||(l.push(h(o[u])),!(l.length>=a)));u++);t(null,{socket_ref:l,end:u>=o.length})}function B(){return{GetChannel:A,GetTopChannels:k,GetServer:D,GetServers:N,GetSubchannel:P,GetSocket:j,GetServerSockets:L}}t.registerChannelzChannel=function(e,t,r){let n=v(),i={id:n,name:e,kind:"channel"};return r&&(b[n]={ref:i,getInfo:t}),i},t.registerChannelzSubchannel=function(e,t,r){let n=v(),i={id:n,name:e,kind:"subchannel"};return r&&(S[n]={ref:i,getInfo:t}),i},t.registerChannelzServer=function(e,t){let r=v(),n={id:r,kind:"server"};return t&&(w[r]={ref:n,getInfo:e}),n},t.registerChannelzSocket=function(e,t,r){let n=v(),i={id:n,name:e,kind:"socket"};return r&&(T[n]={ref:i,getInfo:t}),i},t.unregisterChannelzRef=function(e){switch(e.kind){case"channel":delete b[e.id];return;case"subchannel":delete S[e.id];return;case"server":delete w[e.id];return;case"socket":delete T[e.id];return}},t.getChannelzHandlers=B;let F=null;function U(){if(F)return F;let e=(0,r(97587).Yi)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return F=(0,l.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service}t.getChannelzServiceDefinition=U,t.setup=function(){(0,o.registerAdminService)(U,B)}},66837:(e,t,r)=>{var n=r(58141);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},66930:(e,t,r)=>{var n=r(27669),i=r(28837),s=r(94388),a=r(35800),o=r(58744);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},67009:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},67200:(e,t,r)=>{var n=r(66930),i=r(37575),s=r(75411),a=r(34746),o=r(25118),l=r(30854);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=s,u.prototype.get=a,u.prototype.has=o,u.prototype.set=l,e.exports=u},67249:(e,t,r)=>{Promise.resolve().then(r.bind(r,21204))},67359:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},67367:(e,t,r)=>{var n=r(99525),i=r(22),s=r(75847),a=r(40542),o=r(7383);e.exports=function(e,t,r){var l=a(e)?n:s;return r&&o(e,t,r)&&(t=void 0),l(e,i(t,3))}},67554:(e,t,r)=>{var n=r(99114);e.exports=r(56506)(n)},67619:(e,t,r)=>{var n=r(40542),i=r(49227),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||i(e))||a.test(e)||!s.test(e)||null!=t&&e in Object(t)}},67865:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},68037:e=>{"use strict";e.exports={}},68474:(e,t,r)=>{"use strict";e.exports=r(66771)},68655:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},68790:(e,t,r)=>{"use strict";e.exports=r(65239).vendored["react-rsc"].ReactDOM},69226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;let n=r(1014),i=r(21858),s=r(40649),a=r(81630),o=r(34631),l=r(1014),u=r(59571),c=r(38717),d=r(79551),h=r(33663),f="proxy";function p(e){l.trace(i.LogVerbosity.DEBUG,f,e)}function g(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new d.URL(t)}catch(e){return(0,n.log)(i.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(i.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(i.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);let a=e.hostname,o=e.port;""===o&&(o="80");let l={address:`${a}:${o}`};return s&&(l.creds=s),p("Proxy server "+l.address+" set by environment variable "+r),l}function m(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return(e||(e=process.env.no_proxy,t="no_proxy"),e)?(p("No proxy server list set by environment variable "+t),e.split(",")):[]}t.mapProxyName=function(e,t){var r;let n={target:e,extraOptions:{}};if((null!=(r=t["grpc.enable_http_proxy"])?r:1)===0||"unix"===e.scheme)return n;let i=g();if(!i.address)return n;let s=(0,c.splitHostPort)(e.path);if(!s)return n;let a=s.host;for(let t of m())if(t===a)return p("Not using proxy for target in no_proxy list: "+(0,c.uriToString)(e)),n;let o={"grpc.http_connect_target":(0,c.uriToString)(e)};return i.creds&&(o["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:o}},t.getProxiedConnection=function(e,t,r){var l;if(!("grpc.http_connect_target"in t))return Promise.resolve({});let d=t["grpc.http_connect_target"],f=(0,c.parseUri)(d);if(null===f)return Promise.resolve({});let g=(0,c.splitHostPort)(f.path);if(null===g)return Promise.resolve({});let m=`${g.host}:${null!=(l=g.port)?l:h.DEFAULT_PORT}`,y={method:"CONNECT",path:m},v={Host:m};(0,u.isTcpSubchannelAddress)(e)?(y.host=e.host,y.port=e.port):y.socketPath=e.path,"grpc.http_connect_creds"in t&&(v["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),y.headers=v;let b=(0,u.subchannelAddressToString)(e);return p("Using proxy "+b+" to connect to "+y.path),new Promise((e,t)=>{let l=a.request(y);l.once("connect",(a,u,d)=>{var h;if(l.removeAllListeners(),u.removeAllListeners(),200===a.statusCode)if(p("Successfully connected to "+y.path+" through proxy "+b),"secureContext"in r){let n=(0,s.getDefaultAuthority)(f),i=(0,c.splitHostPort)(n),a=null!=(h=null==i?void 0:i.host)?h:n,l=o.connect(Object.assign({host:a,servername:a,socket:u},r),()=>{p("Successfully established a TLS connection to "+y.path+" through proxy "+b),e({socket:l,realTarget:f})});l.on("error",e=>{p("Failed to establish a TLS connection to "+y.path+" through proxy "+b+" with error "+e.message),t()})}else p("Successfully established a plaintext connection to "+y.path+" through proxy "+b),e({socket:u,realTarget:f});else(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to "+y.path+" through proxy "+b+" with status "+a.statusCode),t()}),l.once("error",e=>{l.removeAllListeners(),(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to proxy "+b+" with error "+e.message),t()}),l.end()})}},69433:(e,t,r)=>{e.exports=r(5566)("toUpperCase")},69619:e=>{var t=0x1fffffffffffff;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}},69691:(e,t,r)=>{var n=r(41157),i=r(99114),s=r(22);e.exports=function(e,t){var r={};return t=s(t,3),i(e,function(e,i,s){n(r,i,t(e,i,s))}),r}},70151:(e,t,r)=>{var n=r(85718);e.exports=function(){return n.Date.now()}},70222:(e,t,r)=>{var n=r(79474),i=Object.prototype,s=i.hasOwnProperty,a=i.toString,o=n?n.toStringTag:void 0;e.exports=function(e){var t=s.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[o]=r:delete e[o]),i}},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(31658);let i=async e=>{let t={type:"image/x-icon",sizes:"16x16"},r=(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico");return[{...t,url:r+""}]}},70554:(e,t)=>{"use strict";function r(e){return e.endsWith("/route")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isAppRouteRoute",{enumerable:!0,get:function(){return r}})},70603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;let n=r(73496),i=r(34631),s=r(66827),a=r(71271),o=r(16239),l=r(31359),u=r(5674),c=r(43356),d=r(26786),h=r(91645),f=r(93474),p=r(81260),g="transport",m="transport_flowctrl",y=r(28592).rE,{HTTP2_HEADER_AUTHORITY:v,HTTP2_HEADER_CONTENT_TYPE:b,HTTP2_HEADER_METHOD:S,HTTP2_HEADER_PATH:w,HTTP2_HEADER_TE:T,HTTP2_HEADER_USER_AGENT:E}=n.constants,C=2e4,x=Buffer.from("too_many_pings","ascii");class _{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=C,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,c.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${y}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=1===r["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(e,t,r)=>{let i=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(x)&&(i=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(i)}),e.once("error",e=>{this.trace("connection closed with error "+e.message)}),l.isTracerEnabled(g)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let n,i=this.session.socket,s=i.remoteAddress?(0,c.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,a=i.localAddress?(0,c.stringToSubchannelAddress)(i.localAddress,i.localPort):null;if(this.session.encrypted){let t=i,r=t.getCipher(),s=t.getCertificate(),a=t.getPeerCertificate();n={cipherSuiteStandardName:null!=(e=r.standardName)?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:a&&"raw"in a?a.raw:null}}else n=null;return{remoteAddress:s,localAddress:a,security:n,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!=(t=this.session.state.localWindowSize)?t:null,remoteFlowControlWindow:null!=(r=this.session.state.remoteWindowSize)?r:null}}trace(e){l.trace(a.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(a.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null==(t=(e=this.keepaliveTimeoutId).unref)||t.call(e));try{this.session.ping((e,t,r)=>{e&&(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch(e){this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimerId||this.keepaliveTimeoutId||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=null==(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,n,i){let s,a,o,l=e.toHttp2Headers();l[v]=t,l[E]=this.userAgent,l[b]="application/grpc",l[S]="POST",l[w]=r,l[T]="trailers";try{s=this.session.request(l)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null==(e=i.addMessageSent)||e.call(i)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null==(e=i.addMessageReceived)||e.call(i)},onCallEnd:e=>{var t;null==(t=i.onCallEnd)||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null==(t=i.onStreamEnd)||t.call(i,e)}}):a={addMessageSent:()=>{var e;null==(e=i.addMessageSent)||e.call(i)},addMessageReceived:()=>{var e;null==(e=i.addMessageReceived)||e.call(i)},onCallEnd:e=>{var t;null==(t=i.onCallEnd)||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;null==(t=i.onStreamEnd)||t.call(i,e)}},o=new f.Http2SubchannelCall(s,a,n,this,(0,p.getNextCallNumber)()),this.addActiveCall(o),o}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,s.unregisterChannelzRef)(this.channelzRef)}}class O{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){l.trace(a.LogVerbosity.DEBUG,g,(0,d.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise((a,o)=>{var l,f,p;let g;s.realTarget?(g=(0,d.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,d.uriToString)(s.realTarget))):(g=null,this.trace("creating HTTP/2 session to "+(0,c.subchannelAddressToString)(e)));let m=(0,u.getDefaultAuthority)(null!=(l=s.realTarget)?l:this.channelTarget),y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?y.maxSessionMemory=r["grpc-node.max_session_memory"]:y.maxSessionMemory=Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),y.servername=e}else{let e=null!=(p=null==(f=(0,d.splitHostPort)(m))?void 0:f.host)?p:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:h.connect(e);y=Object.assign(Object.assign(Object.assign({},y),e),{enableTrace:1===r["grpc-node.tls_enable_trace"]});let b=n.connect(v+m,y);this.session=b;let S="Failed to connect";b.unref(),b.once("connect",()=>{b.removeAllListeners(),a(new _(b,e,r,g)),this.session=null}),b.once("close",()=>{this.session=null,setImmediate(()=>{o(`${S} (${new Date().toISOString()})`)})}),b.once("error",e=>{S=e.message,this.trace("connection failed with error "+S)})})}connect(e,t,r){var n,s;if(this.isShutdown)return Promise.reject();let a=t._getConnectionOptions()||{};if("secureContext"in a){if(a.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];a.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),a.servername=e}else if("grpc.http_connect_target"in r){let e=(0,u.getDefaultAuthority)(null!=(n=(0,d.parseUri)(r["grpc.http_connect_target"]))?n:{path:"localhost"}),t=(0,d.splitHostPort)(e);a.servername=null!=(s=null==t?void 0:t.host)?s:e}r["grpc-node.tls_enable_trace"]&&(a.enableTrace=!0)}return(0,o.getProxiedConnection)(e,r,a).then(n=>this.createSession(e,t,r,n))}shutdown(){var e;this.isShutdown=!0,null==(e=this.session)||e.close(),this.session=null}}t.Http2SubchannelConnector=O},70830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{METADATA_BOUNDARY_NAME:function(){return r},OUTLET_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return n}});let r="__next_metadata_boundary__",n="__next_viewport_boundary__",i="__next_outlet_boundary__"},71037:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={}));class n{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0,i=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{let e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,i.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){let e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,i.push(t)}break;default:throw Error("Unexpected read state")}return i}}t.StreamDecoder=n},71140:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return(r||(t=i(t)),n(t))?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},71202:(e,t,r)=>{"use strict";e.exports=s;var n=r(64824);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(93107);function s(e,t,r,s,a,o,l,u,c){if(i.isObject(a)?(l=a,a=o=void 0):i.isObject(o)&&(l=o,o=void 0),!(void 0===t||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=s,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=c}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},71271:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n||(t.LogVerbosity=n={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(i||(t.Propagate=i={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},71309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;let n=r(86239),i=r(10504),s=r(18155),a=r(5674),o=r(72910),l=r(50268),u=r(71271),c=r(86777),d=r(31359),h=r(71271),f=r(26786),p=r(72309),g="resolving_load_balancer";function m(e){d.trace(h.LogVerbosity.DEBUG,g,e)}let y=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function v(e,t,r,n){for(let i of r.name)switch(n){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===e&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===e&&i.method===t)return!0}return!1}function b(e,t,r,n){for(let i of r)if(v(e,t,i,n))return i;return null}function S(e){return function(t,r){var n,i;let s=t.split("/").filter(e=>e.length>0),a=null!=(n=s[0])?n:"",o=null!=(i=s[1])?i:"";if(e&&e.methodConfig)for(let t of y){let r=b(a,o,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}}class w{constructor(e,t,r,d,h){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=d,this.onFailedResolution=h,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,i.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new o.QueuePicker(this)),this.childLoadBalancer=new p.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(m("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,a.createResolver)(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var a;this.backoffTimeout.stop(),this.backoffTimeout.reset();let o=null;null===t?null===r?(this.previousServiceConfig=null,o=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):o=this.previousServiceConfig:(o=t,this.previousServiceConfig=t);let l=null!=(a=null==o?void 0:o.loadBalancingConfig)?a:[],d=(0,n.getFirstUsableConfig)(l,!0);if(null===d)return void this.handleResolutionFailure({code:u.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new c.Metadata});this.childLoadBalancer.updateAddressList(e,d,s);let h=null!=o?o:this.defaultServiceConfig;this.onSuccessfulResolution(h,null!=i?i:S(h))},onError:e=>{this.handleResolutionFailure(e)}},r);let f={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},f),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new o.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){m((0,f.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new o.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new o.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=w},71437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return i},extractInterceptionRouteInformation:function(){return a},isInterceptionRouteAppPath:function(){return s}});let n=r(74722),i=["(..)(..)","(.)","(..)","(...)"];function s(e){return void 0!==e.split("/").find(e=>i.find(t=>e.startsWith(t)))}function a(e){let t,r,s;for(let n of e.split("/"))if(r=i.find(e=>n.startsWith(e))){[t,s]=e.split(r,2);break}if(!t||!r||!s)throw Object.defineProperty(Error("Invalid interception route: "+e+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=(0,n.normalizeAppPath)(t),r){case"(.)":s="/"===t?"/"+s:t+"/"+s;break;case"(..)":if("/"===t)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});s=t.split("/").slice(0,-1).concat(s).join("/");break;case"(...)":s="/"+s;break;case"(..)(..)":let a=t.split("/");if(a.length<=2)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});s=a.slice(0,-2).concat(s).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:s}}},71777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(91645),i=r(21858),s=r(66284),a=r(40649),o=r(38717),l=r(1014),u="ip_resolver";function c(e){l.trace(i.LogVerbosity.DEBUG,u,e)}let d="ipv4",h="ipv6",f=443;class p{constructor(e,t,r){var a;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,c("Resolver constructed for target "+(0,o.uriToString)(e));let l=[];if(e.scheme!==d&&e.scheme!==h){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}for(let t of e.path.split(",")){let r=(0,o.splitHostPort)(t);if(null===r||e.scheme===d&&!(0,n.isIPv4)(r.host)||e.scheme===h&&!(0,n.isIPv6)(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:null!=(a=r.port)?a:f})}this.addresses=l,c("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}t.setup=function(){(0,a.registerResolver)(d,p),(0,a.registerResolver)(h,p)}},71960:e=>{e.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},71967:(e,t,r)=>{var n=r(15871);e.exports=function(e,t){return n(e,t)}},72309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;let n=r(86239),i=r(18155),s="child_load_balancer_helper";class a{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING)return;null==(r=this.parent.currentChild)||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;let t=null!=(e=this.parent.pendingChild)?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,i=this.pendingChild)}else i=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return s}}t.ChildLoadBalancerHandler=a},72374:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=function(e,t){var r,n,i,s,a,o,l,u,c,d;return{createSubchannel:null!=(n=null==(r=t.createSubchannel)?void 0:r.bind(t))?n:e.createSubchannel.bind(e),updateState:null!=(s=null==(i=t.updateState)?void 0:i.bind(t))?s:e.updateState.bind(e),requestReresolution:null!=(o=null==(a=t.requestReresolution)?void 0:a.bind(t))?o:e.requestReresolution.bind(e),addChannelzChild:null!=(u=null==(l=t.addChannelzChild)?void 0:l.bind(t))?u:e.addChannelzChild.bind(e),removeChannelzChild:null!=(d=null==(c=t.removeChannelzChild)?void 0:c.bind(t))?d:e.removeChannelzChild.bind(e)}};let r={},n=null;t.registerLoadBalancerType=function(e,t,n){r[e]={LoadBalancer:t,LoadBalancingConfig:n}},t.registerDefaultLoadBalancerType=function(e){n=e},t.createLoadBalancer=function(e,t){let n=e.getLoadBalancerName();return n in r?new r[n].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in r},t.getFirstUsableConfig=function(e,t=!1){for(let t of e)if(t.getLoadBalancerName()in r)return t;return t&&n?new r[n].LoadBalancingConfig:null},t.validateLoadBalancingConfig=function(e){if(null===e||"object"!=typeof e)throw Error("Load balancing config must be an object");let t=Object.keys(e);if(1!==t.length)throw Error("Provided load balancing config has multiple conflicting entries");let n=t[0];if(n in r)return r[n].LoadBalancingConfig.createFromJson(e[n]);throw Error(`Unrecognized load balancing config name ${n}`)}},72741:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.shuffled=t.PickFirstLoadBalancingConfig=void 0;let n=r(72374),i=r(21574),s=r(17765),a=r(1014),o=r(21858),l="pick_first";function u(e){a.trace(o.LogVerbosity.DEBUG,l,e)}let c="pick_first",d=250;class h{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return c}toJsonObject(){return{[c]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new h(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=h;class f{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function p(e){let t=e.slice();for(let e=t.length-1;e>1;e--){let r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}t.shuffled=p;class g{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=i.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,n,i)=>{this.onSubchannelStateUpdate(e,t,r,i)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(i.ConnectivityState.READY,new f(this.currentPick)):0===this.children.length?this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){for(let{subchannel:e}of(this.stickyTransientFailureMode=!0,this.children))e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,n){var s;if(null==(s=this.currentPick)?void 0:s.realSubchannelEquals(e)){r!==i.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[t,s]of this.children.entries())if(e.realSubchannelEquals(s.subchannel)){r===i.ConnectivityState.READY&&this.pickSubchannel(s.subchannel),r===i.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=!0,n&&(this.lastError=n),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),s.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let e=r.subchannel.getConnectivityState();if(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.CONNECTING)return void this.startConnecting(t)}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===i.ConnectivityState.IDLE&&(u("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null==(t=this.children[e])||t.subchannel.startConnecting()})),this.connectionDelayTimeout=null==(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},d)).unref)?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(u("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){u(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,{}),hasReportedTransientFailure:!1}));for(let{subchannel:e}of t)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(let{subchannel:e}of(this.resetSubchannelList(),this.children=t,this.children))if(e.addConnectivityStateListener(this.subchannelStateListener),e.getConnectivityState()===i.ConnectivityState.READY)return void this.pickSubchannel(e);for(let e of this.children)e.subchannel.getConnectivityState()===i.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof h&&(t.getShuffleAddressList()&&(e=p(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===i.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return c}}t.PickFirstLoadBalancer=g,t.setup=function(){(0,n.registerLoadBalancerType)(c,g,h),(0,n.registerDefaultLoadBalancerType)(c)}},72910:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;let i=r(86777),s=r(71271);!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(n||(t.PickResultType=n={}));class a{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new i.Metadata},e)}pick(e){return{pickResultType:n.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}t.UnavailablePicker=a;class o{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:n.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}t.QueuePicker=o},73214:e=>{(()=>{"use strict";var t={491:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(223),i=r(172),s=r(930),a="context",o=new n.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,i.registerGlobal)(a,e,s.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,i.getGlobal)(a)||o}disable(){this._getContextManager().disable(),(0,i.unregisterGlobal)(a,s.DiagAPI.instance())}}t.ContextAPI=l},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(56),i=r(912),s=r(957),a=r(172),o="diag";class l{constructor(){function e(e){return function(...t){let r=(0,a.getGlobal)("diag");if(r)return r[e](...t)}}let t=this,r=(e,r={logLevel:s.DiagLogLevel.INFO})=>{var n,o,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(n=e.stack)?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let u=(0,a.getGlobal)("diag"),c=(0,i.createLogLevelDiagLogger)(null!=(o=r.logLevel)?o:s.DiagLogLevel.INFO,e);if(u&&!r.suppressOverrideMessage){let e=null!=(l=Error().stack)?l:"<failed to generate stacktrace>";u.warn(`Current logger will be overwritten from ${e}`),c.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,a.registerGlobal)("diag",c,t,!0)};t.setLogger=r,t.disable=()=>{(0,a.unregisterGlobal)(o,t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new l),this._instance}}t.DiagAPI=l},653:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(660),i=r(172),s=r(930),a="metrics";class o{constructor(){}static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(e){return(0,i.registerGlobal)(a,e,s.DiagAPI.instance())}getMeterProvider(){return(0,i.getGlobal)(a)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,i.unregisterGlobal)(a,s.DiagAPI.instance())}}t.MetricsAPI=o},181:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(172),i=r(874),s=r(194),a=r(277),o=r(369),l=r(930),u="propagation",c=new i.NoopTextMapPropagator;class d{constructor(){this.createBaggage=o.createBaggage,this.getBaggage=a.getBaggage,this.getActiveBaggage=a.getActiveBaggage,this.setBaggage=a.setBaggage,this.deleteBaggage=a.deleteBaggage}static getInstance(){return this._instance||(this._instance=new d),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(u,e,l.DiagAPI.instance())}inject(e,t,r=s.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=s.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(u,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(u)||c}}t.PropagationAPI=d},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(172),i=r(846),s=r(139),a=r(607),o=r(930),l="trace";class u{constructor(){this._proxyTracerProvider=new i.ProxyTracerProvider,this.wrapSpanContext=s.wrapSpanContext,this.isSpanContextValid=s.isSpanContextValid,this.deleteSpan=a.deleteSpan,this.getSpan=a.getSpan,this.getActiveSpan=a.getActiveSpan,this.getSpanContext=a.getSpanContext,this.setSpan=a.setSpan,this.setSpanContext=a.setSpanContext}static getInstance(){return this._instance||(this._instance=new u),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new i.ProxyTracerProvider}}t.TraceAPI=u},277:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(491),i=(0,r(780).createContextKey)("OpenTelemetry Baggage Key");function s(e){return e.getValue(i)||void 0}t.getBaggage=s,t.getActiveBaggage=function(){return s(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(i,t)},t.deleteBaggage=function(e){return e.deleteValue(i)}},993:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},830:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(930),i=r(993),s=r(830),a=n.DiagAPI.instance();t.createBaggage=function(e={}){return new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(a.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:s.baggageEntryMetadataSymbol,toString:()=>e}}},67:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0,t.context=r(491).ContextAPI.getInstance()},223:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(780);class i{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}t.NoopContextManager=i},780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let i=new r(t._currentContext);return i._currentContext.set(e,n),i},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},506:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0,t.diag=r(930).DiagAPI.instance()},56:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(172);class i{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return s("debug",this._namespace,e)}error(...e){return s("error",this._namespace,e)}info(...e){return s("info",this._namespace,e)}warn(...e){return s("warn",this._namespace,e)}verbose(...e){return s("verbose",this._namespace,e)}}function s(e,t,r){let i=(0,n.getGlobal)("diag");if(i)return r.unshift(t),i[e](...r)}t.DiagComponentLogger=i},972:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class n{constructor(){function e(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(let t=0;t<r.length;t++)this[r[t].n]=e(r[t].c)}}t.DiagConsoleLogger=n},912:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(957);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},957:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r=t.DiagLogLevel||(t.DiagLogLevel={}))},172:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(200),i=r(521),s=r(130),a=i.VERSION.split(".")[0],o=Symbol.for(`opentelemetry.js.api.${a}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var s;let a=l[o]=null!=(s=l[o])?s:{version:i.VERSION};if(!n&&a[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(a.version!==i.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${a.version} for ${e} does not match previously registered API v${i.VERSION}`);return r.error(t.stack||t.message),!1}return a[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${i.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null==(t=l[o])?void 0:t.version;if(n&&(0,s.isCompatible)(n))return null==(r=l[o])?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${i.VERSION}.`);let r=l[o];r&&delete r[e]}},130:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(521),i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function s(e){let t=new Set([e]),r=new Set,n=e.match(i);if(!n)return()=>!1;let s={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=s.prerelease)return function(t){return t===e};function a(e){return r.add(e),!1}function o(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(i);if(!n)return a(e);let l={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=l.prerelease||s.major!==l.major?a(e):0===s.major?s.minor===l.minor&&s.patch<=l.patch?o(e):a(e):s.minor<=l.minor?o(e):a(e)}}t._makeCompatibilityCheck=s,t.isCompatible=s(n.VERSION)},886:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0,t.metrics=r(653).MetricsAPI.getInstance()},901:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(r=t.ValueType||(t.ValueType={}))},102:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class i extends n{add(e,t){}}t.NoopCounterMetric=i;class s extends n{add(e,t){}}t.NoopUpDownCounterMetric=s;class a extends n{record(e,t){}}t.NoopHistogramMetric=a;class o{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=o;class l extends o{}t.NoopObservableCounterMetric=l;class u extends o{}t.NoopObservableGaugeMetric=u;class c extends o{}function d(){return t.NOOP_METER}t.NoopObservableUpDownCounterMetric=c,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new i,t.NOOP_HISTOGRAM_METRIC=new a,t.NOOP_UP_DOWN_COUNTER_METRIC=new s,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new u,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new c,t.createNoopMeter=d},660:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(102);class i{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=i,t.NOOP_METER_PROVIDER=new i},200:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46),t)},651:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:global},46:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(651),t)},939:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0,t.propagation=r(181).PropagationAPI.getInstance()},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0;class r{inject(e,t){}extract(e,t){return e}fields(){return[]}}t.NoopTextMapPropagator=r},194:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},845:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0,t.trace=r(997).TraceAPI.getInstance()},403:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(476);class i{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}t.NonRecordingSpan=i},614:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(491),i=r(607),s=r(403),a=r(139),o=n.ContextAPI.getInstance();class l{startSpan(e,t,r=o.active()){if(null==t?void 0:t.root)return new s.NonRecordingSpan;let n=r&&(0,i.getSpanContext)(r);return u(n)&&(0,a.isSpanContextValid)(n)?new s.NonRecordingSpan(n):new s.NonRecordingSpan}startActiveSpan(e,t,r,n){let s,a,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(s=t,l=r):(s=t,a=r,l=n);let u=null!=a?a:o.active(),c=this.startSpan(e,s,u),d=(0,i.setSpan)(u,c);return o.with(d,l,void 0,c)}}function u(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}t.NoopTracer=l},124:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(614);class i{getTracer(e,t,r){return new n.NoopTracer}}t.NoopTracerProvider=i},125:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=new(r(614)).NoopTracer;class i{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):n}}t.ProxyTracer=i},846:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(125),i=new(r(124)).NoopTracerProvider;class s{getTracer(e,t,r){var i;return null!=(i=this.getDelegateTracer(e,t,r))?i:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!=(e=this._delegate)?e:i}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)}}t.ProxyTracerProvider=s},996:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(r=t.SamplingDecision||(t.SamplingDecision={}))},607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(780),i=r(403),s=r(491),a=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(a)||void 0}function l(e,t){return e.setValue(a,t)}t.getSpan=o,t.getActiveSpan=function(){return o(s.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(a)},t.setSpanContext=function(e,t){return l(e,new i.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null==(t=o(e))?void 0:t.spanContext()}},325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(564),i=32,s=512,a=",",o="=";class l{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+o+this.get(t)),e),[]).join(a)}_parse(e){!(e.length>s)&&(this._internalState=e.split(a).reverse().reduce((e,t)=>{let r=t.trim(),i=r.indexOf(o);if(-1!==i){let s=r.slice(0,i),a=r.slice(i+1,t.length);(0,n.validateKey)(s)&&(0,n.validateValue)(a)&&e.set(s,a)}return e},new Map),this._internalState.size>i&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,i))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new l;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=l},564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,s=RegExp(`^(?:${n}|${i})$`),a=/^[ -~]{0,255}[!-~]$/,o=/,|=/;t.validateKey=function(e){return s.test(e)},t.validateValue=function(e){return a.test(e)&&!o.test(e)}},98:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(325);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},476:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(475);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},357:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r=t.SpanKind||(t.SpanKind={}))},139:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(476),i=r(403),s=/^([0-9a-f]{32})$/i,a=/^[0-9a-f]{16}$/i;function o(e){return s.test(e)&&e!==n.INVALID_TRACEID}function l(e){return a.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=o,t.isValidSpanId=l,t.isSpanContextValid=function(e){return o(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new i.NonRecordingSpan(e)}},847:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r=t.SpanStatusCode||(t.SpanStatusCode={}))},475:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r=t.TraceFlags||(t.TraceFlags={}))},521:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.6.0"}},r={};function n(e){var i=r[e];if(void 0!==i)return i.exports;var s=r[e]={exports:{}},a=!0;try{t[e].call(s.exports,s,s.exports,n),a=!1}finally{a&&delete r[e]}return s.exports}n.ab=__dirname+"/";var i={};(()=>{var e=i;Object.defineProperty(e,"__esModule",{value:!0}),e.trace=e.propagation=e.metrics=e.diag=e.context=e.INVALID_SPAN_CONTEXT=e.INVALID_TRACEID=e.INVALID_SPANID=e.isValidSpanId=e.isValidTraceId=e.isSpanContextValid=e.createTraceState=e.TraceFlags=e.SpanStatusCode=e.SpanKind=e.SamplingDecision=e.ProxyTracerProvider=e.ProxyTracer=e.defaultTextMapSetter=e.defaultTextMapGetter=e.ValueType=e.createNoopMeter=e.DiagLogLevel=e.DiagConsoleLogger=e.ROOT_CONTEXT=e.createContextKey=e.baggageEntryMetadataFromString=void 0;var t=n(369);Object.defineProperty(e,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return t.baggageEntryMetadataFromString}});var r=n(780);Object.defineProperty(e,"createContextKey",{enumerable:!0,get:function(){return r.createContextKey}}),Object.defineProperty(e,"ROOT_CONTEXT",{enumerable:!0,get:function(){return r.ROOT_CONTEXT}});var s=n(972);Object.defineProperty(e,"DiagConsoleLogger",{enumerable:!0,get:function(){return s.DiagConsoleLogger}});var a=n(957);Object.defineProperty(e,"DiagLogLevel",{enumerable:!0,get:function(){return a.DiagLogLevel}});var o=n(102);Object.defineProperty(e,"createNoopMeter",{enumerable:!0,get:function(){return o.createNoopMeter}});var l=n(901);Object.defineProperty(e,"ValueType",{enumerable:!0,get:function(){return l.ValueType}});var u=n(194);Object.defineProperty(e,"defaultTextMapGetter",{enumerable:!0,get:function(){return u.defaultTextMapGetter}}),Object.defineProperty(e,"defaultTextMapSetter",{enumerable:!0,get:function(){return u.defaultTextMapSetter}});var c=n(125);Object.defineProperty(e,"ProxyTracer",{enumerable:!0,get:function(){return c.ProxyTracer}});var d=n(846);Object.defineProperty(e,"ProxyTracerProvider",{enumerable:!0,get:function(){return d.ProxyTracerProvider}});var h=n(996);Object.defineProperty(e,"SamplingDecision",{enumerable:!0,get:function(){return h.SamplingDecision}});var f=n(357);Object.defineProperty(e,"SpanKind",{enumerable:!0,get:function(){return f.SpanKind}});var p=n(847);Object.defineProperty(e,"SpanStatusCode",{enumerable:!0,get:function(){return p.SpanStatusCode}});var g=n(475);Object.defineProperty(e,"TraceFlags",{enumerable:!0,get:function(){return g.TraceFlags}});var m=n(98);Object.defineProperty(e,"createTraceState",{enumerable:!0,get:function(){return m.createTraceState}});var y=n(139);Object.defineProperty(e,"isSpanContextValid",{enumerable:!0,get:function(){return y.isSpanContextValid}}),Object.defineProperty(e,"isValidTraceId",{enumerable:!0,get:function(){return y.isValidTraceId}}),Object.defineProperty(e,"isValidSpanId",{enumerable:!0,get:function(){return y.isValidSpanId}});var v=n(476);Object.defineProperty(e,"INVALID_SPANID",{enumerable:!0,get:function(){return v.INVALID_SPANID}}),Object.defineProperty(e,"INVALID_TRACEID",{enumerable:!0,get:function(){return v.INVALID_TRACEID}}),Object.defineProperty(e,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return v.INVALID_SPAN_CONTEXT}});let b=n(67);Object.defineProperty(e,"context",{enumerable:!0,get:function(){return b.context}});let S=n(506);Object.defineProperty(e,"diag",{enumerable:!0,get:function(){return S.diag}});let w=n(886);Object.defineProperty(e,"metrics",{enumerable:!0,get:function(){return w.metrics}});let T=n(939);Object.defineProperty(e,"propagation",{enumerable:!0,get:function(){return T.propagation}});let E=n(845);Object.defineProperty(e,"trace",{enumerable:!0,get:function(){return E.trace}}),e.default={context:b.context,diag:S.diag,metrics:w.metrics,propagation:T.propagation,trace:E.trace}})(),e.exports=i})()},73267:(e,t,r)=>{"use strict";e.exports=u;var n,i=r(64824);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var s=r(32110),a=r(61810),o=r(93107),l=/^required|optional|repeated$/;function u(e,t,r,n,s,u,c){if(o.isObject(n)?(c=s,u=n,n=s=void 0):o.isObject(s)&&(c=u,u=s,s=void 0),i.call(this,e,u),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!l.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!o.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(i,s){o.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){n=e}},73496:e=>{"use strict";e.exports=require("http2")},73779:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var a=Object.keys(e),o=Array(a.length+1),l=Array(a.length),u=0;u<a.length;)o[u]=a[u],l[u]=e[a[u++]];return o[u]=r,Function.apply(null,o).apply(null,l)}return Function(r)()}for(var c=Array(arguments.length-1),d=0;d<c.length;)c[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=c[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),d!==c.length)throw Error("parameter count mismatch");return n.push(e),i}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1},73911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;let n=r(71271),i=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];t.restrictControlPlaneStatusCode=function(e,t){return i.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}}},74017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;let n=r(34631),i=r(34466),s=r(35858);function a(e,t){if(e&&!(e instanceof Buffer))throw TypeError(`${t}, if provided, must be a Buffer.`)}class o{constructor(e){this.callCredentials=e||i.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var o;if(a(e,"Root certificate"),a(t,"Private key"),a(r,"Certificate chain"),t&&!r)throw Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw Error("Certificate chain must be given with accompanying private key");return new u((0,n.createSecureContext)({ca:null!=(o=null!=e?e:(0,s.getDefaultRootsData)())?o:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES}),null!=i?i:{})}static createFromSecureContext(e,t){return new u(e,null!=t?t:{})}static createInsecure(){return new l}}t.ChannelCredentials=o;class l extends o{constructor(e){super(e)}compose(e){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof l}}class u extends o{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){return new c(this,this.callCredentials.compose(e))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class c extends o{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new c(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof c&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},74075:e=>{"use strict";e.exports=require("zlib")},74610:e=>{e.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1}},74722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return s},normalizeRscURL:function(){return a}});let n=r(85531),i=r(35499);function s(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},74845:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length};class r{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}t.InterceptingListenerImpl=r},74932:(e,t,r)=>{"use strict";e.exports=r(65239).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},75108:e=>{"use strict";e.exports=function e(e,t){for(var r=Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(s)if(s=!1,e)a(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,a(e))}})}},75124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{Postpone:function(){return x},abortAndThrowOnSynchronousRequestDataAccess:function(){return E},abortOnSynchronousPlatformIOAccess:function(){return w},accessedDynamicData:function(){return N},annotateDynamicAccess:function(){return F},consumeDynamicAccess:function(){return P},createDynamicTrackingState:function(){return f},createDynamicValidationState:function(){return p},createHangingInputAbortSignal:function(){return B},createPostponedAbortSignal:function(){return L},formatDynamicAPIAccesses:function(){return M},getFirstDynamicReason:function(){return g},isDynamicPostpone:function(){return I},isPrerenderInterruptedError:function(){return D},markCurrentScopeAsDynamic:function(){return m},postponeWithTracking:function(){return _},throwIfDisallowedDynamic:function(){return K},throwToInterruptStaticGeneration:function(){return v},trackAllowedDynamicAccess:function(){return G},trackDynamicDataInDynamicRender:function(){return b},trackFallbackParamAccessed:function(){return y},trackSynchronousPlatformIOAccessInDev:function(){return T},trackSynchronousRequestDataAccessInDev:function(){return C},useDynamicRouteParams:function(){return U}});let n=d(r(7153)),i=r(38248),s=r(66224),a=r(63033),o=r(29294),l=r(37461),u=r(70830),c=r(97748);function d(e){return e&&e.__esModule?e:{default:e}}let h="function"==typeof n.default.unstable_postpone;function f(e){return{isDebugDynamicAccesses:e,dynamicAccesses:[],syncDynamicExpression:void 0,syncDynamicErrorWithStack:null}}function p(){return{hasSuspendedDynamic:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasSyncDynamicErrors:!1,dynamicErrors:[]}}function g(e){var t;return null==(t=e.dynamicAccesses[0])?void 0:t.expression}function m(e,t,r){if((!t||"cache"!==t.type&&"unstable-cache"!==t.type)&&!e.forceDynamic&&!e.forceStatic){if(e.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${e.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${r}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(t){if("prerender-ppr"===t.type)_(e.route,r,t.dynamicTracking);else if("prerender-legacy"===t.type){t.revalidate=0;let n=Object.defineProperty(new i.DynamicServerError(`Route ${e.route} couldn't be rendered statically because it used ${r}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw e.dynamicUsageDescription=r,e.dynamicUsageStack=n.stack,n}}}}function y(e,t){let r=a.workUnitAsyncStorage.getStore();r&&"prerender-ppr"===r.type&&_(e.route,t,r.dynamicTracking)}function v(e,t,r){let n=Object.defineProperty(new i.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.revalidate=0,t.dynamicUsageDescription=e,t.dynamicUsageStack=n.stack,n}function b(e,t){t&&"cache"!==t.type&&"unstable-cache"!==t.type&&("prerender"===t.type||"prerender-legacy"===t.type)&&(t.revalidate=0)}function S(e,t,r){let n=R(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`);r.controller.abort(n);let i=r.dynamicTracking;i&&i.dynamicAccesses.push({stack:i.isDebugDynamicAccesses?Error().stack:void 0,expression:t})}function w(e,t,r,n){let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r),S(e,t,n)}function T(e){e.prerenderPhase=!1}function E(e,t,r,n){if(!1===n.controller.signal.aborted){let i=n.dynamicTracking;i&&null===i.syncDynamicErrorWithStack&&(i.syncDynamicExpression=t,i.syncDynamicErrorWithStack=r,!0===n.validating&&(i.syncDynamicLogged=!0)),S(e,t,n)}throw R(`Route ${e} needs to bail out of prerendering at this point because it used ${t}.`)}let C=T;function x({reason:e,route:t}){let r=a.workUnitAsyncStorage.getStore();_(t,e,r&&"prerender-ppr"===r.type?r.dynamicTracking:null)}function _(e,t,r){j(),r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:t}),n.default.unstable_postpone(O(e,t))}function O(e,t){return`Route ${e} needs to bail out of prerendering at this point because it used ${t}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function I(e){return"object"==typeof e&&null!==e&&"string"==typeof e.message&&A(e.message)}function A(e){return e.includes("needs to bail out of prerendering at this point because it used")&&e.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===A(O("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let k="NEXT_PRERENDER_INTERRUPTED";function R(e){let t=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t.digest=k,t}function D(e){return"object"==typeof e&&null!==e&&e.digest===k&&"name"in e&&"message"in e&&e instanceof Error}function N(e){return e.length>0}function P(e,t){return e.dynamicAccesses.push(...t.dynamicAccesses),e.dynamicAccesses}function M(e){return e.filter(e=>"string"==typeof e.stack&&e.stack.length>0).map(({expression:e,stack:t})=>(t=t.split("\n").slice(4).filter(e=>!(e.includes("node_modules/next/")||e.includes(" (<anonymous>)")||e.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${e}:
${t}`))}function j(){if(!h)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})}function L(e){j();let t=new AbortController;try{n.default.unstable_postpone(e)}catch(e){t.abort(e)}return t.signal}function B(e){let t=new AbortController;return e.cacheSignal?e.cacheSignal.inputReady().then(()=>{t.abort()}):(0,c.scheduleOnNextTick)(()=>t.abort()),t.signal}function F(e,t){let r=t.dynamicTracking;r&&r.dynamicAccesses.push({stack:r.isDebugDynamicAccesses?Error().stack:void 0,expression:e})}function U(e){let t=o.workAsyncStorage.getStore();if(t&&t.isStaticGeneration&&t.fallbackRouteParams&&t.fallbackRouteParams.size>0){let r=a.workUnitAsyncStorage.getStore();r&&("prerender"===r.type?n.default.use((0,l.makeHangingPromise)(r.renderSignal,e)):"prerender-ppr"===r.type?_(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&v(e,t,r))}}let V=/\n\s+at Suspense \(<anonymous>\)/,z=RegExp(`\\n\\s+at ${u.METADATA_BOUNDARY_NAME}[\\n\\s]`),q=RegExp(`\\n\\s+at ${u.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),$=RegExp(`\\n\\s+at ${u.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function G(e,t,r,n,i){if(!$.test(t)){if(z.test(t)){r.hasDynamicMetadata=!0;return}if(q.test(t)){r.hasDynamicViewport=!0;return}if(V.test(t)){r.hasSuspendedDynamic=!0;return}else if(n.syncDynamicErrorWithStack||i.syncDynamicErrorWithStack){r.hasSyncDynamicErrors=!0;return}else{let n=W(`Route "${e}": A component accessed data, headers, params, searchParams, or a short-lived cache without a Suspense boundary nor a "use cache" above it. We don't have the exact line number added to error messages yet but you can see which component in the stack below. See more info: https://nextjs.org/docs/messages/next-prerender-missing-suspense`,t);r.dynamicErrors.push(n);return}}}function W(e,t){let r=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r.stack="Error: "+e+t,r}function K(e,t,r,n){let i,a,o;if(r.syncDynamicErrorWithStack?(i=r.syncDynamicErrorWithStack,a=r.syncDynamicExpression,o=!0===r.syncDynamicLogged):n.syncDynamicErrorWithStack?(i=n.syncDynamicErrorWithStack,a=n.syncDynamicExpression,o=!0===n.syncDynamicLogged):(i=null,a=void 0,o=!1),t.hasSyncDynamicErrors&&i)throw o||console.error(i),new s.StaticGenBailoutError;let l=t.dynamicErrors;if(l.length){for(let e=0;e<l.length;e++)console.error(l[e]);throw new s.StaticGenBailoutError}if(!t.hasSuspendedDynamic){if(t.hasDynamicMetadata){if(i)throw console.error(i),Object.defineProperty(new s.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that could not finish rendering before ${a} was used. Follow the instructions in the error for this expression to resolve.`),"__NEXT_ERROR_CODE",{value:"E608",enumerable:!1,configurable:!0});throw Object.defineProperty(new s.StaticGenBailoutError(`Route "${e}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateMetadata\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`),"__NEXT_ERROR_CODE",{value:"E534",enumerable:!1,configurable:!0})}else if(t.hasDynamicViewport){if(i)throw console.error(i),Object.defineProperty(new s.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that could not finish rendering before ${a} was used. Follow the instructions in the error for this expression to resolve.`),"__NEXT_ERROR_CODE",{value:"E573",enumerable:!1,configurable:!0});throw Object.defineProperty(new s.StaticGenBailoutError(`Route "${e}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or external data (\`fetch(...)\`, etc...) but the rest of the route was static or only used cached data (\`"use cache"\`). If you expected this route to be prerenderable update your \`generateViewport\` to not use Request data and only use cached external data. Otherwise, add \`await connection()\` somewhere within this route to indicate explicitly it should not be prerendered.`),"__NEXT_ERROR_CODE",{value:"E590",enumerable:!1,configurable:!0})}}}},75254:(e,t,r)=>{var n=r(78418),i=r(93311),s=r(41132);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},75411:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},75677:(e,t,r)=>{"use strict";e.exports=s;var n=r(26996);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(8707);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},75847:(e,t,r)=>{var n=r(67554);e.exports=function(e,t){var r;return n(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}},76139:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(77350);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var a=s[e];i.setProperty(a,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var o={};o[e]=t,n.push(o)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},76250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r(31359);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var i=r(5674);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return i.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return i.createResolver}});var s=r(26786);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var a=r(80324);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return a.durationToMs}});var o=r(50268);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return o.BackoffTimeout}});var l=r(86239);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return l.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return l.validateLoadBalancingConfig}});var u=r(43356);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return u.subchannelAddressToString}});var c=r(72309);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return c.ChildLoadBalancerHandler}});var d=r(72910);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return d.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return d.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return d.PickResultType}});var h=r(40962);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return h.BaseFilter}});var f=r(54003);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return f.FilterStackFactory}});var p=r(17061);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return p.registerAdminService}});var g=r(4719);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return g.BaseSubchannelWrapper}});var m=r(1532);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return m.OutlierDetectionLoadBalancingConfig}})},76567:(e,t,r)=>{"use strict";e.exports=s;var n=r(36735);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(29750);function s(){n.call(this)}function a(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},s._configure()},76631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;let n=r(18155),i=r(71271),s=r(26412),a=r(86777),o=r(72910),l=r(26786),u=r(31359),c=r(73911),d=r(73496),h="load_balancing_call";class f{constructor(e,t,r,n,i,s,a){var o,u;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let c=this.methodName.split("/"),d="";c.length>=2&&(d=c[1]);let h=null!=(u=null==(o=(0,l.splitHostPort)(this.host))?void 0:o.host)?u:"localhost";this.serviceUrl=`https://${h}/${d}`}trace(e){u.trace(i.LogVerbosity.DEBUG,h,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let i=Object.assign(Object.assign({},e),{progress:t});null==(r=this.listener)||r.onReceiveStatus(i),null==(n=this.onCallEnded)||n.call(this,i.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),l=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+o.PickResultType[r.pickResultType]+" subchannel: "+l+" status: "+(null==(e=r.status)?void 0:e.code)+" "+(null==(t=r.status)?void 0:t.details)),r.pickResultType){case o.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(e=>{var t,o,u;if(this.ended)return void this.trace("Credentials metadata generation finished after call ended");let c=this.metadata.clone();if(c.merge(e),c.get("authorization").length>1&&this.outputStatus({code:i.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new a.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==n.ConnectivityState.READY){this.trace("Picked subchannel "+l+" has state "+n.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&c.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(c,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===d.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){this.trace("Failed to start call on picked subchannel "+l+" with error "+e.message),this.outputStatus({code:i.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new a.Metadata},"NOT_STARTED");return}null==(o=(t=this.callConfig).onCommitted)||o.call(t),null==(u=r.onCallStarted)||u.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},e=>{let{code:t,details:r}=(0,c.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:i.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new a.Metadata},"PROCESSED")});break;case o.PickResultType.DROP:let{code:u,details:h}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:u,details:h,metadata:r.status.metadata},"DROP")});break;case o.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:e,details:t}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")})}break;case o.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null==(r=this.child)||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata},"PROCESSED")}getPeer(){var e,t;return null!=(t=null==(e=this.child)?void 0:e.getPeer())?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}}t.LoadBalancingCall=f},76759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parseUrl",{enumerable:!0,get:function(){return s}});let n=r(42785),i=r(23736);function s(e){if(e.startsWith("/"))return(0,i.parseRelativeUrl)(e);let t=new URL(e);return{hash:t.hash,hostname:t.hostname,href:t.href,pathname:t.pathname,port:t.port,protocol:t.protocol,query:(0,n.searchParamsToUrlQuery)(t.searchParams),search:t.search}}},77350:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(29750),a=r(68037);s.codegen=r(73779),s.fetch=r(90196),s.path=r(89835),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var o=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(o,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(38954));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(94313));var t=new i("Enum"+c++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i||"prototype"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(58278)))}})},77780:(e,t,r)=>{"use strict";e.exports=l;var n=r(94313),i=r(77350);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),o(t,u,"k[i]"),a(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c),a(t,u,l,c+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}a(t,u,l,c)}u.optional&&t("}")}return t("return null")}},77822:(e,t,r)=>{var n=r(93490);e.exports=function(e){return n(e)&&e!=+e}},77834:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},77968:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,a=r(64824);((d.prototype=Object.create(a.prototype)).constructor=d).className="Namespace";var o=r(73267),l=r(93107),u=r(12630);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=c,d.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},d.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),d.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},d.prototype.addJSON=function(e){var t=this;if(e)for(var r,a=Object.keys(e),l=0;l<a.length;++l)r=e[a[l]],t.add((void 0!==r.fields?n.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?i.fromJSON:void 0!==r.id?o.fromJSON:d.fromJSON)(a[l],r));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof n||e instanceof u||e instanceof s||e instanceof i||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t)if(t instanceof d&&e instanceof d&&!(t instanceof n||t instanceof i)){for(var r=t.nestedArray,a=0;a<r.length;++a)e.add(r[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){n=e,i=t,s=r}},78034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getRouteMatcher",{enumerable:!0,get:function(){return i}});let n=r(44827);function i(e){let{re:t,groups:r}=e;return e=>{let i=t.exec(e);if(!i)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw Object.defineProperty(new n.DecodeError("failed to decode param"),"__NEXT_ERROR_CODE",{value:"E528",enumerable:!1,configurable:!0})}},a={};for(let[e,t]of Object.entries(r)){let r=i[t.pos];void 0!==r&&(t.repeat?a[e]=r.split("/").map(e=>s(e)):a[e]=s(r))}return a}}},78332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;let n=r(72374),i=r(21574),s="child_load_balancer_helper";class a{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING)return;null==(r=this.parent.currentChild)||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;let t=null!=(e=this.parent.pendingChild)?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,i=this.pendingChild)}else i=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return s}}t.ChildLoadBalancerHandler=a},78418:(e,t,r)=>{var n=r(67200),i=r(15871),s=1,a=2;e.exports=function(e,t,r,o){var l=r.length,u=l,c=!o;if(null==e)return!u;for(e=Object(e);l--;){var d=r[l];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<u;){var h=(d=r[l])[0],f=e[h],p=d[1];if(c&&d[2]){if(void 0===f&&!(h in e))return!1}else{var g=new n;if(o)var m=o(f,p,h,e,t,g);if(!(void 0===m?i(p,f,s|a,o,g):m))return!1}}return!0}},79070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=n},79253:(e,t,r)=>{"use strict";var n=r(85961);e.exports=t=n.descriptor=n.Root.fromJSON(r(43436)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,a=n.Enum,o=n.Type,l=n.Field,u=n.MapField,c=n.OneOf,d=n.Service,h=n.Method;function f(e,r,n){var u=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(u.syntax=n),e instanceof s||(u.package=e.fullName.substring(1));for(var c,h=0;h<e.nestedArray.length;++h)(c=e._nestedArray[h])instanceof o?u.messageType.push(c.toDescriptor(n)):c instanceof a?u.enumType.push(c.toDescriptor()):c instanceof l?u.extension.push(c.toDescriptor(n)):c instanceof d?u.service.push(c.toDescriptor()):c instanceof i&&f(c,r,n);u.options=C(e.options,t.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&r.push(u)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,i,u,c=0;c<e.file.length;++c){if(i=r,(n=e.file[c]).package&&n.package.length&&(i=r.define(n.package)),n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(u=0;u<n.messageType.length;++u)i.add(o.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(a.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var h=E(n.options,t.FileOptions);if(h){var f=Object.keys(h);for(u=0;u<f.length;++u)i.setOption(f[u],h[f[u]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return f(this,r.file,e),r};var p=0;o.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,i=new o(e.name.length?e.name:"Type"+p++,E(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)i.add(c.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=l.fromDescriptor(e.field[n],r);i.add(s),e.field[n].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)i.add(l.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)i.add(o.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)i.add(a.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(n=0,i.extensions=[];n<e.extensionRange.length;++n)i.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)i.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)i.reserved.push(e.reservedName[n])}return i},o.prototype.toDescriptor=function(e){var r,n,i=t.DescriptorProto.create({name:this.name});for(n=0;n<this.fieldsArray.length;++n)if(i.field.push(r=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof u){var s=T(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),c=T(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=11===c||14===c?this._fieldsArray[n].resolvedType&&x(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;i.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:c,typeName:d})],options:t.MessageOptions.create({mapEntry:!0})}))}for(n=0;n<this.oneofsArray.length;++n)i.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof l?i.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof o?i.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof a&&i.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)i.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)"string"==typeof this.reserved[n]?i.reservedName.push(this.reserved[n]):i.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return i.options=C(this.options,t.MessageOptions),i};var g=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:S(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var n,i,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var a=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);if(a.options=E(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var o=e.defaultValue;switch(o){case"true":case"TRUE":o=!0;break;case"false":case"FALSE":o=!1;break;default:g.exec(o)&&(o=parseInt(o))}a.setOption("default",o)}return w(e.type)&&("proto3"===r?e.options&&!e.options.packed&&a.setOption("packed",!1):e.options&&e.options.packed||a.setOption("packed",!1)),a},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=T(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?x(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=C(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var m=0;a.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new a(e.name&&e.name.length?e.name:"Enum"+m++,r,E(e.options,t.EnumOptions))},a.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:C(this.options,t.EnumOptions)})};var y=0;c.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new c(e.name&&e.name.length?e.name:"oneof"+y++)},c.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;d.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new d(e.name&&e.name.length?e.name:"Service"+v++,E(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(h.fromDescriptor(e.method[n]));return r},d.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:C(this.options,t.ServiceOptions)})};var b=0;function S(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function w(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function T(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof a)return 14;if(t instanceof o)return t.group?10:11;throw Error("illegal type: "+e)}function E(e,t){if(e){for(var r,i,s,o=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(i=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(i)&&(s=e[i],r.resolvedType instanceof a&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),o.push(_(i),s));return o.length?n.util.toObject(o):void 0}}function C(e,t){if(e){for(var r,i,s=[],a=0,o=Object.keys(e);a<o.length;++a)if(i=e[r=o[a]],"default"!==r){var l=t.fields[r];(l||(l=t.fields[r=n.util.camelCase(r)]))&&s.push(r,i)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function x(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),a=0,o=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)for(;a<r.length&&o<l&&r[a]===n[o];){var u=t.lookup(r[a++],!0);if(null!==u&&u!==t)break;++o}else for(;a<r.length&&o<l&&r[a]===n[o];++a,++o);return n.slice(o).join(".")}function _(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}h.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new h(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,E(e.options,t.MethodOptions))},h.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:C(this.options,t.MethodOptions)})}},79474:(e,t,r)=>{e.exports=r(85718).Symbol},79535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{normalizeAppPath:function(){return s},normalizeRscURL:function(){return a}});let n=r(90372),i=r(84212);function s(e){return(0,n.ensureLeadingSlash)(e.split("/").reduce((e,t,r,n)=>!t||(0,i.isGroupSegment)(t)||"@"===t[0]||("page"===t||"route"===t)&&r===n.length-1?e:e+"/"+t,""))}function a(e){return e.replace(/\.rsc($|\?)/,"$1")}},79551:e=>{"use strict";e.exports=require("url")},79737:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/components/ui/toaster.tsx","Toaster")},80195:(e,t,r)=>{var n=r(79474),i=r(21367),s=r(40542),a=r(49227),o=1/0,l=n?n.prototype:void 0,u=l?l.toString:void 0;function c(e){if("string"==typeof e)return e;if(s(e))return i(e,c)+"";if(a(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}e.exports=c},80324:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}},80329:(e,t,r)=>{e=r.nmd(e);var n=r(85718),i=r(1944),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,o=a&&a.exports===s?n.Buffer:void 0,l=(o?o.isBuffer:void 0)||i;e.exports=l},80458:(e,t,r)=>{var n=r(29395),i=r(69619),s=r(27467),a="[object Arguments]",o="[object Array]",l="[object Boolean]",u="[object Date]",c="[object Error]",d="[object Function]",h="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",m="[object Set]",y="[object String]",v="[object WeakMap]",b="[object ArrayBuffer]",S="[object DataView]",w="[object Float64Array]",T="[object Int8Array]",E="[object Int16Array]",C="[object Int32Array]",x="[object Uint8Array]",_="[object Uint8ClampedArray]",O="[object Uint16Array]",I="[object Uint32Array]",A={};A["[object Float32Array]"]=A[w]=A[T]=A[E]=A[C]=A[x]=A[_]=A[O]=A[I]=!0,A[a]=A[o]=A[b]=A[l]=A[S]=A[u]=A[c]=A[d]=A[h]=A[f]=A[p]=A[g]=A[m]=A[y]=A[v]=!1,e.exports=function(e){return s(e)&&i(e.length)&&!!A[n(e)]}},80704:(e,t,r)=>{var n=r(96678);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},81260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;t.getNextCallNumber=function(){return r++}},81473:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;let n=r(21858),i=r(48327),s=r(66284),a=r(1014),o=r(11422),l="resolving_call";class u{constructor(e,t,r,s,a,o){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=a,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&n.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(n.Status.CANCELLED,"Cancelled by parent call")}),r.flags&n.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,i.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(n.LogVerbosity.DEBUG,l,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,i.deadlineToString)(this.deadline));let e=(0,i.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null==(e=this.listener)||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));let t=e.config;if(t.status!==n.Status.OK){let{code:e,details:r}=(0,o.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata});return}if(t.methodConfig.timeout){let e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,i.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null==(t=this.metadata)?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null==(r=this.child)||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!=(t=null==(e=this.child)?void 0:e.getPeer())?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}t.ResolvingCall=u},81488:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},81630:e=>{"use strict";e.exports=require("http")},81957:(e,t,r)=>{var n=r(49227);e.exports=function(e,t){if(e!==t){var r=void 0!==e,i=null===e,s=e==e,a=n(e),o=void 0!==t,l=null===t,u=t==t,c=n(t);if(!l&&!c&&!a&&e>t||a&&o&&u&&!l&&!c||i&&o&&u||!r&&u||!s)return 1;if(!i&&!a&&!c&&e<t||c&&r&&s&&!i&&!a||l&&r&&s||!o&&s||!u)return -1}return 0}},81968:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},82018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;let n=r(72374),i=r(21574),s=r(17765),a=r(59571),o=r(1014),l=r(21858),u="round_robin";function c(e){o.trace(l.LogVerbosity.DEBUG,u,e)}let d="round_robin";class h{getLoadBalancerName(){return d}constructor(){}toJsonObject(){return{[d]:{}}}static createFromJson(e){return new h}}class f{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class p{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=i.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(e,t,r,n,s)=>{this.calculateAndUpdateState(),(r===i.ConnectivityState.TRANSIENT_FAILURE||r===i.ConnectivityState.IDLE)&&(s&&(this.lastError=s),this.channelControlHelper.requestReresolution(),e.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(i.ConnectivityState.READY)>0){let e=this.subchannels.filter(e=>e.getConnectivityState()===i.ConnectivityState.READY),t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(t=0),this.updateState(i.ConnectivityState.READY,new f(e,t))}else this.countSubchannelsWithState(i.ConnectivityState.CONNECTING)>0?this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.countSubchannelsWithState(i.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){c(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),e===i.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){for(let t of(this.resetSubchannelList(),c("Connect to address list "+e.map(e=>(0,a.subchannelAddressToString)(e))),this.subchannels=e.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels)){t.ref(),t.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(t.getChannelzRef());let e=t.getConnectivityState();(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.TRANSIENT_FAILURE)&&t.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return d}}t.RoundRobinLoadBalancer=p,t.setup=function(){(0,n.registerLoadBalancerType)(d,p,h)}},82038:(e,t,r)=>{var n=r(57202),i=r(35163),s=r(40542),a=r(80329),o=r(38428),l=r(10090),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=s(e),c=!r&&i(e),d=!r&&!c&&a(e),h=!r&&!c&&!d&&l(e),f=r||c||d||h,p=f?n(e.length,String):[],g=p.length;for(var m in e)(t||u.call(e,m))&&!(f&&("length"==m||d&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||o(m,g)))&&p.push(m);return p}},82380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(40649);class i{constructor(e,t,r){let n;this.listener=t,this.addresses=[],this.hasReturnedResult=!1,n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}}t.setup=function(){(0,n.registerResolver)("unix",i)}},82566:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},82703:(e,t,r)=>{"use strict";e.exports=d;var n,i,s,a=r(77968);((d.prototype=Object.create(a.prototype)).constructor=d).className="Root";var o=r(73267),l=r(32110),u=r(12630),c=r(93107);function d(e){a.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=c.path.resolve,d.prototype.fetch=c.fetch,d.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var a=this;if(!n)return c.asPromise(e,a,t,r);var o=n===h;function l(e,t){if(n){if(o)throw e;var r=n;n=null,r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function d(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var n,s=i(t,a,r),d=0;if(s.imports)for(;d<s.imports.length;++d)(n=u(s.imports[d])||a.resolvePath(e,s.imports[d]))&&f(n);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(n=u(s.weakImports[d])||a.resolvePath(e,s.weakImports[d]))&&f(n,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}o||p||l(null,a)}function f(e,t){if(e=u(e)||e,!(a.files.indexOf(e)>-1)){if(a.files.push(e),e in s)return void(o?d(e,s[e]):(++p,setTimeout(function(){--p,d(e,s[e])})));if(o){var r;try{r=c.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}d(e,r)}else++p,a.fetch(e,function(r,i){if(--p,n){if(r)return void(t?p||l(null,a):l(r));d(e,i)}})}}var p=0;c.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=a.resolvePath("",t[m]))&&f(g);if(o)return a;p||l(null,a)},d.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n),!0)}return!1}d.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||p(this,e)||this.deferred.push(e);else if(e instanceof l)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)p(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){n=e,i=t,s=r}},83273:e=>{"use strict";e.exports=function e(e,t,r){var n=r||8192,i=n>>>1,s=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(s=e(n),a=0);var o=t.call(s,a,a+=r);return 7&a&&(a=(7|a)+1),o}}},83847:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}},84031:(e,t,r)=>{"use strict";var n=r(34452);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,s,a){if(a!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return r.PropTypes=r,r}},84212:(e,t)=>{"use strict";function r(e){return"("===e[0]&&e.endsWith(")")}function n(e){return e.startsWith("@")&&"@children"!==e}function i(e,t){if(e.includes(s)){let e=JSON.stringify(t);return"{}"!==e?s+"?"+e:s}return e}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{DEFAULT_SEGMENT_KEY:function(){return a},PAGE_SEGMENT_KEY:function(){return s},addSearchParamsIfPageSegment:function(){return i},isGroupSegment:function(){return r},isParallelRouteSegment:function(){return n}});let s="__PAGE__",a="__DEFAULT__"},84261:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},84482:(e,t,r)=>{var n=r(28977);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},84553:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},84713:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},84723:(e,t,r)=>{"use strict";e.exports=o;var n=r(24859);((o.prototype=Object.create(n.prototype)).constructor=o).className="Service";var i=r(27405),s=r(77350),a=r(7995);function o(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var r=new o(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},o.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},o.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},o.prototype.create=function(e,t,r){for(var n,i=new a.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var l=s.lcFirst((n=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");i[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},85244:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},85330:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0;class r{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}}t.BaseSubchannelWrapper=r},85406:(e,t,r)=>{e.exports=r(85718)["__core-js_shared__"]},85450:(e,t,r)=>{var n=r(79474),i=r(35163),s=r(40542),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return s(e)||i(e)||!!(a&&e&&e[a])}},85481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(5674);class i{constructor(e,t,r){let n;this.listener=t,this.addresses=[],this.hasReturnedResult=!1,n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}}t.setup=function(){(0,n.registerResolver)("unix",i)}},85531:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},85590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;let n=r(21574),i=r(21858),s=r(48327),a=r(66284),o=r(17765),l=r(38717),u=r(1014),c=r(11422),d=r(73496),h="load_balancing_call";class f{constructor(e,t,r,n,i,s,a){var o,u;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let c=this.methodName.split("/"),d="";c.length>=2&&(d=c[1]);let h=null!=(u=null==(o=(0,l.splitHostPort)(this.host))?void 0:o.host)?u:"localhost";this.serviceUrl=`https://${h}/${d}`}trace(e){u.trace(i.LogVerbosity.DEBUG,h,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let i=Object.assign(Object.assign({},e),{progress:t});null==(r=this.listener)||r.onReceiveStatus(i),null==(n=this.onCallEnded)||n.call(this,i.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),l=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+o.PickResultType[r.pickResultType]+" subchannel: "+l+" status: "+(null==(e=r.status)?void 0:e.code)+" "+(null==(t=r.status)?void 0:t.details)),r.pickResultType){case o.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(e=>{var t,o,u;if(this.ended)return void this.trace("Credentials metadata generation finished after call ended");let c=this.metadata.clone();if(c.merge(e),c.get("authorization").length>1&&this.outputStatus({code:i.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new a.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==n.ConnectivityState.READY){this.trace("Picked subchannel "+l+" has state "+n.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&c.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(c,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===d.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){this.trace("Failed to start call on picked subchannel "+l+" with error "+e.message),this.outputStatus({code:i.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new a.Metadata},"NOT_STARTED");return}null==(o=(t=this.callConfig).onCommitted)||o.call(t),null==(u=r.onCallStarted)||u.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},e=>{let{code:t,details:r}=(0,c.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:i.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new a.Metadata},"PROCESSED")});break;case o.PickResultType.DROP:let{code:u,details:h}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:u,details:h,metadata:r.status.metadata},"DROP")});break;case o.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:e,details:t}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")})}break;case o.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null==(r=this.child)||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata},"PROCESSED")}getPeer(){var e,t;return null!=(t=null==(e=this.child)?void 0:e.getPeer())?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}}t.LoadBalancingCall=f},85718:(e,t,r)=>{var n=r(10663),i="object"==typeof self&&self&&self.Object===Object&&self;e.exports=n||i||Function("return this")()},85745:(e,t,r)=>{var n=r(86451),i=500;e.exports=function(e){var t=n(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}},85938:(e,t,r)=>{var n=r(42205),i=r(17518),s=r(46229),a=r(7383);e.exports=s(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])})},85961:(e,t,r)=>{"use strict";e.exports=r(36942)},86239:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=function(e,t){var r,n,i,s,a,o,l,u,c,d;return{createSubchannel:null!=(n=null==(r=t.createSubchannel)?void 0:r.bind(t))?n:e.createSubchannel.bind(e),updateState:null!=(s=null==(i=t.updateState)?void 0:i.bind(t))?s:e.updateState.bind(e),requestReresolution:null!=(o=null==(a=t.requestReresolution)?void 0:a.bind(t))?o:e.requestReresolution.bind(e),addChannelzChild:null!=(u=null==(l=t.addChannelzChild)?void 0:l.bind(t))?u:e.addChannelzChild.bind(e),removeChannelzChild:null!=(d=null==(c=t.removeChannelzChild)?void 0:c.bind(t))?d:e.removeChannelzChild.bind(e)}};let r={},n=null;t.registerLoadBalancerType=function(e,t,n){r[e]={LoadBalancer:t,LoadBalancingConfig:n}},t.registerDefaultLoadBalancerType=function(e){n=e},t.createLoadBalancer=function(e,t){let n=e.getLoadBalancerName();return n in r?new r[n].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in r},t.getFirstUsableConfig=function(e,t=!1){for(let t of e)if(t.getLoadBalancerName()in r)return t;return t&&n?new r[n].LoadBalancingConfig:null},t.validateLoadBalancingConfig=function(e){if(null===e||"object"!=typeof e)throw Error("Load balancing config must be an object");let t=Object.keys(e);if(1!==t.length)throw Error("Provided load balancing config has multiple conflicting entries");let n=t[0];if(n in r)return r[n].LoadBalancingConfig.createFromJson(e[n]);throw Error(`Unrecognized load balancing config name ${n}`)}},86451:(e,t,r)=>{var n=r(95746),i="Expected a function";function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError(i);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var a=e.apply(this,n);return r.cache=s.set(i,a)||s,a};return r.cache=new(s.Cache||n),r}s.Cache=n,e.exports=s},86777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;let n=r(31359),i=r(71271),s=r(60776),a=/^[0-9a-z_.-]+$/,o=/^[ -~]*$/;function l(e){return a.test(e)}function u(e){return o.test(e)}function c(e){return e.endsWith("-bin")}function d(e){return!e.startsWith("grpc-")}function h(e){return e.toLowerCase()}function f(e,t){if(!l(e))throw Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(c(e)){if(!Buffer.isBuffer(t))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw Error("keys that don't end with '-bin' must have String values");if(!u(t))throw Error('Metadata string value "'+t+'" contains illegal characters')}}class p{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){f(e=h(e),t),this.internalRepr.set(e,[t])}add(e,t){f(e=h(e),t);let r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=h(e),this.internalRepr.delete(e)}get(e){return e=h(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){let e=new p(this.options),t=e.internalRepr;for(let[e,r]of this.internalRepr){let n=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,n)}return e}merge(e){for(let[t,r]of e.internalRepr){let e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(g);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new p;for(let r of Object.keys(e)){if(":"===r.charAt(0))continue;let a=e[r];try{c(r)?Array.isArray(a)?a.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==a&&(d(r)?a.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(a,"base64"))):Array.isArray(a)?a.forEach(e=>{t.add(r,e)}):void 0!==a&&t.add(r,a)}catch(t){let e=`Failed to add metadata entry ${r}: ${a}. ${(0,s.getErrorMessage)(t)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(i.LogVerbosity.ERROR,e)}}return t}}t.Metadata=p;let g=e=>Buffer.isBuffer(e)?e.toString("base64"):e},86984:(e,t,r)=>{"use strict";e.exports=i;var n=r(8707);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,a){if(!s)throw TypeError("request must be specified");var o=this;if(!a)return n.asPromise(e,o,t,r,i,s);if(!o.rpcImpl)return void setTimeout(function(){a(Error("already ended"))},0);try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return o.emit("error",e,t),a(e);if(null===r)return void o.end(!0);if(!(r instanceof i))try{r=i[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",r,t),a(null,r)})}catch(e){o.emit("error",e,t),setTimeout(function(){a(e)},0);return}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},87270:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},87316:(e,t,r)=>{"use strict";e.exports=s;var n=r(12687);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(29750);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},87321:(e,t,r)=>{var n=r(98798),i=r(7383),s=r(28977);e.exports=function(e){return function(t,r,a){return a&&"number"!=typeof a&&i(t,r,a)&&(r=a=void 0),t=s(t),void 0===r?(r=t,t=0):r=s(r),a=void 0===a?t<r?1:-1:s(a),n(t,r,a,e)}}},87506:(e,t,r)=>{var n=r(66837),i=r(84261),s=r(89492),a=r(90200),o=r(39672);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},87764:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={}));class n{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0,i=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{let e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,i.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){let e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,i.push(t)}break;default:throw Error("Unexpected read state")}return i}}t.StreamDecoder=n},87955:(e,t,r)=>{e.exports=r(84031)()},88212:(e,t,r)=>{"use strict";function n(e){return function(){let{cookie:t}=e;if(!t)return{};let{parse:n}=r(26415);return n(Array.isArray(t)?t.join("; "):t)}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getCookieParser",{enumerable:!0,get:function(){return n}})},88295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;let n=r(56070),i=r(71309),s=r(98316),a=r(72910),o=r(71271),l=r(54003),u=r(21135),c=r(5674),d=r(31359),h=r(16239),f=r(26786),p=r(18155),g=r(66827),m=r(76631),y=r(26412),v=r(58546),b=r(81260),S=r(73911),w=r(66683),T=r(4719),E=0x7fffffff,C=1e3,x=18e5,_=new Map,O=0x1000000,I=1048576;class A extends T.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,i)=>{t.throttleKeepalive(i)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class k{constructor(e,t,r){var m,y,v,b,T,k,R,D;if(this.credentials=t,this.options=r,this.connectivityState=p.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new g.ChannelzCallTracker,this.childrenTracker=new g.ChannelzChildrenTracker,"string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.originalTarget=e;let N=(0,f.parseUri)(e);if(null===N)throw Error(`Could not parse target name "${e}"`);let P=(0,c.mapUriDefaultScheme)(N);if(null===P)throw Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},E),null==(y=(m=this.callRefTimer).unref)||y.call(m),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new g.ChannelzTrace,this.channelzRef=(0,g.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,c.getDefaultAuthority)(P);let M=(0,h.mapProxyName)(P,r);this.target=M.target,this.options=Object.assign({},this.options,M.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)((null!=(v=r["grpc.use_local_subchannel_pool"])?v:0)===0),this.retryBufferTracker=new w.MessageBufferTracker(null!=(b=r["grpc.retry_buffer_size"])?b:O,null!=(T=r["grpc.per_rpc_retry_buffer_size"])?T:I),this.keepaliveTime=null!=(k=r["grpc.keepalive_time_ms"])?k:-1,this.idleTimeoutMs=Math.max(null!=(R=r["grpc.client_idle_timeout_ms"])?R:x,C);let j={createSubchannel:(e,t)=>{let r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());let n=new A(r,this);return this.wrappedSubchannels.add(n),n},updateState:(e,t)=>{this.currentPicker=t;let r=this.pickQueue.slice();for(let e of(this.pickQueue=[],r.length>0&&this.callRefTimerUnref(),r))e.doPick();this.updateState(e)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new i.ResolvingLoadBalancer(this.target,j,r,(e,t)=>{e.retryThrottling?_.set(this.getTarget(),new w.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,_.get(this.getTarget()))):_.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{let e=this.configSelectionQueue;for(let t of(this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref(),e))t.getConfig()})},e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,S.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));let t=this.configSelectionQueue;for(let r of(this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref(),t))r.reportResolverError(e)}),this.filterStackFactory=new l.FilterStackFactory([new u.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let L=Error();(0,d.trace)(o.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null==(D=L.stack)?void 0:D.substring(L.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,d.trace)(null!=t?t:o.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null==(t=(e=this.callRefTimer).hasRef)?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null==(n=(r=this.callRefTimer).ref)||n.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null==(t=(e=this.callRefTimer).unref)||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){for(let t of((0,d.trace)(o.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,f.uriToString)(this.target)+" "+p.ConnectivityState[this.connectivityState]+" -> "+p.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+p.ConnectivityState[e]),this.connectivityState=e,this.connectivityStateWatchers.slice()))e!==t.currentState&&(t.timer&&clearTimeout(t.timer),this.removeConnectivityStateWatcher(t),t.callback());e!==p.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime)for(let t of(this.keepaliveTime=e,this.wrappedSubchannels))t.throttleKeepalive(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return(this.resolvingLoadBalancer.exitIdle(),this.configSelector)?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(p.ConnectivityState.IDLE),this.currentPicker=new a.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0)return void this.startIdleTimeout(this.idleTimeoutMs);let e=new Date().valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null==(r=(t=this.idleTimer).unref)||r.call(t)}maybeStartIdleTimer(){this.connectivityState===p.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new m.LoadBalancingCall(this,e,t,r,n,i,s)}createRetryingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new w.RetryingCall(this,e,t,r,n,i,s,this.retryBufferTracker,_.get(this.getTarget()))}createInnerCall(e,t,r,n,i){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,n,i):this.createRetryingCall(e,t,r,n,i)}createResolvingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,y.deadlineToString)(t));let a={deadline:t,flags:null!=i?i:o.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},l=new v.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.onCallStart(),l.addStatusWatcher(e=>{this.onCallEnd(e)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(p.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,g.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,f.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===p.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let n=null;if(t!==1/0){let e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s)return void process.nextTick(r,Error("Deadline passed without connectivity state change"));n=setTimeout(()=>{this.removeConnectivityStateWatcher(i),r(Error("Deadline passed without connectivity state change"))},e.getTime()-s.getTime())}let i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===p.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,i)}}t.InternalChannel=k},88477:(e,t)=>{"use strict";function r(e,t){if(0===t.length)return 0;if(0===e.length||t.length>e.length)return -1;for(let r=0;r<=e.length-t.length;r++){let n=!0;for(let i=0;i<t.length;i++)if(e[r+i]!==t[i]){n=!1;break}if(n)return r}return -1}function n(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function i(e,t){let n=r(e,t);if(0===n)return e.subarray(t.length);if(!(n>-1))return e;{let r=new Uint8Array(e.length-t.length);return r.set(e.slice(0,n)),r.set(e.slice(n+t.length),n),r}}Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{indexOfUint8Array:function(){return r},isEquivalentUint8Arrays:function(){return n},removeFromUint8Array:function(){return i}})},88494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;let n=r(98267),i=r(92e3),s=r(21574),a=r(21858),o=r(66284),l=r(92219),u=Symbol(),c=Symbol(),d=Symbol(),h=Symbol();function f(e){return"function"==typeof e}function p(e){return e.stack.split("\n").slice(1).join("\n")}class g{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[c]=null!=(n=r.interceptors)?n:[],delete r.interceptors,this[d]=null!=(s=r.interceptor_providers)?s:[],delete r.interceptor_providers,this[c].length>0&&this[d].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[h]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[u]=r.channelOverride;else if(r.channelFactoryOverride){let n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[u]=n(e,t,r)}else this[u]=new i.ChannelImplementation(e,t,r)}close(){this[u].close()}getChannel(){return this[u]}waitForReady(e,t){let r=n=>{let i;if(n)return void t(Error("Failed to connect before the deadline"));try{i=this[u].getConnectivityState(!0)}catch(e){t(Error("The channel has been closed"));return}if(i===s.ConnectivityState.READY)t();else try{this[u].watchConnectivityState(i,e,r)}catch(e){t(Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(f(e))return{metadata:new o.Metadata,options:{},callback:e};if(f(t))if(e instanceof o.Metadata)return{metadata:e,options:{},callback:t};else return{metadata:new o.Metadata,options:e,callback:t};if(!(e instanceof o.Metadata&&t instanceof Object&&f(r)))throw Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,f){var g,m;let y=this.checkOptionalUnaryResponseArguments(s,o,f),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},b={argument:i,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[u],methodDefinition:v,callOptions:y.options,callback:y.callback};this[h]&&(b=this[h](b));let S=b.call,w={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(g=b.callOptions.interceptors)?g:[],callInterceptorProviders:null!=(m=b.callOptions.interceptor_providers)?m:[]},T=(0,l.getInterceptingCall)(w,b.methodDefinition,b.callOptions,b.channel);S.call=T;let E=null,C=!1,x=Error();return T.start(b.metadata,{onReceiveMetadata:e=>{S.emit("metadata",e)},onReceiveMessage(e){null!==E&&T.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),E=e},onReceiveStatus(e){if(!C){if(C=!0,e.code===a.Status.OK)if(null===E){let t=p(x);b.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else b.callback(null,E);else{let t=p(x);b.callback((0,n.callErrorFromStatus)(e,t))}x=null,S.emit("status",e)}}}),T.sendMessage(i),T.halfClose(),S}makeClientStreamRequest(e,t,r,i,s,o){var f,g;let m=this.checkOptionalUnaryResponseArguments(i,s,o),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:m.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[u],methodDefinition:y,callOptions:m.options,callback:m.callback};this[h]&&(v=this[h](v));let b=v.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(f=v.callOptions.interceptors)?f:[],callInterceptorProviders:null!=(g=v.callOptions.interceptor_providers)?g:[]},w=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);b.call=w;let T=null,E=!1,C=Error();return w.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==T&&w.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),T=e},onReceiveStatus(e){if(!E){if(E=!0,e.code===a.Status.OK)if(null===T){let t=p(C);v.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,T);else{let t=p(C);v.callback((0,n.callErrorFromStatus)(e,t))}C=null,b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let r,n;return e instanceof o.Metadata?(r=e,n=t||{}):(n=e||{},r=new o.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,o){var f,g;let m=this.checkMetadataAndOptions(s,o),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:i,metadata:m.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[u],methodDefinition:y,callOptions:m.options};this[h]&&(v=this[h](v));let b=v.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(f=v.callOptions.interceptors)?f:[],callInterceptorProviders:null!=(g=v.callOptions.interceptor_providers)?g:[]},w=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);b.call=w;let T=!1,E=Error();return w.start(v.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!T){if(T=!0,b.push(null),e.code!==a.Status.OK){let t=p(E);b.emit("error",(0,n.callErrorFromStatus)(e,t))}E=null,b.emit("status",e)}}}),w.sendMessage(i),w.halfClose(),b}makeBidiStreamRequest(e,t,r,i,s){var o,f;let g=this.checkMetadataAndOptions(i,s),m={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},y={metadata:g.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[u],methodDefinition:m,callOptions:g.options};this[h]&&(y=this[h](y));let v=y.call,b={clientInterceptors:this[c],clientInterceptorProviders:this[d],callInterceptors:null!=(o=y.callOptions.interceptors)?o:[],callInterceptorProviders:null!=(f=y.callOptions.interceptor_providers)?f:[]},S=(0,l.getInterceptingCall)(b,y.methodDefinition,y.callOptions,y.channel);v.call=S;let w=!1,T=Error();return S.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!w){if(w=!0,v.push(null),e.code!==a.Status.OK){let t=p(T);v.emit("error",(0,n.callErrorFromStatus)(e,t))}T=null,v.emit("status",e)}}}),v}}t.Client=g},89167:(e,t,r)=>{e.exports=r(41547)(r(85718),"DataView")},89185:e=>{var t="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,t),this}},89367:e=>{"use strict";e.exports=function e(e,t){for(var r=Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(s)if(s=!1,e)a(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,a(e))}})}},89374:(e,t,r)=>{"use strict";var n=e.exports=r(95477);function i(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(30847),n.decoder=r(62823),n.verifier=r(16973),n.converter=r(97659),n.ReflectionObject=r(64824),n.Namespace=r(77968),n.Root=r(82703),n.Enum=r(32110),n.Type=r(54351),n.Field=r(73267),n.OneOf=r(12630),n.MapField=r(25585),n.Service=r(3076),n.Method=r(71202),n.Message=r(8920),n.wrappers=r(63695),n.types=r(61810),n.util=r(93107),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},89492:(e,t,r)=>{var n=r(58141),i="__lodash_hash_undefined__",s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return r===i?void 0:r}return s.call(t,e)?t[e]:void 0}},89605:(e,t,r)=>{e.exports=r(65662)(Object.keys,Object)},89624:e=>{e.exports=function(e){return function(t){return e(t)}}},89644:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},89835:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return(r||(t=i(t)),n(t))?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},90196:(e,t,r)=>{"use strict";e.exports=s;var n=r(89367),i=r(67359)("fs");function s(e,t,r){return("function"==typeof t?(r=t,t={}):t||(t={}),r)?!t.xhr&&i&&i.readFile?i.readFile(e,function(n,i){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},90200:(e,t,r)=>{var n=r(58141),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},90372:(e,t)=>{"use strict";function r(e){return e.startsWith("/")?e:"/"+e}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ensureLeadingSlash",{enumerable:!0,get:function(){return r}})},90453:(e,t,r)=>{var n=r(2984),i=r(99180),s=r(48169);e.exports=function(e){return e&&e.length?n(e,s,i):void 0}},90462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u});var n=r(65239),i=r(48088),s=r(88170),a=r.n(s),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,21204)),"/home/user/studio/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},90673:(e,t,r)=>{"use strict";var n=e.exports=r(9672);function i(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(4518),n.decoder=r(31722),n.verifier=r(77780),n.converter=r(61386),n.ReflectionObject=r(76139),n.Namespace=r(24859),n.Root=r(58278),n.Enum=r(94313),n.Type=r(38954),n.Field=r(62886),n.OneOf=r(12529),n.MapField=r(8004),n.Service=r(84723),n.Method=r(27405),n.Message=r(9611),n.wrappers=r(96506),n.types=r(51841),n.util=r(77350),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},90851:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},91199:(e,t,r)=>{"use strict";var n;n={value:!0},Object.defineProperty(t,"A",{enumerable:!0,get:function(){return i.registerServerReference}});let i=r(74932)},91290:e=>{e.exports=function(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return -1}},91645:e=>{"use strict";e.exports=require("net")},91651:(e,t,r)=>{Promise.resolve().then(r.bind(r,79737))},91928:(e,t,r)=>{var n=r(41547);e.exports=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},92e3:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;let n=r(74017),i=r(310);class s{constructor(e,t,r){if("string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.internalChannel=new i.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,i)}}t.ChannelImplementation=s},92219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;let n=r(66284),i=r(74845),s=r(21858),a=r(6843);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o;class l{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=l;class u{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=u;let c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},d={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class h{constructor(e,t){var r,n,i,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:null!=(r=t.start)?r:d.start,sendMessage:null!=(n=t.sendMessage)?n:d.sendMessage,halfClose:null!=(i=t.halfClose)?i:d.halfClose,cancel:null!=(s=t.cancel)?s:d.cancel}:this.requester=d}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,a,o,l;let u={onReceiveMetadata:null!=(n=null==(r=null==t?void 0:t.onReceiveMetadata)?void 0:r.bind(t))?n:e=>{},onReceiveMessage:null!=(a=null==(s=null==t?void 0:t.onReceiveMessage)?void 0:s.bind(t))?a:e=>{},onReceiveStatus:null!=(l=null==(o=null==t?void 0:t.onReceiveStatus)?void 0:o.bind(t))?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,(e,t)=>{var r,n,s;let a;if(this.processingMetadata=!1,(0,i.isInterceptingListener)(t))a=t;else{let e={onReceiveMetadata:null!=(r=t.onReceiveMetadata)?r:c.onReceiveMetadata,onReceiveMessage:null!=(n=t.onReceiveMessage)?n:c.onReceiveMessage,onReceiveStatus:null!=(s=t.onReceiveStatus)?s:c.onReceiveStatus};a=new i.InterceptingListenerImpl(e,u)}this.nextCall.start(e,a),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}}function f(e,t,r){var n,i;let s=null!=(n=r.deadline)?n:1/0,a=r.host,o=null!=(i=r.parent)?i:null,l=r.propagate_flags,u=r.credentials,c=e.createCall(t,s,a,o,l);return u&&c.setCredentials(u),c}t.InterceptingCall=h;class p{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,a.getErrorMessage)(e)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null==(r=null==t?void 0:t.onReceiveMetadata)||r.call(t,e)},onReceiveMessage:e=>{var i;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,a.getErrorMessage)(e)}`,metadata:new n.Metadata},this.call.cancelWithStatus(r.code,r.details);return}null==(i=null==t?void 0:t.onReceiveMessage)||i.call(t,o)},onReceiveStatus:e=>{var n,i;r?null==(n=null==t?void 0:t.onReceiveStatus)||n.call(t,r):null==(i=null==t?void 0:t.onReceiveStatus)||i.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class g extends p{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=!1,s={onReceiveMetadata:null!=(n=null==(r=null==t?void 0:t.onReceiveMetadata)?void 0:r.bind(t))?n:e=>{},onReceiveMessage:e=>{var r;i=!0,null==(r=null==t?void 0:t.onReceiveMessage)||r.call(t,e)},onReceiveStatus:e=>{var r,n;i||null==(r=null==t?void 0:t.onReceiveMessage)||r.call(t,null),null==(n=null==t?void 0:t.onReceiveStatus)||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class m extends p{}function y(e,t,r){let n=f(e,r.path,t);return r.responseStream?new m(n,r):new g(n,r)}t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];i=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);let s=Object.assign({},r,{method_definition:t});return i.reduceRight((e,t)=>r=>t(r,e),e=>y(n,e,t))(s)}},92662:(e,t,r)=>{var n=r(46328),i=r(80704),s=r(71960),a=r(58276),o=r(95308),l=r(2408),u=200;e.exports=function(e,t,r){var c=-1,d=i,h=e.length,f=!0,p=[],g=p;if(r)f=!1,d=s;else if(h>=u){var m=t?null:o(e);if(m)return l(m);f=!1,d=a,g=new n}else g=t?[]:p;t:for(;++c<h;){var y=e[c],v=t?t(y):y;if(y=r||0!==y?y:0,f&&v==v){for(var b=g.length;b--;)if(g[b]===v)continue t;t&&g.push(v),p.push(y)}else d(g,v,r)||(g!==p&&g.push(v),p.push(y))}return p}},93107:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(8707),a=r(46642);s.codegen=r(98344),s.fetch=r(17757),s.path=r(71140),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var o=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(o,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(54351));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(32110));var t=new i("Enum"+c++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i||"prototype"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(82703)))}})},93311:(e,t,r)=>{var n=r(34883),i=r(7651);e.exports=function(e){for(var t=i(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,n(a)]}return t}},93474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;let n=r(73496),i=r(21820),s=r(71271),a=r(86777),o=r(71037),l=r(31359),u=r(71271),c="subchannel_call";function d(e){for(let[t,r]of Object.entries(i.constants.errno))if(r===e)return t;return"Unknown system error "+e}class h{constructor(e,t,r,i,l){var u;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=l,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let c=null!=(u=i.getOptions()["grpc.max_receive_message_length"])?u:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new o.StreamDecoder(c),e.on("response",(e,t)=>{let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=a.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new a.Metadata});return}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{let t;if(!this.statusOutput){this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message);return}for(let e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var t;let r;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null==(t=this.finalStatus)?void 0:t.code)===s.Status.OK)return;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,i="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,i=this.internalError.message):i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new a.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+d(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new a.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){l.trace(u.LogVerbosity.DEBUG,c,"["+this.callId+"] "+e)}endCall(e){(null===this.finalStatus||this.finalStatus.code===s.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null===this.finalStatus||this.finalStatus.code===s.Status.OK&&(!this.readsClosed||0!==this.unpushedReadMessages.length||this.isReadFilterPending||this.isPushPending)||this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){let t;this.callEventTracker.onStreamEnd(!0);let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=a.Metadata.fromHttp2Headers(e)}catch(e){t=new a.Metadata}let n=t.getMap(),i=this.mappedStatusCode;if(i===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){let e=Number(n["grpc-status"]);e in s.Status&&(i=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let o="";if("string"==typeof n["grpc-message"]){try{o=decodeURI(n["grpc-message"])}catch(e){o=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let l={code:i,details:o,metadata:t};this.endCall(l)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null==(e=this.finalStatus)?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new a.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=t=>{process.nextTick(()=>{var r;let n=s.Status.UNAVAILABLE;(null==t?void 0:t.code)==="ERR_STREAM_WRITE_AFTER_END"&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null==(r=e.callback)||r.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new a.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}t.Http2SubchannelCall=h},93490:(e,t,r)=>{var n=r(29395),i=r(27467),s="[object Number]";e.exports=function(e){return"number"==typeof e||i(e)&&n(e)==s}},94313:(e,t,r)=>{"use strict";e.exports=a;var n=r(76139);((a.prototype=Object.create(n.prototype)).constructor=a).className="Enum";var i=r(24859),s=r(77350);function a(e,t,r,i,s,a){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=a,this.reserved=void 0,t)for(var o=Object.keys(t),l=0;l<o.length;++l)"number"==typeof t[o[l]]&&(this.valuesById[this.values[o[l]]=t[o[l]]]=o[l])}a.fromJSON=function(e,t){var r=new a(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},94388:(e,t,r)=>{var n=r(57797);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,metadata:()=>s});var n=r(37413);r(61135);var i=r(79737);let s={title:"Bybit Balance View",description:"View your Bybit unified account balance."};function a({children:e}){return(0,n.jsxs)("html",{lang:"en",className:"dark",children:[(0,n.jsxs)("head",{children:[(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,n.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap",rel:"stylesheet"})]}),(0,n.jsxs)("body",{className:"font-body antialiased",children:[e,(0,n.jsx)(i.Toaster,{})]})]})}},94735:e=>{"use strict";e.exports=require("events")},95006:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DiagConsoleLogger:()=>L,DiagLogLevel:()=>n,INVALID_SPANID:()=>ep,INVALID_SPAN_CONTEXT:()=>em,INVALID_TRACEID:()=>eg,ProxyTracer:()=>eM,ProxyTracerProvider:()=>eL,ROOT_CONTEXT:()=>M,SamplingDecision:()=>a,SpanKind:()=>o,SpanStatusCode:()=>l,TraceFlags:()=>s,ValueType:()=>i,baggageEntryMetadataFromString:()=>N,context:()=>eY,createContextKey:()=>P,createNoopMeter:()=>en,createTraceState:()=>eQ,default:()=>tr,defaultTextMapGetter:()=>ei,defaultTextMapSetter:()=>es,diag:()=>eX,isSpanContextValid:()=>eA,isValidSpanId:()=>eI,isValidTraceId:()=>eO,metrics:()=>e0,propagation:()=>e9,trace:()=>tt});var n,i,s,a,o,l,u="object"==typeof globalThis?globalThis:global,c="1.9.0",d=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,h=function(e){var t=new Set([e]),r=new Set,n=e.match(d);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=i.prerelease)return function(t){return t===e};function s(e){return r.add(e),!1}function a(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(d);if(!n)return s(e);var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=o.prerelease||i.major!==o.major?s(e):0===i.major?i.minor===o.minor&&i.patch<=o.patch?a(e):s(e):i.minor<=o.minor?a(e):s(e)}}(c),f=Symbol.for("opentelemetry.js.api."+c.split(".")[0]),p=u;function g(e,t,r,n){void 0===n&&(n=!1);var i,s=p[f]=null!=(i=p[f])?i:{version:c};if(!n&&s[e]){var a=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(a.stack||a.message),!1}if(s.version!==c){var a=Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+c);return r.error(a.stack||a.message),!1}return s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+c+"."),!0}function m(e){var t,r,n=null==(t=p[f])?void 0:t.version;if(n&&h(n))return null==(r=p[f])?void 0:r[e]}function y(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+c+".");var r=p[f];r&&delete r[e]}var v=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},b=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},S=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return w("verbose",this._namespace,e)},e}();function w(e,t,r){var n=m("diag");if(n)return r.unshift(t),n[e].apply(n,b([],v(r),!1))}function T(e,t){function r(r,n){var i=t[r];return"function"==typeof i&&e>=n?i.bind(t):function(){}}return e<n.NONE?e=n.NONE:e>n.ALL&&(e=n.ALL),t=t||{},{error:r("error",n.ERROR),warn:r("warn",n.WARN),info:r("info",n.INFO),debug:r("debug",n.DEBUG),verbose:r("verbose",n.VERBOSE)}}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(n||(n={}));var E=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},C=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},x="diag",_=function(){function e(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=m("diag");if(n)return n[e].apply(n,C([],E(t),!1))}}var t=this,r=function(e,r){if(void 0===r&&(r={logLevel:n.INFO}),e===t){var i,s,a,o=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(i=o.stack)?i:o.message),!1}"number"==typeof r&&(r={logLevel:r});var l=m("diag"),u=T(null!=(s=r.logLevel)?s:n.INFO,e);if(l&&!r.suppressOverrideMessage){var c=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+c),u.warn("Current logger will overwrite one already registered from "+c)}return g("diag",u,t,!0)};t.setLogger=r,t.disable=function(){y(x,t)},t.createComponentLogger=function(e){return new S(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),O=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},I=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=O(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t,r,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=new e(this._entries);try{for(var a=I(n),o=a.next();!o.done;o=a.next()){var l=o.value;s._entries.delete(l)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},e.prototype.clear=function(){return new e},e}(),k=Symbol("BaggageEntryMetadata"),R=_.instance();function D(e){return void 0===e&&(e={}),new A(new Map(Object.entries(e)))}function N(e){return"string"!=typeof e&&(R.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:k,toString:function(){return e}}}function P(e){return Symbol.for(e)}var M=new(function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var i=new e(r._currentContext);return i._currentContext.set(t,n),i},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}}return e}()),j=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],L=function(){return function(){function e(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(console){var n=console[e];if("function"!=typeof n&&(n=console.log),"function"==typeof n)return n.apply(console,t)}}}for(var t=0;t<j.length;t++)this[j[t].n]=e(j[t].c)}}(),B=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(){function e(){}return e.prototype.createGauge=function(e,t){return X},e.prototype.createHistogram=function(e,t){return J},e.prototype.createCounter=function(e,t){return Y},e.prototype.createUpDownCounter=function(e,t){return Z},e.prototype.createObservableGauge=function(e,t){return et},e.prototype.createObservableCounter=function(e,t){return ee},e.prototype.createObservableUpDownCounter=function(e,t){return er},e.prototype.addBatchObservableCallback=function(e,t){},e.prototype.removeBatchObservableCallback=function(e){},e}(),U=function(){return function(){}}(),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.add=function(e,t){},t}(U),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.add=function(e,t){},t}(U),q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.record=function(e,t){},t}(U),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.record=function(e,t){},t}(U),G=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.removeCallback=function(e){},e}(),W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(G),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(G),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t}(G),Q=new F,Y=new V,X=new q,J=new $,Z=new z,ee=new W,et=new K,er=new H;function en(){return Q}!function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(i||(i={}));var ei={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},es={set:function(e,t,r){null!=e&&(e[t]=r)}},ea=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},eo=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},el=function(){function e(){}return e.prototype.active=function(){return M},e.prototype.with=function(e,t,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return t.call.apply(t,eo([r],ea(n),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),eu=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},ec=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},ed="context",eh=new el,ef=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return g(ed,e,_.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var n,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,ec([e,t,r],eu(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return m(ed)||eh},e.prototype.disable=function(){this._getContextManager().disable(),y(ed,_.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(s||(s={}));var ep="0000000000000000",eg="00000000000000000000000000000000",em={traceId:eg,spanId:ep,traceFlags:s.NONE},ey=function(){function e(e){void 0===e&&(e=em),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),ev=P("OpenTelemetry Context Key SPAN");function eb(e){return e.getValue(ev)||void 0}function eS(){return eb(ef.getInstance().active())}function ew(e,t){return e.setValue(ev,t)}function eT(e){return e.deleteValue(ev)}function eE(e,t){return ew(e,new ey(t))}function eC(e){var t;return null==(t=eb(e))?void 0:t.spanContext()}var ex=/^([0-9a-f]{32})$/i,e_=/^[0-9a-f]{16}$/i;function eO(e){return ex.test(e)&&e!==eg}function eI(e){return e_.test(e)&&e!==ep}function eA(e){return eO(e.traceId)&&eI(e.spanId)}function ek(e){return new ey(e)}var eR=ef.getInstance(),eD=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(void 0===r&&(r=eR.active()),null==t?void 0:t.root)return new ey;var n=r&&eC(r);return eN(n)&&eA(n)?new ey(n):new ey},e.prototype.startActiveSpan=function(e,t,r,n){if(!(arguments.length<2)){2==arguments.length?a=t:3==arguments.length?(i=t,a=r):(i=t,s=r,a=n);var i,s,a,o=null!=s?s:eR.active(),l=this.startSpan(e,i,o),u=ew(o,l);return eR.with(u,a,void 0,l)}},e}();function eN(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}var eP=new eD,eM=function(){function e(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype.startActiveSpan=function(e,t,r,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):eP},e}(),ej=new(function(){function e(){}return e.prototype.getTracer=function(e,t,r){return new eD},e}()),eL=function(){function e(){}return e.prototype.getTracer=function(e,t,r){var n;return null!=(n=this.getDelegateTracer(e,t,r))?n:new eM(this,e,t,r)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:ej},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)},e}();!function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(a||(a={})),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(o||(o={})),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(l||(l={}));var eB="[_0-9a-z-*/]",eF=RegExp("^(?:[a-z]"+eB+"{0,255}|"+("[a-z0-9]"+eB+"{0,240}@[a-z]"+eB)+"{0,13})$"),eU=/^[ -~]{0,255}[!-~]$/,eV=/,|=/;function ez(e){return eF.test(e)}function eq(e){return eU.test(e)&&!eV.test(e)}var e$=32,eG=512,eW=",",eK="=",eH=function(){function e(e){this._internalState=new Map,e&&this._parse(e)}return e.prototype.set=function(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r},e.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},e.prototype.get=function(e){return this._internalState.get(e)},e.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,r){return t.push(r+eK+e.get(r)),t},[]).join(eW)},e.prototype._parse=function(e){!(e.length>eG)&&(this._internalState=e.split(eW).reverse().reduce(function(e,t){var r=t.trim(),n=r.indexOf(eK);if(-1!==n){var i=r.slice(0,n),s=r.slice(n+1,t.length);ez(i)&&eq(s)&&e.set(i,s)}return e},new Map),this._internalState.size>e$&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,e$))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function eQ(e){return new eH(e)}var eY=ef.getInstance(),eX=_.instance(),eJ=new(function(){function e(){}return e.prototype.getMeter=function(e,t,r){return Q},e}()),eZ="metrics",e0=(function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(e){return g(eZ,e,_.instance())},e.prototype.getMeterProvider=function(){return m(eZ)||eJ},e.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},e.prototype.disable=function(){y(eZ,_.instance())},e})().getInstance(),e1=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),e2=P("OpenTelemetry Baggage Key");function e3(e){return e.getValue(e2)||void 0}function e6(){return e3(ef.getInstance().active())}function e4(e,t){return e.setValue(e2,t)}function e5(e){return e.deleteValue(e2)}var e8="propagation",e7=new e1,e9=(function(){function e(){this.createBaggage=D,this.getBaggage=e3,this.getActiveBaggage=e6,this.setBaggage=e4,this.deleteBaggage=e5}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return g(e8,e,_.instance())},e.prototype.inject=function(e,t,r){return void 0===r&&(r=es),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=ei),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){y(e8,_.instance())},e.prototype._getGlobalPropagator=function(){return m(e8)||e7},e})().getInstance(),te="trace",tt=(function(){function e(){this._proxyTracerProvider=new eL,this.wrapSpanContext=ek,this.isSpanContextValid=eA,this.deleteSpan=eT,this.getSpan=eb,this.getActiveSpan=eS,this.getSpanContext=eC,this.setSpan=ew,this.setSpanContext=eE}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=g(te,this._proxyTracerProvider,_.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return m(te)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){y(te,_.instance()),this._proxyTracerProvider=new eL},e})().getInstance();let tr={context:eY,diag:eX,metrics:e0,propagation:e9,trace:tt}},95146:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;let n=r(73496),i=r(34631),s=r(7162),a=r(21858),o=r(69226),l=r(1014),u=r(40649),c=r(59571),d=r(38717),h=r(91645),f=r(65313),p=r(10079),g="transport",m="transport_flowctrl",y=r(97697).rE,{HTTP2_HEADER_AUTHORITY:v,HTTP2_HEADER_CONTENT_TYPE:b,HTTP2_HEADER_METHOD:S,HTTP2_HEADER_PATH:w,HTTP2_HEADER_TE:T,HTTP2_HEADER_USER_AGENT:E}=n.constants,C=2e4,x=Buffer.from("too_many_pings","ascii");class _{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=C,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,c.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${y}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=1===r["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(e,t,r)=>{let i=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(x)&&(i=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(i)}),e.once("error",e=>{this.trace("connection closed with error "+e.message)}),l.isTracerEnabled(g)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let n,i=this.session.socket,s=i.remoteAddress?(0,c.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,a=i.localAddress?(0,c.stringToSubchannelAddress)(i.localAddress,i.localPort):null;if(this.session.encrypted){let t=i,r=t.getCipher(),s=t.getCertificate(),a=t.getPeerCertificate();n={cipherSuiteStandardName:null!=(e=r.standardName)?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:a&&"raw"in a?a.raw:null}}else n=null;return{remoteAddress:s,localAddress:a,security:n,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!=(t=this.session.state.localWindowSize)?t:null,remoteFlowControlWindow:null!=(r=this.session.state.remoteWindowSize)?r:null}}trace(e){l.trace(a.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(a.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null==(t=(e=this.keepaliveTimeoutId).unref)||t.call(e));try{this.session.ping((e,t,r)=>{e&&(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch(e){this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimerId||this.keepaliveTimeoutId||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=null==(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,n,i){let s,a,o,l=e.toHttp2Headers();l[v]=t,l[E]=this.userAgent,l[b]="application/grpc",l[S]="POST",l[w]=r,l[T]="trailers";try{s=this.session.request(l)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null==(e=i.addMessageSent)||e.call(i)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null==(e=i.addMessageReceived)||e.call(i)},onCallEnd:e=>{var t;null==(t=i.onCallEnd)||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null==(t=i.onStreamEnd)||t.call(i,e)}}):a={addMessageSent:()=>{var e;null==(e=i.addMessageSent)||e.call(i)},addMessageReceived:()=>{var e;null==(e=i.addMessageReceived)||e.call(i)},onCallEnd:e=>{var t;null==(t=i.onCallEnd)||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;null==(t=i.onStreamEnd)||t.call(i,e)}},o=new f.Http2SubchannelCall(s,a,n,this,(0,p.getNextCallNumber)()),this.addActiveCall(o),o}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,s.unregisterChannelzRef)(this.channelzRef)}}class O{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){l.trace(a.LogVerbosity.DEBUG,g,(0,d.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise((a,o)=>{var l,f,p;let g;s.realTarget?(g=(0,d.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,d.uriToString)(s.realTarget))):(g=null,this.trace("creating HTTP/2 session to "+(0,c.subchannelAddressToString)(e)));let m=(0,u.getDefaultAuthority)(null!=(l=s.realTarget)?l:this.channelTarget),y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?y.maxSessionMemory=r["grpc-node.max_session_memory"]:y.maxSessionMemory=Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),y.servername=e}else{let e=null!=(p=null==(f=(0,d.splitHostPort)(m))?void 0:f.host)?p:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:h.connect(e);y=Object.assign(Object.assign(Object.assign({},y),e),{enableTrace:1===r["grpc-node.tls_enable_trace"]});let b=n.connect(v+m,y);this.session=b;let S="Failed to connect";b.unref(),b.once("connect",()=>{b.removeAllListeners(),a(new _(b,e,r,g)),this.session=null}),b.once("close",()=>{this.session=null,setImmediate(()=>{o(`${S} (${new Date().toISOString()})`)})}),b.once("error",e=>{S=e.message,this.trace("connection failed with error "+S)})})}connect(e,t,r){var n,s;if(this.isShutdown)return Promise.reject();let a=t._getConnectionOptions()||{};if("secureContext"in a){if(a.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];a.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),a.servername=e}else if("grpc.http_connect_target"in r){let e=(0,u.getDefaultAuthority)(null!=(n=(0,d.parseUri)(r["grpc.http_connect_target"]))?n:{path:"localhost"}),t=(0,d.splitHostPort)(e);a.servername=null!=(s=null==t?void 0:t.host)?s:e}r["grpc-node.tls_enable_trace"]&&(a.enableTrace=!0)}return(0,o.getProxiedConnection)(e,r,a).then(n=>this.createSession(e,t,r,n))}shutdown(){var e;this.isShutdown=!0,null==(e=this.session)||e.close(),this.session=null}}t.Http2SubchannelConnector=O},95308:(e,t,r)=>{var n=r(34772),i=r(36959),s=r(2408),a=1/0;e.exports=n&&1/s(new n([,-0]))[1]==a?function(e){return new n(e)}:i},95477:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(96120),n.BufferWriter=r(54369),n.Reader=r(26996),n.BufferReader=r(75677),n.util=r(8707),n.rpc=r(27236),n.roots=r(46642),n.configure=i,i()},95746:(e,t,r)=>{var n=r(15909),i=r(29205),s=r(29508),a=r(61320),o=r(19976);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=o,e.exports=l},95824:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;let n=r(21574),i=r(27275),s=r(1014),a=r(21858),o=r(38717),l=r(59571),u=r(7162),c="subchannel",d=0x7fffffff;class h{constructor(e,t,r,s,a){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=a,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new u.ChannelzCallTracker,this.childrenTracker=new u.ChannelzChildrenTracker,this.streamTracker=new u.ChannelzCallTracker;let c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new i.BackoffTimeout(()=>{this.handleBackoffTimer()},c),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!=(o=r["grpc.keepalive_time_ms"])?o:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new u.ChannelzTrace,this.channelzRef=(0,u.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(a.LogVerbosity.DEBUG,c,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(a.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,d);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(a.LogVerbosity.ERROR,`Connection to ${(0,o.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,r){var i,s;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t]);let a=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null==(i=this.transport)||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null==(s=this.transport)||s.shutdown(),this.transport=null;break;default:throw Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let e of this.stateListeners)e(this,a,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,u.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){let i;if(!this.transport)throw Error("Cannot create call, subchannel not READY");return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),i={onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):i={},this.transport.createCall(e,t,r,n,i)}startConnecting(){process.nextTick(()=>{this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState!==n.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}t.Subchannel=h},96120:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(8707),s=i.LongBits,a=i.base64,o=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function g(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},g.prototype=Object.create(l.prototype),g.prototype.fn=p,d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new g((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(m,10,s.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=s.from(e);return this._push(m,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(m,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,+!!e)},d.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=d.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},96138:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},96491:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},96506:(e,t,r)=>{"use strict";var n=t,i=r(9611);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return -1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var a=this.lookup(s);a&&(e=a.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===n&&(n=r),s=n+l,o["@type"]=s,o}return this.toObject(e,t)}}},96678:(e,t,r)=>{var n=r(91290),i=r(39774),s=r(74610);e.exports=function(e,t,r){return t==t?s(e,t,r):n(e,i,r)}},97587:(e,t,r)=>{"use strict";var n,i;n={value:!0},n=n=t.rS=t.Yi=n=t.Ib=n=n=void 0;let s=r(47099),a=r(68474),o=r(61614),l=r(27603);n=r(56061),n=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(i=t.Ib||(t.Ib={}));let u={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){return""===e?t:e+"."+t}function d(e){return e instanceof a.Service||e instanceof a.Type||e instanceof a.Enum}function h(e){return e instanceof a.Namespace||e instanceof a.Root}function f(e,t){let r=c(t,e.name);return d(e)?[[r,e]]:h(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>f(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function p(e,t){return function(r){return e.toObject(e.decode(r),t)}}function g(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function m(e){return(e||[]).reduce((e,t)=>{for(let[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e},{deprecated:!1,idempotency_level:i.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function y(e,t,r,n){let i=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:g(i),requestDeserialize:p(i,r),responseSerialize:g(a),responseDeserialize:p(a,r),originalName:s(e.name),requestType:b(i,n),responseType:b(a,n),options:m(e.parsedOptions)}}function v(e,t,r,n){let i={};for(let s of e.methodsArray)i[s.name]=y(s,t,r,n);return i}function b(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function S(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function w(e,t,r,n){if(e instanceof a.Service)return v(e,t,r,n);if(e instanceof a.Type)return b(e,n);if(e instanceof a.Enum)return S(e,n);throw Error("Type mismatch in reflection object handling")}function T(e,t){let r={};e.resolveAll();let n=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[i,s]of f(e,""))r[i]=w(s,i,t,n);return r}function E(e,t){t=t||{};let r=a.Root.fromDescriptor(e);return r.resolveAll(),T(r,t)}n=function(e,t){return(0,l.loadProtosWithOptions)(e,t).then(e=>T(e,t))},t.Yi=function(e,t){return T((0,l.loadProtosWithOptionsSync)(e,t),t)},t.rS=function(e,t){t=t||{};let r=a.Root.fromJSON(e);return r.resolveAll(),T(r,t)},n=function(e,t){return E(o.FileDescriptorSet.decode(e),t)},n=function(e,t){return E(o.FileDescriptorSet.fromObject(e),t)},(0,l.addCommonProtos)()},97659:(e,t,r)=>{"use strict";var n=t,i=r(32110),s=r(93107);function a(e,t,r,n){var s=!1;if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var a=t.resolvedType.values,o=Object.keys(a),l=0;l<o.length;++l)a[o[l]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",o[l])("case %i:",a[o[l]])("m%s=%j",n,a[o[l]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function o(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),l=s.safeProp(o.name);o.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(r,o,n,l+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(r,o,n,l+"[i]")("}")("}")):(o.resolvedType instanceof i||r("if(d%s!=null){",l),a(r,o,n,l),o.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?a:l).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),u=0;u<a.length;++u)r("d%s={}",s.safeProp(a[u].name));r("}")}if(l.length){for(r("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],d=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var h="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,c.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){var c=t[u],p=e._fieldsArray.indexOf(c),d=s.safeProp(c.name);c.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),o(r,c,p,d+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),o(r,c,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,c.name),o(r,c,p,d),c.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}},97668:(e,t)=>{"use strict";var r,n,i=Symbol.for("react.element"),s=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function v(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case a:case l:case o:case f:case p:return e;default:switch(e=e&&e.$$typeof){case d:case c:case h:case m:case g:case u:return e;default:return t}}case s:return t}}}n=Symbol.for("react.module.reference"),r=c,r=u,r=i,r=h,r=a,r=m,r=g,r=s,r=l,r=o,r=f,r=p,r=function(){return!1},r=function(){return!1},r=function(e){return v(e)===c},r=function(e){return v(e)===u},r=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},r=function(e){return v(e)===h},t.isFragment=function(e){return v(e)===a},r=function(e){return v(e)===m},r=function(e){return v(e)===g},r=function(e){return v(e)===s},r=function(e){return v(e)===l},r=function(e){return v(e)===o},r=function(e){return v(e)===f},r=function(e){return v(e)===p},r=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===l||e===o||e===f||e===p||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===n||void 0!==e.getModuleId)||!1},r=v},97697:e=>{"use strict";e.exports={rE:"1.9.15"}},97748:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{atLeastOneTask:function(){return i},scheduleImmediate:function(){return n},scheduleOnNextTick:function(){return r},waitAtLeastOneReactRenderTask:function(){return s}});let r=e=>{Promise.resolve().then(()=>{process.nextTick(e)})},n=e=>{setImmediate(e)};function i(){return new Promise(e=>n(e))}function s(){return new Promise(e=>setImmediate(e))}},98267:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;let n=r(94735),i=r(27910),s=r(21858);t.callErrorFromStatus=function(e,t){let r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=Error(r),i=`${n.stack}
for call at
${t}`;return Object.assign(Error(r),e,{stack:i})};class a extends n.EventEmitter{constructor(){super()}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}}t.ClientUnaryCallImpl=a;class o extends i.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_read(e){var t;null==(t=this.call)||t.startRead()}}t.ClientReadableStreamImpl=o;class l extends i.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null==(n=this.call)||n.sendMessageWithContext(i,e)}_final(e){var t;null==(t=this.call)||t.halfClose(),e()}}t.ClientWritableStreamImpl=l;class u extends i.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_read(e){var t;null==(t=this.call)||t.startRead()}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null==(n=this.call)||n.sendMessageWithContext(i,e)}_final(e){var t;null==(t=this.call)||t.halfClose(),e()}}t.ClientDuplexStreamImpl=u},98316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;let n=r(57354),i=r(24353),s=r(43356),a=r(26786),o=r(70603),l=1e4;class u{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},l),null==(t=(e=this.cleanupTimer).unref)||t.call(e))}getOrCreateSubchannel(e,t,r,l){this.ensureCleanupTask();let u=(0,a.uriToString)(e);if(u in this.pool){for(let e of this.pool[u])if((0,s.subchannelAddressEqual)(t,e.subchannelAddress)&&(0,n.channelOptionsEqual)(r,e.channelArguments)&&l._equals(e.channelCredentials))return e.subchannel}let c=new i.Subchannel(e,t,r,l,new o.Http2SubchannelConnector(e));return u in this.pool||(this.pool[u]=[]),this.pool[u].push({subchannelAddress:t,channelArguments:r,channelCredentials:l,subchannel:c}),c.ref(),c}}t.SubchannelPool=u;let c=new u;t.getSubchannelPool=function(e){return e?c:new u}},98344:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var a=Object.keys(e),o=Array(a.length+1),l=Array(a.length),u=0;u<a.length;)o[u]=a[u],l[u]=e[a[u++]];return o[u]=r,Function.apply(null,o).apply(null,l)}return Function(r)()}for(var c=Array(arguments.length-1),d=0;d<c.length;)c[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=c[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),d!==c.length)throw Error("parameter count mismatch");return n.push(e),i}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1},98451:(e,t,r)=>{var n=r(29395),i=r(27467),s="[object Boolean]";e.exports=function(e){return!0===e||!1===e||i(e)&&n(e)==s}},98506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;let n=r(74075),i=r(57018),s=r(21858),a=r(58821),o=r(1014),l=e=>"number"==typeof e&&"string"==typeof i.CompressionAlgorithms[e];class u{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(+!!t,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){let t=1===e.readUInt8(0),r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class c extends u{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class d extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.deflate(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createInflate();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class h extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.gzip(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createGunzip();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class f extends u{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function p(e,t){switch(e){case"identity":return new c;case"deflate":return new d(t);case"gzip":return new h(t);default:return new f(e)}}class g extends a.BaseFilter{constructor(e,t){var r,n;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";let a=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!=(r=e["grpc.max_receive_message_length"])?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,void 0!==a)if(l(a)){let e=i.CompressionAlgorithms[a],r=null==(n=t.serverSupportedEncodingHeader)?void 0:n.split(",");(!r||r.includes(e))&&(this.currentCompressionAlgorithm=e,this.sendCompression=p(this.currentCompressionAlgorithm,-1))}else o.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${a}`)}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let e=t[0];"string"==typeof e&&(this.receiveCompression=p(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r,n=await e;return r=!(this.sendCompression instanceof c)&&((null!=(t=n.flags)?t:0)&2)==0,{message:await this.sendCompression.writeMessage(n.message,r),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=g;class m{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new g(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=m},98798:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,i,s){for(var a=-1,o=r(t((n-e)/(i||1)),0),l=Array(o);o--;)l[s?o:++a]=e,e+=i;return l}},98940:e=>{"use strict";e.exports=function e(e,t,r){var n=r||8192,i=n>>>1,s=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(s=e(n),a=0);var o=t.call(s,a,a+=r);return 7&a&&(a=(7|a)+1),o}}},99114:(e,t,r)=>{var n=r(12344),i=r(7651);e.exports=function(e,t){return e&&n(e,t,i)}},99180:e=>{e.exports=function(e,t){return e>t}},99525:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}}};var __webpack_require__=require("../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=e=>__webpack_require__(__webpack_require__.s=e),__webpack_exports__=__webpack_require__.X(0,[447,724,287],()=>__webpack_exec__(90462));module.exports=__webpack_exports__})();